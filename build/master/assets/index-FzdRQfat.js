(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function _h(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var w_={exports:{}},Hu={};var aw;function aA(){if(aw)return Hu;aw=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:i,type:s,key:u,ref:r!==void 0?r:null,props:l}}return Hu.Fragment=t,Hu.jsx=e,Hu.jsxs=e,Hu}var lw;function lA(){return lw||(lw=1,w_.exports=aA()),w_.exports}var Tt=lA(),x_={exports:{}},ee={};var cw;function cA(){if(cw)return ee;cw=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),w=Symbol.iterator;function T(R){return R===null||typeof R!="object"?null:(R=w&&R[w]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function O(R,X,ot){this.props=R,this.context=X,this.refs=E,this.updater=ot||x}O.prototype.isReactComponent={},O.prototype.setState=function(R,X){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,X,"setState")},O.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function U(){}U.prototype=O.prototype;function D(R,X,ot){this.props=R,this.context=X,this.refs=E,this.updater=ot||x}var Q=D.prototype=new U;Q.constructor=D,A(Q,O.prototype),Q.isPureReactComponent=!0;var I=Array.isArray;function H(){}var G={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function V(R,X,ot){var dt=ot.ref;return{$$typeof:i,type:R,key:X,ref:dt!==void 0?dt:null,props:ot}}function Z(R,X){return V(R.type,X,R.props)}function Y(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function $(R){var X={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ot){return X[ot]})}var P=/\/+/g;function J(R,X){return typeof R=="object"&&R!==null&&R.key!=null?$(""+R.key):X.toString(36)}function tt(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(H,H):(R.status="pending",R.then(function(X){R.status==="pending"&&(R.status="fulfilled",R.value=X)},function(X){R.status==="pending"&&(R.status="rejected",R.reason=X)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function B(R,X,ot,dt,mt){var _t=typeof R;(_t==="undefined"||_t==="boolean")&&(R=null);var Ct=!1;if(R===null)Ct=!0;else switch(_t){case"bigint":case"string":case"number":Ct=!0;break;case"object":switch(R.$$typeof){case i:case t:Ct=!0;break;case v:return Ct=R._init,B(Ct(R._payload),X,ot,dt,mt)}}if(Ct)return mt=mt(R),Ct=dt===""?"."+J(R,0):dt,I(mt)?(ot="",Ct!=null&&(ot=Ct.replace(P,"$&/")+"/"),B(mt,X,ot,"",function(Me){return Me})):mt!=null&&(Y(mt)&&(mt=Z(mt,ot+(mt.key==null||R&&R.key===mt.key?"":(""+mt.key).replace(P,"$&/")+"/")+Ct)),X.push(mt)),1;Ct=0;var Et=dt===""?".":dt+":";if(I(R))for(var ne=0;ne<R.length;ne++)dt=R[ne],_t=Et+J(dt,ne),Ct+=B(dt,X,ot,_t,mt);else if(ne=T(R),typeof ne=="function")for(R=ne.call(R),ne=0;!(dt=R.next()).done;)dt=dt.value,_t=Et+J(dt,ne++),Ct+=B(dt,X,ot,_t,mt);else if(_t==="object"){if(typeof R.then=="function")return B(tt(R),X,ot,dt,mt);throw X=String(R),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ct}function W(R,X,ot){if(R==null)return R;var dt=[],mt=0;return B(R,dt,"","",function(_t){return X.call(ot,_t,mt++)}),dt}function et(R){if(R._status===-1){var X=R._result;X=X(),X.then(function(ot){(R._status===0||R._status===-1)&&(R._status=1,R._result=ot)},function(ot){(R._status===0||R._status===-1)&&(R._status=2,R._result=ot)}),R._status===-1&&(R._status=0,R._result=X)}if(R._status===1)return R._result.default;throw R._result}var k=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},q={map:W,forEach:function(R,X,ot){W(R,function(){X.apply(this,arguments)},ot)},count:function(R){var X=0;return W(R,function(){X++}),X},toArray:function(R){return W(R,function(X){return X})||[]},only:function(R){if(!Y(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ee.Activity=y,ee.Children=q,ee.Component=O,ee.Fragment=e,ee.Profiler=r,ee.PureComponent=D,ee.StrictMode=s,ee.Suspense=p,ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,ee.__COMPILER_RUNTIME={__proto__:null,c:function(R){return G.H.useMemoCache(R)}},ee.cache=function(R){return function(){return R.apply(null,arguments)}},ee.cacheSignal=function(){return null},ee.cloneElement=function(R,X,ot){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var dt=A({},R.props),mt=R.key;if(X!=null)for(_t in X.key!==void 0&&(mt=""+X.key),X)!j.call(X,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&X.ref===void 0||(dt[_t]=X[_t]);var _t=arguments.length-2;if(_t===1)dt.children=ot;else if(1<_t){for(var Ct=Array(_t),Et=0;Et<_t;Et++)Ct[Et]=arguments[Et+2];dt.children=Ct}return V(R.type,mt,dt)},ee.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},ee.createElement=function(R,X,ot){var dt,mt={},_t=null;if(X!=null)for(dt in X.key!==void 0&&(_t=""+X.key),X)j.call(X,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(mt[dt]=X[dt]);var Ct=arguments.length-2;if(Ct===1)mt.children=ot;else if(1<Ct){for(var Et=Array(Ct),ne=0;ne<Ct;ne++)Et[ne]=arguments[ne+2];mt.children=Et}if(R&&R.defaultProps)for(dt in Ct=R.defaultProps,Ct)mt[dt]===void 0&&(mt[dt]=Ct[dt]);return V(R,_t,mt)},ee.createRef=function(){return{current:null}},ee.forwardRef=function(R){return{$$typeof:f,render:R}},ee.isValidElement=Y,ee.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:et}},ee.memo=function(R,X){return{$$typeof:m,type:R,compare:X===void 0?null:X}},ee.startTransition=function(R){var X=G.T,ot={};G.T=ot;try{var dt=R(),mt=G.S;mt!==null&&mt(ot,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(H,k)}catch(_t){k(_t)}finally{X!==null&&ot.types!==null&&(X.types=ot.types),G.T=X}},ee.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},ee.use=function(R){return G.H.use(R)},ee.useActionState=function(R,X,ot){return G.H.useActionState(R,X,ot)},ee.useCallback=function(R,X){return G.H.useCallback(R,X)},ee.useContext=function(R){return G.H.useContext(R)},ee.useDebugValue=function(){},ee.useDeferredValue=function(R,X){return G.H.useDeferredValue(R,X)},ee.useEffect=function(R,X){return G.H.useEffect(R,X)},ee.useEffectEvent=function(R){return G.H.useEffectEvent(R)},ee.useId=function(){return G.H.useId()},ee.useImperativeHandle=function(R,X,ot){return G.H.useImperativeHandle(R,X,ot)},ee.useInsertionEffect=function(R,X){return G.H.useInsertionEffect(R,X)},ee.useLayoutEffect=function(R,X){return G.H.useLayoutEffect(R,X)},ee.useMemo=function(R,X){return G.H.useMemo(R,X)},ee.useOptimistic=function(R,X){return G.H.useOptimistic(R,X)},ee.useReducer=function(R,X,ot){return G.H.useReducer(R,X,ot)},ee.useRef=function(R){return G.H.useRef(R)},ee.useState=function(R){return G.H.useState(R)},ee.useSyncExternalStore=function(R,X,ot){return G.H.useSyncExternalStore(R,X,ot)},ee.useTransition=function(){return G.H.useTransition()},ee.version="19.2.4",ee}var uw;function t0(){return uw||(uw=1,x_.exports=cA()),x_.exports}var Rt=t0(),S_={exports:{}},Vu={},T_={exports:{}},A_={};var hw;function uA(){return hw||(hw=1,(function(i){function t(B,W){var et=B.length;B.push(W);t:for(;0<et;){var k=et-1>>>1,q=B[k];if(0<r(q,W))B[k]=W,B[et]=q,et=k;else break t}}function e(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var W=B[0],et=B.pop();if(et!==W){B[0]=et;t:for(var k=0,q=B.length,R=q>>>1;k<R;){var X=2*(k+1)-1,ot=B[X],dt=X+1,mt=B[dt];if(0>r(ot,et))dt<q&&0>r(mt,ot)?(B[k]=mt,B[dt]=et,k=dt):(B[k]=ot,B[X]=et,k=X);else if(dt<q&&0>r(mt,et))B[k]=mt,B[dt]=et,k=dt;else break t}}return W}function r(B,W){var et=B.sortIndex-W.sortIndex;return et!==0?et:B.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var p=[],m=[],v=1,y=null,w=3,T=!1,x=!1,A=!1,E=!1,O=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function Q(B){for(var W=e(m);W!==null;){if(W.callback===null)s(m);else if(W.startTime<=B)s(m),W.sortIndex=W.expirationTime,t(p,W);else break;W=e(m)}}function I(B){if(A=!1,Q(B),!x)if(e(p)!==null)x=!0,H||(H=!0,$());else{var W=e(m);W!==null&&tt(I,W.startTime-B)}}var H=!1,G=-1,j=5,V=-1;function Z(){return E?!0:!(i.unstable_now()-V<j)}function Y(){if(E=!1,H){var B=i.unstable_now();V=B;var W=!0;try{t:{x=!1,A&&(A=!1,U(G),G=-1),T=!0;var et=w;try{e:{for(Q(B),y=e(p);y!==null&&!(y.expirationTime>B&&Z());){var k=y.callback;if(typeof k=="function"){y.callback=null,w=y.priorityLevel;var q=k(y.expirationTime<=B);if(B=i.unstable_now(),typeof q=="function"){y.callback=q,Q(B),W=!0;break e}y===e(p)&&s(p),Q(B)}else s(p);y=e(p)}if(y!==null)W=!0;else{var R=e(m);R!==null&&tt(I,R.startTime-B),W=!1}}break t}finally{y=null,w=et,T=!1}W=void 0}}finally{W?$():H=!1}}}var $;if(typeof D=="function")$=function(){D(Y)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,J=P.port2;P.port1.onmessage=Y,$=function(){J.postMessage(null)}}else $=function(){O(Y,0)};function tt(B,W){G=O(function(){B(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(B){switch(w){case 1:case 2:case 3:var W=3;break;default:W=w}var et=w;w=W;try{return B()}finally{w=et}},i.unstable_requestPaint=function(){E=!0},i.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var et=w;w=B;try{return W()}finally{w=et}},i.unstable_scheduleCallback=function(B,W,et){var k=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?k+et:k):et=k,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=et+q,B={id:v++,callback:W,priorityLevel:B,startTime:et,expirationTime:q,sortIndex:-1},et>k?(B.sortIndex=et,t(m,B),e(p)===null&&B===e(m)&&(A?(U(G),G=-1):A=!0,tt(I,et-k))):(B.sortIndex=q,t(p,B),x||T||(x=!0,H||(H=!0,$()))),B},i.unstable_shouldYield=Z,i.unstable_wrapCallback=function(B){var W=w;return function(){var et=w;w=W;try{return B.apply(this,arguments)}finally{w=et}}}})(A_)),A_}var fw;function hA(){return fw||(fw=1,T_.exports=uA()),T_.exports}var E_={exports:{}},$n={};var dw;function fA(){if(dw)return $n;dw=1;var i=t0();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:p,containerInfo:m,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$n.createPortal=function(p,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(p,m,null,v)},$n.flushSync=function(p){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=v,s.d.f()}},$n.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},$n.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},$n.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var v=m.as,y=f(v,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:T}):v==="script"&&s.d.X(p,{crossOrigin:y,integrity:w,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},$n.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},$n.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=f(v,m.crossOrigin);s.d.L(p,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},$n.preloadModule=function(p,m){if(typeof p=="string")if(m){var v=f(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},$n.requestFormReset=function(p){s.d.r(p)},$n.unstable_batchedUpdates=function(p,m){return p(m)},$n.useFormState=function(p,m,v){return u.H.useFormState(p,m,v)},$n.useFormStatus=function(){return u.H.useHostTransitionStatus()},$n.version="19.2.4",$n}var pw;function dA(){if(pw)return E_.exports;pw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),E_.exports=fA(),E_.exports}var mw;function pA(){if(mw)return Vu;mw=1;var i=hA(),t=t0(),e=dA();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,c=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(c=o.return),n=o.return;while(n)}return o.tag===3?c:null}function u(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function f(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(s(188))}function m(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var c=n,d=o;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return p(g),n;if(b===d)return p(g),o;b=b.sibling}throw Error(s(188))}if(c.return!==d.return)c=g,d=b;else{for(var M=!1,z=g.child;z;){if(z===c){M=!0,c=g,d=b;break}if(z===d){M=!0,d=g,c=b;break}z=z.sibling}if(!M){for(z=b.child;z;){if(z===c){M=!0,c=b,d=g;break}if(z===d){M=!0,d=b,c=g;break}z=z.sibling}if(!M)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var y=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),D=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function $(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var P=Symbol.for("react.client.reference");function J(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===P?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case O:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case H:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case D:return n.displayName||"Context";case U:return(n._context.displayName||"Context")+".Consumer";case Q:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case G:return o=n.displayName||null,o!==null?o:J(n.type)||"Memo";case j:o=n._payload,n=n._init;try{return J(n(o))}catch{}}return null}var tt=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},k=[],q=-1;function R(n){return{current:n}}function X(n){0>q||(n.current=k[q],k[q]=null,q--)}function ot(n,o){q++,k[q]=n.current,n.current=o}var dt=R(null),mt=R(null),_t=R(null),Ct=R(null);function Et(n,o){switch(ot(_t,o),ot(mt,n),ot(dt,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?kb(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=kb(o),n=Db(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(dt),ot(dt,n)}function ne(){X(dt),X(mt),X(_t)}function Me(n){n.memoizedState!==null&&ot(Ct,n);var o=dt.current,c=Db(o,n.type);o!==c&&(ot(mt,n),ot(dt,c))}function Re(n){mt.current===n&&(X(dt),X(mt)),Ct.current===n&&(X(Ct),zu._currentValue=et)}var Fe,jn;function ii(n){if(Fe===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);Fe=o&&o[1]||"",jn=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fe+n+jn}var Dt=!1;function Wt(n,o){if(!n||Dt)return"";Dt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(ft){var ht=ft}Reflect.construct(n,[],wt)}else{try{wt.call()}catch(ft){ht=ft}n.call(wt.prototype)}}else{try{throw Error()}catch(ft){ht=ft}(wt=n())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(ft){if(ft&&ht&&typeof ft.stack=="string")return[ft.stack,ht.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),M=b[0],z=b[1];if(M&&z){var K=M.split(`
`),ct=z.split(`
`);for(g=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ct.length&&!ct[g].includes("DetermineComponentFrameRoot");)g++;if(d===K.length||g===ct.length)for(d=K.length-1,g=ct.length-1;1<=d&&0<=g&&K[d]!==ct[g];)g--;for(;1<=d&&0<=g;d--,g--)if(K[d]!==ct[g]){if(d!==1||g!==1)do if(d--,g--,0>g||K[d]!==ct[g]){var gt=`
`+K[d].replace(" at new "," at ");return n.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",n.displayName)),gt}while(1<=d&&0<=g);break}}}finally{Dt=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?ii(c):""}function Ie(n,o){switch(n.tag){case 26:case 27:case 5:return ii(n.type);case 16:return ii("Lazy");case 13:return n.child!==o&&o!==null?ii("Suspense Fallback"):ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return Wt(n.type,!1);case 11:return Wt(n.type.render,!1);case 1:return Wt(n.type,!0);case 31:return ii("Activity");default:return""}}function be(n){try{var o="",c=null;do o+=Ie(n,c),c=n,n=n.return;while(n);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var oe=Object.prototype.hasOwnProperty,xe=i.unstable_scheduleCallback,nn=i.unstable_cancelCallback,si=i.unstable_shouldYield,_i=i.unstable_requestPaint,dn=i.unstable_now,ho=i.unstable_getCurrentPriorityLevel,ri=i.unstable_ImmediatePriority,da=i.unstable_UserBlockingPriority,Ys=i.unstable_NormalPriority,Pc=i.unstable_LowPriority,pa=i.unstable_IdlePriority,bl=i.log,Bc=i.unstable_setDisableYieldValue,Es=null,Cn=null;function Pi(n){if(typeof bl=="function"&&Bc(n),Cn&&typeof Cn.setStrictMode=="function")try{Cn.setStrictMode(Es,n)}catch{}}var Gn=Math.clz32?Math.clz32:Hc,Er=Math.log,Uc=Math.LN2;function Hc(n){return n>>>=0,n===0?32:31-(Er(n)/Uc|0)|0}var Cr=256,Lr=262144,St=4194304;function Lt(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Vt(n,o,c){var d=n.pendingLanes;if(d===0)return 0;var g=0,b=n.suspendedLanes,M=n.pingedLanes;n=n.warmLanes;var z=d&134217727;return z!==0?(d=z&~b,d!==0?g=Lt(d):(M&=z,M!==0?g=Lt(M):c||(c=z&~n,c!==0&&(g=Lt(c))))):(z=d&~b,z!==0?g=Lt(z):M!==0?g=Lt(M):c||(c=d&~n,c!==0&&(g=Lt(c)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,c=o&-o,b>=c||b===32&&(c&4194048)!==0)?o:g}function Mt(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function It(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ot(){var n=St;return St<<=1,(St&62914560)===0&&(St=4194304),n}function jt(n){for(var o=[],c=0;31>c;c++)o.push(n);return o}function Gt(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ft(n,o,c,d,g,b){var M=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var z=n.entanglements,K=n.expirationTimes,ct=n.hiddenUpdates;for(c=M&~c;0<c;){var gt=31-Gn(c),wt=1<<gt;z[gt]=0,K[gt]=-1;var ht=ct[gt];if(ht!==null)for(ct[gt]=null,gt=0;gt<ht.length;gt++){var ft=ht[gt];ft!==null&&(ft.lane&=-536870913)}c&=~wt}d!==0&&Ke(n,d,0),b!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=b&~(M&~o))}function Ke(n,o,c){n.pendingLanes|=o,n.suspendedLanes&=~o;var d=31-Gn(o);n.entangledLanes|=o,n.entanglements[d]=n.entanglements[d]|1073741824|c&261930}function Je(n,o){var c=n.entangledLanes|=o;for(n=n.entanglements;c;){var d=31-Gn(c),g=1<<d;g&o|n[d]&o&&(n[d]|=o),c&=~g}}function Bi(n,o){var c=o&-o;return c=(c&42)!==0?1:pn(c),(c&(n.suspendedLanes|o))!==0?0:c}function pn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Nt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function oi(){var n=W.p;return n!==0?n:(n=window.event,n===void 0?32:tw(n.type))}function ma(n,o){var c=W.p;try{return W.p=n,o()}finally{W.p=c}}var Cs=Math.random().toString(36).slice(2),vn="__reactFiber$"+Cs,Nn="__reactProps$"+Cs,Mr="__reactContainer$"+Cs,Xs="__reactEvents$"+Cs,Nh="__reactListeners$"+Cs,kp="__reactHandles$"+Cs,zh="__reactResources$"+Cs,_a="__reactMarker$"+Cs;function Vc(n){delete n[vn],delete n[Nn],delete n[Xs],delete n[Nh],delete n[kp]}function kr(n){var o=n[vn];if(o)return o;for(var c=n.parentNode;c;){if(o=c[Mr]||c[vn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(n=Bb(n);n!==null;){if(c=n[vn])return c;n=Bb(n)}return o}n=c,c=n.parentNode}return null}function fo(n){if(n=n[vn]||n[Mr]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function Qs(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function po(n){var o=n[zh];return o||(o=n[zh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function bn(n){n[_a]=!0}var Ph=new Set,Bh={};function Dr(n,o){Fs(n,o),Fs(n+"Capture",o)}function Fs(n,o){for(Bh[n]=o,n=0;n<o.length;n++)Ph.add(o[n])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qc={},jc={};function ya(n){return oe.call(jc,n)?!0:oe.call(qc,n)?!1:ga.test(n)?jc[n]=!0:(qc[n]=!0,!1)}function le(n,o,c){if(ya(o))if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+c)}}function Ne(n,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+c)}}function gi(n,o,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(o,c,""+d)}}function Ln(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Or(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gc(n,o,c){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,b=d.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(M){c=""+M,b.call(this,M)}}),Object.defineProperty(n,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function te(n){if(!n._valueTracker){var o=Or(n)?"checked":"value";n._valueTracker=Gc(n,o,""+n[o])}}function $e(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return n&&(d=Or(n)?n.checked?"true":"false":n.value),n=d,n!==c?(o.setValue(n),!0):!1}function mo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var wl=/[\n"\\]/g;function We(n){return n.replace(wl,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Zc(n,o,c,d,g,b,M,z){n.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?n.type=M:n.removeAttribute("type"),o!=null?M==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+Ln(o)):n.value!==""+Ln(o)&&(n.value=""+Ln(o)):M!=="submit"&&M!=="reset"||n.removeAttribute("value"),o!=null?Ls(n,M,Ln(o)):c!=null?Ls(n,M,Ln(c)):d!=null&&n.removeAttribute("value"),g==null&&b!=null&&(n.defaultChecked=!!b),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?n.name=""+Ln(z):n.removeAttribute("name")}function va(n,o,c,d,g,b,M,z){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),o!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){te(n);return}c=c!=null?""+Ln(c):"",o=o!=null?""+Ln(o):c,z||o===n.value||(n.value=o),n.defaultValue=o}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=z?n.checked:!!d,n.defaultChecked=!!d,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(n.name=M),te(n)}function Ls(n,o,c){o==="number"&&mo(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function He(n,o,c,d){if(n=n.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=o.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&d&&(n[c].defaultSelected=!0)}else{for(c=""+Ln(c),o=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Ks(n,o,c){if(o!=null&&(o=""+Ln(o),o!==n.value&&(n.value=o),c==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=c!=null?""+Ln(c):""}function _o(n,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(s(92));if(tt(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=Ln(o),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d),te(n)}function is(n,o){if(o){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=o;return}}n.textContent=o}var Wc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function go(n,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":d?n.setProperty(o,c):typeof c!="number"||c===0||Wc.has(o)?o==="float"?n.cssFloat=c:n[o]=(""+c).trim():n[o]=c+"px"}function xl(n,o,c){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var g in o)d=o[g],o.hasOwnProperty(g)&&c[g]!==d&&go(n,g,d)}else for(var b in o)o.hasOwnProperty(b)&&go(n,b,o[b])}function ba(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(n){return Yc.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function yi(){}var Tl=null;function wa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vo=null,Qt=null;function Ui(n){var o=fo(n);if(o&&(n=o.stateNode)){var c=n[Nn]||null;t:switch(n=o.stateNode,o.type){case"input":if(Zc(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+We(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==n&&d.form===n.form){var g=d[Nn]||null;if(!g)throw Error(s(90));Zc(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===n.form&&$e(d)}break t;case"textarea":Ks(n,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&He(n,!!c.multiple,o,!1)}}}var ke=!1;function Xc(n,o,c){if(ke)return n(o,c);ke=!0;try{var d=n(o);return d}finally{if(ke=!1,(vo!==null||Qt!==null)&&(Nf(),vo&&(o=vo,n=Qt,Qt=vo=null,Ui(o),n)))for(o=0;o<n.length;o++)Ui(n[o])}}function Rr(n,o){var c=n.stateNode;if(c===null)return null;var d=c[Nn]||null;if(d===null)return null;c=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break t;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,o,typeof c));return c}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xa=!1;if(Hi)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){xa=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{xa=!1}var ss=null,Ir=null,rn=null;function Js(){if(rn)return rn;var n,o=Ir,c=o.length,d,g="value"in ss?ss.value:ss.textContent,b=g.length;for(n=0;n<c&&o[n]===g[n];n++);var M=c-n;for(d=1;d<=M&&o[c-d]===g[b-d];d++);return rn=g.slice(n,1<d?1-d:void 0)}function Sa(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Ta(){return!0}function Uh(){return!1}function Zn(n){function o(c,d,g,b,M){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=M,this.currentTarget=null;for(var z in n)n.hasOwnProperty(z)&&(c=n[z],this[z]=c?c(b):b[z]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ta:Uh,this.isPropagationStopped=Uh,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),o}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=Zn(Ms),bo=y({},Ms,{view:0,detail:0}),fe=Zn(bo),Qc,ai,ks,Aa=y({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ks&&(ks&&n.type==="mousemove"?(Qc=n.screenX-ks.screenX,ai=n.screenY-ks.screenY):ai=Qc=0,ks=n),Qc)},movementY:function(n){return"movementY"in n?n.movementY:ai}}),Hh=Zn(Aa),Fc=y({},Aa,{dataTransfer:0}),Dp=Zn(Fc),Vh=y({},bo,{relatedTarget:0}),Kc=Zn(Vh),Op=y({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Jc=Zn(Op),Rp=y({},Ms,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rs=Zn(Rp),Ip=y({},Ms,{data:0}),$c=Zn(Ip),$s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=jh[n])?!!o[n]:!1}function eu(){return tu}var Gh=y({},bo,{key:function(n){if(n.key){var o=$s[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Sa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?qh[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(n){return n.type==="keypress"?Sa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zh=Zn(Gh),Np=y({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wh=Zn(Np),nu=y({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),zp=Zn(nu),Yh=y({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xh=Zn(Yh),El=y({},Aa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Nr=Zn(El),Pp=y({},Ms,{newState:0,oldState:0}),Ea=Zn(Pp),vi=[9,13,27,32],Cl=Hi&&"CompositionEvent"in window,wo=null;Hi&&"documentMode"in document&&(wo=document.documentMode);var Bp=Hi&&"TextEvent"in window&&!wo,Ll=Hi&&(!Cl||wo&&8<wo&&11>=wo),Ml=" ",Qh=!1;function Fh(n,o){switch(n){case"keyup":return vi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xo=!1;function qi(n,o){switch(n){case"compositionend":return iu(o);case"keypress":return o.which!==32?null:(Qh=!0,Ml);case"textInput":return n=o.data,n===Ml&&Qh?null:n;default:return null}}function So(n,o){if(xo)return n==="compositionend"||!Cl&&Fh(n,o)?(n=Js(),rn=Ir=ss=null,xo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ll&&o.locale!=="ko"?null:o.data;default:return null}}var Up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function os(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Up[n.type]:o==="textarea"}function Kh(n,o,c,d){vo?Qt?Qt.push(d):Qt=[d]:vo=d,o=qf(o,"onChange"),0<o.length&&(c=new Al("onChange","change",null,c,d),n.push({event:c,listeners:o}))}var as=null,Ca=null;function La(n){Tb(n,0)}function Ma(n){var o=Qs(n);if($e(o))return n}function ka(n,o){if(n==="change")return o}var Jh=!1;if(Hi){var ls;if(Hi){var To="oninput"in document;if(!To){var $h=document.createElement("div");$h.setAttribute("oninput","return;"),To=typeof $h.oninput=="function"}ls=To}else ls=!1;Jh=ls&&(!document.documentMode||9<document.documentMode)}function kl(){as&&(as.detachEvent("onpropertychange",tf),Ca=as=null)}function tf(n){if(n.propertyName==="value"&&Ma(Ca)){var o=[];Kh(o,Ca,n,wa(n)),Xc(La,o)}}function Ds(n,o,c){n==="focusin"?(kl(),as=o,Ca=c,as.attachEvent("onpropertychange",tf)):n==="focusout"&&kl()}function Hp(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ma(Ca)}function Ao(n,o){if(n==="click")return Ma(o)}function Vp(n,o){if(n==="input"||n==="change")return Ma(o)}function Os(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var zn=typeof Object.is=="function"?Object.is:Os;function Eo(n,o){if(zn(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var c=Object.keys(n),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!oe.call(o,g)||!zn(n[g],o[g]))return!1}return!0}function Dl(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Da(n,o){var c=Dl(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=o&&d>=o)return{node:c,offset:o-n};n=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Dl(c)}}function Ol(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Ol(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Oa(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=mo(n.document);o instanceof n.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)n=o.contentWindow;else break;o=mo(n.document)}return o}function tr(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var Rl=Hi&&"documentMode"in document&&11>=document.documentMode,er=null,Il=null,Ra=null,Co=!1;function ef(n,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Co||er==null||er!==mo(d)||(d=er,"selectionStart"in d&&tr(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ra&&Eo(Ra,d)||(Ra=d,d=qf(Il,"onSelect"),0<d.length&&(o=new Al("onSelect","select",null,o,c),n.push({event:o,listeners:d}),o.target=er)))}function nr(n,o){var c={};return c[n.toLowerCase()]=o.toLowerCase(),c["Webkit"+n]="webkit"+o,c["Moz"+n]="moz"+o,c}var Lo={animationend:nr("Animation","AnimationEnd"),animationiteration:nr("Animation","AnimationIteration"),animationstart:nr("Animation","AnimationStart"),transitionrun:nr("Transition","TransitionRun"),transitionstart:nr("Transition","TransitionStart"),transitioncancel:nr("Transition","TransitionCancel"),transitionend:nr("Transition","TransitionEnd")},Nl={},nf={};Hi&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Pn(n){if(Nl[n])return Nl[n];if(!Lo[n])return n;var o=Lo[n],c;for(c in o)if(o.hasOwnProperty(c)&&c in nf)return Nl[n]=o[c];return n}var Ia=Pn("animationend"),sf=Pn("animationiteration"),Na=Pn("animationstart"),qp=Pn("transitionrun"),rf=Pn("transitionstart"),jp=Pn("transitioncancel"),Mo=Pn("transitionend"),of=new Map,ir="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ir.push("scrollEnd");function bi(n,o){of.set(n,o),Dr(o,[n])}var za=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},wi=[],Kn=0,zl=0;function Pa(){for(var n=Kn,o=zl=Kn=0;o<n;){var c=wi[o];wi[o++]=null;var d=wi[o];wi[o++]=null;var g=wi[o];wi[o++]=null;var b=wi[o];if(wi[o++]=null,d!==null&&g!==null){var M=d.pending;M===null?g.next=g:(g.next=M.next,M.next=g),d.pending=g}b!==0&&ko(c,g,b)}}function sr(n,o,c,d){wi[Kn++]=n,wi[Kn++]=o,wi[Kn++]=c,wi[Kn++]=d,zl|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function su(n,o,c,d){return sr(n,o,c,d),Ba(n)}function cs(n,o){return sr(n,null,null,o),Ba(n)}function ko(n,o,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var g=!1,b=n.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(g=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,g&&o!==null&&(g=31-Gn(c),n=b.hiddenUpdates,d=n[g],d===null?n[g]=[o]:d.push(o),o.lane=c|536870912),b):null}function Ba(n){if(50<Mu)throw Mu=0,Zm=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var zr={};function Gp(n,o,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(n,o,c,d){return new Gp(n,o,c,d)}function Pl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function us(n,o){var c=n.alternate;return c===null?(c=Jn(n.tag,o,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=o,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,o=n.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function ru(n,o){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,o=c.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Ua(n,o,c,d,g,b){var M=0;if(d=n,typeof n=="function")Pl(n)&&(M=1);else if(typeof n=="string")M=Q2(n,c,dt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case V:return n=Jn(31,c,o,g),n.elementType=V,n.lanes=b,n;case A:return Pr(c.children,g,b,o);case E:M=8,g|=24;break;case O:return n=Jn(12,c,o,g|2),n.elementType=O,n.lanes=b,n;case I:return n=Jn(13,c,o,g),n.elementType=I,n.lanes=b,n;case H:return n=Jn(19,c,o,g),n.elementType=H,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:M=10;break t;case U:M=9;break t;case Q:M=11;break t;case G:M=14;break t;case j:M=16,d=null;break t}M=29,c=Error(s(130,n===null?"null":typeof n,"")),d=null}return o=Jn(M,c,o,g),o.elementType=n,o.type=d,o.lanes=b,o}function Pr(n,o,c,d){return n=Jn(7,n,d,o),n.lanes=c,n}function Bl(n,o,c){return n=Jn(6,n,null,o),n.lanes=c,n}function ou(n){var o=Jn(18,null,null,0);return o.stateNode=n,o}function au(n,o,c){return o=Jn(4,n.children!==null?n.children:[],n.key,o),o.lanes=c,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var a=new WeakMap;function h(n,o){if(typeof n=="object"&&n!==null){var c=a.get(n);return c!==void 0?c:(o={value:n,source:o,stack:be(o)},a.set(n,o),o)}return{value:n,source:o,stack:be(o)}}var _=[],S=0,C=null,N=0,F=[],rt=0,ut=null,bt=1,kt="";function Zt(n,o){_[S++]=N,_[S++]=C,C=n,N=o}function se(n,o,c){F[rt++]=bt,F[rt++]=kt,F[rt++]=ut,ut=n;var d=bt;n=kt;var g=32-Gn(d)-1;d&=~(1<<g),c+=1;var b=32-Gn(o)+g;if(30<b){var M=g-g%5;b=(d&(1<<M)-1).toString(32),d>>=M,g-=M,bt=1<<32-Gn(o)+g|c<<g|d,kt=b+n}else bt=1<<b|c<<g|d,kt=n}function Mn(n){n.return!==null&&(Zt(n,1),se(n,1,0))}function on(n){for(;n===C;)C=_[--S],_[S]=null,N=_[--S],_[S]=null;for(;n===ut;)ut=F[--rt],F[rt]=null,kt=F[--rt],F[rt]=null,bt=F[--rt],F[rt]=null}function li(n,o){F[rt++]=bt,F[rt++]=kt,F[rt++]=ut,bt=o.id,kt=o.overflow,ut=n}var Se=null,Te=null,ce=!1,rr=null,xi=!1,Ul=Error(s(519));function or(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ha(h(o,n)),Ul}function lu(n){var o=n.stateNode,c=n.type,d=n.memoizedProps;switch(o[vn]=n,o[Nn]=d,c){case"dialog":he("cancel",o),he("close",o);break;case"iframe":case"object":case"embed":he("load",o);break;case"video":case"audio":for(c=0;c<Du.length;c++)he(Du[c],o);break;case"source":he("error",o);break;case"img":case"image":case"link":he("error",o),he("load",o);break;case"details":he("toggle",o);break;case"input":he("invalid",o),va(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":he("invalid",o);break;case"textarea":he("invalid",o),_o(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||Lb(o.textContent,c)?(d.popover!=null&&(he("beforetoggle",o),he("toggle",o)),d.onScroll!=null&&he("scroll",o),d.onScrollEnd!=null&&he("scrollend",o),d.onClick!=null&&(o.onclick=yi),o=!0):o=!1,o||or(n,!0)}function sn(n){for(Se=n.return;Se;)switch(Se.tag){case 5:case 31:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:Se=Se.return}}function Rs(n){if(n!==Se)return!1;if(!ce)return sn(n),ce=!0,!1;var o=n.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||o_(n.type,n.memoizedProps)),c=!c),c&&Te&&or(n),sn(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Te=Pb(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Te=Pb(n)}else o===27?(o=Te,Go(n.type)?(n=h_,h_=null,Te=n):Te=o):Te=Se?fs(n.stateNode.nextSibling):null;return!0}function Br(){Te=Se=null,ce=!1}function cu(){var n=rr;return n!==null&&(Ei===null?Ei=n:Ei.push.apply(Ei,n),rr=null),n}function Ha(n){rr===null?rr=[n]:rr.push(n)}var Va=R(null),ar=null,Is=null;function Do(n,o,c){ot(Va,o._currentValue),o._currentValue=c}function Ur(n){n._currentValue=Va.current,X(Va)}function Zp(n,o,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),n===c)break;n=n.return}}function Wp(n,o,c,d){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var b=g.dependencies;if(b!==null){var M=g.child;b=b.firstContext;t:for(;b!==null;){var z=b;b=g;for(var K=0;K<o.length;K++)if(z.context===o[K]){b.lanes|=c,z=b.alternate,z!==null&&(z.lanes|=c),Zp(b.return,c,n),d||(M=null);break t}b=z.next}}else if(g.tag===18){if(M=g.return,M===null)throw Error(s(341));M.lanes|=c,b=M.alternate,b!==null&&(b.lanes|=c),Zp(M,c,n),M=null}else M=g.child;if(M!==null)M.return=g;else for(M=g;M!==null;){if(M===n){M=null;break}if(g=M.sibling,g!==null){g.return=M.return,M=g;break}M=M.return}g=M}}function Hl(n,o,c,d){n=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var M=g.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var z=g.type;zn(g.pendingProps.value,M.value)||(n!==null?n.push(z):n=[z])}}else if(g===Ct.current){if(M=g.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(zu):n=[zu])}g=g.return}n!==null&&Wp(o,n,c,d),o.flags|=262144}function af(n){for(n=n.firstContext;n!==null;){if(!zn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function qa(n){ar=n,Is=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wn(n){return dy(ar,n)}function lf(n,o){return ar===null&&qa(n),dy(n,o)}function dy(n,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Is===null){if(n===null)throw Error(s(308));Is=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else Is=Is.next=o;return c}var ZT=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){o.aborted=!0,n.forEach(function(c){return c()})}},WT=i.unstable_scheduleCallback,YT=i.unstable_NormalPriority,wn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yp(){return{controller:new ZT,data:new Map,refCount:0}}function uu(n){n.refCount--,n.refCount===0&&WT(YT,function(){n.controller.abort()})}var hu=null,Xp=0,Vl=0,ql=null;function XT(n,o){if(hu===null){var c=hu=[];Xp=0,Vl=Km(),ql={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Xp++,o.then(py,py),o}function py(){if(--Xp===0&&hu!==null){ql!==null&&(ql.status="fulfilled");var n=hu;hu=null,Vl=0,ql=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function QT(n,o){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){d.status="fulfilled",d.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var my=B.S;B.S=function(n,o){Jv=dn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&XT(n,o),my!==null&&my(n,o)};var ja=R(null);function Qp(){var n=ja.current;return n!==null?n:Ve.pooledCache}function cf(n,o){o===null?ot(ja,ja.current):ot(ja,o.pool)}function _y(){var n=Qp();return n===null?null:{parent:wn._currentValue,pool:n}}var jl=Error(s(460)),Fp=Error(s(474)),uf=Error(s(542)),hf={then:function(){}};function gy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function yy(n,o,c){switch(c=n[c],c===void 0?n.push(o):c!==o&&(o.then(yi,yi),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,by(n),n;default:if(typeof o.status=="string")o.then(yi,yi);else{if(n=Ve,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(d){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=d}},function(d){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,by(n),n}throw Za=o,jl}}function Ga(n){try{var o=n._init;return o(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Za=c,jl):c}}var Za=null;function vy(){if(Za===null)throw Error(s(459));var n=Za;return Za=null,n}function by(n){if(n===jl||n===uf)throw Error(s(483))}var Gl=null,fu=0;function ff(n){var o=fu;return fu+=1,Gl===null&&(Gl=[]),yy(Gl,n,o)}function du(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function df(n,o){throw o.$$typeof===w?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function wy(n){function o(st,it){if(n){var at=st.deletions;at===null?(st.deletions=[it],st.flags|=16):at.push(it)}}function c(st,it){if(!n)return null;for(;it!==null;)o(st,it),it=it.sibling;return null}function d(st){for(var it=new Map;st!==null;)st.key!==null?it.set(st.key,st):it.set(st.index,st),st=st.sibling;return it}function g(st,it){return st=us(st,it),st.index=0,st.sibling=null,st}function b(st,it,at){return st.index=at,n?(at=st.alternate,at!==null?(at=at.index,at<it?(st.flags|=67108866,it):at):(st.flags|=67108866,it)):(st.flags|=1048576,it)}function M(st){return n&&st.alternate===null&&(st.flags|=67108866),st}function z(st,it,at,vt){return it===null||it.tag!==6?(it=Bl(at,st.mode,vt),it.return=st,it):(it=g(it,at),it.return=st,it)}function K(st,it,at,vt){var Yt=at.type;return Yt===A?gt(st,it,at.props.children,vt,at.key):it!==null&&(it.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===j&&Ga(Yt)===it.type)?(it=g(it,at.props),du(it,at),it.return=st,it):(it=Ua(at.type,at.key,at.props,null,st.mode,vt),du(it,at),it.return=st,it)}function ct(st,it,at,vt){return it===null||it.tag!==4||it.stateNode.containerInfo!==at.containerInfo||it.stateNode.implementation!==at.implementation?(it=au(at,st.mode,vt),it.return=st,it):(it=g(it,at.children||[]),it.return=st,it)}function gt(st,it,at,vt,Yt){return it===null||it.tag!==7?(it=Pr(at,st.mode,vt,Yt),it.return=st,it):(it=g(it,at),it.return=st,it)}function wt(st,it,at){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=Bl(""+it,st.mode,at),it.return=st,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case T:return at=Ua(it.type,it.key,it.props,null,st.mode,at),du(at,it),at.return=st,at;case x:return it=au(it,st.mode,at),it.return=st,it;case j:return it=Ga(it),wt(st,it,at)}if(tt(it)||$(it))return it=Pr(it,st.mode,at,null),it.return=st,it;if(typeof it.then=="function")return wt(st,ff(it),at);if(it.$$typeof===D)return wt(st,lf(st,it),at);df(st,it)}return null}function ht(st,it,at,vt){var Yt=it!==null?it.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Yt!==null?null:z(st,it,""+at,vt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case T:return at.key===Yt?K(st,it,at,vt):null;case x:return at.key===Yt?ct(st,it,at,vt):null;case j:return at=Ga(at),ht(st,it,at,vt)}if(tt(at)||$(at))return Yt!==null?null:gt(st,it,at,vt,null);if(typeof at.then=="function")return ht(st,it,ff(at),vt);if(at.$$typeof===D)return ht(st,it,lf(st,at),vt);df(st,at)}return null}function ft(st,it,at,vt,Yt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return st=st.get(at)||null,z(it,st,""+vt,Yt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case T:return st=st.get(vt.key===null?at:vt.key)||null,K(it,st,vt,Yt);case x:return st=st.get(vt.key===null?at:vt.key)||null,ct(it,st,vt,Yt);case j:return vt=Ga(vt),ft(st,it,at,vt,Yt)}if(tt(vt)||$(vt))return st=st.get(at)||null,gt(it,st,vt,Yt,null);if(typeof vt.then=="function")return ft(st,it,at,ff(vt),Yt);if(vt.$$typeof===D)return ft(st,it,at,lf(it,vt),Yt);df(it,vt)}return null}function Pt(st,it,at,vt){for(var Yt=null,Ae=null,qt=it,re=it=0,pe=null;qt!==null&&re<at.length;re++){qt.index>re?(pe=qt,qt=null):pe=qt.sibling;var Ee=ht(st,qt,at[re],vt);if(Ee===null){qt===null&&(qt=pe);break}n&&qt&&Ee.alternate===null&&o(st,qt),it=b(Ee,it,re),Ae===null?Yt=Ee:Ae.sibling=Ee,Ae=Ee,qt=pe}if(re===at.length)return c(st,qt),ce&&Zt(st,re),Yt;if(qt===null){for(;re<at.length;re++)qt=wt(st,at[re],vt),qt!==null&&(it=b(qt,it,re),Ae===null?Yt=qt:Ae.sibling=qt,Ae=qt);return ce&&Zt(st,re),Yt}for(qt=d(qt);re<at.length;re++)pe=ft(qt,st,re,at[re],vt),pe!==null&&(n&&pe.alternate!==null&&qt.delete(pe.key===null?re:pe.key),it=b(pe,it,re),Ae===null?Yt=pe:Ae.sibling=pe,Ae=pe);return n&&qt.forEach(function(Qo){return o(st,Qo)}),ce&&Zt(st,re),Yt}function Xt(st,it,at,vt){if(at==null)throw Error(s(151));for(var Yt=null,Ae=null,qt=it,re=it=0,pe=null,Ee=at.next();qt!==null&&!Ee.done;re++,Ee=at.next()){qt.index>re?(pe=qt,qt=null):pe=qt.sibling;var Qo=ht(st,qt,Ee.value,vt);if(Qo===null){qt===null&&(qt=pe);break}n&&qt&&Qo.alternate===null&&o(st,qt),it=b(Qo,it,re),Ae===null?Yt=Qo:Ae.sibling=Qo,Ae=Qo,qt=pe}if(Ee.done)return c(st,qt),ce&&Zt(st,re),Yt;if(qt===null){for(;!Ee.done;re++,Ee=at.next())Ee=wt(st,Ee.value,vt),Ee!==null&&(it=b(Ee,it,re),Ae===null?Yt=Ee:Ae.sibling=Ee,Ae=Ee);return ce&&Zt(st,re),Yt}for(qt=d(qt);!Ee.done;re++,Ee=at.next())Ee=ft(qt,st,re,Ee.value,vt),Ee!==null&&(n&&Ee.alternate!==null&&qt.delete(Ee.key===null?re:Ee.key),it=b(Ee,it,re),Ae===null?Yt=Ee:Ae.sibling=Ee,Ae=Ee);return n&&qt.forEach(function(oA){return o(st,oA)}),ce&&Zt(st,re),Yt}function Be(st,it,at,vt){if(typeof at=="object"&&at!==null&&at.type===A&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case T:t:{for(var Yt=at.key;it!==null;){if(it.key===Yt){if(Yt=at.type,Yt===A){if(it.tag===7){c(st,it.sibling),vt=g(it,at.props.children),vt.return=st,st=vt;break t}}else if(it.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===j&&Ga(Yt)===it.type){c(st,it.sibling),vt=g(it,at.props),du(vt,at),vt.return=st,st=vt;break t}c(st,it);break}else o(st,it);it=it.sibling}at.type===A?(vt=Pr(at.props.children,st.mode,vt,at.key),vt.return=st,st=vt):(vt=Ua(at.type,at.key,at.props,null,st.mode,vt),du(vt,at),vt.return=st,st=vt)}return M(st);case x:t:{for(Yt=at.key;it!==null;){if(it.key===Yt)if(it.tag===4&&it.stateNode.containerInfo===at.containerInfo&&it.stateNode.implementation===at.implementation){c(st,it.sibling),vt=g(it,at.children||[]),vt.return=st,st=vt;break t}else{c(st,it);break}else o(st,it);it=it.sibling}vt=au(at,st.mode,vt),vt.return=st,st=vt}return M(st);case j:return at=Ga(at),Be(st,it,at,vt)}if(tt(at))return Pt(st,it,at,vt);if($(at)){if(Yt=$(at),typeof Yt!="function")throw Error(s(150));return at=Yt.call(at),Xt(st,it,at,vt)}if(typeof at.then=="function")return Be(st,it,ff(at),vt);if(at.$$typeof===D)return Be(st,it,lf(st,at),vt);df(st,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,it!==null&&it.tag===6?(c(st,it.sibling),vt=g(it,at),vt.return=st,st=vt):(c(st,it),vt=Bl(at,st.mode,vt),vt.return=st,st=vt),M(st)):c(st,it)}return function(st,it,at,vt){try{fu=0;var Yt=Be(st,it,at,vt);return Gl=null,Yt}catch(qt){if(qt===jl||qt===uf)throw qt;var Ae=Jn(29,qt,null,st.mode);return Ae.lanes=vt,Ae.return=st,Ae}}}var Wa=wy(!0),xy=wy(!1),Oo=!1;function Kp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jp(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ro(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Io(n,o,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Le&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,o=Ba(n),ko(n,null,c),o}return sr(n,d,o,c),Ba(n)}function pu(n,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=n.pendingLanes,c|=d,o.lanes=c,Je(n,c)}}function $p(n,o){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=M:b=b.next=M,c=c.next}while(c!==null);b===null?g=b=o:b=b.next=o}else g=b=o;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=o:n.next=o,c.lastBaseUpdate=o}var tm=!1;function mu(){if(tm){var n=ql;if(n!==null)throw n}}function _u(n,o,c,d){tm=!1;var g=n.updateQueue;Oo=!1;var b=g.firstBaseUpdate,M=g.lastBaseUpdate,z=g.shared.pending;if(z!==null){g.shared.pending=null;var K=z,ct=K.next;K.next=null,M===null?b=ct:M.next=ct,M=K;var gt=n.alternate;gt!==null&&(gt=gt.updateQueue,z=gt.lastBaseUpdate,z!==M&&(z===null?gt.firstBaseUpdate=ct:z.next=ct,gt.lastBaseUpdate=K))}if(b!==null){var wt=g.baseState;M=0,gt=ct=K=null,z=b;do{var ht=z.lane&-536870913,ft=ht!==z.lane;if(ft?(de&ht)===ht:(d&ht)===ht){ht!==0&&ht===Vl&&(tm=!0),gt!==null&&(gt=gt.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});t:{var Pt=n,Xt=z;ht=o;var Be=c;switch(Xt.tag){case 1:if(Pt=Xt.payload,typeof Pt=="function"){wt=Pt.call(Be,wt,ht);break t}wt=Pt;break t;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Xt.payload,ht=typeof Pt=="function"?Pt.call(Be,wt,ht):Pt,ht==null)break t;wt=y({},wt,ht);break t;case 2:Oo=!0}}ht=z.callback,ht!==null&&(n.flags|=64,ft&&(n.flags|=8192),ft=g.callbacks,ft===null?g.callbacks=[ht]:ft.push(ht))}else ft={lane:ht,tag:z.tag,payload:z.payload,callback:z.callback,next:null},gt===null?(ct=gt=ft,K=wt):gt=gt.next=ft,M|=ht;if(z=z.next,z===null){if(z=g.shared.pending,z===null)break;ft=z,z=ft.next,ft.next=null,g.lastBaseUpdate=ft,g.shared.pending=null}}while(!0);gt===null&&(K=wt),g.baseState=K,g.firstBaseUpdate=ct,g.lastBaseUpdate=gt,b===null&&(g.shared.lanes=0),Uo|=M,n.lanes=M,n.memoizedState=wt}}function Sy(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function Ty(n,o){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)Sy(c[n],o)}var Zl=R(null),pf=R(0);function Ay(n,o){n=Xr,ot(pf,n),ot(Zl,o),Xr=n|o.baseLanes}function em(){ot(pf,Xr),ot(Zl,Zl.current)}function nm(){Xr=pf.current,X(Zl),X(pf)}var ji=R(null),hs=null;function No(n){var o=n.alternate;ot(mn,mn.current&1),ot(ji,n),hs===null&&(o===null||Zl.current!==null||o.memoizedState!==null)&&(hs=n)}function im(n){ot(mn,mn.current),ot(ji,n),hs===null&&(hs=n)}function Ey(n){n.tag===22?(ot(mn,mn.current),ot(ji,n),hs===null&&(hs=n)):zo()}function zo(){ot(mn,mn.current),ot(ji,ji.current)}function Gi(n){X(ji),hs===n&&(hs=null),X(mn)}var mn=R(0);function mf(n){for(var o=n;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c_(c)||u_(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Hr=0,ie=null,ze=null,xn=null,_f=!1,Wl=!1,Ya=!1,gf=0,gu=0,Yl=null,FT=0;function an(){throw Error(s(321))}function sm(n,o){if(o===null)return!1;for(var c=0;c<o.length&&c<n.length;c++)if(!zn(n[c],o[c]))return!1;return!0}function rm(n,o,c,d,g,b){return Hr=b,ie=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=n===null||n.memoizedState===null?cv:bm,Ya=!1,b=c(d,g),Ya=!1,Wl&&(b=Ly(o,c,d,g)),Cy(n),b}function Cy(n){B.H=bu;var o=ze!==null&&ze.next!==null;if(Hr=0,xn=ze=ie=null,_f=!1,gu=0,Yl=null,o)throw Error(s(300));n===null||Sn||(n=n.dependencies,n!==null&&af(n)&&(Sn=!0))}function Ly(n,o,c,d){ie=n;var g=0;do{if(Wl&&(Yl=null),gu=0,Wl=!1,25<=g)throw Error(s(301));if(g+=1,xn=ze=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}B.H=uv,b=o(c,d)}while(Wl);return b}function KT(){var n=B.H,o=n.useState()[0];return o=typeof o.then=="function"?yu(o):o,n=n.useState()[0],(ze!==null?ze.memoizedState:null)!==n&&(ie.flags|=1024),o}function om(){var n=gf!==0;return gf=0,n}function am(n,o,c){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~c}function lm(n){if(_f){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}_f=!1}Hr=0,xn=ze=ie=null,Wl=!1,gu=gf=0,Yl=null}function ci(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?ie.memoizedState=xn=n:xn=xn.next=n,xn}function _n(){if(ze===null){var n=ie.alternate;n=n!==null?n.memoizedState:null}else n=ze.next;var o=xn===null?ie.memoizedState:xn.next;if(o!==null)xn=o,ze=n;else{if(n===null)throw ie.alternate===null?Error(s(467)):Error(s(310));ze=n,n={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},xn===null?ie.memoizedState=xn=n:xn=xn.next=n}return xn}function yf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yu(n){var o=gu;return gu+=1,Yl===null&&(Yl=[]),n=yy(Yl,n,o),o=ie,(xn===null?o.memoizedState:xn.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?cv:bm),n}function vf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return yu(n);if(n.$$typeof===D)return Wn(n)}throw Error(s(438,String(n)))}function cm(n){var o=null,c=ie.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=ie.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=yf(),ie.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(n),d=0;d<n;d++)c[d]=Z;return o.index++,c}function Vr(n,o){return typeof o=="function"?o(n):o}function bf(n){var o=_n();return um(o,ze,n)}function um(n,o,c){var d=n.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var g=n.baseQueue,b=d.pending;if(b!==null){if(g!==null){var M=g.next;g.next=b.next,b.next=M}o.baseQueue=g=b,d.pending=null}if(b=n.baseState,g===null)n.memoizedState=b;else{o=g.next;var z=M=null,K=null,ct=o,gt=!1;do{var wt=ct.lane&-536870913;if(wt!==ct.lane?(de&wt)===wt:(Hr&wt)===wt){var ht=ct.revertLane;if(ht===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),wt===Vl&&(gt=!0);else if((Hr&ht)===ht){ct=ct.next,ht===Vl&&(gt=!0);continue}else wt={lane:0,revertLane:ct.revertLane,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},K===null?(z=K=wt,M=b):K=K.next=wt,ie.lanes|=ht,Uo|=ht;wt=ct.action,Ya&&c(b,wt),b=ct.hasEagerState?ct.eagerState:c(b,wt)}else ht={lane:wt,revertLane:ct.revertLane,gesture:ct.gesture,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},K===null?(z=K=ht,M=b):K=K.next=ht,ie.lanes|=wt,Uo|=wt;ct=ct.next}while(ct!==null&&ct!==o);if(K===null?M=b:K.next=z,!zn(b,n.memoizedState)&&(Sn=!0,gt&&(c=ql,c!==null)))throw c;n.memoizedState=b,n.baseState=M,n.baseQueue=K,d.lastRenderedState=b}return g===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function hm(n){var o=_n(),c=o.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var d=c.dispatch,g=c.pending,b=o.memoizedState;if(g!==null){c.pending=null;var M=g=g.next;do b=n(b,M.action),M=M.next;while(M!==g);zn(b,o.memoizedState)||(Sn=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),c.lastRenderedState=b}return[b,d]}function My(n,o,c){var d=ie,g=_n(),b=ce;if(b){if(c===void 0)throw Error(s(407));c=c()}else c=o();var M=!zn((ze||g).memoizedState,c);if(M&&(g.memoizedState=c,Sn=!0),g=g.queue,pm(Oy.bind(null,d,g,n),[n]),g.getSnapshot!==o||M||xn!==null&&xn.memoizedState.tag&1){if(d.flags|=2048,Xl(9,{destroy:void 0},Dy.bind(null,d,g,c,o),null),Ve===null)throw Error(s(349));b||(Hr&127)!==0||ky(d,o,c)}return c}function ky(n,o,c){n.flags|=16384,n={getSnapshot:o,value:c},o=ie.updateQueue,o===null?(o=yf(),ie.updateQueue=o,o.stores=[n]):(c=o.stores,c===null?o.stores=[n]:c.push(n))}function Dy(n,o,c,d){o.value=c,o.getSnapshot=d,Ry(o)&&Iy(n)}function Oy(n,o,c){return c(function(){Ry(o)&&Iy(n)})}function Ry(n){var o=n.getSnapshot;n=n.value;try{var c=o();return!zn(n,c)}catch{return!0}}function Iy(n){var o=cs(n,2);o!==null&&Ci(o,n,2)}function fm(n){var o=ci();if(typeof n=="function"){var c=n;if(n=c(),Ya){Pi(!0);try{c()}finally{Pi(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:n},o}function Ny(n,o,c,d){return n.baseState=c,um(n,ze,typeof d=="function"?d:Vr)}function JT(n,o,c,d,g){if(Sf(n))throw Error(s(485));if(n=o.action,n!==null){var b={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){b.listeners.push(M)}};B.T!==null?c(!0):b.isTransition=!1,d(b),c=o.pending,c===null?(b.next=o.pending=b,zy(o,b)):(b.next=c.next,o.pending=c.next=b)}}function zy(n,o){var c=o.action,d=o.payload,g=n.state;if(o.isTransition){var b=B.T,M={};B.T=M;try{var z=c(g,d),K=B.S;K!==null&&K(M,z),Py(n,o,z)}catch(ct){dm(n,o,ct)}finally{b!==null&&M.types!==null&&(b.types=M.types),B.T=b}}else try{b=c(g,d),Py(n,o,b)}catch(ct){dm(n,o,ct)}}function Py(n,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){By(n,o,d)},function(d){return dm(n,o,d)}):By(n,o,c)}function By(n,o,c){o.status="fulfilled",o.value=c,Uy(o),n.state=c,o=n.pending,o!==null&&(c=o.next,c===o?n.pending=null:(c=c.next,o.next=c,zy(n,c)))}function dm(n,o,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,Uy(o),o=o.next;while(o!==d)}n.action=null}function Uy(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function Hy(n,o){return o}function Vy(n,o){if(ce){var c=Ve.formState;if(c!==null){t:{var d=ie;if(ce){if(Te){e:{for(var g=Te,b=xi;g.nodeType!==8;){if(!b){g=null;break e}if(g=fs(g.nextSibling),g===null){g=null;break e}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Te=fs(g.nextSibling),d=g.data==="F!";break t}}or(d)}d=!1}d&&(o=c[0])}}return c=ci(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hy,lastRenderedState:o},c.queue=d,c=ov.bind(null,ie,d),d.dispatch=c,d=fm(!1),b=vm.bind(null,ie,!1,d.queue),d=ci(),g={state:o,dispatch:null,action:n,pending:null},d.queue=g,c=JT.bind(null,ie,g,b,c),g.dispatch=c,d.memoizedState=n,[o,c,!1]}function qy(n){var o=_n();return jy(o,ze,n)}function jy(n,o,c){if(o=um(n,o,Hy)[0],n=bf(Vr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=yu(o)}catch(M){throw M===jl?uf:M}else d=o;o=_n();var g=o.queue,b=g.dispatch;return c!==o.memoizedState&&(ie.flags|=2048,Xl(9,{destroy:void 0},$T.bind(null,g,c),null)),[d,b,n]}function $T(n,o){n.action=o}function Gy(n){var o=_n(),c=ze;if(c!==null)return jy(o,c,n);_n(),o=o.memoizedState,c=_n();var d=c.queue.dispatch;return c.memoizedState=n,[o,d,!1]}function Xl(n,o,c,d){return n={tag:n,create:c,deps:d,inst:o,next:null},o=ie.updateQueue,o===null&&(o=yf(),ie.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,o.lastEffect=n),n}function Zy(){return _n().memoizedState}function wf(n,o,c,d){var g=ci();ie.flags|=n,g.memoizedState=Xl(1|o,{destroy:void 0},c,d===void 0?null:d)}function xf(n,o,c,d){var g=_n();d=d===void 0?null:d;var b=g.memoizedState.inst;ze!==null&&d!==null&&sm(d,ze.memoizedState.deps)?g.memoizedState=Xl(o,b,c,d):(ie.flags|=n,g.memoizedState=Xl(1|o,b,c,d))}function Wy(n,o){wf(8390656,8,n,o)}function pm(n,o){xf(2048,8,n,o)}function t2(n){ie.flags|=4;var o=ie.updateQueue;if(o===null)o=yf(),ie.updateQueue=o,o.events=[n];else{var c=o.events;c===null?o.events=[n]:c.push(n)}}function Yy(n){var o=_n().memoizedState;return t2({ref:o,nextImpl:n}),function(){if((Le&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Xy(n,o){return xf(4,2,n,o)}function Qy(n,o){return xf(4,4,n,o)}function Fy(n,o){if(typeof o=="function"){n=n();var c=o(n);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Ky(n,o,c){c=c!=null?c.concat([n]):null,xf(4,4,Fy.bind(null,o,n),c)}function mm(){}function Jy(n,o){var c=_n();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&sm(o,d[1])?d[0]:(c.memoizedState=[n,o],n)}function $y(n,o){var c=_n();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&sm(o,d[1]))return d[0];if(d=n(),Ya){Pi(!0);try{n()}finally{Pi(!1)}}return c.memoizedState=[d,o],d}function _m(n,o,c){return c===void 0||(Hr&1073741824)!==0&&(de&261930)===0?n.memoizedState=o:(n.memoizedState=c,n=tb(),ie.lanes|=n,Uo|=n,c)}function tv(n,o,c,d){return zn(c,o)?c:Zl.current!==null?(n=_m(n,c,d),zn(n,o)||(Sn=!0),n):(Hr&42)===0||(Hr&1073741824)!==0&&(de&261930)===0?(Sn=!0,n.memoizedState=c):(n=tb(),ie.lanes|=n,Uo|=n,o)}function ev(n,o,c,d,g){var b=W.p;W.p=b!==0&&8>b?b:8;var M=B.T,z={};B.T=z,vm(n,!1,o,c);try{var K=g(),ct=B.S;if(ct!==null&&ct(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var gt=QT(K,d);vu(n,o,gt,Yi(n))}else vu(n,o,d,Yi(n))}catch(wt){vu(n,o,{then:function(){},status:"rejected",reason:wt},Yi())}finally{W.p=b,M!==null&&z.types!==null&&(M.types=z.types),B.T=M}}function e2(){}function gm(n,o,c,d){if(n.tag!==5)throw Error(s(476));var g=nv(n).queue;ev(n,g,o,et,c===null?e2:function(){return iv(n),c(d)})}function nv(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:et},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:c},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function iv(n){var o=nv(n);o.next===null&&(o=n.alternate.memoizedState),vu(n,o.next.queue,{},Yi())}function ym(){return Wn(zu)}function sv(){return _n().memoizedState}function rv(){return _n().memoizedState}function n2(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var c=Yi();n=Ro(c);var d=Io(o,n,c);d!==null&&(Ci(d,o,c),pu(d,o,c)),o={cache:Yp()},n.payload=o;return}o=o.return}}function i2(n,o,c){var d=Yi();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Sf(n)?av(o,c):(c=su(n,o,c,d),c!==null&&(Ci(c,n,d),lv(c,o,d)))}function ov(n,o,c){var d=Yi();vu(n,o,c,d)}function vu(n,o,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Sf(n))av(o,g);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var M=o.lastRenderedState,z=b(M,c);if(g.hasEagerState=!0,g.eagerState=z,zn(z,M))return sr(n,o,g,0),Ve===null&&Pa(),!1}catch{}if(c=su(n,o,g,d),c!==null)return Ci(c,n,d),lv(c,o,d),!0}return!1}function vm(n,o,c,d){if(d={lane:2,revertLane:Km(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Sf(n)){if(o)throw Error(s(479))}else o=su(n,c,d,2),o!==null&&Ci(o,n,2)}function Sf(n){var o=n.alternate;return n===ie||o!==null&&o===ie}function av(n,o){Wl=_f=!0;var c=n.pending;c===null?o.next=o:(o.next=c.next,c.next=o),n.pending=o}function lv(n,o,c){if((c&4194048)!==0){var d=o.lanes;d&=n.pendingLanes,c|=d,o.lanes=c,Je(n,c)}}var bu={readContext:Wn,use:vf,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};bu.useEffectEvent=an;var cv={readContext:Wn,use:vf,useCallback:function(n,o){return ci().memoizedState=[n,o===void 0?null:o],n},useContext:Wn,useEffect:Wy,useImperativeHandle:function(n,o,c){c=c!=null?c.concat([n]):null,wf(4194308,4,Fy.bind(null,o,n),c)},useLayoutEffect:function(n,o){return wf(4194308,4,n,o)},useInsertionEffect:function(n,o){wf(4,2,n,o)},useMemo:function(n,o){var c=ci();o=o===void 0?null:o;var d=n();if(Ya){Pi(!0);try{n()}finally{Pi(!1)}}return c.memoizedState=[d,o],d},useReducer:function(n,o,c){var d=ci();if(c!==void 0){var g=c(o);if(Ya){Pi(!0);try{c(o)}finally{Pi(!1)}}}else g=o;return d.memoizedState=d.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},d.queue=n,n=n.dispatch=i2.bind(null,ie,n),[d.memoizedState,n]},useRef:function(n){var o=ci();return n={current:n},o.memoizedState=n},useState:function(n){n=fm(n);var o=n.queue,c=ov.bind(null,ie,o);return o.dispatch=c,[n.memoizedState,c]},useDebugValue:mm,useDeferredValue:function(n,o){var c=ci();return _m(c,n,o)},useTransition:function(){var n=fm(!1);return n=ev.bind(null,ie,n.queue,!0,!1),ci().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,c){var d=ie,g=ci();if(ce){if(c===void 0)throw Error(s(407));c=c()}else{if(c=o(),Ve===null)throw Error(s(349));(de&127)!==0||ky(d,o,c)}g.memoizedState=c;var b={value:c,getSnapshot:o};return g.queue=b,Wy(Oy.bind(null,d,b,n),[n]),d.flags|=2048,Xl(9,{destroy:void 0},Dy.bind(null,d,b,c,o),null),c},useId:function(){var n=ci(),o=Ve.identifierPrefix;if(ce){var c=kt,d=bt;c=(d&~(1<<32-Gn(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=gf++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=FT++,o="_"+o+"r_"+c.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:ym,useFormState:Vy,useActionState:Vy,useOptimistic:function(n){var o=ci();o.memoizedState=o.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=vm.bind(null,ie,!0,c),c.dispatch=o,[n,o]},useMemoCache:cm,useCacheRefresh:function(){return ci().memoizedState=n2.bind(null,ie)},useEffectEvent:function(n){var o=ci(),c={impl:n};return o.memoizedState=c,function(){if((Le&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},bm={readContext:Wn,use:vf,useCallback:Jy,useContext:Wn,useEffect:pm,useImperativeHandle:Ky,useInsertionEffect:Xy,useLayoutEffect:Qy,useMemo:$y,useReducer:bf,useRef:Zy,useState:function(){return bf(Vr)},useDebugValue:mm,useDeferredValue:function(n,o){var c=_n();return tv(c,ze.memoizedState,n,o)},useTransition:function(){var n=bf(Vr)[0],o=_n().memoizedState;return[typeof n=="boolean"?n:yu(n),o]},useSyncExternalStore:My,useId:sv,useHostTransitionStatus:ym,useFormState:qy,useActionState:qy,useOptimistic:function(n,o){var c=_n();return Ny(c,ze,n,o)},useMemoCache:cm,useCacheRefresh:rv};bm.useEffectEvent=Yy;var uv={readContext:Wn,use:vf,useCallback:Jy,useContext:Wn,useEffect:pm,useImperativeHandle:Ky,useInsertionEffect:Xy,useLayoutEffect:Qy,useMemo:$y,useReducer:hm,useRef:Zy,useState:function(){return hm(Vr)},useDebugValue:mm,useDeferredValue:function(n,o){var c=_n();return ze===null?_m(c,n,o):tv(c,ze.memoizedState,n,o)},useTransition:function(){var n=hm(Vr)[0],o=_n().memoizedState;return[typeof n=="boolean"?n:yu(n),o]},useSyncExternalStore:My,useId:sv,useHostTransitionStatus:ym,useFormState:Gy,useActionState:Gy,useOptimistic:function(n,o){var c=_n();return ze!==null?Ny(c,ze,n,o):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:cm,useCacheRefresh:rv};uv.useEffectEvent=Yy;function wm(n,o,c,d){o=n.memoizedState,c=c(d,o),c=c==null?o:y({},o,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var xm={enqueueSetState:function(n,o,c){n=n._reactInternals;var d=Yi(),g=Ro(d);g.payload=o,c!=null&&(g.callback=c),o=Io(n,g,d),o!==null&&(Ci(o,n,d),pu(o,n,d))},enqueueReplaceState:function(n,o,c){n=n._reactInternals;var d=Yi(),g=Ro(d);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=Io(n,g,d),o!==null&&(Ci(o,n,d),pu(o,n,d))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var c=Yi(),d=Ro(c);d.tag=2,o!=null&&(d.callback=o),o=Io(n,d,c),o!==null&&(Ci(o,n,c),pu(o,n,c))}};function hv(n,o,c,d,g,b,M){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,b,M):o.prototype&&o.prototype.isPureReactComponent?!Eo(c,d)||!Eo(g,b):!0}function fv(n,o,c,d){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==n&&xm.enqueueReplaceState(o,o.state,null)}function Xa(n,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(n=n.defaultProps){c===o&&(c=y({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}function dv(n){za(n)}function pv(n){console.error(n)}function mv(n){za(n)}function Tf(n,o){try{var c=n.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function _v(n,o,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Sm(n,o,c){return c=Ro(c),c.tag=3,c.payload={element:null},c.callback=function(){Tf(n,o)},c}function gv(n){return n=Ro(n),n.tag=3,n}function yv(n,o,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;n.payload=function(){return g(b)},n.callback=function(){_v(o,c,d)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(n.callback=function(){_v(o,c,d),typeof g!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var z=d.stack;this.componentDidCatch(d.value,{componentStack:z!==null?z:""})})}function s2(n,o,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&Hl(o,c,g,!0),c=ji.current,c!==null){switch(c.tag){case 31:case 13:return hs===null?zf():c.alternate===null&&ln===0&&(ln=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===hf?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Xm(n,d,g)),!1;case 22:return c.flags|=65536,d===hf?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Xm(n,d,g)),!1}throw Error(s(435,c.tag))}return Xm(n,d,g),zf(),!1}if(ce)return o=ji.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,d!==Ul&&(n=Error(s(422),{cause:d}),Ha(h(n,c)))):(d!==Ul&&(o=Error(s(423),{cause:d}),Ha(h(o,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,d=h(d,c),g=Sm(n.stateNode,d,g),$p(n,g),ln!==4&&(ln=2)),!1;var b=Error(s(520),{cause:d});if(b=h(b,c),Lu===null?Lu=[b]:Lu.push(b),ln!==4&&(ln=2),o===null)return!0;d=h(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=Sm(c.stateNode,d,n),$p(c,n),!1;case 1:if(o=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ho===null||!Ho.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=gv(g),yv(g,n,c,d),$p(c,g),!1}c=c.return}while(c!==null);return!1}var Tm=Error(s(461)),Sn=!1;function Yn(n,o,c,d){o.child=n===null?xy(o,null,c,d):Wa(o,n.child,c,d)}function vv(n,o,c,d,g){c=c.render;var b=o.ref;if("ref"in d){var M={};for(var z in d)z!=="ref"&&(M[z]=d[z])}else M=d;return qa(o),d=rm(n,o,c,M,b,g),z=om(),n!==null&&!Sn?(am(n,o,g),qr(n,o,g)):(ce&&z&&Mn(o),o.flags|=1,Yn(n,o,d,g),o.child)}function bv(n,o,c,d,g){if(n===null){var b=c.type;return typeof b=="function"&&!Pl(b)&&b.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=b,wv(n,o,b,d,g)):(n=Ua(c.type,null,d,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(b=n.child,!Om(n,g)){var M=b.memoizedProps;if(c=c.compare,c=c!==null?c:Eo,c(M,d)&&n.ref===o.ref)return qr(n,o,g)}return o.flags|=1,n=us(b,d),n.ref=o.ref,n.return=o,o.child=n}function wv(n,o,c,d,g){if(n!==null){var b=n.memoizedProps;if(Eo(b,d)&&n.ref===o.ref)if(Sn=!1,o.pendingProps=d=b,Om(n,g))(n.flags&131072)!==0&&(Sn=!0);else return o.lanes=n.lanes,qr(n,o,g)}return Am(n,o,c,d,g)}function xv(n,o,c,d){var g=d.children,b=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,n!==null){for(d=o.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~b}else d=0,o.child=null;return Sv(n,o,b,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&cf(o,b!==null?b.cachePool:null),b!==null?Ay(o,b):em(),Ey(o);else return d=o.lanes=536870912,Sv(n,o,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(cf(o,b.cachePool),Ay(o,b),zo(),o.memoizedState=null):(n!==null&&cf(o,null),em(),zo());return Yn(n,o,g,c),o.child}function wu(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Sv(n,o,c,d,g){var b=Qp();return b=b===null?null:{parent:wn._currentValue,pool:b},o.memoizedState={baseLanes:c,cachePool:b},n!==null&&cf(o,null),em(),Ey(o),n!==null&&Hl(n,o,d,!0),o.childLanes=g,null}function Af(n,o){return o=Cf({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function Tv(n,o,c){return Wa(o,n.child,null,c),n=Af(o,o.pendingProps),n.flags|=2,Gi(o),o.memoizedState=null,n}function r2(n,o,c){var d=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(ce){if(d.mode==="hidden")return n=Af(o,d),o.lanes=536870912,wu(null,n);if(im(o),(n=Te)?(n=zb(n,xi),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ut!==null?{id:bt,overflow:kt}:null,retryLane:536870912,hydrationErrors:null},c=ou(n),c.return=o,o.child=c,Se=o,Te=null)):n=null,n===null)throw or(o);return o.lanes=536870912,null}return Af(o,d)}var b=n.memoizedState;if(b!==null){var M=b.dehydrated;if(im(o),g)if(o.flags&256)o.flags&=-257,o=Tv(n,o,c);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(Sn||Hl(n,o,c,!1),g=(c&n.childLanes)!==0,Sn||g){if(d=Ve,d!==null&&(M=Bi(d,c),M!==0&&M!==b.retryLane))throw b.retryLane=M,cs(n,M),Ci(d,n,M),Tm;zf(),o=Tv(n,o,c)}else n=b.treeContext,Te=fs(M.nextSibling),Se=o,ce=!0,rr=null,xi=!1,n!==null&&li(o,n),o=Af(o,d),o.flags|=4096;return o}return n=us(n.child,{mode:d.mode,children:d.children}),n.ref=o.ref,o.child=n,n.return=o,n}function Ef(n,o){var c=o.ref;if(c===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(n===null||n.ref!==c)&&(o.flags|=4194816)}}function Am(n,o,c,d,g){return qa(o),c=rm(n,o,c,d,void 0,g),d=om(),n!==null&&!Sn?(am(n,o,g),qr(n,o,g)):(ce&&d&&Mn(o),o.flags|=1,Yn(n,o,c,g),o.child)}function Av(n,o,c,d,g,b){return qa(o),o.updateQueue=null,c=Ly(o,d,c,g),Cy(n),d=om(),n!==null&&!Sn?(am(n,o,b),qr(n,o,b)):(ce&&d&&Mn(o),o.flags|=1,Yn(n,o,c,b),o.child)}function Ev(n,o,c,d,g){if(qa(o),o.stateNode===null){var b=zr,M=c.contextType;typeof M=="object"&&M!==null&&(b=Wn(M)),b=new c(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=xm,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Kp(o),M=c.contextType,b.context=typeof M=="object"&&M!==null?Wn(M):zr,b.state=o.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(wm(o,c,M,d),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(M=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),M!==b.state&&xm.enqueueReplaceState(b,b.state,null),_u(o,d,b,g),mu(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(n===null){b=o.stateNode;var z=o.memoizedProps,K=Xa(c,z);b.props=K;var ct=b.context,gt=c.contextType;M=zr,typeof gt=="object"&&gt!==null&&(M=Wn(gt));var wt=c.getDerivedStateFromProps;gt=typeof wt=="function"||typeof b.getSnapshotBeforeUpdate=="function",z=o.pendingProps!==z,gt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(z||ct!==M)&&fv(o,b,d,M),Oo=!1;var ht=o.memoizedState;b.state=ht,_u(o,d,b,g),mu(),ct=o.memoizedState,z||ht!==ct||Oo?(typeof wt=="function"&&(wm(o,c,wt,d),ct=o.memoizedState),(K=Oo||hv(o,c,K,d,ht,ct,M))?(gt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=ct),b.props=d,b.state=ct,b.context=M,d=K):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,Jp(n,o),M=o.memoizedProps,gt=Xa(c,M),b.props=gt,wt=o.pendingProps,ht=b.context,ct=c.contextType,K=zr,typeof ct=="object"&&ct!==null&&(K=Wn(ct)),z=c.getDerivedStateFromProps,(ct=typeof z=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M!==wt||ht!==K)&&fv(o,b,d,K),Oo=!1,ht=o.memoizedState,b.state=ht,_u(o,d,b,g),mu();var ft=o.memoizedState;M!==wt||ht!==ft||Oo||n!==null&&n.dependencies!==null&&af(n.dependencies)?(typeof z=="function"&&(wm(o,c,z,d),ft=o.memoizedState),(gt=Oo||hv(o,c,gt,d,ht,ft,K)||n!==null&&n.dependencies!==null&&af(n.dependencies))?(ct||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ft,K),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ft,K)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ft),b.props=d,b.state=ft,b.context=K,d=gt):(typeof b.componentDidUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ht===n.memoizedState||(o.flags|=1024),d=!1)}return b=d,Ef(n,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,n!==null&&d?(o.child=Wa(o,n.child,null,g),o.child=Wa(o,null,c,g)):Yn(n,o,c,g),o.memoizedState=b.state,n=o.child):n=qr(n,o,g),n}function Cv(n,o,c,d){return Br(),o.flags|=256,Yn(n,o,c,d),o.child}var Em={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cm(n){return{baseLanes:n,cachePool:_y()}}function Lm(n,o,c){return n=n!==null?n.childLanes&~c:0,o&&(n|=Wi),n}function Lv(n,o,c){var d=o.pendingProps,g=!1,b=(o.flags&128)!==0,M;if((M=b)||(M=n!==null&&n.memoizedState===null?!1:(mn.current&2)!==0),M&&(g=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,n===null){if(ce){if(g?No(o):zo(),(n=Te)?(n=zb(n,xi),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:ut!==null?{id:bt,overflow:kt}:null,retryLane:536870912,hydrationErrors:null},c=ou(n),c.return=o,o.child=c,Se=o,Te=null)):n=null,n===null)throw or(o);return u_(n)?o.lanes=32:o.lanes=536870912,null}var z=d.children;return d=d.fallback,g?(zo(),g=o.mode,z=Cf({mode:"hidden",children:z},g),d=Pr(d,g,c,null),z.return=o,d.return=o,z.sibling=d,o.child=z,d=o.child,d.memoizedState=Cm(c),d.childLanes=Lm(n,M,c),o.memoizedState=Em,wu(null,d)):(No(o),Mm(o,z))}var K=n.memoizedState;if(K!==null&&(z=K.dehydrated,z!==null)){if(b)o.flags&256?(No(o),o.flags&=-257,o=km(n,o,c)):o.memoizedState!==null?(zo(),o.child=n.child,o.flags|=128,o=null):(zo(),z=d.fallback,g=o.mode,d=Cf({mode:"visible",children:d.children},g),z=Pr(z,g,c,null),z.flags|=2,d.return=o,z.return=o,d.sibling=z,o.child=d,Wa(o,n.child,null,c),d=o.child,d.memoizedState=Cm(c),d.childLanes=Lm(n,M,c),o.memoizedState=Em,o=wu(null,d));else if(No(o),u_(z)){if(M=z.nextSibling&&z.nextSibling.dataset,M)var ct=M.dgst;M=ct,d=Error(s(419)),d.stack="",d.digest=M,Ha({value:d,source:null,stack:null}),o=km(n,o,c)}else if(Sn||Hl(n,o,c,!1),M=(c&n.childLanes)!==0,Sn||M){if(M=Ve,M!==null&&(d=Bi(M,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,cs(n,d),Ci(M,n,d),Tm;c_(z)||zf(),o=km(n,o,c)}else c_(z)?(o.flags|=192,o.child=n.child,o=null):(n=K.treeContext,Te=fs(z.nextSibling),Se=o,ce=!0,rr=null,xi=!1,n!==null&&li(o,n),o=Mm(o,d.children),o.flags|=4096);return o}return g?(zo(),z=d.fallback,g=o.mode,K=n.child,ct=K.sibling,d=us(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,ct!==null?z=us(ct,z):(z=Pr(z,g,c,null),z.flags|=2),z.return=o,d.return=o,d.sibling=z,o.child=d,wu(null,d),d=o.child,z=n.child.memoizedState,z===null?z=Cm(c):(g=z.cachePool,g!==null?(K=wn._currentValue,g=g.parent!==K?{parent:K,pool:K}:g):g=_y(),z={baseLanes:z.baseLanes|c,cachePool:g}),d.memoizedState=z,d.childLanes=Lm(n,M,c),o.memoizedState=Em,wu(n.child,d)):(No(o),c=n.child,n=c.sibling,c=us(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,n!==null&&(M=o.deletions,M===null?(o.deletions=[n],o.flags|=16):M.push(n)),o.child=c,o.memoizedState=null,c)}function Mm(n,o){return o=Cf({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function Cf(n,o){return n=Jn(22,n,null,o),n.lanes=0,n}function km(n,o,c){return Wa(o,n.child,null,c),n=Mm(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Mv(n,o,c){n.lanes|=o;var d=n.alternate;d!==null&&(d.lanes|=o),Zp(n.return,o,c)}function Dm(n,o,c,d,g,b){var M=n.memoizedState;M===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:b}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=d,M.tail=c,M.tailMode=g,M.treeForkCount=b)}function kv(n,o,c){var d=o.pendingProps,g=d.revealOrder,b=d.tail;d=d.children;var M=mn.current,z=(M&2)!==0;if(z?(M=M&1|2,o.flags|=128):M&=1,ot(mn,M),Yn(n,o,d,c),d=ce?N:0,!z&&n!==null&&(n.flags&128)!==0)t:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mv(n,c,o);else if(n.tag===19)Mv(n,c,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break t;for(;n.sibling===null;){if(n.return===null||n.return===o)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(c=o.child,g=null;c!==null;)n=c.alternate,n!==null&&mf(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Dm(o,!1,g,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&mf(n)===null){o.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}Dm(o,!0,c,null,b,d);break;case"together":Dm(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function qr(n,o,c){if(n!==null&&(o.dependencies=n.dependencies),Uo|=o.lanes,(c&o.childLanes)===0)if(n!==null){if(Hl(n,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,c=us(n,n.pendingProps),o.child=c,c.return=o;n.sibling!==null;)n=n.sibling,c=c.sibling=us(n,n.pendingProps),c.return=o;c.sibling=null}return o.child}function Om(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&af(n)))}function o2(n,o,c){switch(o.tag){case 3:Et(o,o.stateNode.containerInfo),Do(o,wn,n.memoizedState.cache),Br();break;case 27:case 5:Me(o);break;case 4:Et(o,o.stateNode.containerInfo);break;case 10:Do(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,im(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(No(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Lv(n,o,c):(No(o),n=qr(n,o,c),n!==null?n.sibling:null);No(o);break;case 19:var g=(n.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(Hl(n,o,c,!1),d=(c&o.childLanes)!==0),g){if(d)return kv(n,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ot(mn,mn.current),d)break;return null;case 22:return o.lanes=0,xv(n,o,c,o.pendingProps);case 24:Do(o,wn,n.memoizedState.cache)}return qr(n,o,c)}function Dv(n,o,c){if(n!==null)if(n.memoizedProps!==o.pendingProps)Sn=!0;else{if(!Om(n,c)&&(o.flags&128)===0)return Sn=!1,o2(n,o,c);Sn=(n.flags&131072)!==0}else Sn=!1,ce&&(o.flags&1048576)!==0&&se(o,N,o.index);switch(o.lanes=0,o.tag){case 16:t:{var d=o.pendingProps;if(n=Ga(o.elementType),o.type=n,typeof n=="function")Pl(n)?(d=Xa(n,d),o.tag=1,o=Ev(null,o,n,d,c)):(o.tag=0,o=Am(null,o,n,d,c));else{if(n!=null){var g=n.$$typeof;if(g===Q){o.tag=11,o=vv(null,o,n,d,c);break t}else if(g===G){o.tag=14,o=bv(null,o,n,d,c);break t}}throw o=J(n)||n,Error(s(306,o,""))}}return o;case 0:return Am(n,o,o.type,o.pendingProps,c);case 1:return d=o.type,g=Xa(d,o.pendingProps),Ev(n,o,d,g,c);case 3:t:{if(Et(o,o.stateNode.containerInfo),n===null)throw Error(s(387));d=o.pendingProps;var b=o.memoizedState;g=b.element,Jp(n,o),_u(o,d,null,c);var M=o.memoizedState;if(d=M.cache,Do(o,wn,d),d!==b.cache&&Wp(o,[wn],c,!0),mu(),d=M.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Cv(n,o,d,c);break t}else if(d!==g){g=h(Error(s(424)),o),Ha(g),o=Cv(n,o,d,c);break t}else for(n=o.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Te=fs(n.firstChild),Se=o,ce=!0,rr=null,xi=!0,c=xy(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Br(),d===g){o=qr(n,o,c);break t}Yn(n,o,d,c)}o=o.child}return o;case 26:return Ef(n,o),n===null?(c=qb(o.type,null,o.pendingProps,null))?o.memoizedState=c:ce||(c=o.type,n=o.pendingProps,d=jf(_t.current).createElement(c),d[vn]=o,d[Nn]=n,Xn(d,c,n),bn(d),o.stateNode=d):o.memoizedState=qb(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Me(o),n===null&&ce&&(d=o.stateNode=Ub(o.type,o.pendingProps,_t.current),Se=o,xi=!0,g=Te,Go(o.type)?(h_=g,Te=fs(d.firstChild)):Te=g),Yn(n,o,o.pendingProps.children,c),Ef(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&ce&&((g=d=Te)&&(d=z2(d,o.type,o.pendingProps,xi),d!==null?(o.stateNode=d,Se=o,Te=fs(d.firstChild),xi=!1,g=!0):g=!1),g||or(o)),Me(o),g=o.type,b=o.pendingProps,M=n!==null?n.memoizedProps:null,d=b.children,o_(g,b)?d=null:M!==null&&o_(g,M)&&(o.flags|=32),o.memoizedState!==null&&(g=rm(n,o,KT,null,null,c),zu._currentValue=g),Ef(n,o),Yn(n,o,d,c),o.child;case 6:return n===null&&ce&&((n=c=Te)&&(c=P2(c,o.pendingProps,xi),c!==null?(o.stateNode=c,Se=o,Te=null,n=!0):n=!1),n||or(o)),null;case 13:return Lv(n,o,c);case 4:return Et(o,o.stateNode.containerInfo),d=o.pendingProps,n===null?o.child=Wa(o,null,d,c):Yn(n,o,d,c),o.child;case 11:return vv(n,o,o.type,o.pendingProps,c);case 7:return Yn(n,o,o.pendingProps,c),o.child;case 8:return Yn(n,o,o.pendingProps.children,c),o.child;case 12:return Yn(n,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,Do(o,o.type,d.value),Yn(n,o,d.children,c),o.child;case 9:return g=o.type._context,d=o.pendingProps.children,qa(o),g=Wn(g),d=d(g),o.flags|=1,Yn(n,o,d,c),o.child;case 14:return bv(n,o,o.type,o.pendingProps,c);case 15:return wv(n,o,o.type,o.pendingProps,c);case 19:return kv(n,o,c);case 31:return r2(n,o,c);case 22:return xv(n,o,c,o.pendingProps);case 24:return qa(o),d=Wn(wn),n===null?(g=Qp(),g===null&&(g=Ve,b=Yp(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),o.memoizedState={parent:d,cache:g},Kp(o),Do(o,wn,g)):((n.lanes&c)!==0&&(Jp(n,o),_u(o,null,null,c),mu()),g=n.memoizedState,b=o.memoizedState,g.parent!==d?(g={parent:d,cache:d},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Do(o,wn,d)):(d=b.cache,Do(o,wn,d),d!==g.cache&&Wp(o,[wn],c,!0))),Yn(n,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function jr(n){n.flags|=4}function Rm(n,o,c,d,g){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(sb())n.flags|=8192;else throw Za=hf,Fp}else n.flags&=-16777217}function Ov(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Yb(o))if(sb())n.flags|=8192;else throw Za=hf,Fp}function Lf(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?Ot():536870912,n.lanes|=o,Jl|=o)}function xu(n,o){if(!ce)switch(n.tailMode){case"hidden":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ye(n){var o=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(o)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=c,o}function a2(n,o,c){var d=o.pendingProps;switch(on(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(o),null;case 1:return Ye(o),null;case 3:return c=o.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Ur(wn),ne(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Rs(o)?jr(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,cu())),Ye(o),null;case 26:var g=o.type,b=o.memoizedState;return n===null?(jr(o),b!==null?(Ye(o),Ov(o,b)):(Ye(o),Rm(o,g,null,d,c))):b?b!==n.memoizedState?(jr(o),Ye(o),Ov(o,b)):(Ye(o),o.flags&=-16777217):(n=n.memoizedProps,n!==d&&jr(o),Ye(o),Rm(o,g,n,d,c)),null;case 27:if(Re(o),c=_t.current,g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==d&&jr(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return Ye(o),null}n=dt.current,Rs(o)?lu(o):(n=Ub(g,d,c),o.stateNode=n,jr(o))}return Ye(o),null;case 5:if(Re(o),g=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==d&&jr(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return Ye(o),null}if(b=dt.current,Rs(o))lu(o);else{var M=jf(_t.current);switch(b){case 1:b=M.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=M.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=M.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?M.createElement("select",{is:d.is}):M.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?M.createElement(g,{is:d.is}):M.createElement(g)}}b[vn]=o,b[Nn]=d;t:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)b.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break t;for(;M.sibling===null;){if(M.return===null||M.return===o)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=b;t:switch(Xn(b,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&jr(o)}}return Ye(o),Rm(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,c),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==d&&jr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(s(166));if(n=_t.current,Rs(o)){if(n=o.stateNode,c=o.memoizedProps,d=null,g=Se,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}n[vn]=o,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Lb(n.nodeValue,c)),n||or(o,!0)}else n=jf(n).createTextNode(d),n[vn]=o,o.stateNode=n}return Ye(o),null;case 31:if(c=o.memoizedState,n===null||n.memoizedState!==null){if(d=Rs(o),c!==null){if(n===null){if(!d)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[vn]=o}else Br(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ye(o),n=!1}else c=cu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return o.flags&256?(Gi(o),o):(Gi(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Ye(o),null;case 13:if(d=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Rs(o),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[vn]=o}else Br(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ye(o),g=!1}else g=cu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Gi(o),o):(Gi(o),null)}return Gi(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,n=n!==null&&n.memoizedState!==null,c&&(d=o.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)),c!==n&&c&&(o.child.flags|=8192),Lf(o,o.updateQueue),Ye(o),null);case 4:return ne(),n===null&&e_(o.stateNode.containerInfo),Ye(o),null;case 10:return Ur(o.type),Ye(o),null;case 19:if(X(mn),d=o.memoizedState,d===null)return Ye(o),null;if(g=(o.flags&128)!==0,b=d.rendering,b===null)if(g)xu(d,!1);else{if(ln!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(b=mf(n),b!==null){for(o.flags|=128,xu(d,!1),n=b.updateQueue,o.updateQueue=n,Lf(o,n),o.subtreeFlags=0,n=c,c=o.child;c!==null;)ru(c,n),c=c.sibling;return ot(mn,mn.current&1|2),ce&&Zt(o,d.treeForkCount),o.child}n=n.sibling}d.tail!==null&&dn()>Rf&&(o.flags|=128,g=!0,xu(d,!1),o.lanes=4194304)}else{if(!g)if(n=mf(b),n!==null){if(o.flags|=128,g=!0,n=n.updateQueue,o.updateQueue=n,Lf(o,n),xu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!ce)return Ye(o),null}else 2*dn()-d.renderingStartTime>Rf&&c!==536870912&&(o.flags|=128,g=!0,xu(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(n=d.last,n!==null?n.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=dn(),n.sibling=null,c=mn.current,ot(mn,g?c&1|2:c&1),ce&&Zt(o,d.treeForkCount),n):(Ye(o),null);case 22:case 23:return Gi(o),nm(),d=o.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(Ye(o),o.subtreeFlags&6&&(o.flags|=8192)):Ye(o),c=o.updateQueue,c!==null&&Lf(o,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),n!==null&&X(ja),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ur(wn),Ye(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function l2(n,o){switch(on(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Ur(wn),ne(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return Re(o),null;case 31:if(o.memoizedState!==null){if(Gi(o),o.alternate===null)throw Error(s(340));Br()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Gi(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Br()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return X(mn),null;case 4:return ne(),null;case 10:return Ur(o.type),null;case 22:case 23:return Gi(o),nm(),n!==null&&X(ja),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return Ur(wn),null;case 25:return null;default:return null}}function Rv(n,o){switch(on(o),o.tag){case 3:Ur(wn),ne();break;case 26:case 27:case 5:Re(o);break;case 4:ne();break;case 31:o.memoizedState!==null&&Gi(o);break;case 13:Gi(o);break;case 19:X(mn);break;case 10:Ur(o.type);break;case 22:case 23:Gi(o),nm(),n!==null&&X(ja);break;case 24:Ur(wn)}}function Su(n,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){d=void 0;var b=c.create,M=c.inst;d=b(),M.destroy=d}c=c.next}while(c!==g)}}catch(z){Oe(o,o.return,z)}}function Po(n,o,c){try{var d=o.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&n)===n){var M=d.inst,z=M.destroy;if(z!==void 0){M.destroy=void 0,g=o;var K=c,ct=z;try{ct()}catch(gt){Oe(g,K,gt)}}}d=d.next}while(d!==b)}}catch(gt){Oe(o,o.return,gt)}}function Iv(n){var o=n.updateQueue;if(o!==null){var c=n.stateNode;try{Ty(o,c)}catch(d){Oe(n,n.return,d)}}}function Nv(n,o,c){c.props=Xa(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Oe(n,o,d)}}function Tu(n,o){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(g){Oe(n,o,g)}}function lr(n,o){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Oe(n,o,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Oe(n,o,g)}else c.current=null}function zv(n){var o=n.type,c=n.memoizedProps,d=n.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Oe(n,n.return,g)}}function Im(n,o,c){try{var d=n.stateNode;k2(d,n.type,c,o),d[Nn]=o}catch(g){Oe(n,n.return,g)}}function Pv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Go(n.type)||n.tag===4}function Nm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Pv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Go(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zm(n,o,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(n),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=yi));else if(d!==4&&(d===27&&Go(n.type)&&(c=n.stateNode,o=null),n=n.child,n!==null))for(zm(n,o,c),n=n.sibling;n!==null;)zm(n,o,c),n=n.sibling}function Mf(n,o,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?c.insertBefore(n,o):c.appendChild(n);else if(d!==4&&(d===27&&Go(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(Mf(n,o,c),n=n.sibling;n!==null;)Mf(n,o,c),n=n.sibling}function Bv(n){var o=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Xn(o,d,c),o[vn]=n,o[Nn]=c}catch(b){Oe(n,n.return,b)}}var Gr=!1,Tn=!1,Pm=!1,Uv=typeof WeakSet=="function"?WeakSet:Set,Bn=null;function c2(n,o){if(n=n.containerInfo,s_=Ff,n=Oa(n),tr(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else t:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break t}var M=0,z=-1,K=-1,ct=0,gt=0,wt=n,ht=null;e:for(;;){for(var ft;wt!==c||g!==0&&wt.nodeType!==3||(z=M+g),wt!==b||d!==0&&wt.nodeType!==3||(K=M+d),wt.nodeType===3&&(M+=wt.nodeValue.length),(ft=wt.firstChild)!==null;)ht=wt,wt=ft;for(;;){if(wt===n)break e;if(ht===c&&++ct===g&&(z=M),ht===b&&++gt===d&&(K=M),(ft=wt.nextSibling)!==null)break;wt=ht,ht=wt.parentNode}wt=ft}c=z===-1||K===-1?null:{start:z,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(r_={focusedElem:n,selectionRange:c},Ff=!1,Bn=o;Bn!==null;)if(o=Bn,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Bn=n;else for(;Bn!==null;){switch(o=Bn,b=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)g=n[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,c=o,g=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var Pt=Xa(c.type,g);n=d.getSnapshotBeforeUpdate(Pt,b),d.__reactInternalSnapshotBeforeUpdate=n}catch(Xt){Oe(c,c.return,Xt)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,c=n.nodeType,c===9)l_(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":l_(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,Bn=n;break}Bn=o.return}}function Hv(n,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Wr(n,c),d&4&&Su(5,c);break;case 1:if(Wr(n,c),d&4)if(n=c.stateNode,o===null)try{n.componentDidMount()}catch(M){Oe(c,c.return,M)}else{var g=Xa(c.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(g,o,n.__reactInternalSnapshotBeforeUpdate)}catch(M){Oe(c,c.return,M)}}d&64&&Iv(c),d&512&&Tu(c,c.return);break;case 3:if(Wr(n,c),d&64&&(n=c.updateQueue,n!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Ty(n,o)}catch(M){Oe(c,c.return,M)}}break;case 27:o===null&&d&4&&Bv(c);case 26:case 5:Wr(n,c),o===null&&d&4&&zv(c),d&512&&Tu(c,c.return);break;case 12:Wr(n,c);break;case 31:Wr(n,c),d&4&&jv(n,c);break;case 13:Wr(n,c),d&4&&Gv(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=y2.bind(null,c),B2(n,c))));break;case 22:if(d=c.memoizedState!==null||Gr,!d){o=o!==null&&o.memoizedState!==null||Tn,g=Gr;var b=Tn;Gr=d,(Tn=o)&&!b?Yr(n,c,(c.subtreeFlags&8772)!==0):Wr(n,c),Gr=g,Tn=b}break;case 30:break;default:Wr(n,c)}}function Vv(n){var o=n.alternate;o!==null&&(n.alternate=null,Vv(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&Vc(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var tn=null,Si=!1;function Zr(n,o,c){for(c=c.child;c!==null;)qv(n,o,c),c=c.sibling}function qv(n,o,c){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Es,c)}catch{}switch(c.tag){case 26:Tn||lr(c,o),Zr(n,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Tn||lr(c,o);var d=tn,g=Si;Go(c.type)&&(tn=c.stateNode,Si=!1),Zr(n,o,c),Ru(c.stateNode),tn=d,Si=g;break;case 5:Tn||lr(c,o);case 6:if(d=tn,g=Si,tn=null,Zr(n,o,c),tn=d,Si=g,tn!==null)if(Si)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(c.stateNode)}catch(b){Oe(c,o,b)}else try{tn.removeChild(c.stateNode)}catch(b){Oe(c,o,b)}break;case 18:tn!==null&&(Si?(n=tn,Ib(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),oc(n)):Ib(tn,c.stateNode));break;case 4:d=tn,g=Si,tn=c.stateNode.containerInfo,Si=!0,Zr(n,o,c),tn=d,Si=g;break;case 0:case 11:case 14:case 15:Po(2,c,o),Tn||Po(4,c,o),Zr(n,o,c);break;case 1:Tn||(lr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Nv(c,o,d)),Zr(n,o,c);break;case 21:Zr(n,o,c);break;case 22:Tn=(d=Tn)||c.memoizedState!==null,Zr(n,o,c),Tn=d;break;default:Zr(n,o,c)}}function jv(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{oc(n)}catch(c){Oe(o,o.return,c)}}}function Gv(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{oc(n)}catch(c){Oe(o,o.return,c)}}function u2(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new Uv),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new Uv),o;default:throw Error(s(435,n.tag))}}function kf(n,o){var c=u2(n);o.forEach(function(d){if(!c.has(d)){c.add(d);var g=v2.bind(null,n,d);d.then(g,g)}})}function Ti(n,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],b=n,M=o,z=M;t:for(;z!==null;){switch(z.tag){case 27:if(Go(z.type)){tn=z.stateNode,Si=!1;break t}break;case 5:tn=z.stateNode,Si=!1;break t;case 3:case 4:tn=z.stateNode.containerInfo,Si=!0;break t}z=z.return}if(tn===null)throw Error(s(160));qv(b,M,g),tn=null,Si=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Zv(o,n),o=o.sibling}var Ns=null;function Zv(n,o){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ti(o,n),Ai(n),d&4&&(Po(3,n,n.return),Su(3,n),Po(5,n,n.return));break;case 1:Ti(o,n),Ai(n),d&512&&(Tn||c===null||lr(c,c.return)),d&64&&Gr&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Ns;if(Ti(o,n),Ai(n),d&512&&(Tn||c===null||lr(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){t:{d=n.type,c=n.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[_a]||b[vn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),Xn(b,d,c),b[vn]=n,bn(b),d=b;break t;case"link":var M=Zb("link","href",g).get(d+(c.href||""));if(M){for(var z=0;z<M.length;z++)if(b=M[z],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(z,1);break e}}b=g.createElement(d),Xn(b,d,c),g.head.appendChild(b);break;case"meta":if(M=Zb("meta","content",g).get(d+(c.content||""))){for(z=0;z<M.length;z++)if(b=M[z],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(z,1);break e}}b=g.createElement(d),Xn(b,d,c),g.head.appendChild(b);break;default:throw Error(s(468,d))}b[vn]=n,bn(b),d=b}n.stateNode=d}else Wb(g,n.type,n.stateNode);else n.stateNode=Gb(g,d,n.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?Wb(g,n.type,n.stateNode):Gb(g,d,n.memoizedProps)):d===null&&n.stateNode!==null&&Im(n,n.memoizedProps,c.memoizedProps)}break;case 27:Ti(o,n),Ai(n),d&512&&(Tn||c===null||lr(c,c.return)),c!==null&&d&4&&Im(n,n.memoizedProps,c.memoizedProps);break;case 5:if(Ti(o,n),Ai(n),d&512&&(Tn||c===null||lr(c,c.return)),n.flags&32){g=n.stateNode;try{is(g,"")}catch(Pt){Oe(n,n.return,Pt)}}d&4&&n.stateNode!=null&&(g=n.memoizedProps,Im(n,g,c!==null?c.memoizedProps:g)),d&1024&&(Pm=!0);break;case 6:if(Ti(o,n),Ai(n),d&4){if(n.stateNode===null)throw Error(s(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(Pt){Oe(n,n.return,Pt)}}break;case 3:if(Wf=null,g=Ns,Ns=Gf(o.containerInfo),Ti(o,n),Ns=g,Ai(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{oc(o.containerInfo)}catch(Pt){Oe(n,n.return,Pt)}Pm&&(Pm=!1,Wv(n));break;case 4:d=Ns,Ns=Gf(n.stateNode.containerInfo),Ti(o,n),Ai(n),Ns=d;break;case 12:Ti(o,n),Ai(n);break;case 31:Ti(o,n),Ai(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,kf(n,d)));break;case 13:Ti(o,n),Ai(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Of=dn()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,kf(n,d)));break;case 22:g=n.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,ct=Gr,gt=Tn;if(Gr=ct||g,Tn=gt||K,Ti(o,n),Tn=gt,Gr=ct,Ai(n),d&8192)t:for(o=n.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||K||Gr||Tn||Qa(n)),c=null,o=n;;){if(o.tag===5||o.tag===26){if(c===null){K=c=o;try{if(b=K.stateNode,g)M=b.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{z=K.stateNode;var wt=K.memoizedProps.style,ht=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;z.style.display=ht==null||typeof ht=="boolean"?"":(""+ht).trim()}}catch(Pt){Oe(K,K.return,Pt)}}}else if(o.tag===6){if(c===null){K=o;try{K.stateNode.nodeValue=g?"":K.memoizedProps}catch(Pt){Oe(K,K.return,Pt)}}}else if(o.tag===18){if(c===null){K=o;try{var ft=K.stateNode;g?Nb(ft,!0):Nb(K.stateNode,!1)}catch(Pt){Oe(K,K.return,Pt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break t;for(;o.sibling===null;){if(o.return===null||o.return===n)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,kf(n,c))));break;case 19:Ti(o,n),Ai(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,kf(n,d)));break;case 30:break;case 21:break;default:Ti(o,n),Ai(n)}}function Ai(n){var o=n.flags;if(o&2){try{for(var c,d=n.return;d!==null;){if(Pv(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var g=c.stateNode,b=Nm(n);Mf(n,b,g);break;case 5:var M=c.stateNode;c.flags&32&&(is(M,""),c.flags&=-33);var z=Nm(n);Mf(n,z,M);break;case 3:case 4:var K=c.stateNode.containerInfo,ct=Nm(n);zm(n,ct,K);break;default:throw Error(s(161))}}catch(gt){Oe(n,n.return,gt)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Wv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;Wv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Wr(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Hv(n,o.alternate,o),o=o.sibling}function Qa(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:Po(4,o,o.return),Qa(o);break;case 1:lr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Nv(o,o.return,c),Qa(o);break;case 27:Ru(o.stateNode);case 26:case 5:lr(o,o.return),Qa(o);break;case 22:o.memoizedState===null&&Qa(o);break;case 30:Qa(o);break;default:Qa(o)}n=n.sibling}}function Yr(n,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,g=n,b=o,M=b.flags;switch(b.tag){case 0:case 11:case 15:Yr(g,b,c),Su(4,b);break;case 1:if(Yr(g,b,c),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ct){Oe(d,d.return,ct)}if(d=b,g=d.updateQueue,g!==null){var z=d.stateNode;try{var K=g.shared.hiddenCallbacks;if(K!==null)for(g.shared.hiddenCallbacks=null,g=0;g<K.length;g++)Sy(K[g],z)}catch(ct){Oe(d,d.return,ct)}}c&&M&64&&Iv(b),Tu(b,b.return);break;case 27:Bv(b);case 26:case 5:Yr(g,b,c),c&&d===null&&M&4&&zv(b),Tu(b,b.return);break;case 12:Yr(g,b,c);break;case 31:Yr(g,b,c),c&&M&4&&jv(g,b);break;case 13:Yr(g,b,c),c&&M&4&&Gv(g,b);break;case 22:b.memoizedState===null&&Yr(g,b,c),Tu(b,b.return);break;case 30:break;default:Yr(g,b,c)}o=o.sibling}}function Bm(n,o){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&uu(c))}function Um(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&uu(n))}function zs(n,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Yv(n,o,c,d),o=o.sibling}function Yv(n,o,c,d){var g=o.flags;switch(o.tag){case 0:case 11:case 15:zs(n,o,c,d),g&2048&&Su(9,o);break;case 1:zs(n,o,c,d);break;case 3:zs(n,o,c,d),g&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&uu(n)));break;case 12:if(g&2048){zs(n,o,c,d),n=o.stateNode;try{var b=o.memoizedProps,M=b.id,z=b.onPostCommit;typeof z=="function"&&z(M,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(K){Oe(o,o.return,K)}}else zs(n,o,c,d);break;case 31:zs(n,o,c,d);break;case 13:zs(n,o,c,d);break;case 23:break;case 22:b=o.stateNode,M=o.alternate,o.memoizedState!==null?b._visibility&2?zs(n,o,c,d):Au(n,o):b._visibility&2?zs(n,o,c,d):(b._visibility|=2,Ql(n,o,c,d,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Bm(M,o);break;case 24:zs(n,o,c,d),g&2048&&Um(o.alternate,o);break;default:zs(n,o,c,d)}}function Ql(n,o,c,d,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=n,M=o,z=c,K=d,ct=M.flags;switch(M.tag){case 0:case 11:case 15:Ql(b,M,z,K,g),Su(8,M);break;case 23:break;case 22:var gt=M.stateNode;M.memoizedState!==null?gt._visibility&2?Ql(b,M,z,K,g):Au(b,M):(gt._visibility|=2,Ql(b,M,z,K,g)),g&&ct&2048&&Bm(M.alternate,M);break;case 24:Ql(b,M,z,K,g),g&&ct&2048&&Um(M.alternate,M);break;default:Ql(b,M,z,K,g)}o=o.sibling}}function Au(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=n,d=o,g=d.flags;switch(d.tag){case 22:Au(c,d),g&2048&&Bm(d.alternate,d);break;case 24:Au(c,d),g&2048&&Um(d.alternate,d);break;default:Au(c,d)}o=o.sibling}}var Eu=8192;function Fl(n,o,c){if(n.subtreeFlags&Eu)for(n=n.child;n!==null;)Xv(n,o,c),n=n.sibling}function Xv(n,o,c){switch(n.tag){case 26:Fl(n,o,c),n.flags&Eu&&n.memoizedState!==null&&F2(c,Ns,n.memoizedState,n.memoizedProps);break;case 5:Fl(n,o,c);break;case 3:case 4:var d=Ns;Ns=Gf(n.stateNode.containerInfo),Fl(n,o,c),Ns=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Eu,Eu=16777216,Fl(n,o,c),Eu=d):Fl(n,o,c));break;default:Fl(n,o,c)}}function Qv(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Cu(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Bn=d,Kv(d,n)}Qv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Fv(n),n=n.sibling}function Fv(n){switch(n.tag){case 0:case 11:case 15:Cu(n),n.flags&2048&&Po(9,n,n.return);break;case 3:Cu(n);break;case 12:Cu(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,Df(n)):Cu(n);break;default:Cu(n)}}function Df(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Bn=d,Kv(d,n)}Qv(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:Po(8,o,o.return),Df(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Df(o));break;default:Df(o)}n=n.sibling}}function Kv(n,o){for(;Bn!==null;){var c=Bn;switch(c.tag){case 0:case 11:case 15:Po(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:uu(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Bn=d;else t:for(c=n;Bn!==null;){d=Bn;var g=d.sibling,b=d.return;if(Vv(d),d===c){Bn=null;break t}if(g!==null){g.return=b,Bn=g;break t}Bn=b}}}var h2={getCacheForType:function(n){var o=Wn(wn),c=o.data.get(n);return c===void 0&&(c=n(),o.data.set(n,c)),c},cacheSignal:function(){return Wn(wn).controller.signal}},f2=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ve=null,ue=null,de=0,De=0,Zi=null,Bo=!1,Kl=!1,Hm=!1,Xr=0,ln=0,Uo=0,Fa=0,Vm=0,Wi=0,Jl=0,Lu=null,Ei=null,qm=!1,Of=0,Jv=0,Rf=1/0,If=null,Ho=null,kn=0,Vo=null,$l=null,Qr=0,jm=0,Gm=null,$v=null,Mu=0,Zm=null;function Yi(){return(Le&2)!==0&&de!==0?de&-de:B.T!==null?Km():oi()}function tb(){if(Wi===0)if((de&536870912)===0||ce){var n=Lr;Lr<<=1,(Lr&3932160)===0&&(Lr=262144),Wi=n}else Wi=536870912;return n=ji.current,n!==null&&(n.flags|=32),Wi}function Ci(n,o,c){(n===Ve&&(De===2||De===9)||n.cancelPendingCommit!==null)&&(tc(n,0),qo(n,de,Wi,!1)),Gt(n,c),((Le&2)===0||n!==Ve)&&(n===Ve&&((Le&2)===0&&(Fa|=c),ln===4&&qo(n,de,Wi,!1)),cr(n))}function eb(n,o,c){if((Le&6)!==0)throw Error(s(327));var d=!c&&(o&127)===0&&(o&n.expiredLanes)===0||Mt(n,o),g=d?m2(n,o):Ym(n,o,!0),b=d;do{if(g===0){Kl&&!d&&qo(n,o,0,!1);break}else{if(c=n.current.alternate,b&&!d2(c)){g=Ym(n,o,!1),b=!1;continue}if(g===2){if(b=o,n.errorRecoveryDisabledLanes&b)var M=0;else M=n.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;t:{var z=n;g=Lu;var K=z.current.memoizedState.isDehydrated;if(K&&(tc(z,M).flags|=256),M=Ym(z,M,!1),M!==2){if(Hm&&!K){z.errorRecoveryDisabledLanes|=b,Fa|=b,g=4;break t}b=Ei,Ei=g,b!==null&&(Ei===null?Ei=b:Ei.push.apply(Ei,b))}g=M}if(b=!1,g!==2)continue}}if(g===1){tc(n,0),qo(n,o,0,!0);break}t:{switch(d=n,b=g,b){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:qo(d,o,Wi,!Bo);break t;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=Of+300-dn(),10<g)){if(qo(d,o,Wi,!Bo),Vt(d,0,!0)!==0)break t;Qr=o,d.timeoutHandle=Ob(nb.bind(null,d,c,Ei,If,qm,o,Wi,Fa,Jl,Bo,b,"Throttled",-0,0),g);break t}nb(d,c,Ei,If,qm,o,Wi,Fa,Jl,Bo,b,null,-0,0)}}break}while(!0);cr(n)}function nb(n,o,c,d,g,b,M,z,K,ct,gt,wt,ht,ft){if(n.timeoutHandle=-1,wt=o.subtreeFlags,wt&8192||(wt&16785408)===16785408){wt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yi},Xv(o,b,wt);var Pt=(b&62914560)===b?Of-dn():(b&4194048)===b?Jv-dn():0;if(Pt=K2(wt,Pt),Pt!==null){Qr=b,n.cancelPendingCommit=Pt(ub.bind(null,n,o,b,c,d,g,M,z,K,gt,wt,null,ht,ft)),qo(n,b,M,!ct);return}}ub(n,o,b,c,d,g,M,z,K)}function d2(n){for(var o=n;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],b=g.getSnapshot;g=g.value;try{if(!zn(b(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qo(n,o,c,d){o&=~Vm,o&=~Fa,n.suspendedLanes|=o,n.pingedLanes&=~o,d&&(n.warmLanes|=o),d=n.expirationTimes;for(var g=o;0<g;){var b=31-Gn(g),M=1<<b;d[b]=-1,g&=~M}c!==0&&Ke(n,c,o)}function Nf(){return(Le&6)===0?(ku(0),!1):!0}function Wm(){if(ue!==null){if(De===0)var n=ue.return;else n=ue,Is=ar=null,lm(n),Gl=null,fu=0,n=ue;for(;n!==null;)Rv(n.alternate,n),n=n.return;ue=null}}function tc(n,o){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,R2(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Qr=0,Wm(),Ve=n,ue=c=us(n.current,null),de=o,De=0,Zi=null,Bo=!1,Kl=Mt(n,o),Hm=!1,Jl=Wi=Vm=Fa=Uo=ln=0,Ei=Lu=null,qm=!1,(o&8)!==0&&(o|=o&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=o;0<d;){var g=31-Gn(d),b=1<<g;o|=n[g],d&=~b}return Xr=o,Pa(),c}function ib(n,o){ie=null,B.H=bu,o===jl||o===uf?(o=vy(),De=3):o===Fp?(o=vy(),De=4):De=o===Tm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Zi=o,ue===null&&(ln=1,Tf(n,h(o,n.current)))}function sb(){var n=ji.current;return n===null?!0:(de&4194048)===de?hs===null:(de&62914560)===de||(de&536870912)!==0?n===hs:!1}function rb(){var n=B.H;return B.H=bu,n===null?bu:n}function ob(){var n=B.A;return B.A=h2,n}function zf(){ln=4,Bo||(de&4194048)!==de&&ji.current!==null||(Kl=!0),(Uo&134217727)===0&&(Fa&134217727)===0||Ve===null||qo(Ve,de,Wi,!1)}function Ym(n,o,c){var d=Le;Le|=2;var g=rb(),b=ob();(Ve!==n||de!==o)&&(If=null,tc(n,o)),o=!1;var M=ln;t:do try{if(De!==0&&ue!==null){var z=ue,K=Zi;switch(De){case 8:Wm(),M=6;break t;case 3:case 2:case 9:case 6:ji.current===null&&(o=!0);var ct=De;if(De=0,Zi=null,ec(n,z,K,ct),c&&Kl){M=0;break t}break;default:ct=De,De=0,Zi=null,ec(n,z,K,ct)}}p2(),M=ln;break}catch(gt){ib(n,gt)}while(!0);return o&&n.shellSuspendCounter++,Is=ar=null,Le=d,B.H=g,B.A=b,ue===null&&(Ve=null,de=0,Pa()),M}function p2(){for(;ue!==null;)ab(ue)}function m2(n,o){var c=Le;Le|=2;var d=rb(),g=ob();Ve!==n||de!==o?(If=null,Rf=dn()+500,tc(n,o)):Kl=Mt(n,o);t:do try{if(De!==0&&ue!==null){o=ue;var b=Zi;e:switch(De){case 1:De=0,Zi=null,ec(n,o,b,1);break;case 2:case 9:if(gy(b)){De=0,Zi=null,lb(o);break}o=function(){De!==2&&De!==9||Ve!==n||(De=7),cr(n)},b.then(o,o);break t;case 3:De=7;break t;case 4:De=5;break t;case 7:gy(b)?(De=0,Zi=null,lb(o)):(De=0,Zi=null,ec(n,o,b,7));break;case 5:var M=null;switch(ue.tag){case 26:M=ue.memoizedState;case 5:case 27:var z=ue;if(M?Yb(M):z.stateNode.complete){De=0,Zi=null;var K=z.sibling;if(K!==null)ue=K;else{var ct=z.return;ct!==null?(ue=ct,Pf(ct)):ue=null}break e}}De=0,Zi=null,ec(n,o,b,5);break;case 6:De=0,Zi=null,ec(n,o,b,6);break;case 8:Wm(),ln=6;break t;default:throw Error(s(462))}}_2();break}catch(gt){ib(n,gt)}while(!0);return Is=ar=null,B.H=d,B.A=g,Le=c,ue!==null?0:(Ve=null,de=0,Pa(),ln)}function _2(){for(;ue!==null&&!si();)ab(ue)}function ab(n){var o=Dv(n.alternate,n,Xr);n.memoizedProps=n.pendingProps,o===null?Pf(n):ue=o}function lb(n){var o=n,c=o.alternate;switch(o.tag){case 15:case 0:o=Av(c,o,o.pendingProps,o.type,void 0,de);break;case 11:o=Av(c,o,o.pendingProps,o.type.render,o.ref,de);break;case 5:lm(o);default:Rv(c,o),o=ue=ru(o,Xr),o=Dv(c,o,Xr)}n.memoizedProps=n.pendingProps,o===null?Pf(n):ue=o}function ec(n,o,c,d){Is=ar=null,lm(o),Gl=null,fu=0;var g=o.return;try{if(s2(n,g,o,c,de)){ln=1,Tf(n,h(c,n.current)),ue=null;return}}catch(b){if(g!==null)throw ue=g,b;ln=1,Tf(n,h(c,n.current)),ue=null;return}o.flags&32768?(ce||d===1?n=!0:Kl||(de&536870912)!==0?n=!1:(Bo=n=!0,(d===2||d===9||d===3||d===6)&&(d=ji.current,d!==null&&d.tag===13&&(d.flags|=16384))),cb(o,n)):Pf(o)}function Pf(n){var o=n;do{if((o.flags&32768)!==0){cb(o,Bo);return}n=o.return;var c=a2(o.alternate,o,Xr);if(c!==null){ue=c;return}if(o=o.sibling,o!==null){ue=o;return}ue=o=n}while(o!==null);ln===0&&(ln=5)}function cb(n,o){do{var c=l2(n.alternate,n);if(c!==null){c.flags&=32767,ue=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(n=n.sibling,n!==null)){ue=n;return}ue=n=c}while(n!==null);ln=6,ue=null}function ub(n,o,c,d,g,b,M,z,K){n.cancelPendingCommit=null;do Bf();while(kn!==0);if((Le&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(b=o.lanes|o.childLanes,b|=zl,Ft(n,c,b,M,z,K),n===Ve&&(ue=Ve=null,de=0),$l=o,Vo=n,Qr=c,jm=b,Gm=g,$v=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,b2(Ys,function(){return mb(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=B.T,B.T=null,g=W.p,W.p=2,M=Le,Le|=4;try{c2(n,o,c)}finally{Le=M,W.p=g,B.T=d}}kn=1,hb(),fb(),db()}}function hb(){if(kn===1){kn=0;var n=Vo,o=$l,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var d=W.p;W.p=2;var g=Le;Le|=4;try{Zv(o,n);var b=r_,M=Oa(n.containerInfo),z=b.focusedElem,K=b.selectionRange;if(M!==z&&z&&z.ownerDocument&&Ol(z.ownerDocument.documentElement,z)){if(K!==null&&tr(z)){var ct=K.start,gt=K.end;if(gt===void 0&&(gt=ct),"selectionStart"in z)z.selectionStart=ct,z.selectionEnd=Math.min(gt,z.value.length);else{var wt=z.ownerDocument||document,ht=wt&&wt.defaultView||window;if(ht.getSelection){var ft=ht.getSelection(),Pt=z.textContent.length,Xt=Math.min(K.start,Pt),Be=K.end===void 0?Xt:Math.min(K.end,Pt);!ft.extend&&Xt>Be&&(M=Be,Be=Xt,Xt=M);var st=Da(z,Xt),it=Da(z,Be);if(st&&it&&(ft.rangeCount!==1||ft.anchorNode!==st.node||ft.anchorOffset!==st.offset||ft.focusNode!==it.node||ft.focusOffset!==it.offset)){var at=wt.createRange();at.setStart(st.node,st.offset),ft.removeAllRanges(),Xt>Be?(ft.addRange(at),ft.extend(it.node,it.offset)):(at.setEnd(it.node,it.offset),ft.addRange(at))}}}}for(wt=[],ft=z;ft=ft.parentNode;)ft.nodeType===1&&wt.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<wt.length;z++){var vt=wt[z];vt.element.scrollLeft=vt.left,vt.element.scrollTop=vt.top}}Ff=!!s_,r_=s_=null}finally{Le=g,W.p=d,B.T=c}}n.current=o,kn=2}}function fb(){if(kn===2){kn=0;var n=Vo,o=$l,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var d=W.p;W.p=2;var g=Le;Le|=4;try{Hv(n,o.alternate,o)}finally{Le=g,W.p=d,B.T=c}}kn=3}}function db(){if(kn===4||kn===3){kn=0,_i();var n=Vo,o=$l,c=Qr,d=$v;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?kn=5:(kn=0,$l=Vo=null,pb(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Ho=null),Nt(c),o=o.stateNode,Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Es,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=B.T,g=W.p,W.p=2,B.T=null;try{for(var b=n.onRecoverableError,M=0;M<d.length;M++){var z=d[M];b(z.value,{componentStack:z.stack})}}finally{B.T=o,W.p=g}}(Qr&3)!==0&&Bf(),cr(n),g=n.pendingLanes,(c&261930)!==0&&(g&42)!==0?n===Zm?Mu++:(Mu=0,Zm=n):Mu=0,ku(0)}}function pb(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,uu(o)))}function Bf(){return hb(),fb(),db(),mb()}function mb(){if(kn!==5)return!1;var n=Vo,o=jm;jm=0;var c=Nt(Qr),d=B.T,g=W.p;try{W.p=32>c?32:c,B.T=null,c=Gm,Gm=null;var b=Vo,M=Qr;if(kn=0,$l=Vo=null,Qr=0,(Le&6)!==0)throw Error(s(331));var z=Le;if(Le|=4,Fv(b.current),Yv(b,b.current,M,c),Le=z,ku(0,!1),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Es,b)}catch{}return!0}finally{W.p=g,B.T=d,pb(n,o)}}function _b(n,o,c){o=h(c,o),o=Sm(n.stateNode,o,2),n=Io(n,o,2),n!==null&&(Gt(n,2),cr(n))}function Oe(n,o,c){if(n.tag===3)_b(n,n,c);else for(;o!==null;){if(o.tag===3){_b(o,n,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ho===null||!Ho.has(d))){n=h(c,n),c=gv(2),d=Io(o,c,2),d!==null&&(yv(c,d,o,n),Gt(d,2),cr(d));break}}o=o.return}}function Xm(n,o,c){var d=n.pingCache;if(d===null){d=n.pingCache=new f2;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(c)||(Hm=!0,g.add(c),n=g2.bind(null,n,o,c),o.then(n,n))}function g2(n,o,c){var d=n.pingCache;d!==null&&d.delete(o),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,Ve===n&&(de&c)===c&&(ln===4||ln===3&&(de&62914560)===de&&300>dn()-Of?(Le&2)===0&&tc(n,0):Vm|=c,Jl===de&&(Jl=0)),cr(n)}function gb(n,o){o===0&&(o=Ot()),n=cs(n,o),n!==null&&(Gt(n,o),cr(n))}function y2(n){var o=n.memoizedState,c=0;o!==null&&(c=o.retryLane),gb(n,c)}function v2(n,o){var c=0;switch(n.tag){case 31:case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(o),gb(n,c)}function b2(n,o){return xe(n,o)}var Uf=null,nc=null,Qm=!1,Hf=!1,Fm=!1,jo=0;function cr(n){n!==nc&&n.next===null&&(nc===null?Uf=nc=n:nc=nc.next=n),Hf=!0,Qm||(Qm=!0,x2())}function ku(n,o){if(!Fm&&Hf){Fm=!0;do for(var c=!1,d=Uf;d!==null;){if(n!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var M=d.suspendedLanes,z=d.pingedLanes;b=(1<<31-Gn(42|n)+1)-1,b&=g&~(M&~z),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,wb(d,b))}else b=de,b=Vt(d,d===Ve?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Mt(d,b)||(c=!0,wb(d,b));d=d.next}while(c);Fm=!1}}function w2(){yb()}function yb(){Hf=Qm=!1;var n=0;jo!==0&&O2()&&(n=jo);for(var o=dn(),c=null,d=Uf;d!==null;){var g=d.next,b=vb(d,o);b===0?(d.next=null,c===null?Uf=g:c.next=g,g===null&&(nc=c)):(c=d,(n!==0||(b&3)!==0)&&(Hf=!0)),d=g}kn!==0&&kn!==5||ku(n),jo!==0&&(jo=0)}function vb(n,o){for(var c=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var M=31-Gn(b),z=1<<M,K=g[M];K===-1?((z&c)===0||(z&d)!==0)&&(g[M]=It(z,o)):K<=o&&(n.expiredLanes|=z),b&=~z}if(o=Ve,c=de,c=Vt(n,n===o?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===o&&(De===2||De===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&nn(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Mt(n,c)){if(o=c&-c,o===n.callbackPriority)return o;switch(d!==null&&nn(d),Nt(c)){case 2:case 8:c=da;break;case 32:c=Ys;break;case 268435456:c=pa;break;default:c=Ys}return d=bb.bind(null,n),c=xe(c,d),n.callbackPriority=o,n.callbackNode=c,o}return d!==null&&d!==null&&nn(d),n.callbackPriority=2,n.callbackNode=null,2}function bb(n,o){if(kn!==0&&kn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(Bf()&&n.callbackNode!==c)return null;var d=de;return d=Vt(n,n===Ve?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(eb(n,d,o),vb(n,dn()),n.callbackNode!=null&&n.callbackNode===c?bb.bind(null,n):null)}function wb(n,o){if(Bf())return null;eb(n,o,!0)}function x2(){I2(function(){(Le&6)!==0?xe(ri,w2):yb()})}function Km(){if(jo===0){var n=Vl;n===0&&(n=Cr,Cr<<=1,(Cr&261888)===0&&(Cr=256)),jo=n}return jo}function xb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yo(""+n)}function Sb(n,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,n.id&&c.setAttribute("form",n.id),o.parentNode.insertBefore(c,o),n=new FormData(n),c.parentNode.removeChild(c),n}function S2(n,o,c,d,g){if(o==="submit"&&c&&c.stateNode===g){var b=xb((g[Nn]||null).action),M=d.submitter;M&&(o=(o=M[Nn]||null)?xb(o.formAction):M.getAttribute("formAction"),o!==null&&(b=o,M=null));var z=new Al("action","action",null,d,g);n.push({event:z,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(jo!==0){var K=M?Sb(g,M):new FormData(g);gm(c,{pending:!0,data:K,method:g.method,action:b},null,K)}}else typeof b=="function"&&(z.preventDefault(),K=M?Sb(g,M):new FormData(g),gm(c,{pending:!0,data:K,method:g.method,action:b},b,K))},currentTarget:g}]})}}for(var Jm=0;Jm<ir.length;Jm++){var $m=ir[Jm],T2=$m.toLowerCase(),A2=$m[0].toUpperCase()+$m.slice(1);bi(T2,"on"+A2)}bi(Ia,"onAnimationEnd"),bi(sf,"onAnimationIteration"),bi(Na,"onAnimationStart"),bi("dblclick","onDoubleClick"),bi("focusin","onFocus"),bi("focusout","onBlur"),bi(qp,"onTransitionRun"),bi(rf,"onTransitionStart"),bi(jp,"onTransitionCancel"),bi(Mo,"onTransitionEnd"),Fs("onMouseEnter",["mouseout","mouseover"]),Fs("onMouseLeave",["mouseout","mouseover"]),Fs("onPointerEnter",["pointerout","pointerover"]),Fs("onPointerLeave",["pointerout","pointerover"]),Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function Tb(n,o){o=(o&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],g=d.event;d=d.listeners;t:{var b=void 0;if(o)for(var M=d.length-1;0<=M;M--){var z=d[M],K=z.instance,ct=z.currentTarget;if(z=z.listener,K!==b&&g.isPropagationStopped())break t;b=z,g.currentTarget=ct;try{b(g)}catch(gt){za(gt)}g.currentTarget=null,b=K}else for(M=0;M<d.length;M++){if(z=d[M],K=z.instance,ct=z.currentTarget,z=z.listener,K!==b&&g.isPropagationStopped())break t;b=z,g.currentTarget=ct;try{b(g)}catch(gt){za(gt)}g.currentTarget=null,b=K}}}}function he(n,o){var c=o[Xs];c===void 0&&(c=o[Xs]=new Set);var d=n+"__bubble";c.has(d)||(Ab(o,n,2,!1),c.add(d))}function t_(n,o,c){var d=0;o&&(d|=4),Ab(c,n,d,o)}var Vf="_reactListening"+Math.random().toString(36).slice(2);function e_(n){if(!n[Vf]){n[Vf]=!0,Ph.forEach(function(c){c!=="selectionchange"&&(E2.has(c)||t_(c,!1,n),t_(c,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Vf]||(o[Vf]=!0,t_("selectionchange",!1,o))}}function Ab(n,o,c,d){switch(tw(o)){case 2:var g=tA;break;case 8:g=eA;break;default:g=__}c=g.bind(null,o,c,n),g=void 0,!xa||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(o,c,{capture:!0,passive:g}):n.addEventListener(o,c,!0):g!==void 0?n.addEventListener(o,c,{passive:g}):n.addEventListener(o,c,!1)}function n_(n,o,c,d,g){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)t:for(;;){if(d===null)return;var M=d.tag;if(M===3||M===4){var z=d.stateNode.containerInfo;if(z===g)break;if(M===4)for(M=d.return;M!==null;){var K=M.tag;if((K===3||K===4)&&M.stateNode.containerInfo===g)return;M=M.return}for(;z!==null;){if(M=kr(z),M===null)return;if(K=M.tag,K===5||K===6||K===26||K===27){d=b=M;continue t}z=z.parentNode}}d=d.return}Xc(function(){var ct=b,gt=wa(c),wt=[];t:{var ht=of.get(n);if(ht!==void 0){var ft=Al,Pt=n;switch(n){case"keypress":if(Sa(c)===0)break t;case"keydown":case"keyup":ft=Zh;break;case"focusin":Pt="focus",ft=Kc;break;case"focusout":Pt="blur",ft=Kc;break;case"beforeblur":case"afterblur":ft=Kc;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Dp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=zp;break;case Ia:case sf:case Na:ft=Jc;break;case Mo:ft=Xh;break;case"scroll":case"scrollend":ft=fe;break;case"wheel":ft=Nr;break;case"copy":case"cut":case"paste":ft=rs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Wh;break;case"toggle":case"beforetoggle":ft=Ea}var Xt=(o&4)!==0,Be=!Xt&&(n==="scroll"||n==="scrollend"),st=Xt?ht!==null?ht+"Capture":null:ht;Xt=[];for(var it=ct,at;it!==null;){var vt=it;if(at=vt.stateNode,vt=vt.tag,vt!==5&&vt!==26&&vt!==27||at===null||st===null||(vt=Rr(it,st),vt!=null&&Xt.push(Ou(it,vt,at))),Be)break;it=it.return}0<Xt.length&&(ht=new ft(ht,Pt,null,c,gt),wt.push({event:ht,listeners:Xt}))}}if((o&7)===0){t:{if(ht=n==="mouseover"||n==="pointerover",ft=n==="mouseout"||n==="pointerout",ht&&c!==Tl&&(Pt=c.relatedTarget||c.fromElement)&&(kr(Pt)||Pt[Mr]))break t;if((ft||ht)&&(ht=gt.window===gt?gt:(ht=gt.ownerDocument)?ht.defaultView||ht.parentWindow:window,ft?(Pt=c.relatedTarget||c.toElement,ft=ct,Pt=Pt?kr(Pt):null,Pt!==null&&(Be=l(Pt),Xt=Pt.tag,Pt!==Be||Xt!==5&&Xt!==27&&Xt!==6)&&(Pt=null)):(ft=null,Pt=ct),ft!==Pt)){if(Xt=Hh,vt="onMouseLeave",st="onMouseEnter",it="mouse",(n==="pointerout"||n==="pointerover")&&(Xt=Wh,vt="onPointerLeave",st="onPointerEnter",it="pointer"),Be=ft==null?ht:Qs(ft),at=Pt==null?ht:Qs(Pt),ht=new Xt(vt,it+"leave",ft,c,gt),ht.target=Be,ht.relatedTarget=at,vt=null,kr(gt)===ct&&(Xt=new Xt(st,it+"enter",Pt,c,gt),Xt.target=at,Xt.relatedTarget=Be,vt=Xt),Be=vt,ft&&Pt)e:{for(Xt=C2,st=ft,it=Pt,at=0,vt=st;vt;vt=Xt(vt))at++;vt=0;for(var Yt=it;Yt;Yt=Xt(Yt))vt++;for(;0<at-vt;)st=Xt(st),at--;for(;0<vt-at;)it=Xt(it),vt--;for(;at--;){if(st===it||it!==null&&st===it.alternate){Xt=st;break e}st=Xt(st),it=Xt(it)}Xt=null}else Xt=null;ft!==null&&Eb(wt,ht,ft,Xt,!1),Pt!==null&&Be!==null&&Eb(wt,Be,Pt,Xt,!0)}}t:{if(ht=ct?Qs(ct):window,ft=ht.nodeName&&ht.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ht.type==="file")var Ae=ka;else if(os(ht))if(Jh)Ae=Vp;else{Ae=Hp;var qt=Ds}else ft=ht.nodeName,!ft||ft.toLowerCase()!=="input"||ht.type!=="checkbox"&&ht.type!=="radio"?ct&&ba(ct.elementType)&&(Ae=ka):Ae=Ao;if(Ae&&(Ae=Ae(n,ct))){Kh(wt,Ae,c,gt);break t}qt&&qt(n,ht,ct),n==="focusout"&&ct&&ht.type==="number"&&ct.memoizedProps.value!=null&&Ls(ht,"number",ht.value)}switch(qt=ct?Qs(ct):window,n){case"focusin":(os(qt)||qt.contentEditable==="true")&&(er=qt,Il=ct,Ra=null);break;case"focusout":Ra=Il=er=null;break;case"mousedown":Co=!0;break;case"contextmenu":case"mouseup":case"dragend":Co=!1,ef(wt,c,gt);break;case"selectionchange":if(Rl)break;case"keydown":case"keyup":ef(wt,c,gt)}var re;if(Cl)t:{switch(n){case"compositionstart":var pe="onCompositionStart";break t;case"compositionend":pe="onCompositionEnd";break t;case"compositionupdate":pe="onCompositionUpdate";break t}pe=void 0}else xo?Fh(n,c)&&(pe="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(pe="onCompositionStart");pe&&(Ll&&c.locale!=="ko"&&(xo||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&xo&&(re=Js()):(ss=gt,Ir="value"in ss?ss.value:ss.textContent,xo=!0)),qt=qf(ct,pe),0<qt.length&&(pe=new $c(pe,n,null,c,gt),wt.push({event:pe,listeners:qt}),re?pe.data=re:(re=iu(c),re!==null&&(pe.data=re)))),(re=Bp?qi(n,c):So(n,c))&&(pe=qf(ct,"onBeforeInput"),0<pe.length&&(qt=new $c("onBeforeInput","beforeinput",null,c,gt),wt.push({event:qt,listeners:pe}),qt.data=re)),S2(wt,n,ct,c,gt)}Tb(wt,o)})}function Ou(n,o,c){return{instance:n,listener:o,currentTarget:c}}function qf(n,o){for(var c=o+"Capture",d=[];n!==null;){var g=n,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Rr(n,c),g!=null&&d.unshift(Ou(n,g,b)),g=Rr(n,o),g!=null&&d.push(Ou(n,g,b))),n.tag===3)return d;n=n.return}return[]}function C2(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Eb(n,o,c,d,g){for(var b=o._reactName,M=[];c!==null&&c!==d;){var z=c,K=z.alternate,ct=z.stateNode;if(z=z.tag,K!==null&&K===d)break;z!==5&&z!==26&&z!==27||ct===null||(K=ct,g?(ct=Rr(c,b),ct!=null&&M.unshift(Ou(c,ct,K))):g||(ct=Rr(c,b),ct!=null&&M.push(Ou(c,ct,K)))),c=c.return}M.length!==0&&n.push({event:o,listeners:M})}var L2=/\r\n?/g,M2=/\u0000|\uFFFD/g;function Cb(n){return(typeof n=="string"?n:""+n).replace(L2,`
`).replace(M2,"")}function Lb(n,o){return o=Cb(o),Cb(n)===o}function Pe(n,o,c,d,g,b){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||is(n,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&is(n,""+d);break;case"className":Ne(n,"class",d);break;case"tabIndex":Ne(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ne(n,c,d);break;case"style":xl(n,d,b);break;case"data":if(o!=="object"){Ne(n,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=yo(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(o!=="input"&&Pe(n,o,"name",g.name,g,null),Pe(n,o,"formEncType",g.formEncType,g,null),Pe(n,o,"formMethod",g.formMethod,g,null),Pe(n,o,"formTarget",g.formTarget,g,null)):(Pe(n,o,"encType",g.encType,g,null),Pe(n,o,"method",g.method,g,null),Pe(n,o,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=yo(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=yi);break;case"onScroll":d!=null&&he("scroll",n);break;case"onScrollEnd":d!=null&&he("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=yo(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":he("beforetoggle",n),he("toggle",n),le(n,"popover",d);break;case"xlinkActuate":gi(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":gi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":gi(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":gi(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":gi(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":gi(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":gi(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":gi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":gi(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":le(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Sl.get(c)||c,le(n,c,d))}}function i_(n,o,c,d,g,b){switch(c){case"style":xl(n,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"children":typeof d=="string"?is(n,d):(typeof d=="number"||typeof d=="bigint")&&is(n,""+d);break;case"onScroll":d!=null&&he("scroll",n);break;case"onScrollEnd":d!=null&&he("scrollend",n);break;case"onClick":d!=null&&(n.onclick=yi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bh.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),b=n[Nn]||null,b=b!=null?b[c]:null,typeof b=="function"&&n.removeEventListener(o,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(o,d,g);break t}c in n?n[c]=d:d===!0?n.setAttribute(c,""):le(n,c,d)}}}function Xn(n,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":he("error",n),he("load",n);var d=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var M=c[b];if(M!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Pe(n,o,b,M,c,null)}}g&&Pe(n,o,"srcSet",c.srcSet,c,null),d&&Pe(n,o,"src",c.src,c,null);return;case"input":he("invalid",n);var z=b=M=g=null,K=null,ct=null;for(d in c)if(c.hasOwnProperty(d)){var gt=c[d];if(gt!=null)switch(d){case"name":g=gt;break;case"type":M=gt;break;case"checked":K=gt;break;case"defaultChecked":ct=gt;break;case"value":b=gt;break;case"defaultValue":z=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(s(137,o));break;default:Pe(n,o,d,gt,c,null)}}va(n,b,z,K,ct,M,g,!1);return;case"select":he("invalid",n),d=M=b=null;for(g in c)if(c.hasOwnProperty(g)&&(z=c[g],z!=null))switch(g){case"value":b=z;break;case"defaultValue":M=z;break;case"multiple":d=z;default:Pe(n,o,g,z,c,null)}o=b,c=M,n.multiple=!!d,o!=null?He(n,!!d,o,!1):c!=null&&He(n,!!d,c,!0);return;case"textarea":he("invalid",n),b=g=d=null;for(M in c)if(c.hasOwnProperty(M)&&(z=c[M],z!=null))switch(M){case"value":d=z;break;case"defaultValue":g=z;break;case"children":b=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(91));break;default:Pe(n,o,M,z,c,null)}_o(n,d,g,b);return;case"option":for(K in c)c.hasOwnProperty(K)&&(d=c[K],d!=null)&&(K==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":Pe(n,o,K,d,c,null));return;case"dialog":he("beforetoggle",n),he("toggle",n),he("cancel",n),he("close",n);break;case"iframe":case"object":he("load",n);break;case"video":case"audio":for(d=0;d<Du.length;d++)he(Du[d],n);break;case"image":he("error",n),he("load",n);break;case"details":he("toggle",n);break;case"embed":case"source":case"link":he("error",n),he("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in c)if(c.hasOwnProperty(ct)&&(d=c[ct],d!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Pe(n,o,ct,d,c,null)}return;default:if(ba(o)){for(gt in c)c.hasOwnProperty(gt)&&(d=c[gt],d!==void 0&&i_(n,o,gt,d,c,void 0));return}}for(z in c)c.hasOwnProperty(z)&&(d=c[z],d!=null&&Pe(n,o,z,d,c,null))}function k2(n,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,M=null,z=null,K=null,ct=null,gt=null;for(ft in c){var wt=c[ft];if(c.hasOwnProperty(ft)&&wt!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":K=wt;default:d.hasOwnProperty(ft)||Pe(n,o,ft,null,d,wt)}}for(var ht in d){var ft=d[ht];if(wt=c[ht],d.hasOwnProperty(ht)&&(ft!=null||wt!=null))switch(ht){case"type":b=ft;break;case"name":g=ft;break;case"checked":ct=ft;break;case"defaultChecked":gt=ft;break;case"value":M=ft;break;case"defaultValue":z=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(s(137,o));break;default:ft!==wt&&Pe(n,o,ht,ft,d,wt)}}Zc(n,M,z,K,ct,gt,b,g);return;case"select":ft=M=z=ht=null;for(b in c)if(K=c[b],c.hasOwnProperty(b)&&K!=null)switch(b){case"value":break;case"multiple":ft=K;default:d.hasOwnProperty(b)||Pe(n,o,b,null,d,K)}for(g in d)if(b=d[g],K=c[g],d.hasOwnProperty(g)&&(b!=null||K!=null))switch(g){case"value":ht=b;break;case"defaultValue":z=b;break;case"multiple":M=b;default:b!==K&&Pe(n,o,g,b,d,K)}o=z,c=M,d=ft,ht!=null?He(n,!!c,ht,!1):!!d!=!!c&&(o!=null?He(n,!!c,o,!0):He(n,!!c,c?[]:"",!1));return;case"textarea":ft=ht=null;for(z in c)if(g=c[z],c.hasOwnProperty(z)&&g!=null&&!d.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Pe(n,o,z,null,d,g)}for(M in d)if(g=d[M],b=c[M],d.hasOwnProperty(M)&&(g!=null||b!=null))switch(M){case"value":ht=g;break;case"defaultValue":ft=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==b&&Pe(n,o,M,g,d,b)}Ks(n,ht,ft);return;case"option":for(var Pt in c)ht=c[Pt],c.hasOwnProperty(Pt)&&ht!=null&&!d.hasOwnProperty(Pt)&&(Pt==="selected"?n.selected=!1:Pe(n,o,Pt,null,d,ht));for(K in d)ht=d[K],ft=c[K],d.hasOwnProperty(K)&&ht!==ft&&(ht!=null||ft!=null)&&(K==="selected"?n.selected=ht&&typeof ht!="function"&&typeof ht!="symbol":Pe(n,o,K,ht,d,ft));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in c)ht=c[Xt],c.hasOwnProperty(Xt)&&ht!=null&&!d.hasOwnProperty(Xt)&&Pe(n,o,Xt,null,d,ht);for(ct in d)if(ht=d[ct],ft=c[ct],d.hasOwnProperty(ct)&&ht!==ft&&(ht!=null||ft!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(s(137,o));break;default:Pe(n,o,ct,ht,d,ft)}return;default:if(ba(o)){for(var Be in c)ht=c[Be],c.hasOwnProperty(Be)&&ht!==void 0&&!d.hasOwnProperty(Be)&&i_(n,o,Be,void 0,d,ht);for(gt in d)ht=d[gt],ft=c[gt],!d.hasOwnProperty(gt)||ht===ft||ht===void 0&&ft===void 0||i_(n,o,gt,ht,d,ft);return}}for(var st in c)ht=c[st],c.hasOwnProperty(st)&&ht!=null&&!d.hasOwnProperty(st)&&Pe(n,o,st,null,d,ht);for(wt in d)ht=d[wt],ft=c[wt],!d.hasOwnProperty(wt)||ht===ft||ht==null&&ft==null||Pe(n,o,wt,ht,d,ft)}function Mb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D2(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],b=g.transferSize,M=g.initiatorType,z=g.duration;if(b&&z&&Mb(M)){for(M=0,z=g.responseEnd,d+=1;d<c.length;d++){var K=c[d],ct=K.startTime;if(ct>z)break;var gt=K.transferSize,wt=K.initiatorType;gt&&Mb(wt)&&(K=K.responseEnd,M+=gt*(K<z?1:(z-ct)/(K-ct)))}if(--d,o+=8*(b+M)/(g.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var s_=null,r_=null;function jf(n){return n.nodeType===9?n:n.ownerDocument}function kb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Db(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function o_(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var a_=null;function O2(){var n=window.event;return n&&n.type==="popstate"?n===a_?!1:(a_=n,!0):(a_=null,!1)}var Ob=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,Rb=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof Rb<"u"?function(n){return Rb.resolve(null).then(n).catch(N2)}:Ob;function N2(n){setTimeout(function(){throw n})}function Go(n){return n==="head"}function Ib(n,o){var c=o,d=0;do{var g=c.nextSibling;if(n.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){n.removeChild(g),oc(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Ru(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,Ru(c);for(var b=c.firstChild;b;){var M=b.nextSibling,z=b.nodeName;b[_a]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=M}}else c==="body"&&Ru(n.ownerDocument.body);c=g}while(c);oc(o)}function Nb(n,o){var c=n;n=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=d}while(c)}function l_(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":l_(c),Vc(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function z2(n,o,c,d){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[_a])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=fs(n.nextSibling),n===null)break}return null}function P2(n,o,c){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=fs(n.nextSibling),n===null))return null;return n}function zb(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=fs(n.nextSibling),n===null))return null;return n}function c_(n){return n.data==="$?"||n.data==="$~"}function u_(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function B2(n,o){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function fs(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var h_=null;function Pb(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(o===0)return fs(n.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}n=n.nextSibling}return null}function Bb(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return n;o--}else c!=="/$"&&c!=="/&"||o++}n=n.previousSibling}return null}function Ub(n,o,c){switch(o=jf(c),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ru(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);Vc(n)}var ds=new Map,Hb=new Set;function Gf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Fr=W.d;W.d={f:U2,r:H2,D:V2,C:q2,L:j2,m:G2,X:W2,S:Z2,M:Y2};function U2(){var n=Fr.f(),o=Nf();return n||o}function H2(n){var o=fo(n);o!==null&&o.tag===5&&o.type==="form"?iv(o):Fr.r(n)}var ic=typeof document>"u"?null:document;function Vb(n,o,c){var d=ic;if(d&&typeof o=="string"&&o){var g=We(o);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Hb.has(g)||(Hb.add(g),n={rel:n,crossOrigin:c,href:o},d.querySelector(g)===null&&(o=d.createElement("link"),Xn(o,"link",n),bn(o),d.head.appendChild(o)))}}function V2(n){Fr.D(n),Vb("dns-prefetch",n,null)}function q2(n,o){Fr.C(n,o),Vb("preconnect",n,o)}function j2(n,o,c){Fr.L(n,o,c);var d=ic;if(d&&n&&o){var g='link[rel="preload"][as="'+We(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+We(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+We(c.imageSizes)+'"]')):g+='[href="'+We(n)+'"]';var b=g;switch(o){case"style":b=sc(n);break;case"script":b=rc(n)}ds.has(b)||(n=y({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:n,as:o},c),ds.set(b,n),d.querySelector(g)!==null||o==="style"&&d.querySelector(Iu(b))||o==="script"&&d.querySelector(Nu(b))||(o=d.createElement("link"),Xn(o,"link",n),bn(o),d.head.appendChild(o)))}}function G2(n,o){Fr.m(n,o);var c=ic;if(c&&n){var d=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+We(d)+'"][href="'+We(n)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=rc(n)}if(!ds.has(b)&&(n=y({rel:"modulepreload",href:n},o),ds.set(b,n),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Nu(b)))return}d=c.createElement("link"),Xn(d,"link",n),bn(d),c.head.appendChild(d)}}}function Z2(n,o,c){Fr.S(n,o,c);var d=ic;if(d&&n){var g=po(d).hoistableStyles,b=sc(n);o=o||"default";var M=g.get(b);if(!M){var z={loading:0,preload:null};if(M=d.querySelector(Iu(b)))z.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":o},c),(c=ds.get(b))&&f_(n,c);var K=M=d.createElement("link");bn(K),Xn(K,"link",n),K._p=new Promise(function(ct,gt){K.onload=ct,K.onerror=gt}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Zf(M,o,d)}M={type:"stylesheet",instance:M,count:1,state:z},g.set(b,M)}}}function W2(n,o){Fr.X(n,o);var c=ic;if(c&&n){var d=po(c).hoistableScripts,g=rc(n),b=d.get(g);b||(b=c.querySelector(Nu(g)),b||(n=y({src:n,async:!0},o),(o=ds.get(g))&&d_(n,o),b=c.createElement("script"),bn(b),Xn(b,"link",n),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function Y2(n,o){Fr.M(n,o);var c=ic;if(c&&n){var d=po(c).hoistableScripts,g=rc(n),b=d.get(g);b||(b=c.querySelector(Nu(g)),b||(n=y({src:n,async:!0,type:"module"},o),(o=ds.get(g))&&d_(n,o),b=c.createElement("script"),bn(b),Xn(b,"link",n),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function qb(n,o,c,d){var g=(g=_t.current)?Gf(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=sc(c.href),c=po(g).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=sc(c.href);var b=po(g).hoistableStyles,M=b.get(n);if(M||(g=g.ownerDocument||g,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,M),(b=g.querySelector(Iu(n)))&&!b._p&&(M.instance=b,M.state.loading=5),ds.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ds.set(n,c),b||X2(g,n,c,M.state))),o&&d===null)throw Error(s(528,""));return M}if(o&&d!==null)throw Error(s(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=rc(c),c=po(g).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function sc(n){return'href="'+We(n)+'"'}function Iu(n){return'link[rel="stylesheet"]['+n+"]"}function jb(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function X2(n,o,c,d){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=n.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Xn(o,"link",c),bn(o),n.head.appendChild(o))}function rc(n){return'[src="'+We(n)+'"]'}function Nu(n){return"script[async]"+n}function Gb(n,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=n.querySelector('style[data-href~="'+We(c.href)+'"]');if(d)return o.instance=d,bn(d),d;var g=y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),bn(d),Xn(d,"style",g),Zf(d,c.precedence,n),o.instance=d;case"stylesheet":g=sc(c.href);var b=n.querySelector(Iu(g));if(b)return o.state.loading|=4,o.instance=b,bn(b),b;d=jb(c),(g=ds.get(g))&&f_(d,g),b=(n.ownerDocument||n).createElement("link"),bn(b);var M=b;return M._p=new Promise(function(z,K){M.onload=z,M.onerror=K}),Xn(b,"link",d),o.state.loading|=4,Zf(b,c.precedence,n),o.instance=b;case"script":return b=rc(c.src),(g=n.querySelector(Nu(b)))?(o.instance=g,bn(g),g):(d=c,(g=ds.get(b))&&(d=y({},c),d_(d,g)),n=n.ownerDocument||n,g=n.createElement("script"),bn(g),Xn(g,"link",d),n.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Zf(d,c.precedence,n));return o.instance}function Zf(n,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,M=0;M<d.length;M++){var z=d[M];if(z.dataset.precedence===o)b=z;else if(b!==g)break}b?b.parentNode.insertBefore(n,b.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(n,o.firstChild))}function f_(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function d_(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Wf=null;function Zb(n,o,c){if(Wf===null){var d=new Map,g=Wf=new Map;g.set(c,d)}else g=Wf,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var b=c[g];if(!(b[_a]||b[vn]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var M=b.getAttribute(o)||"";M=n+M;var z=d.get(M);z?z.push(b):d.set(M,[b])}}return d}function Wb(n,o,c){n=n.ownerDocument||n,n.head.insertBefore(c,o==="title"?n.querySelector("head > title"):null)}function Q2(n,o,c){if(c===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(n=o.disabled,typeof o.precedence=="string"&&n==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Yb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function F2(n,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=sc(d.href),b=o.querySelector(Iu(g));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=Yf.bind(n),o.then(n,n)),c.state.loading|=4,c.instance=b,bn(b);return}b=o.ownerDocument||o,d=jb(d),(g=ds.get(g))&&f_(d,g),b=b.createElement("link"),bn(b);var M=b;M._p=new Promise(function(z,K){M.onload=z,M.onerror=K}),Xn(b,"link",d),c.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=Yf.bind(n),o.addEventListener("load",c),o.addEventListener("error",c))}}var p_=0;function K2(n,o){return n.stylesheets&&n.count===0&&Qf(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var d=setTimeout(function(){if(n.stylesheets&&Qf(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+o);0<n.imgBytes&&p_===0&&(p_=62500*D2());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Qf(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>p_?50:800)+o);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xf=null;function Qf(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xf=new Map,o.forEach(J2,n),Xf=null,Yf.call(n))}function J2(n,o){if(!(o.state.loading&4)){var c=Xf.get(n);if(c)var d=c.get(null);else{c=new Map,Xf.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var M=g[b];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),d=M)}d&&c.set(null,d)}g=o.instance,M=g.getAttribute("data-precedence"),b=c.get(M)||d,b===d&&c.set(null,g),c.set(M,g),this.count++,d=Yf.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),o.state.loading|=4}}var zu={$$typeof:D,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function $2(n,o,c,d,g,b,M,z,K){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.hiddenUpdates=jt(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Xb(n,o,c,d,g,b,M,z,K,ct,gt,wt){return n=new $2(n,o,c,M,K,ct,gt,wt,z),o=1,b===!0&&(o|=24),b=Jn(3,null,null,o),n.current=b,b.stateNode=n,o=Yp(),o.refCount++,n.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:o},Kp(b),n}function Qb(n){return n?(n=zr,n):zr}function Fb(n,o,c,d,g,b){g=Qb(g),d.context===null?d.context=g:d.pendingContext=g,d=Ro(o),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Io(n,d,o),c!==null&&(Ci(c,n,o),pu(c,n,o))}function Kb(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<o?c:o}}function m_(n,o){Kb(n,o),(n=n.alternate)&&Kb(n,o)}function Jb(n){if(n.tag===13||n.tag===31){var o=cs(n,67108864);o!==null&&Ci(o,n,67108864),m_(n,67108864)}}function $b(n){if(n.tag===13||n.tag===31){var o=Yi();o=pn(o);var c=cs(n,o);c!==null&&Ci(c,n,o),m_(n,o)}}var Ff=!0;function tA(n,o,c,d){var g=B.T;B.T=null;var b=W.p;try{W.p=2,__(n,o,c,d)}finally{W.p=b,B.T=g}}function eA(n,o,c,d){var g=B.T;B.T=null;var b=W.p;try{W.p=8,__(n,o,c,d)}finally{W.p=b,B.T=g}}function __(n,o,c,d){if(Ff){var g=g_(d);if(g===null)n_(n,o,d,Kf,c),ew(n,d);else if(iA(g,n,o,c,d))d.stopPropagation();else if(ew(n,d),o&4&&-1<nA.indexOf(n)){for(;g!==null;){var b=fo(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var M=Lt(b.pendingLanes);if(M!==0){var z=b;for(z.pendingLanes|=2,z.entangledLanes|=2;M;){var K=1<<31-Gn(M);z.entanglements[1]|=K,M&=~K}cr(b),(Le&6)===0&&(Rf=dn()+500,ku(0))}}break;case 31:case 13:z=cs(b,2),z!==null&&Ci(z,b,2),Nf(),m_(b,2)}if(b=g_(d),b===null&&n_(n,o,d,Kf,c),b===g)break;g=b}g!==null&&d.stopPropagation()}else n_(n,o,d,null,c)}}function g_(n){return n=wa(n),y_(n)}var Kf=null;function y_(n){if(Kf=null,n=kr(n),n!==null){var o=l(n);if(o===null)n=null;else{var c=o.tag;if(c===13){if(n=u(o),n!==null)return n;n=null}else if(c===31){if(n=f(o),n!==null)return n;n=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Kf=n,null}function tw(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ho()){case ri:return 2;case da:return 8;case Ys:case Pc:return 32;case pa:return 268435456;default:return 32}default:return 32}}var v_=!1,Zo=null,Wo=null,Yo=null,Pu=new Map,Bu=new Map,Xo=[],nA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ew(n,o){switch(n){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":Yo=null;break;case"pointerover":case"pointerout":Pu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bu.delete(o.pointerId)}}function Uu(n,o,c,d,g,b){return n===null||n.nativeEvent!==b?(n={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},o!==null&&(o=fo(o),o!==null&&Jb(o)),n):(n.eventSystemFlags|=d,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function iA(n,o,c,d,g){switch(o){case"focusin":return Zo=Uu(Zo,n,o,c,d,g),!0;case"dragenter":return Wo=Uu(Wo,n,o,c,d,g),!0;case"mouseover":return Yo=Uu(Yo,n,o,c,d,g),!0;case"pointerover":var b=g.pointerId;return Pu.set(b,Uu(Pu.get(b)||null,n,o,c,d,g)),!0;case"gotpointercapture":return b=g.pointerId,Bu.set(b,Uu(Bu.get(b)||null,n,o,c,d,g)),!0}return!1}function nw(n){var o=kr(n.target);if(o!==null){var c=l(o);if(c!==null){if(o=c.tag,o===13){if(o=u(c),o!==null){n.blockedOn=o,ma(n.priority,function(){$b(c)});return}}else if(o===31){if(o=f(c),o!==null){n.blockedOn=o,ma(n.priority,function(){$b(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jf(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var c=g_(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);Tl=d,c.target.dispatchEvent(d),Tl=null}else return o=fo(c),o!==null&&Jb(o),n.blockedOn=c,!1;o.shift()}return!0}function iw(n,o,c){Jf(n)&&c.delete(o)}function sA(){v_=!1,Zo!==null&&Jf(Zo)&&(Zo=null),Wo!==null&&Jf(Wo)&&(Wo=null),Yo!==null&&Jf(Yo)&&(Yo=null),Pu.forEach(iw),Bu.forEach(iw)}function $f(n,o){n.blockedOn===o&&(n.blockedOn=null,v_||(v_=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,sA)))}var td=null;function sw(n){td!==n&&(td=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){td===n&&(td=null);for(var o=0;o<n.length;o+=3){var c=n[o],d=n[o+1],g=n[o+2];if(typeof d!="function"){if(y_(d||c)===null)continue;break}var b=fo(c);b!==null&&(n.splice(o,3),o-=3,gm(b,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function oc(n){function o(K){return $f(K,n)}Zo!==null&&$f(Zo,n),Wo!==null&&$f(Wo,n),Yo!==null&&$f(Yo,n),Pu.forEach(o),Bu.forEach(o);for(var c=0;c<Xo.length;c++){var d=Xo[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Xo.length&&(c=Xo[0],c.blockedOn===null);)nw(c),c.blockedOn===null&&Xo.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],b=c[d+1],M=g[Nn]||null;if(typeof b=="function")M||sw(c);else if(M){var z=null;if(b&&b.hasAttribute("formAction")){if(g=b,M=b[Nn]||null)z=M.formAction;else if(y_(g)!==null)continue}else z=M.action;typeof z=="function"?c[d+1]=z:(c.splice(d,3),d-=3),sw(c)}}}function rw(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(M){return g=M})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function b_(n){this._internalRoot=n}ed.prototype.render=b_.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var c=o.current,d=Yi();Fb(c,d,n,o,null,null)},ed.prototype.unmount=b_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Fb(n.current,2,null,n,null,null),Nf(),o[Mr]=null}};function ed(n){this._internalRoot=n}ed.prototype.unstable_scheduleHydration=function(n){if(n){var o=oi();n={blockedOn:null,target:n,priority:o};for(var c=0;c<Xo.length&&o!==0&&o<Xo[c].priority;c++);Xo.splice(c,0,n),c===0&&nw(n)}};var ow=t.version;if(ow!=="19.2.4")throw Error(s(527,ow,"19.2.4"));W.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=m(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var rA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{Es=nd.inject(rA),Cn=nd}catch{}}return Vu.createRoot=function(n,o){if(!r(n))throw Error(s(299));var c=!1,d="",g=dv,b=pv,M=mv;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=Xb(n,1,!1,null,null,c,d,null,g,b,M,rw),n[Mr]=o.current,e_(n),new b_(o)},Vu.hydrateRoot=function(n,o,c){if(!r(n))throw Error(s(299));var d=!1,g="",b=dv,M=pv,z=mv,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),o=Xb(n,1,!0,o,c??null,d,g,K,b,M,z,rw),o.context=Qb(null),c=o.current,d=Yi(),d=pn(d),g=Ro(d),g.callback=null,Io(c,g,d),c=d,o.current.lanes=c,Gt(o,c),cr(o),n[Mr]=o.current,e_(n),new ed(o)},Vu.version="19.2.4",Vu}var _w;function mA(){if(_w)return S_.exports;_w=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),S_.exports=pA(),S_.exports}var _A=mA();function gA(i){let t="pending",e,s;const r=i.then(l=>{t="success",e=l},l=>{t="error",s=l});return{promise:i,read(){switch(t){case"pending":throw r;case"error":throw s;case"success":return e}}}}const b1=Rt.createContext(null);function yA(){const i=Rt.useContext(b1);if(!i)throw new Error("Repo was not found on RepoContext.");return i}const vA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function e0(i){return typeof i=="string"&&vA.test(i)}function bA(i){if(!e0(i))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function w1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ps={},qe={},ti={},C_={},qu={},gw;function wA(){return gw||(gw=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.crypto=void 0,qu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),qu}var yw;function x1(){return yw||(yw=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.wrapXOFConstructorWithOpts=i.wrapConstructorWithOpts=i.wrapConstructor=i.Hash=i.nextTick=i.swap32IfBE=i.byteSwapIfBE=i.swap8IfBE=i.isLE=void 0,i.isBytes=e,i.anumber=s,i.abytes=r,i.ahash=l,i.aexists=u,i.aoutput=f,i.u8=p,i.u32=m,i.clean=v,i.createView=y,i.rotr=w,i.rotl=T,i.byteSwap=x,i.byteSwap32=A,i.bytesToHex=U,i.hexToBytes=I,i.asyncLoop=G,i.utf8ToBytes=j,i.bytesToUtf8=V,i.toBytes=Z,i.kdfInputToBytes=Y,i.concatBytes=$,i.checkOpts=P,i.createHasher=tt,i.createOptHasher=B,i.createXOFer=W,i.randomBytes=et;const t=wA();function e(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function s(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function r(k,...q){if(!e(k))throw new Error("Uint8Array expected");if(q.length>0&&!q.includes(k.length))throw new Error("Uint8Array expected of length "+q+", got length="+k.length)}function l(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(k.outputLen),s(k.blockLen)}function u(k,q=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(q&&k.finished)throw new Error("Hash#digest() has already been called")}function f(k,q){r(k);const R=q.outputLen;if(k.length<R)throw new Error("digestInto() expects output buffer of length at least "+R)}function p(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function m(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function v(...k){for(let q=0;q<k.length;q++)k[q].fill(0)}function y(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function w(k,q){return k<<32-q|k>>>q}function T(k,q){return k<<q|k>>>32-q>>>0}i.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}i.swap8IfBE=i.isLE?k=>k:k=>x(k),i.byteSwapIfBE=i.swap8IfBE;function A(k){for(let q=0;q<k.length;q++)k[q]=x(k[q]);return k}i.swap32IfBE=i.isLE?k=>k:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",O=Array.from({length:256},(k,q)=>q.toString(16).padStart(2,"0"));function U(k){if(r(k),E)return k.toHex();let q="";for(let R=0;R<k.length;R++)q+=O[k[R]];return q}const D={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q(k){if(k>=D._0&&k<=D._9)return k-D._0;if(k>=D.A&&k<=D.F)return k-(D.A-10);if(k>=D.a&&k<=D.f)return k-(D.a-10)}function I(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(E)return Uint8Array.fromHex(k);const q=k.length,R=q/2;if(q%2)throw new Error("hex string expected, got unpadded hex of length "+q);const X=new Uint8Array(R);for(let ot=0,dt=0;ot<R;ot++,dt+=2){const mt=Q(k.charCodeAt(dt)),_t=Q(k.charCodeAt(dt+1));if(mt===void 0||_t===void 0){const Ct=k[dt]+k[dt+1];throw new Error('hex string expected, got non-hex character "'+Ct+'" at index '+dt)}X[ot]=mt*16+_t}return X}const H=async()=>{};i.nextTick=H;async function G(k,q,R){let X=Date.now();for(let ot=0;ot<k;ot++){R(ot);const dt=Date.now()-X;dt>=0&&dt<q||(await(0,i.nextTick)(),X+=dt)}}function j(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function V(k){return new TextDecoder().decode(k)}function Z(k){return typeof k=="string"&&(k=j(k)),r(k),k}function Y(k){return typeof k=="string"&&(k=j(k)),r(k),k}function $(...k){let q=0;for(let X=0;X<k.length;X++){const ot=k[X];r(ot),q+=ot.length}const R=new Uint8Array(q);for(let X=0,ot=0;X<k.length;X++){const dt=k[X];R.set(dt,ot),ot+=dt.length}return R}function P(k,q){if(q!==void 0&&{}.toString.call(q)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,q)}class J{}i.Hash=J;function tt(k){const q=X=>k().update(Z(X)).digest(),R=k();return q.outputLen=R.outputLen,q.blockLen=R.blockLen,q.create=()=>k(),q}function B(k){const q=(X,ot)=>k(ot).update(Z(X)).digest(),R=k({});return q.outputLen=R.outputLen,q.blockLen=R.blockLen,q.create=X=>k(X),q}function W(k){const q=(X,ot)=>k(ot).update(Z(X)).digest(),R=k({});return q.outputLen=R.outputLen,q.blockLen=R.blockLen,q.create=X=>k(X),q}i.wrapConstructor=tt,i.wrapConstructorWithOpts=B,i.wrapXOFConstructorWithOpts=W;function et(k=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(k));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}})(C_)),C_}var vw;function xA(){if(vw)return ti;vw=1,Object.defineProperty(ti,"__esModule",{value:!0}),ti.SHA512_IV=ti.SHA384_IV=ti.SHA224_IV=ti.SHA256_IV=ti.HashMD=void 0,ti.setBigUint64=t,ti.Chi=e,ti.Maj=s;const i=x1();function t(l,u,f,p){if(typeof l.setBigUint64=="function")return l.setBigUint64(u,f,p);const m=BigInt(32),v=BigInt(4294967295),y=Number(f>>m&v),w=Number(f&v),T=p?4:0,x=p?0:4;l.setUint32(u+T,y,p),l.setUint32(u+x,w,p)}function e(l,u,f){return l&u^~l&f}function s(l,u,f){return l&u^l&f^u&f}class r extends i.Hash{constructor(u,f,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=f,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,i.createView)(this.buffer)}update(u){(0,i.aexists)(this),u=(0,i.toBytes)(u),(0,i.abytes)(u);const{view:f,buffer:p,blockLen:m}=this,v=u.length;for(let y=0;y<v;){const w=Math.min(m-this.pos,v-y);if(w===m){const T=(0,i.createView)(u);for(;m<=v-y;y+=m)this.process(T,y);continue}p.set(u.subarray(y,y+w),this.pos),this.pos+=w,y+=w,this.pos===m&&(this.process(f,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,i.aexists)(this),(0,i.aoutput)(u,this),this.finished=!0;const{buffer:f,view:p,blockLen:m,isLE:v}=this;let{pos:y}=this;f[y++]=128,(0,i.clean)(this.buffer.subarray(y)),this.padOffset>m-y&&(this.process(p,0),y=0);for(let E=y;E<m;E++)f[E]=0;t(p,m-8,BigInt(this.length*8),v),this.process(p,0);const w=(0,i.createView)(u),T=this.outputLen;if(T%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=T/4,A=this.get();if(x>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<x;E++)w.setUint32(4*E,A[E],v)}digest(){const{buffer:u,outputLen:f}=this;this.digestInto(u);const p=u.slice(0,f);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:f,buffer:p,length:m,finished:v,destroyed:y,pos:w}=this;return u.destroyed=y,u.finished=v,u.length=m,u.pos=w,m%f&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return ti.HashMD=r,ti.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ti.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),ti.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ti.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ti}var Kt={},bw;function SA(){if(bw)return Kt;bw=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.toBig=Kt.shrSL=Kt.shrSH=Kt.rotrSL=Kt.rotrSH=Kt.rotrBL=Kt.rotrBH=Kt.rotr32L=Kt.rotr32H=Kt.rotlSL=Kt.rotlSH=Kt.rotlBL=Kt.rotlBH=Kt.add5L=Kt.add5H=Kt.add4L=Kt.add4H=Kt.add3L=Kt.add3H=void 0,Kt.add=O,Kt.fromBig=e,Kt.split=s;const i=BigInt(2**32-1),t=BigInt(32);function e(V,Z=!1){return Z?{h:Number(V&i),l:Number(V>>t&i)}:{h:Number(V>>t&i)|0,l:Number(V&i)|0}}function s(V,Z=!1){const Y=V.length;let $=new Uint32Array(Y),P=new Uint32Array(Y);for(let J=0;J<Y;J++){const{h:tt,l:B}=e(V[J],Z);[$[J],P[J]]=[tt,B]}return[$,P]}const r=(V,Z)=>BigInt(V>>>0)<<t|BigInt(Z>>>0);Kt.toBig=r;const l=(V,Z,Y)=>V>>>Y;Kt.shrSH=l;const u=(V,Z,Y)=>V<<32-Y|Z>>>Y;Kt.shrSL=u;const f=(V,Z,Y)=>V>>>Y|Z<<32-Y;Kt.rotrSH=f;const p=(V,Z,Y)=>V<<32-Y|Z>>>Y;Kt.rotrSL=p;const m=(V,Z,Y)=>V<<64-Y|Z>>>Y-32;Kt.rotrBH=m;const v=(V,Z,Y)=>V>>>Y-32|Z<<64-Y;Kt.rotrBL=v;const y=(V,Z)=>Z;Kt.rotr32H=y;const w=(V,Z)=>V;Kt.rotr32L=w;const T=(V,Z,Y)=>V<<Y|Z>>>32-Y;Kt.rotlSH=T;const x=(V,Z,Y)=>Z<<Y|V>>>32-Y;Kt.rotlSL=x;const A=(V,Z,Y)=>Z<<Y-32|V>>>64-Y;Kt.rotlBH=A;const E=(V,Z,Y)=>V<<Y-32|Z>>>64-Y;Kt.rotlBL=E;function O(V,Z,Y,$){const P=(Z>>>0)+($>>>0);return{h:V+Y+(P/2**32|0)|0,l:P|0}}const U=(V,Z,Y)=>(V>>>0)+(Z>>>0)+(Y>>>0);Kt.add3L=U;const D=(V,Z,Y,$)=>Z+Y+$+(V/2**32|0)|0;Kt.add3H=D;const Q=(V,Z,Y,$)=>(V>>>0)+(Z>>>0)+(Y>>>0)+($>>>0);Kt.add4L=Q;const I=(V,Z,Y,$,P)=>Z+Y+$+P+(V/2**32|0)|0;Kt.add4H=I;const H=(V,Z,Y,$,P)=>(V>>>0)+(Z>>>0)+(Y>>>0)+($>>>0)+(P>>>0);Kt.add5L=H;const G=(V,Z,Y,$,P,J)=>Z+Y+$+P+J+(V/2**32|0)|0;Kt.add5H=G;const j={fromBig:e,split:s,toBig:r,shrSH:l,shrSL:u,rotrSH:f,rotrSL:p,rotrBH:m,rotrBL:v,rotr32H:y,rotr32L:w,rotlSH:T,rotlSL:x,rotlBH:A,rotlBL:E,add:O,add3L:U,add3H:D,add4L:Q,add4H:I,add5H:G,add5L:H};return Kt.default=j,Kt}var ww;function TA(){if(ww)return qe;ww=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.sha512_224=qe.sha512_256=qe.sha384=qe.sha512=qe.sha224=qe.sha256=qe.SHA512_256=qe.SHA512_224=qe.SHA384=qe.SHA512=qe.SHA224=qe.SHA256=void 0;const i=xA(),t=SA(),e=x1(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class l extends i.HashMD{constructor(D=32){super(64,D,8,!1),this.A=i.SHA256_IV[0]|0,this.B=i.SHA256_IV[1]|0,this.C=i.SHA256_IV[2]|0,this.D=i.SHA256_IV[3]|0,this.E=i.SHA256_IV[4]|0,this.F=i.SHA256_IV[5]|0,this.G=i.SHA256_IV[6]|0,this.H=i.SHA256_IV[7]|0}get(){const{A:D,B:Q,C:I,D:H,E:G,F:j,G:V,H:Z}=this;return[D,Q,I,H,G,j,V,Z]}set(D,Q,I,H,G,j,V,Z){this.A=D|0,this.B=Q|0,this.C=I|0,this.D=H|0,this.E=G|0,this.F=j|0,this.G=V|0,this.H=Z|0}process(D,Q){for(let P=0;P<16;P++,Q+=4)r[P]=D.getUint32(Q,!1);for(let P=16;P<64;P++){const J=r[P-15],tt=r[P-2],B=(0,e.rotr)(J,7)^(0,e.rotr)(J,18)^J>>>3,W=(0,e.rotr)(tt,17)^(0,e.rotr)(tt,19)^tt>>>10;r[P]=W+r[P-7]+B+r[P-16]|0}let{A:I,B:H,C:G,D:j,E:V,F:Z,G:Y,H:$}=this;for(let P=0;P<64;P++){const J=(0,e.rotr)(V,6)^(0,e.rotr)(V,11)^(0,e.rotr)(V,25),tt=$+J+(0,i.Chi)(V,Z,Y)+s[P]+r[P]|0,W=((0,e.rotr)(I,2)^(0,e.rotr)(I,13)^(0,e.rotr)(I,22))+(0,i.Maj)(I,H,G)|0;$=Y,Y=Z,Z=V,V=j+tt|0,j=G,G=H,H=I,I=tt+W|0}I=I+this.A|0,H=H+this.B|0,G=G+this.C|0,j=j+this.D|0,V=V+this.E|0,Z=Z+this.F|0,Y=Y+this.G|0,$=$+this.H|0,this.set(I,H,G,j,V,Z,Y,$)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}qe.SHA256=l;class u extends l{constructor(){super(28),this.A=i.SHA224_IV[0]|0,this.B=i.SHA224_IV[1]|0,this.C=i.SHA224_IV[2]|0,this.D=i.SHA224_IV[3]|0,this.E=i.SHA224_IV[4]|0,this.F=i.SHA224_IV[5]|0,this.G=i.SHA224_IV[6]|0,this.H=i.SHA224_IV[7]|0}}qe.SHA224=u;const f=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(U=>BigInt(U))),p=f[0],m=f[1],v=new Uint32Array(80),y=new Uint32Array(80);class w extends i.HashMD{constructor(D=64){super(128,D,16,!1),this.Ah=i.SHA512_IV[0]|0,this.Al=i.SHA512_IV[1]|0,this.Bh=i.SHA512_IV[2]|0,this.Bl=i.SHA512_IV[3]|0,this.Ch=i.SHA512_IV[4]|0,this.Cl=i.SHA512_IV[5]|0,this.Dh=i.SHA512_IV[6]|0,this.Dl=i.SHA512_IV[7]|0,this.Eh=i.SHA512_IV[8]|0,this.El=i.SHA512_IV[9]|0,this.Fh=i.SHA512_IV[10]|0,this.Fl=i.SHA512_IV[11]|0,this.Gh=i.SHA512_IV[12]|0,this.Gl=i.SHA512_IV[13]|0,this.Hh=i.SHA512_IV[14]|0,this.Hl=i.SHA512_IV[15]|0}get(){const{Ah:D,Al:Q,Bh:I,Bl:H,Ch:G,Cl:j,Dh:V,Dl:Z,Eh:Y,El:$,Fh:P,Fl:J,Gh:tt,Gl:B,Hh:W,Hl:et}=this;return[D,Q,I,H,G,j,V,Z,Y,$,P,J,tt,B,W,et]}set(D,Q,I,H,G,j,V,Z,Y,$,P,J,tt,B,W,et){this.Ah=D|0,this.Al=Q|0,this.Bh=I|0,this.Bl=H|0,this.Ch=G|0,this.Cl=j|0,this.Dh=V|0,this.Dl=Z|0,this.Eh=Y|0,this.El=$|0,this.Fh=P|0,this.Fl=J|0,this.Gh=tt|0,this.Gl=B|0,this.Hh=W|0,this.Hl=et|0}process(D,Q){for(let R=0;R<16;R++,Q+=4)v[R]=D.getUint32(Q),y[R]=D.getUint32(Q+=4);for(let R=16;R<80;R++){const X=v[R-15]|0,ot=y[R-15]|0,dt=t.rotrSH(X,ot,1)^t.rotrSH(X,ot,8)^t.shrSH(X,ot,7),mt=t.rotrSL(X,ot,1)^t.rotrSL(X,ot,8)^t.shrSL(X,ot,7),_t=v[R-2]|0,Ct=y[R-2]|0,Et=t.rotrSH(_t,Ct,19)^t.rotrBH(_t,Ct,61)^t.shrSH(_t,Ct,6),ne=t.rotrSL(_t,Ct,19)^t.rotrBL(_t,Ct,61)^t.shrSL(_t,Ct,6),Me=t.add4L(mt,ne,y[R-7],y[R-16]),Re=t.add4H(Me,dt,Et,v[R-7],v[R-16]);v[R]=Re|0,y[R]=Me|0}let{Ah:I,Al:H,Bh:G,Bl:j,Ch:V,Cl:Z,Dh:Y,Dl:$,Eh:P,El:J,Fh:tt,Fl:B,Gh:W,Gl:et,Hh:k,Hl:q}=this;for(let R=0;R<80;R++){const X=t.rotrSH(P,J,14)^t.rotrSH(P,J,18)^t.rotrBH(P,J,41),ot=t.rotrSL(P,J,14)^t.rotrSL(P,J,18)^t.rotrBL(P,J,41),dt=P&tt^~P&W,mt=J&B^~J&et,_t=t.add5L(q,ot,mt,m[R],y[R]),Ct=t.add5H(_t,k,X,dt,p[R],v[R]),Et=_t|0,ne=t.rotrSH(I,H,28)^t.rotrBH(I,H,34)^t.rotrBH(I,H,39),Me=t.rotrSL(I,H,28)^t.rotrBL(I,H,34)^t.rotrBL(I,H,39),Re=I&G^I&V^G&V,Fe=H&j^H&Z^j&Z;k=W|0,q=et|0,W=tt|0,et=B|0,tt=P|0,B=J|0,{h:P,l:J}=t.add(Y|0,$|0,Ct|0,Et|0),Y=V|0,$=Z|0,V=G|0,Z=j|0,G=I|0,j=H|0;const jn=t.add3L(Et,Me,Fe);I=t.add3H(jn,Ct,ne,Re),H=jn|0}({h:I,l:H}=t.add(this.Ah|0,this.Al|0,I|0,H|0)),{h:G,l:j}=t.add(this.Bh|0,this.Bl|0,G|0,j|0),{h:V,l:Z}=t.add(this.Ch|0,this.Cl|0,V|0,Z|0),{h:Y,l:$}=t.add(this.Dh|0,this.Dl|0,Y|0,$|0),{h:P,l:J}=t.add(this.Eh|0,this.El|0,P|0,J|0),{h:tt,l:B}=t.add(this.Fh|0,this.Fl|0,tt|0,B|0),{h:W,l:et}=t.add(this.Gh|0,this.Gl|0,W|0,et|0),{h:k,l:q}=t.add(this.Hh|0,this.Hl|0,k|0,q|0),this.set(I,H,G,j,V,Z,Y,$,P,J,tt,B,W,et,k,q)}roundClean(){(0,e.clean)(v,y)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}qe.SHA512=w;class T extends w{constructor(){super(48),this.Ah=i.SHA384_IV[0]|0,this.Al=i.SHA384_IV[1]|0,this.Bh=i.SHA384_IV[2]|0,this.Bl=i.SHA384_IV[3]|0,this.Ch=i.SHA384_IV[4]|0,this.Cl=i.SHA384_IV[5]|0,this.Dh=i.SHA384_IV[6]|0,this.Dl=i.SHA384_IV[7]|0,this.Eh=i.SHA384_IV[8]|0,this.El=i.SHA384_IV[9]|0,this.Fh=i.SHA384_IV[10]|0,this.Fl=i.SHA384_IV[11]|0,this.Gh=i.SHA384_IV[12]|0,this.Gl=i.SHA384_IV[13]|0,this.Hh=i.SHA384_IV[14]|0,this.Hl=i.SHA384_IV[15]|0}}qe.SHA384=T;const x=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends w{constructor(){super(28),this.Ah=x[0]|0,this.Al=x[1]|0,this.Bh=x[2]|0,this.Bl=x[3]|0,this.Ch=x[4]|0,this.Cl=x[5]|0,this.Dh=x[6]|0,this.Dl=x[7]|0,this.Eh=x[8]|0,this.El=x[9]|0,this.Fh=x[10]|0,this.Fl=x[11]|0,this.Gh=x[12]|0,this.Gl=x[13]|0,this.Hh=x[14]|0,this.Hl=x[15]|0}}qe.SHA512_224=E;class O extends w{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return qe.SHA512_256=O,qe.sha256=(0,e.createHasher)(()=>new l),qe.sha224=(0,e.createHasher)(()=>new u),qe.sha512=(0,e.createHasher)(()=>new w),qe.sha384=(0,e.createHasher)(()=>new T),qe.sha512_256=(0,e.createHasher)(()=>new O),qe.sha512_224=(0,e.createHasher)(()=>new E),qe}var xw;function AA(){if(xw)return Ps;xw=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.sha224=Ps.SHA224=Ps.sha256=Ps.SHA256=void 0;const i=TA();return Ps.SHA256=i.SHA256,Ps.sha256=i.sha256,Ps.SHA224=i.SHA224,Ps.sha224=i.sha224,Ps}var L_,Sw;function EA(){if(Sw)return L_;Sw=1;function i(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var l=t.charAt(r),u=l.charCodeAt(0);if(e[u]!==255)throw new TypeError(l+" is ambiguous");e[u]=r}var f=t.length,p=t.charAt(0),m=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function y(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,O=0,U=x.length;O!==U&&x[O]===0;)O++,A++;for(var D=(U-O)*v+1>>>0,Q=new Uint8Array(D);O!==U;){for(var I=x[O],H=0,G=D-1;(I!==0||H<E)&&G!==-1;G--,H++)I+=256*Q[G]>>>0,Q[G]=I%f>>>0,I=I/f>>>0;if(I!==0)throw new Error("Non-zero carry");E=H,O++}for(var j=D-E;j!==D&&Q[j]===0;)j++;for(var V=p.repeat(A);j<D;++j)V+=t.charAt(Q[j]);return V}function w(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,O=0;x[A]===p;)E++,A++;for(var U=(x.length-A)*m+1>>>0,D=new Uint8Array(U);x[A];){var Q=x.charCodeAt(A);if(Q>255)return;var I=e[Q];if(I===255)return;for(var H=0,G=U-1;(I!==0||H<O)&&G!==-1;G--,H++)I+=f*D[G]>>>0,D[G]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");O=H,A++}for(var j=U-O;j!==U&&D[j]===0;)j++;for(var V=new Uint8Array(E+(U-j)),Z=E;j!==U;)V[Z++]=D[j++];return V}function T(x){var A=w(x);if(A)return A;throw new Error("Non-base"+f+" character")}return{encode:y,decodeUnsafe:w,decode:T}}return L_=i,L_}var M_,Tw;function CA(){return Tw||(Tw=1,M_=EA()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),M_}var k_,Aw;function LA(){if(Aw)return k_;Aw=1;var i=CA();return k_=function(t){function e(u){var f=Uint8Array.from(u),p=t(f),m=f.length+4,v=new Uint8Array(m);return v.set(f,0),v.set(p.subarray(0,4),f.length),i.encode(v,m)}function s(u){var f=u.slice(0,-4),p=u.slice(-4),m=t(f);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return f}function r(u){var f=i.decodeUnsafe(u);if(f)return s(f)}function l(u){var f=i.decode(u),p=s(f);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:l,decodeUnsafe:r}},k_}var D_,Ew;function MA(){if(Ew)return D_;Ew=1;var{sha256:i}=AA(),t=LA();function e(s){return i(i(s))}return D_=t(e),D_}var kA=MA();const gh=w1(kA),DA=i=>Array.from(i,t=>t.toString(16).padStart(2,"0")).join(""),Ed="automerge:",OA=i=>{const[t,e,...s]=i.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${Ed}(\\w+)$`),[,l]=t.match(r)||[],u=l,f=A1(u);if(!f)throw new Error("Invalid document URL: "+i);if(e===void 0)return{binaryDocumentId:f,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(v=>{try{return DA(gh.decode(v))}catch{throw new Error(`Invalid head in URL: ${v}`)}});return{binaryDocumentId:f,hexHeads:m,documentId:u,heads:p}},S1=i=>{if(i instanceof Uint8Array||typeof i=="string")return Ed+(i instanceof Uint8Array?Cw(i):i);const{documentId:t,heads:e=void 0}=i;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?Cw(t):t;let r=`${Ed}${s}`;return e!==void 0&&(e.forEach(l=>{try{gh.decode(l)}catch{throw new Error(`Invalid head: ${l}`)}}),r+="#"+e.join("|")),r},RA=i=>IA(i)?i:T1(i)?S1({documentId:i}):NA(i)?zA(i):void 0,IA=i=>{if(typeof i!="string"||!i||!i.startsWith(Ed))return!1;try{const{documentId:t,heads:e}=OA(i);return!(!T1(t)||e&&!e.every(s=>{try{return gh.decode(s),!0}catch{return!1}}))}catch{return!1}},T1=i=>typeof i!="string"?!1:A1(i)!==void 0,NA=i=>typeof i=="string"&&e0(i),A1=i=>gh.decodeUnsafe(i),Cw=i=>gh.encode(i),zA=i=>{if(!e0(i))return;const t=bA(i);return S1({documentId:t})},Lw=new Map;function PA(i,{suspense:t}={suspense:!1}){const e=yA(),s=Rt.useRef(),[r,l]=Rt.useState();let u=i&&r&&r.url===RA(i)?r:void 0;if(i&&!u){const p=e.findWithProgress(i);p.state==="ready"&&(u=p.handle)}let f=i?Lw.get(i):void 0;if(!f&&i){s.current?.abort(),s.current=new AbortController;const p=e.find(i,{signal:s.current.signal});f=gA(p),Lw.set(i,f)}return Rt.useEffect(()=>{u||t||!f||f.promise.then(p=>{l(p)}).catch(()=>{l(void 0)})},[u,t,f]),u||!t||!f?u:f.read()}function BA(i,t={suspense:!1}){const e=PA(i,t),[s,r]=Rt.useState(()=>e?.doc()),[l,u]=Rt.useState();Rt.useEffect(()=>{r(e?.doc())},[e]),Rt.useEffect(()=>{if(!e)return;const p=()=>r(e.doc()),m=()=>{u(new Error(`Document ${i} was deleted`))};return e.on("change",p),e.on("delete",m),()=>{e.removeListener("change",p),e.removeListener("delete",m)}},[e,i]);const f=Rt.useCallback((p,m)=>{e.change(p,m)},[e]);if(l)throw l;return s?[s,f]:[void 0,()=>{}]}var O_={exports:{}},Mw;function UA(){return Mw||(Mw=1,(function(i){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,v){this.fn=p,this.context=m,this.once=v||!1}function l(p,m,v,y,w){if(typeof v!="function")throw new TypeError("The listener must be a function");var T=new r(v,y||p,w),x=e?e+m:m;return p._events[x]?p._events[x].fn?p._events[x]=[p._events[x],T]:p._events[x].push(T):(p._events[x]=T,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var m=[],v,y;if(this._eventsCount===0)return m;for(y in v=this._events)t.call(v,y)&&m.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},f.prototype.listeners=function(m){var v=e?e+m:m,y=this._events[v];if(!y)return[];if(y.fn)return[y.fn];for(var w=0,T=y.length,x=new Array(T);w<T;w++)x[w]=y[w].fn;return x},f.prototype.listenerCount=function(m){var v=e?e+m:m,y=this._events[v];return y?y.fn?1:y.length:0},f.prototype.emit=function(m,v,y,w,T,x){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],O=arguments.length,U,D;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),O){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,v),!0;case 3:return E.fn.call(E.context,v,y),!0;case 4:return E.fn.call(E.context,v,y,w),!0;case 5:return E.fn.call(E.context,v,y,w,T),!0;case 6:return E.fn.call(E.context,v,y,w,T,x),!0}for(D=1,U=new Array(O-1);D<O;D++)U[D-1]=arguments[D];E.fn.apply(E.context,U)}else{var Q=E.length,I;for(D=0;D<Q;D++)switch(E[D].once&&this.removeListener(m,E[D].fn,void 0,!0),O){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,v);break;case 3:E[D].fn.call(E[D].context,v,y);break;case 4:E[D].fn.call(E[D].context,v,y,w);break;default:if(!U)for(I=1,U=new Array(O-1);I<O;I++)U[I-1]=arguments[I];E[D].fn.apply(E[D].context,U)}}return!0},f.prototype.on=function(m,v,y){return l(this,m,v,y,!1)},f.prototype.once=function(m,v,y){return l(this,m,v,y,!0)},f.prototype.removeListener=function(m,v,y,w){var T=e?e+m:m;if(!this._events[T])return this;if(!v)return u(this,T),this;var x=this._events[T];if(x.fn)x.fn===v&&(!w||x.once)&&(!y||x.context===y)&&u(this,T);else{for(var A=0,E=[],O=x.length;A<O;A++)(x[A].fn!==v||w&&!x[A].once||y&&x[A].context!==y)&&E.push(x[A]);E.length?this._events[T]=E.length===1?E[0]:E:u(this,T)}return this},f.prototype.removeAllListeners=function(m){var v;return m?(v=e?e+m:m,this._events[v]&&u(this,v)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,i.exports=f})(O_)),O_.exports}var HA=UA();const VA=w1(HA);new VA;var Yu={exports:{}};var qA=Yu.exports,kw;function jA(){return kw||(kw=1,(function(i,t){(function(e,s){s(t)})(qA,(function(e){var s="1.9.4";function r(a){var h,_,S,C;for(_=1,S=arguments.length;_<S;_++){C=arguments[_];for(h in C)a[h]=C[h]}return a}var l=Object.create||(function(){function a(){}return function(h){return a.prototype=h,new a}})();function u(a,h){var _=Array.prototype.slice;if(a.bind)return a.bind.apply(a,_.call(arguments,1));var S=_.call(arguments,2);return function(){return a.apply(h,S.length?S.concat(_.call(arguments)):arguments)}}var f=0;function p(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function m(a,h,_){var S,C,N,F;return F=function(){S=!1,C&&(N.apply(_,C),C=!1)},N=function(){S?C=arguments:(a.apply(_,arguments),setTimeout(F,h),S=!0)},N}function v(a,h,_){var S=h[1],C=h[0],N=S-C;return a===S&&_?a:((a-C)%N+N)%N+C}function y(){return!1}function w(a,h){if(h===!1)return a;var _=Math.pow(10,h===void 0?6:h);return Math.round(a*_)/_}function T(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function x(a){return T(a).split(/\s+/)}function A(a,h){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?l(a.options):{});for(var _ in h)a.options[_]=h[_];return a.options}function E(a,h,_){var S=[];for(var C in a)S.push(encodeURIComponent(_?C.toUpperCase():C)+"="+encodeURIComponent(a[C]));return(!h||h.indexOf("?")===-1?"?":"&")+S.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function U(a,h){return a.replace(O,function(_,S){var C=h[S];if(C===void 0)throw new Error("No value provided for variable "+_);return typeof C=="function"&&(C=C(h)),C})}var D=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function Q(a,h){for(var _=0;_<a.length;_++)if(a[_]===h)return _;return-1}var I="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var G=0;function j(a){var h=+new Date,_=Math.max(0,16-(h-G));return G=h+_,window.setTimeout(a,_)}var V=window.requestAnimationFrame||H("RequestAnimationFrame")||j,Z=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Y(a,h,_){if(_&&V===j)a.call(h);else return V.call(window,u(a,h))}function $(a){a&&Z.call(window,a)}var P={__proto__:null,extend:r,create:l,bind:u,get lastId(){return f},stamp:p,throttle:m,wrapNum:v,falseFn:y,formatNum:w,trim:T,splitWords:x,setOptions:A,getParamString:E,template:U,isArray:D,indexOf:Q,emptyImageUrl:I,requestFn:V,cancelFn:Z,requestAnimFrame:Y,cancelAnimFrame:$};function J(){}J.extend=function(a){var h=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,S=l(_);S.constructor=h,h.prototype=S;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(h[C]=this[C]);return a.statics&&r(h,a.statics),a.includes&&(tt(a.includes),r.apply(null,[S].concat(a.includes))),r(S,a),delete S.statics,delete S.includes,S.options&&(S.options=_.options?l(_.options):{},r(S.options,a.options)),S._initHooks=[],S.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var N=0,F=S._initHooks.length;N<F;N++)S._initHooks[N].call(this)}},h},J.include=function(a){var h=this.prototype.options;return r(this.prototype,a),a.options&&(this.prototype.options=h,this.mergeOptions(a.options)),this},J.mergeOptions=function(a){return r(this.prototype.options,a),this},J.addInitHook=function(a){var h=Array.prototype.slice.call(arguments,1),_=typeof a=="function"?a:function(){this[a].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function tt(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=D(a)?a:[a];for(var h=0;h<a.length;h++)a[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var B={on:function(a,h,_){if(typeof a=="object")for(var S in a)this._on(S,a[S],h);else{a=x(a);for(var C=0,N=a.length;C<N;C++)this._on(a[C],h,_)}return this},off:function(a,h,_){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var S in a)this._off(S,a[S],h);else{a=x(a);for(var C=arguments.length===1,N=0,F=a.length;N<F;N++)C?this._off(a[N]):this._off(a[N],h,_)}return this},_on:function(a,h,_,S){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(a,h,_)===!1){_===this&&(_=void 0);var C={fn:h,ctx:_};S&&(C.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(C)}},_off:function(a,h,_){var S,C,N;if(this._events&&(S=this._events[a],!!S)){if(arguments.length===1){if(this._firingCount)for(C=0,N=S.length;C<N;C++)S[C].fn=y;delete this._events[a];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var F=this._listens(a,h,_);if(F!==!1){var rt=S[F];this._firingCount&&(rt.fn=y,this._events[a]=S=S.slice()),S.splice(F,1)}}},fire:function(a,h,_){if(!this.listens(a,_))return this;var S=r({},h,{type:a,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var C=this._events[a];if(C){this._firingCount=this._firingCount+1||1;for(var N=0,F=C.length;N<F;N++){var rt=C[N],ut=rt.fn;rt.once&&this.off(a,ut,rt.ctx),ut.call(rt.ctx||this,S)}this._firingCount--}}return _&&this._propagateEvent(S),this},listens:function(a,h,_,S){typeof a!="string"&&console.warn('"string" type argument expected');var C=h;typeof h!="function"&&(S=!!h,C=void 0,_=void 0);var N=this._events&&this._events[a];if(N&&N.length&&this._listens(a,C,_)!==!1)return!0;if(S){for(var F in this._eventParents)if(this._eventParents[F].listens(a,h,_,S))return!0}return!1},_listens:function(a,h,_){if(!this._events)return!1;var S=this._events[a]||[];if(!h)return!!S.length;_===this&&(_=void 0);for(var C=0,N=S.length;C<N;C++)if(S[C].fn===h&&S[C].ctx===_)return C;return!1},once:function(a,h,_){if(typeof a=="object")for(var S in a)this._on(S,a[S],h,!0);else{a=x(a);for(var C=0,N=a.length;C<N;C++)this._on(a[C],h,_,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[p(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[p(a)],this},_propagateEvent:function(a){for(var h in this._eventParents)this._eventParents[h].fire(a.type,r({layer:a.target,propagatedFrom:a.target},a),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var W=J.extend(B);function et(a,h,_){this.x=_?Math.round(a):a,this.y=_?Math.round(h):h}var k=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};et.prototype={clone:function(){return new et(this.x,this.y)},add:function(a){return this.clone()._add(q(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(q(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new et(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new et(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=k(this.x),this.y=k(this.y),this},distanceTo:function(a){a=q(a);var h=a.x-this.x,_=a.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(a){return a=q(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=q(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function q(a,h,_){return a instanceof et?a:D(a)?new et(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new et(a.x,a.y):new et(a,h,_)}function R(a,h){if(a)for(var _=h?[a,h]:a,S=0,C=_.length;S<C;S++)this.extend(_[S])}R.prototype={extend:function(a){var h,_;if(!a)return this;if(a instanceof et||typeof a[0]=="number"||"x"in a)h=_=q(a);else if(a=X(a),h=a.min,_=a.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(a){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var h,_;return typeof a[0]=="number"||a instanceof et?a=q(a):a=X(a),a instanceof R?(h=a.min,_=a.max):h=_=a,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(a){a=X(a);var h=this.min,_=this.max,S=a.min,C=a.max,N=C.x>=h.x&&S.x<=_.x,F=C.y>=h.y&&S.y<=_.y;return N&&F},overlaps:function(a){a=X(a);var h=this.min,_=this.max,S=a.min,C=a.max,N=C.x>h.x&&S.x<_.x,F=C.y>h.y&&S.y<_.y;return N&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var h=this.min,_=this.max,S=Math.abs(h.x-_.x)*a,C=Math.abs(h.y-_.y)*a;return X(q(h.x-S,h.y-C),q(_.x+S,_.y+C))},equals:function(a){return a?(a=X(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function X(a,h){return!a||a instanceof R?a:new R(a,h)}function ot(a,h){if(a)for(var _=h?[a,h]:a,S=0,C=_.length;S<C;S++)this.extend(_[S])}ot.prototype={extend:function(a){var h=this._southWest,_=this._northEast,S,C;if(a instanceof mt)S=a,C=a;else if(a instanceof ot){if(S=a._southWest,C=a._northEast,!S||!C)return this}else return a?this.extend(_t(a)||dt(a)):this;return!h&&!_?(this._southWest=new mt(S.lat,S.lng),this._northEast=new mt(C.lat,C.lng)):(h.lat=Math.min(S.lat,h.lat),h.lng=Math.min(S.lng,h.lng),_.lat=Math.max(C.lat,_.lat),_.lng=Math.max(C.lng,_.lng)),this},pad:function(a){var h=this._southWest,_=this._northEast,S=Math.abs(h.lat-_.lat)*a,C=Math.abs(h.lng-_.lng)*a;return new ot(new mt(h.lat-S,h.lng-C),new mt(_.lat+S,_.lng+C))},getCenter:function(){return new mt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new mt(this.getNorth(),this.getWest())},getSouthEast:function(){return new mt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof mt||"lat"in a?a=_t(a):a=dt(a);var h=this._southWest,_=this._northEast,S,C;return a instanceof ot?(S=a.getSouthWest(),C=a.getNorthEast()):S=C=a,S.lat>=h.lat&&C.lat<=_.lat&&S.lng>=h.lng&&C.lng<=_.lng},intersects:function(a){a=dt(a);var h=this._southWest,_=this._northEast,S=a.getSouthWest(),C=a.getNorthEast(),N=C.lat>=h.lat&&S.lat<=_.lat,F=C.lng>=h.lng&&S.lng<=_.lng;return N&&F},overlaps:function(a){a=dt(a);var h=this._southWest,_=this._northEast,S=a.getSouthWest(),C=a.getNorthEast(),N=C.lat>h.lat&&S.lat<_.lat,F=C.lng>h.lng&&S.lng<_.lng;return N&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,h){return a?(a=dt(a),this._southWest.equals(a.getSouthWest(),h)&&this._northEast.equals(a.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function dt(a,h){return a instanceof ot?a:new ot(a,h)}function mt(a,h,_){if(isNaN(a)||isNaN(h))throw new Error("Invalid LatLng object: ("+a+", "+h+")");this.lat=+a,this.lng=+h,_!==void 0&&(this.alt=+_)}mt.prototype={equals:function(a,h){if(!a)return!1;a=_t(a);var _=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return _<=(h===void 0?1e-9:h)},toString:function(a){return"LatLng("+w(this.lat,a)+", "+w(this.lng,a)+")"},distanceTo:function(a){return Et.distance(this,_t(a))},wrap:function(){return Et.wrapLatLng(this)},toBounds:function(a){var h=180*a/40075017,_=h/Math.cos(Math.PI/180*this.lat);return dt([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new mt(this.lat,this.lng,this.alt)}};function _t(a,h,_){return a instanceof mt?a:D(a)&&typeof a[0]!="object"?a.length===3?new mt(a[0],a[1],a[2]):a.length===2?new mt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new mt(a.lat,"lng"in a?a.lng:a.lon,a.alt):h===void 0?null:new mt(a,h,_)}var Ct={latLngToPoint:function(a,h){var _=this.projection.project(a),S=this.scale(h);return this.transformation._transform(_,S)},pointToLatLng:function(a,h){var _=this.scale(h),S=this.transformation.untransform(a,_);return this.projection.unproject(S)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(a),S=this.transformation.transform(h.min,_),C=this.transformation.transform(h.max,_);return new R(S,C)},infinite:!1,wrapLatLng:function(a){var h=this.wrapLng?v(a.lng,this.wrapLng,!0):a.lng,_=this.wrapLat?v(a.lat,this.wrapLat,!0):a.lat,S=a.alt;return new mt(_,h,S)},wrapLatLngBounds:function(a){var h=a.getCenter(),_=this.wrapLatLng(h),S=h.lat-_.lat,C=h.lng-_.lng;if(S===0&&C===0)return a;var N=a.getSouthWest(),F=a.getNorthEast(),rt=new mt(N.lat-S,N.lng-C),ut=new mt(F.lat-S,F.lng-C);return new ot(rt,ut)}},Et=r({},Ct,{wrapLng:[-180,180],R:6371e3,distance:function(a,h){var _=Math.PI/180,S=a.lat*_,C=h.lat*_,N=Math.sin((h.lat-a.lat)*_/2),F=Math.sin((h.lng-a.lng)*_/2),rt=N*N+Math.cos(S)*Math.cos(C)*F*F,ut=2*Math.atan2(Math.sqrt(rt),Math.sqrt(1-rt));return this.R*ut}}),ne=6378137,Me={R:ne,MAX_LATITUDE:85.0511287798,project:function(a){var h=Math.PI/180,_=this.MAX_LATITUDE,S=Math.max(Math.min(_,a.lat),-_),C=Math.sin(S*h);return new et(this.R*a.lng*h,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(a){var h=180/Math.PI;return new mt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*h,a.x*h/this.R)},bounds:(function(){var a=ne*Math.PI;return new R([-a,-a],[a,a])})()};function Re(a,h,_,S){if(D(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=h,this._c=_,this._d=S}Re.prototype={transform:function(a,h){return this._transform(a.clone(),h)},_transform:function(a,h){return h=h||1,a.x=h*(this._a*a.x+this._b),a.y=h*(this._c*a.y+this._d),a},untransform:function(a,h){return h=h||1,new et((a.x/h-this._b)/this._a,(a.y/h-this._d)/this._c)}};function Fe(a,h,_,S){return new Re(a,h,_,S)}var jn=r({},Et,{code:"EPSG:3857",projection:Me,transformation:(function(){var a=.5/(Math.PI*Me.R);return Fe(a,.5,-a,.5)})()}),ii=r({},jn,{code:"EPSG:900913"});function Dt(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Wt(a,h){var _="",S,C,N,F,rt,ut;for(S=0,N=a.length;S<N;S++){for(rt=a[S],C=0,F=rt.length;C<F;C++)ut=rt[C],_+=(C?"L":"M")+ut.x+" "+ut.y;_+=h?Nt.svg?"z":"x":""}return _||"M0 0"}var Ie=document.documentElement.style,be="ActiveXObject"in window,oe=be&&!document.addEventListener,xe="msLaunchUri"in navigator&&!("documentMode"in document),nn=pn("webkit"),si=pn("android"),_i=pn("android 2")||pn("android 3"),dn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ho=si&&pn("Google")&&dn<537&&!("AudioNode"in window),ri=!!window.opera,da=!xe&&pn("chrome"),Ys=pn("gecko")&&!nn&&!ri&&!be,Pc=!da&&pn("safari"),pa=pn("phantom"),bl="OTransition"in Ie,Bc=navigator.platform.indexOf("Win")===0,Es=be&&"transition"in Ie,Cn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_i,Pi="MozPerspective"in Ie,Gn=!window.L_DISABLE_3D&&(Es||Cn||Pi)&&!bl&&!pa,Er=typeof orientation<"u"||pn("mobile"),Uc=Er&&nn,Hc=Er&&Cn,Cr=!window.PointerEvent&&window.MSPointerEvent,Lr=!!(window.PointerEvent||Cr),St="ontouchstart"in window||!!window.TouchEvent,Lt=!window.L_NO_TOUCH&&(St||Lr),Vt=Er&&ri,Mt=Er&&Ys,It=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ot=(function(){var a=!1;try{var h=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",y,h),window.removeEventListener("testPassiveEventSupport",y,h)}catch{}return a})(),jt=(function(){return!!document.createElement("canvas").getContext})(),Gt=!!(document.createElementNS&&Dt("svg").createSVGRect),Ft=!!Gt&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ke=!Gt&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var h=a.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}})(),Je=navigator.platform.indexOf("Mac")===0,Bi=navigator.platform.indexOf("Linux")===0;function pn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Nt={ie:be,ielt9:oe,edge:xe,webkit:nn,android:si,android23:_i,androidStock:ho,opera:ri,chrome:da,gecko:Ys,safari:Pc,phantom:pa,opera12:bl,win:Bc,ie3d:Es,webkit3d:Cn,gecko3d:Pi,any3d:Gn,mobile:Er,mobileWebkit:Uc,mobileWebkit3d:Hc,msPointer:Cr,pointer:Lr,touch:Lt,touchNative:St,mobileOpera:Vt,mobileGecko:Mt,retina:It,passiveEvents:Ot,canvas:jt,svg:Gt,vml:Ke,inlineSvg:Ft,mac:Je,linux:Bi},oi=Nt.msPointer?"MSPointerDown":"pointerdown",ma=Nt.msPointer?"MSPointerMove":"pointermove",Cs=Nt.msPointer?"MSPointerUp":"pointerup",vn=Nt.msPointer?"MSPointerCancel":"pointercancel",Nn={touchstart:oi,touchmove:ma,touchend:Cs,touchcancel:vn},Mr={touchstart:po,touchmove:Qs,touchend:Qs,touchcancel:Qs},Xs={},Nh=!1;function kp(a,h,_){return h==="touchstart"&&fo(),Mr[h]?(_=Mr[h].bind(this,_),a.addEventListener(Nn[h],_,!1),_):(console.warn("wrong event specified:",h),y)}function zh(a,h,_){if(!Nn[h]){console.warn("wrong event specified:",h);return}a.removeEventListener(Nn[h],_,!1)}function _a(a){Xs[a.pointerId]=a}function Vc(a){Xs[a.pointerId]&&(Xs[a.pointerId]=a)}function kr(a){delete Xs[a.pointerId]}function fo(){Nh||(document.addEventListener(oi,_a,!0),document.addEventListener(ma,Vc,!0),document.addEventListener(Cs,kr,!0),document.addEventListener(vn,kr,!0),Nh=!0)}function Qs(a,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in Xs)h.touches.push(Xs[_]);h.changedTouches=[h],a(h)}}function po(a,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&rn(h),Qs(a,h)}function bn(a){var h={},_,S;for(S in a)_=a[S],h[S]=_&&_.bind?_.bind(a):_;return a=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Ph=200;function Bh(a,h){a.addEventListener("dblclick",h);var _=0,S;function C(N){if(N.detail!==1){S=N.detail;return}if(!(N.pointerType==="mouse"||N.sourceCapabilities&&!N.sourceCapabilities.firesTouchEvents)){var F=Sa(N);if(!(F.some(function(ut){return ut instanceof HTMLLabelElement&&ut.attributes.for})&&!F.some(function(ut){return ut instanceof HTMLInputElement||ut instanceof HTMLSelectElement}))){var rt=Date.now();rt-_<=Ph?(S++,S===2&&h(bn(N))):S=1,_=rt}}}return a.addEventListener("click",C),{dblclick:h,simDblclick:C}}function Dr(a,h){a.removeEventListener("dblclick",h.dblclick),a.removeEventListener("click",h.simDblclick)}var Fs=va(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ga=va(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qc=ga==="webkitTransition"||ga==="OTransition"?ga+"End":"transitionend";function jc(a){return typeof a=="string"?document.getElementById(a):a}function ya(a,h){var _=a.style[h]||a.currentStyle&&a.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var S=document.defaultView.getComputedStyle(a,null);_=S?S[h]:null}return _==="auto"?null:_}function le(a,h,_){var S=document.createElement(a);return S.className=h||"",_&&_.appendChild(S),S}function Ne(a){var h=a.parentNode;h&&h.removeChild(a)}function gi(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ln(a){var h=a.parentNode;h&&h.lastChild!==a&&h.appendChild(a)}function Or(a){var h=a.parentNode;h&&h.firstChild!==a&&h.insertBefore(a,h.firstChild)}function Gc(a,h){if(a.classList!==void 0)return a.classList.contains(h);var _=wl(a);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function te(a,h){if(a.classList!==void 0)for(var _=x(h),S=0,C=_.length;S<C;S++)a.classList.add(_[S]);else if(!Gc(a,h)){var N=wl(a);mo(a,(N?N+" ":"")+h)}}function $e(a,h){a.classList!==void 0?a.classList.remove(h):mo(a,T((" "+wl(a)+" ").replace(" "+h+" "," ")))}function mo(a,h){a.className.baseVal===void 0?a.className=h:a.className.baseVal=h}function wl(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function We(a,h){"opacity"in a.style?a.style.opacity=h:"filter"in a.style&&Zc(a,h)}function Zc(a,h){var _=!1,S="DXImageTransform.Microsoft.Alpha";try{_=a.filters.item(S)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):a.style.filter+=" progid:"+S+"(opacity="+h+")"}function va(a){for(var h=document.documentElement.style,_=0;_<a.length;_++)if(a[_]in h)return a[_];return!1}function Ls(a,h,_){var S=h||new et(0,0);a.style[Fs]=(Nt.ie3d?"translate("+S.x+"px,"+S.y+"px)":"translate3d("+S.x+"px,"+S.y+"px,0)")+(_?" scale("+_+")":"")}function He(a,h){a._leaflet_pos=h,Nt.any3d?Ls(a,h):(a.style.left=h.x+"px",a.style.top=h.y+"px")}function Ks(a){return a._leaflet_pos||new et(0,0)}var _o,is,Wc;if("onselectstart"in document)_o=function(){Qt(window,"selectstart",rn)},is=function(){ke(window,"selectstart",rn)};else{var go=va(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);_o=function(){if(go){var a=document.documentElement.style;Wc=a[go],a[go]="none"}},is=function(){go&&(document.documentElement.style[go]=Wc,Wc=void 0)}}function xl(){Qt(window,"dragstart",rn)}function ba(){ke(window,"dragstart",rn)}var Sl,Yc;function yo(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(yi(),Sl=a,Yc=a.style.outlineStyle,a.style.outlineStyle="none",Qt(window,"keydown",yi))}function yi(){Sl&&(Sl.style.outlineStyle=Yc,Sl=void 0,Yc=void 0,ke(window,"keydown",yi))}function Tl(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function wa(a){var h=a.getBoundingClientRect();return{x:h.width/a.offsetWidth||1,y:h.height/a.offsetHeight||1,boundingClientRect:h}}var vo={__proto__:null,TRANSFORM:Fs,TRANSITION:ga,TRANSITION_END:qc,get:jc,getStyle:ya,create:le,remove:Ne,empty:gi,toFront:Ln,toBack:Or,hasClass:Gc,addClass:te,removeClass:$e,setClass:mo,getClass:wl,setOpacity:We,testProp:va,setTransform:Ls,setPosition:He,getPosition:Ks,get disableTextSelection(){return _o},get enableTextSelection(){return is},disableImageDrag:xl,enableImageDrag:ba,preventOutline:yo,restoreOutline:yi,getSizedParentNode:Tl,getScale:wa};function Qt(a,h,_,S){if(h&&typeof h=="object")for(var C in h)Hi(a,C,h[C],_);else{h=x(h);for(var N=0,F=h.length;N<F;N++)Hi(a,h[N],_,S)}return this}var Ui="_leaflet_events";function ke(a,h,_,S){if(arguments.length===1)Xc(a),delete a[Ui];else if(h&&typeof h=="object")for(var C in h)xa(a,C,h[C],_);else if(h=x(h),arguments.length===2)Xc(a,function(rt){return Q(h,rt)!==-1});else for(var N=0,F=h.length;N<F;N++)xa(a,h[N],_,S);return this}function Xc(a,h){for(var _ in a[Ui]){var S=_.split(/\d/)[0];(!h||h(S))&&xa(a,S,null,null,_)}}var Rr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Hi(a,h,_,S){var C=h+p(_)+(S?"_"+p(S):"");if(a[Ui]&&a[Ui][C])return this;var N=function(rt){return _.call(S||a,rt||window.event)},F=N;!Nt.touchNative&&Nt.pointer&&h.indexOf("touch")===0?N=kp(a,h,N):Nt.touch&&h==="dblclick"?N=Bh(a,N):"addEventListener"in a?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?a.addEventListener(Rr[h]||h,N,Nt.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(N=function(rt){rt=rt||window.event,Ms(a,rt)&&F(rt)},a.addEventListener(Rr[h],N,!1)):a.addEventListener(h,F,!1):a.attachEvent("on"+h,N),a[Ui]=a[Ui]||{},a[Ui][C]=N}function xa(a,h,_,S,C){C=C||h+p(_)+(S?"_"+p(S):"");var N=a[Ui]&&a[Ui][C];if(!N)return this;!Nt.touchNative&&Nt.pointer&&h.indexOf("touch")===0?zh(a,h,N):Nt.touch&&h==="dblclick"?Dr(a,N):"removeEventListener"in a?a.removeEventListener(Rr[h]||h,N,!1):a.detachEvent("on"+h,N),a[Ui][C]=null}function Vi(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function ss(a){return Hi(a,"wheel",Vi),this}function Ir(a){return Qt(a,"mousedown touchstart dblclick contextmenu",Vi),a._leaflet_disable_click=!0,this}function rn(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Js(a){return rn(a),Vi(a),this}function Sa(a){if(a.composedPath)return a.composedPath();for(var h=[],_=a.target;_;)h.push(_),_=_.parentNode;return h}function Ta(a,h){if(!h)return new et(a.clientX,a.clientY);var _=wa(h),S=_.boundingClientRect;return new et((a.clientX-S.left)/_.x-h.clientLeft,(a.clientY-S.top)/_.y-h.clientTop)}var Uh=Nt.linux&&Nt.chrome?window.devicePixelRatio:Nt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zn(a){return Nt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Uh:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ms(a,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==a;)_=_.parentNode}catch{return!1}return _!==a}var Al={__proto__:null,on:Qt,off:ke,stopPropagation:Vi,disableScrollPropagation:ss,disableClickPropagation:Ir,preventDefault:rn,stop:Js,getPropagationPath:Sa,getMousePosition:Ta,getWheelDelta:Zn,isExternalTarget:Ms,addListener:Qt,removeListener:ke},bo=W.extend({run:function(a,h,_,S){this.stop(),this._el=a,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(S||.5,.2),this._startPos=Ks(a),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(a){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),a):(this._runFrame(1),this._complete())},_runFrame:function(a,h){var _=this._startPos.add(this._offset.multiplyBy(a));h&&_._round(),He(this._el,_),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),fe=W.extend({options:{crs:jn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,h){h=A(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(_t(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ga&&Nt.any3d&&!Nt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Qt(this._proxy,qc,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),a=this._limitCenter(_t(a),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var S=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,h,_.zoom):this._tryAnimatedPan(a,_.pan);if(S)return clearTimeout(this._sizeTimer),this}return this._resetView(a,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(a,h){return this._loaded?this.setView(this.getCenter(),a,{zoom:h}):(this._zoom=a,this)},zoomIn:function(a,h){return a=a||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,h)},zoomOut:function(a,h){return a=a||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,h)},setZoomAround:function(a,h,_){var S=this.getZoomScale(h),C=this.getSize().divideBy(2),N=a instanceof et?a:this.latLngToContainerPoint(a),F=N.subtract(C).multiplyBy(1-1/S),rt=this.containerPointToLatLng(C.add(F));return this.setView(rt,h,{zoom:_})},_getBoundsCenterZoom:function(a,h){h=h||{},a=a.getBounds?a.getBounds():dt(a);var _=q(h.paddingTopLeft||h.padding||[0,0]),S=q(h.paddingBottomRight||h.padding||[0,0]),C=this.getBoundsZoom(a,!1,_.add(S));if(C=typeof h.maxZoom=="number"?Math.min(h.maxZoom,C):C,C===1/0)return{center:a.getCenter(),zoom:C};var N=S.subtract(_).divideBy(2),F=this.project(a.getSouthWest(),C),rt=this.project(a.getNorthEast(),C),ut=this.unproject(F.add(rt).divideBy(2).add(N),C);return{center:ut,zoom:C}},fitBounds:function(a,h){if(a=dt(a),!a.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(a,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,h){return this.setView(a,this._zoom,{pan:h})},panBy:function(a,h){if(a=q(a).round(),h=h||{},!a.x&&!a.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){te(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,h,_){if(_=_||{},_.animate===!1||!Nt.any3d)return this.setView(a,h,_);this._stop();var S=this.project(this.getCenter()),C=this.project(a),N=this.getSize(),F=this._zoom;a=_t(a),h=h===void 0?F:h;var rt=Math.max(N.x,N.y),ut=rt*this.getZoomScale(F,h),bt=C.distanceTo(S)||1,kt=1.42,Zt=kt*kt;function se(sn){var Rs=sn?-1:1,Br=sn?ut:rt,cu=ut*ut-rt*rt+Rs*Zt*Zt*bt*bt,Ha=2*Br*Zt*bt,Va=cu/Ha,ar=Math.sqrt(Va*Va+1)-Va,Is=ar<1e-9?-18:Math.log(ar);return Is}function Mn(sn){return(Math.exp(sn)-Math.exp(-sn))/2}function on(sn){return(Math.exp(sn)+Math.exp(-sn))/2}function li(sn){return Mn(sn)/on(sn)}var Se=se(0);function Te(sn){return rt*(on(Se)/on(Se+kt*sn))}function ce(sn){return rt*(on(Se)*li(Se+kt*sn)-Mn(Se))/Zt}function rr(sn){return 1-Math.pow(1-sn,1.5)}var xi=Date.now(),Ul=(se(1)-Se)/kt,or=_.duration?1e3*_.duration:1e3*Ul*.8;function lu(){var sn=(Date.now()-xi)/or,Rs=rr(sn)*Ul;sn<=1?(this._flyToFrame=Y(lu,this),this._move(this.unproject(S.add(C.subtract(S).multiplyBy(ce(Rs)/bt)),F),this.getScaleZoom(rt/Te(Rs),F),{flyTo:!0})):this._move(a,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),lu.call(this),this},flyToBounds:function(a,h){var _=this._getBoundsCenterZoom(a,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(a){return a=dt(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var h=this.options.minZoom;return this.options.minZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var h=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,h){this._enforcingBounds=!0;var _=this.getCenter(),S=this._limitCenter(_,this._zoom,dt(a));return _.equals(S)||this.panTo(S,h),this._enforcingBounds=!1,this},panInside:function(a,h){h=h||{};var _=q(h.paddingTopLeft||h.padding||[0,0]),S=q(h.paddingBottomRight||h.padding||[0,0]),C=this.project(this.getCenter()),N=this.project(a),F=this.getPixelBounds(),rt=X([F.min.add(_),F.max.subtract(S)]),ut=rt.getSize();if(!rt.contains(N)){this._enforcingBounds=!0;var bt=N.subtract(rt.getCenter()),kt=rt.extend(N).getSize().subtract(ut);C.x+=bt.x<0?-kt.x:kt.x,C.y+=bt.y<0?-kt.y:kt.y,this.panTo(this.unproject(C),h),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=r({animate:!1,pan:!0},a===!0?{animate:!0}:a);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),S=h.divideBy(2).round(),C=_.divideBy(2).round(),N=S.subtract(C);return!N.x&&!N.y?this:(a.animate&&a.pan?this.panBy(N):(a.pan&&this._rawPanBy(N),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=r({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=u(this._handleGeolocationResponse,this),_=u(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,a):navigator.geolocation.getCurrentPosition(h,_,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var h=a.code,_=a.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var h=a.coords.latitude,_=a.coords.longitude,S=new mt(h,_),C=S.toBounds(a.coords.accuracy*2),N=this._locateOptions;if(N.setView){var F=this.getBoundsZoom(C);this.setView(S,N.maxZoom?Math.min(F,N.maxZoom):F)}var rt={latlng:S,bounds:C,timestamp:a.timestamp};for(var ut in a.coords)typeof a.coords[ut]=="number"&&(rt[ut]=a.coords[ut]);this.fire("locationfound",rt)}},addHandler:function(a,h){if(!h)return this;var _=this[a]=new h(this);return this._handlers.push(_),this.options[a]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Ne(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,h){var _="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),S=le("div",_,h||this._mapPane);return a&&(this._panes[a]=S),S},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),h=this.unproject(a.getBottomLeft()),_=this.unproject(a.getTopRight());return new ot(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,h,_){a=dt(a),_=q(_||[0,0]);var S=this.getZoom()||0,C=this.getMinZoom(),N=this.getMaxZoom(),F=a.getNorthWest(),rt=a.getSouthEast(),ut=this.getSize().subtract(_),bt=X(this.project(rt,S),this.project(F,S)).getSize(),kt=Nt.any3d?this.options.zoomSnap:1,Zt=ut.x/bt.x,se=ut.y/bt.y,Mn=h?Math.max(Zt,se):Math.min(Zt,se);return S=this.getScaleZoom(Mn,S),kt&&(S=Math.round(S/(kt/100))*(kt/100),S=h?Math.ceil(S/kt)*kt:Math.floor(S/kt)*kt),Math.max(C,Math.min(N,S))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new et(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,h){var _=this._getTopLeftPoint(a,h);return new R(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(a)/_.scale(h)},getScaleZoom:function(a,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var S=_.zoom(a*_.scale(h));return isNaN(S)?1/0:S},project:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(_t(a),h)},unproject:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(q(a),h)},layerPointToLatLng:function(a){var h=q(a).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(a){var h=this.project(_t(a))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(_t(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(dt(a))},distance:function(a,h){return this.options.crs.distance(_t(a),_t(h))},containerPointToLayerPoint:function(a){return q(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return q(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var h=this.containerPointToLayerPoint(q(a));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_t(a)))},mouseEventToContainerPoint:function(a){return Ta(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var h=this._container=jc(a);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Qt(h,"scroll",this._onScroll,this),this._containerId=p(h)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Nt.any3d,te(a,"leaflet-container"+(Nt.touch?" leaflet-touch":"")+(Nt.retina?" leaflet-retina":"")+(Nt.ielt9?" leaflet-oldie":"")+(Nt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=ya(a,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),He(this._mapPane,new et(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(te(a.markerPane,"leaflet-zoom-hide"),te(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,h,_){He(this._mapPane,new et(0,0));var S=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var C=this._zoom!==h;this._moveStart(C,_)._move(a,h)._moveEnd(C),this.fire("viewreset"),S&&this.fire("load")},_moveStart:function(a,h){return a&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(a,h,_,S){h===void 0&&(h=this._zoom);var C=this._zoom!==h;return this._zoom=h,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),S?_&&_.pinch&&this.fire("zoom",_):((C||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){He(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[p(this._container)]=this;var h=a?ke:Qt;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Nt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,h){for(var _=[],S,C=h==="mouseout"||h==="mouseover",N=a.target||a.srcElement,F=!1;N;){if(S=this._targets[p(N)],S&&(h==="click"||h==="preclick")&&this._draggableMoved(S)){F=!0;break}if(S&&S.listens(h,!0)&&(C&&!Ms(N,a)||(_.push(S),C))||N===this._container)break;N=N.parentNode}return!_.length&&!F&&!C&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var h=a.target||a.srcElement;if(!(!this._loaded||h._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(h))){var _=a.type;_==="mousedown"&&yo(h),this._fireDOMEvent(a,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,h,_){if(a.type==="click"){var S=r({},a);S.type="preclick",this._fireDOMEvent(S,S.type,_)}var C=this._findEventTargets(a,h);if(_){for(var N=[],F=0;F<_.length;F++)_[F].listens(h,!0)&&N.push(_[F]);C=N.concat(C)}if(C.length){h==="contextmenu"&&rn(a);var rt=C[0],ut={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var bt=rt.getLatLng&&(!rt._radius||rt._radius<=10);ut.containerPoint=bt?this.latLngToContainerPoint(rt.getLatLng()):this.mouseEventToContainerPoint(a),ut.layerPoint=this.containerPointToLayerPoint(ut.containerPoint),ut.latlng=bt?rt.getLatLng():this.layerPointToLatLng(ut.layerPoint)}for(F=0;F<C.length;F++)if(C[F].fire(h,ut,!0),ut.originalEvent._stopped||C[F].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,h=this._handlers.length;a<h;a++)this._handlers[a].disable()},whenReady:function(a,h){return this._loaded?a.call(h||this,{target:this}):this.on("load",a,h),this},_getMapPanePos:function(){return Ks(this._mapPane)||new et(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,h){var _=a&&h!==void 0?this._getNewPixelOrigin(a,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,h){var _=this.getSize()._divideBy(2);return this.project(a,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,h,_){var S=this._getNewPixelOrigin(_,h);return this.project(a,h)._subtract(S)},_latLngBoundsToNewLayerBounds:function(a,h,_){var S=this._getNewPixelOrigin(_,h);return X([this.project(a.getSouthWest(),h)._subtract(S),this.project(a.getNorthWest(),h)._subtract(S),this.project(a.getSouthEast(),h)._subtract(S),this.project(a.getNorthEast(),h)._subtract(S)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,h,_){if(!_)return a;var S=this.project(a,h),C=this.getSize().divideBy(2),N=new R(S.subtract(C),S.add(C)),F=this._getBoundsOffset(N,_,h);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?a:this.unproject(S.add(F),h)},_limitOffset:function(a,h){if(!h)return a;var _=this.getPixelBounds(),S=new R(_.min.add(a),_.max.add(a));return a.add(this._getBoundsOffset(S,h))},_getBoundsOffset:function(a,h,_){var S=X(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),C=S.min.subtract(a.min),N=S.max.subtract(a.max),F=this._rebound(C.x,-N.x),rt=this._rebound(C.y,-N.y);return new et(F,rt)},_rebound:function(a,h){return a+h>0?Math.round(a-h)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(h))},_limitZoom:function(a){var h=this.getMinZoom(),_=this.getMaxZoom(),S=Nt.any3d?this.options.zoomSnap:1;return S&&(a=Math.round(a/S)*S),Math.max(h,Math.min(_,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$e(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,h){var _=this._getCenterOffset(a)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var a=this._proxy=le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(h){var _=Fs,S=this._proxy.style[_];Ls(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),S===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),h=this.getZoom();Ls(this._proxy,this.project(a,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var S=this.getZoomScale(h),C=this._getCenterOffset(a)._divideBy(1-1/S);return _.animate!==!0&&!this.getSize().contains(C)?!1:(Y(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(a,h,!0)},this),!0)},_animateZoom:function(a,h,_,S){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=h,te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:h,noUpdate:S}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$e(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qc(a,h){return new fe(a,h)}var ai=J.extend({options:{position:"topright"},initialize:function(a){A(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var h=this._map;return h&&h.removeControl(this),this.options.position=a,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var h=this._container=this.onAdd(a),_=this.getPosition(),S=a._controlCorners[_];return te(h,"leaflet-control"),_.indexOf("bottom")!==-1?S.insertBefore(h,S.firstChild):S.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),ks=function(a){return new ai(a)};fe.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},h="leaflet-",_=this._controlContainer=le("div",h+"control-container",this._container);function S(C,N){var F=h+C+" "+h+N;a[C+N]=le("div",F,_)}S("top","left"),S("top","right"),S("bottom","left"),S("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Ne(this._controlCorners[a]);Ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Aa=ai.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,h,_,S){return _<S?-1:S<_?1:0}},initialize:function(a,h,_){A(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var S in a)this._addLayer(a[S],S);for(S in h)this._addLayer(h[S],S,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return ai.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,h){return this._addLayer(a,h),this._map?this._update():this},addOverlay:function(a,h){return this._addLayer(a,h,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var h=this._getLayer(p(a));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):$e(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $e(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",h=this._container=le("div",a),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Ir(h),ss(h);var S=this._section=le("section",a+"-list");_&&(this._map.on("click",this.collapse,this),Qt(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=le("a",a+"-toggle",h);C.href="#",C.title="Layers",C.setAttribute("role","button"),Qt(C,{keydown:function(N){N.keyCode===13&&this._expandSafely()},click:function(N){rn(N),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=le("div",a+"-base",S),this._separator=le("div",a+"-separator",S),this._overlaysList=le("div",a+"-overlays",S),h.appendChild(S)},_getLayer:function(a){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&p(this._layers[h].layer)===a)return this._layers[h]},_addLayer:function(a,h,_){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(u(function(S,C){return this.options.sortFunction(S.layer,C.layer,S.name,C.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gi(this._baseLayersList),gi(this._overlaysList),this._layerControlInputs=[];var a,h,_,S,C=0;for(_=0;_<this._layers.length;_++)S=this._layers[_],this._addItem(S),h=h||S.overlay,a=a||!S.overlay,C+=S.overlay?0:1;return this.options.hideSingleBase&&(a=a&&C>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=h&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var h=this._getLayer(p(a.target)),_=h.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(a,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(h?' checked="checked"':"")+"/>",S=document.createElement("div");return S.innerHTML=_,S.firstChild},_addItem:function(a){var h=document.createElement("label"),_=this._map.hasLayer(a.layer),S;a.overlay?(S=document.createElement("input"),S.type="checkbox",S.className="leaflet-control-layers-selector",S.defaultChecked=_):S=this._createRadioElement("leaflet-base-layers_"+p(this),_),this._layerControlInputs.push(S),S.layerId=p(a.layer),Qt(S,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+a.name;var N=document.createElement("span");h.appendChild(N),N.appendChild(S),N.appendChild(C);var F=a.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,h,_,S=[],C=[];this._handlingClick=!0;for(var N=a.length-1;N>=0;N--)h=a[N],_=this._getLayer(h.layerId).layer,h.checked?S.push(_):h.checked||C.push(_);for(N=0;N<C.length;N++)this._map.hasLayer(C[N])&&this._map.removeLayer(C[N]);for(N=0;N<S.length;N++)this._map.hasLayer(S[N])||this._map.addLayer(S[N]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,h,_,S=this._map.getZoom(),C=a.length-1;C>=0;C--)h=a[C],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&S<_.options.minZoom||_.options.maxZoom!==void 0&&S>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Qt(a,"click",rn),this.expand();var h=this;setTimeout(function(){ke(a,"click",rn),h._preventClick=!1})}}),Hh=function(a,h,_){return new Aa(a,h,_)},Fc=ai.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var h="leaflet-control-zoom",_=le("div",h+" leaflet-bar"),S=this.options;return this._zoomInButton=this._createButton(S.zoomInText,S.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(S.zoomOutText,S.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,h,_,S,C){var N=le("a",_,S);return N.innerHTML=a,N.href="#",N.title=h,N.setAttribute("role","button"),N.setAttribute("aria-label",h),Ir(N),Qt(N,"click",Js),Qt(N,"click",C,this),Qt(N,"click",this._refocusOnMap,this),N},_updateDisabled:function(){var a=this._map,h="leaflet-disabled";$e(this._zoomInButton,h),$e(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(te(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(te(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});fe.mergeOptions({zoomControl:!0}),fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fc,this.addControl(this.zoomControl))});var Dp=function(a){return new Fc(a)},Vh=ai.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var h="leaflet-control-scale",_=le("div",h),S=this.options;return this._addScales(S,h+"-line",_),a.on(S.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),_},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,h,_){a.metric&&(this._mScale=le("div",h,_)),a.imperial&&(this._iScale=le("div",h,_))},_update:function(){var a=this._map,h=a.getSize().y/2,_=a.distance(a.containerPointToLatLng([0,h]),a.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var h=this._getRoundNum(a),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/a)},_updateImperial:function(a){var h=a*3.2808399,_,S,C;h>5280?(_=h/5280,S=this._getRoundNum(_),this._updateScale(this._iScale,S+" mi",S/_)):(C=this._getRoundNum(h),this._updateScale(this._iScale,C+" ft",C/h))},_updateScale:function(a,h,_){a.style.width=Math.round(this.options.maxWidth*_)+"px",a.innerHTML=h},_getRoundNum:function(a){var h=Math.pow(10,(Math.floor(a)+"").length-1),_=a/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),Kc=function(a){return new Vh(a)},Op='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Jc=ai.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Nt.inlineSvg?Op+" ":"")+"Leaflet</a>"},initialize:function(a){A(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=le("div","leaflet-control-attribution"),Ir(this._container);for(var h in a._layers)a._layers[h].getAttribution&&this.addAttribution(a._layers[h].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var h in this._attributions)this._attributions[h]&&a.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),a.length&&_.push(a.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});fe.mergeOptions({attributionControl:!0}),fe.addInitHook(function(){this.options.attributionControl&&new Jc().addTo(this)});var Rp=function(a){return new Jc(a)};ai.Layers=Aa,ai.Zoom=Fc,ai.Scale=Vh,ai.Attribution=Jc,ks.layers=Hh,ks.zoom=Dp,ks.scale=Kc,ks.attribution=Rp;var rs=J.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});rs.addTo=function(a,h){return a.addHandler(h,this),this};var Ip={Events:B},$c=Nt.touch?"touchstart mousedown":"mousedown",$s=W.extend({options:{clickTolerance:3},initialize:function(a,h,_,S){A(this,S),this._element=a,this._dragStartTarget=h||a,this._preventOutline=_},enable:function(){this._enabled||(Qt(this._dragStartTarget,$c,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($s._dragging===this&&this.finishDrag(!0),ke(this._dragStartTarget,$c,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Gc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){$s._dragging===this&&this.finishDrag();return}if(!($s._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&($s._dragging=this,this._preventOutline&&yo(this._element),xl(),_o(),!this._moving)){this.fire("down");var h=a.touches?a.touches[0]:a,_=Tl(this._element);this._startPoint=new et(h.clientX,h.clientY),this._startPos=Ks(this._element),this._parentScale=wa(_);var S=a.type==="mousedown";Qt(document,S?"mousemove":"touchmove",this._onMove,this),Qt(document,S?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var h=a.touches&&a.touches.length===1?a.touches[0]:a,_=new et(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,rn(a),this._moved||(this.fire("dragstart"),this._moved=!0,te(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),He(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){$e(document.body,"leaflet-dragging"),this._lastTarget&&($e(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ke(document,"mousemove touchmove",this._onMove,this),ke(document,"mouseup touchend touchcancel",this._onUp,this),ba(),is();var h=this._moved&&this._moving;this._moving=!1,$s._dragging=!1,h&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function qh(a,h,_){var S,C=[1,4,2,8],N,F,rt,ut,bt,kt,Zt,se;for(N=0,kt=a.length;N<kt;N++)a[N]._code=Nr(a[N],h);for(rt=0;rt<4;rt++){for(Zt=C[rt],S=[],N=0,kt=a.length,F=kt-1;N<kt;F=N++)ut=a[N],bt=a[F],ut._code&Zt?bt._code&Zt||(se=El(bt,ut,Zt,h,_),se._code=Nr(se,h),S.push(se)):(bt._code&Zt&&(se=El(bt,ut,Zt,h,_),se._code=Nr(se,h),S.push(se)),S.push(ut));a=S}return a}function jh(a,h){var _,S,C,N,F,rt,ut,bt,kt;if(!a||a.length===0)throw new Error("latlngs not passed");vi(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Zt=_t([0,0]),se=dt(a),Mn=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());Mn<1700&&(Zt=tu(a));var on=a.length,li=[];for(_=0;_<on;_++){var Se=_t(a[_]);li.push(h.project(_t([Se.lat-Zt.lat,Se.lng-Zt.lng])))}for(rt=ut=bt=0,_=0,S=on-1;_<on;S=_++)C=li[_],N=li[S],F=C.y*N.x-N.y*C.x,ut+=(C.x+N.x)*F,bt+=(C.y+N.y)*F,rt+=F*3;rt===0?kt=li[0]:kt=[ut/rt,bt/rt];var Te=h.unproject(q(kt));return _t([Te.lat+Zt.lat,Te.lng+Zt.lng])}function tu(a){for(var h=0,_=0,S=0,C=0;C<a.length;C++){var N=_t(a[C]);h+=N.lat,_+=N.lng,S++}return _t([h/S,_/S])}var eu={__proto__:null,clipPolygon:qh,polygonCenter:jh,centroid:tu};function Gh(a,h){if(!h||!a.length)return a.slice();var _=h*h;return a=zp(a,_),a=Wh(a,_),a}function Zh(a,h,_){return Math.sqrt(Ea(a,h,_,!0))}function Np(a,h,_){return Ea(a,h,_)}function Wh(a,h){var _=a.length,S=typeof Uint8Array<"u"?Uint8Array:Array,C=new S(_);C[0]=C[_-1]=1,nu(a,C,h,0,_-1);var N,F=[];for(N=0;N<_;N++)C[N]&&F.push(a[N]);return F}function nu(a,h,_,S,C){var N=0,F,rt,ut;for(rt=S+1;rt<=C-1;rt++)ut=Ea(a[rt],a[S],a[C],!0),ut>N&&(F=rt,N=ut);N>_&&(h[F]=1,nu(a,h,_,S,F),nu(a,h,_,F,C))}function zp(a,h){for(var _=[a[0]],S=1,C=0,N=a.length;S<N;S++)Pp(a[S],a[C])>h&&(_.push(a[S]),C=S);return C<N-1&&_.push(a[N-1]),_}var Yh;function Xh(a,h,_,S,C){var N=S?Yh:Nr(a,_),F=Nr(h,_),rt,ut,bt;for(Yh=F;;){if(!(N|F))return[a,h];if(N&F)return!1;rt=N||F,ut=El(a,h,rt,_,C),bt=Nr(ut,_),rt===N?(a=ut,N=bt):(h=ut,F=bt)}}function El(a,h,_,S,C){var N=h.x-a.x,F=h.y-a.y,rt=S.min,ut=S.max,bt,kt;return _&8?(bt=a.x+N*(ut.y-a.y)/F,kt=ut.y):_&4?(bt=a.x+N*(rt.y-a.y)/F,kt=rt.y):_&2?(bt=ut.x,kt=a.y+F*(ut.x-a.x)/N):_&1&&(bt=rt.x,kt=a.y+F*(rt.x-a.x)/N),new et(bt,kt,C)}function Nr(a,h){var _=0;return a.x<h.min.x?_|=1:a.x>h.max.x&&(_|=2),a.y<h.min.y?_|=4:a.y>h.max.y&&(_|=8),_}function Pp(a,h){var _=h.x-a.x,S=h.y-a.y;return _*_+S*S}function Ea(a,h,_,S){var C=h.x,N=h.y,F=_.x-C,rt=_.y-N,ut=F*F+rt*rt,bt;return ut>0&&(bt=((a.x-C)*F+(a.y-N)*rt)/ut,bt>1?(C=_.x,N=_.y):bt>0&&(C+=F*bt,N+=rt*bt)),F=a.x-C,rt=a.y-N,S?F*F+rt*rt:new et(C,N)}function vi(a){return!D(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Cl(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vi(a)}function wo(a,h){var _,S,C,N,F,rt,ut,bt;if(!a||a.length===0)throw new Error("latlngs not passed");vi(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var kt=_t([0,0]),Zt=dt(a),se=Zt.getNorthWest().distanceTo(Zt.getSouthWest())*Zt.getNorthEast().distanceTo(Zt.getNorthWest());se<1700&&(kt=tu(a));var Mn=a.length,on=[];for(_=0;_<Mn;_++){var li=_t(a[_]);on.push(h.project(_t([li.lat-kt.lat,li.lng-kt.lng])))}for(_=0,S=0;_<Mn-1;_++)S+=on[_].distanceTo(on[_+1])/2;if(S===0)bt=on[0];else for(_=0,N=0;_<Mn-1;_++)if(F=on[_],rt=on[_+1],C=F.distanceTo(rt),N+=C,N>S){ut=(N-S)/C,bt=[rt.x-ut*(rt.x-F.x),rt.y-ut*(rt.y-F.y)];break}var Se=h.unproject(q(bt));return _t([Se.lat+kt.lat,Se.lng+kt.lng])}var Bp={__proto__:null,simplify:Gh,pointToSegmentDistance:Zh,closestPointOnSegment:Np,clipSegment:Xh,_getEdgeIntersection:El,_getBitCode:Nr,_sqClosestPointOnSegment:Ea,isFlat:vi,_flat:Cl,polylineCenter:wo},Ll={project:function(a){return new et(a.lng,a.lat)},unproject:function(a){return new mt(a.y,a.x)},bounds:new R([-180,-90],[180,90])},Ml={R:6378137,R_MINOR:6356752314245179e-9,bounds:new R([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var h=Math.PI/180,_=this.R,S=a.lat*h,C=this.R_MINOR/_,N=Math.sqrt(1-C*C),F=N*Math.sin(S),rt=Math.tan(Math.PI/4-S/2)/Math.pow((1-F)/(1+F),N/2);return S=-_*Math.log(Math.max(rt,1e-10)),new et(a.lng*h*_,S)},unproject:function(a){for(var h=180/Math.PI,_=this.R,S=this.R_MINOR/_,C=Math.sqrt(1-S*S),N=Math.exp(-a.y/_),F=Math.PI/2-2*Math.atan(N),rt=0,ut=.1,bt;rt<15&&Math.abs(ut)>1e-7;rt++)bt=C*Math.sin(F),bt=Math.pow((1-bt)/(1+bt),C/2),ut=Math.PI/2-2*Math.atan(N*bt)-F,F+=ut;return new mt(F*h,a.x*h/_)}},Qh={__proto__:null,LonLat:Ll,Mercator:Ml,SphericalMercator:Me},Fh=r({},Et,{code:"EPSG:3395",projection:Ml,transformation:(function(){var a=.5/(Math.PI*Ml.R);return Fe(a,.5,-a,.5)})()}),iu=r({},Et,{code:"EPSG:4326",projection:Ll,transformation:Fe(1/180,1,-1/180,.5)}),xo=r({},Ct,{projection:Ll,transformation:Fe(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,h){var _=h.lng-a.lng,S=h.lat-a.lat;return Math.sqrt(_*_+S*S)},infinite:!0});Ct.Earth=Et,Ct.EPSG3395=Fh,Ct.EPSG3857=jn,Ct.EPSG900913=ii,Ct.EPSG4326=iu,Ct.Simple=xo;var qi=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[p(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[p(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var h=a.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});fe.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var h=p(a);return this._layers[h]?this:(this._layers[h]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var h=p(a);return this._layers[h]?(this._loaded&&a.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return p(a)in this._layers},eachLayer:function(a,h){for(var _ in this._layers)a.call(h,this._layers[_]);return this},_addLayers:function(a){a=a?D(a)?a:[a]:[];for(var h=0,_=a.length;h<_;h++)this.addLayer(a[h])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[p(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var h=p(a);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,h=-1/0,_=this._getZoomSpan();for(var S in this._zoomBoundLayers){var C=this._zoomBoundLayers[S].options;a=C.minZoom===void 0?a:Math.min(a,C.minZoom),h=C.maxZoom===void 0?h:Math.max(h,C.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=a===1/0?void 0:a,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var So=qi.extend({initialize:function(a,h){A(this,h),this._layers={};var _,S;if(a)for(_=0,S=a.length;_<S;_++)this.addLayer(a[_])},addLayer:function(a){var h=this.getLayerId(a);return this._layers[h]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var h=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(a){var h=typeof a=="number"?a:this.getLayerId(a);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var h=Array.prototype.slice.call(arguments,1),_,S;for(_ in this._layers)S=this._layers[_],S[a]&&S[a].apply(S,h);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,h){for(var _ in this._layers)a.call(h,this._layers[_]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return p(a)}}),Up=function(a,h){return new So(a,h)},os=So.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),So.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),So.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new ot;for(var h in this._layers){var _=this._layers[h];a.extend(_.getBounds?_.getBounds():_.getLatLng())}return a}}),Kh=function(a,h){return new os(a,h)},as=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){A(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,h){var _=this._getIconUrl(a);if(!_){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var S=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(S,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),S},_setIconStyles:function(a,h){var _=this.options,S=_[h+"Size"];typeof S=="number"&&(S=[S,S]);var C=q(S),N=q(h==="shadow"&&_.shadowAnchor||_.iconAnchor||C&&C.divideBy(2,!0));a.className="leaflet-marker-"+h+" "+(_.className||""),N&&(a.style.marginLeft=-N.x+"px",a.style.marginTop=-N.y+"px"),C&&(a.style.width=C.x+"px",a.style.height=C.y+"px")},_createImg:function(a,h){return h=h||document.createElement("img"),h.src=a,h},_getIconUrl:function(a){return Nt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Ca(a){return new as(a)}var La=as.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof La.imagePath!="string"&&(La.imagePath=this._detectIconPath()),(this.options.imagePath||La.imagePath)+as.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var h=function(_,S,C){var N=S.exec(_);return N&&N[C]};return a=h(a,/^url\((['"])?(.+)\1\)$/,2),a&&h(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=le("div","leaflet-default-icon-path",document.body),h=ya(a,"background-image")||ya(a,"backgroundImage");if(document.body.removeChild(a),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),Ma=rs.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new $s(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),te(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$e(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var h=this._marker,_=h._map,S=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,N=Ks(h._icon),F=_.getPixelBounds(),rt=_.getPixelOrigin(),ut=X(F.min._subtract(rt).add(C),F.max._subtract(rt).subtract(C));if(!ut.contains(N)){var bt=q((Math.max(ut.max.x,N.x)-ut.max.x)/(F.max.x-ut.max.x)-(Math.min(ut.min.x,N.x)-ut.min.x)/(F.min.x-ut.min.x),(Math.max(ut.max.y,N.y)-ut.max.y)/(F.max.y-ut.max.y)-(Math.min(ut.min.y,N.y)-ut.min.y)/(F.min.y-ut.min.y)).multiplyBy(S);_.panBy(bt,{animate:!1}),this._draggable._newPos._add(bt),this._draggable._startPos._add(bt),He(h._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Y(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,a)))},_onDrag:function(a){var h=this._marker,_=h._shadow,S=Ks(h._icon),C=h._map.layerPointToLatLng(S);_&&He(_,S),h._latlng=C,a.latlng=C,a.oldLatLng=this._oldLatLng,h.fire("move",a).fire("drag",a)},_onDragEnd:function(a){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),ka=qi.extend({options:{icon:new La,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,h){A(this,h),this._latlng=_t(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var h=this._latlng;return this._latlng=_t(a),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=a.icon.createIcon(this._icon),S=!1;_!==this._icon&&(this._icon&&this._removeIcon(),S=!0,a.title&&(_.title=a.title),_.tagName==="IMG"&&(_.alt=a.alt||"")),te(_,h),a.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(_,"focus",this._panOnFocus,this);var C=a.icon.createShadow(this._shadow),N=!1;C!==this._shadow&&(this._removeShadow(),N=!0),C&&(te(C,h),C.alt=""),this._shadow=C,a.opacity<1&&this._updateOpacity(),S&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&N&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(this._icon,"focus",this._panOnFocus,this),Ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ne(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&He(this._icon,a),this._shadow&&He(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ma)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ma(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&We(this._icon,a),this._shadow&&We(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var h=this.options.icon.options,_=h.iconSize?q(h.iconSize):q(0,0),S=h.iconAnchor?q(h.iconAnchor):q(0,0);a.panInside(this._latlng,{paddingTopLeft:S,paddingBottomRight:_.subtract(S)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Jh(a,h){return new ka(a,h)}var ls=qi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return A(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),To=ls.extend({options:{fill:!0,radius:10},initialize:function(a,h){A(this,h),this._latlng=_t(a),this._radius=this.options.radius},setLatLng:function(a){var h=this._latlng;return this._latlng=_t(a),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var h=a&&a.radius||this._radius;return ls.prototype.setStyle.call(this,a),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,h=this._radiusY||a,_=this._clickTolerance(),S=[a+_,h+_];this._pxBounds=new R(this._point.subtract(S),this._point.add(S))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $h(a,h){return new To(a,h)}var kl=To.extend({initialize:function(a,h,_){if(typeof h=="number"&&(h=r({},_,{radius:h})),A(this,h),this._latlng=_t(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new ot(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:ls.prototype.setStyle,_project:function(){var a=this._latlng.lng,h=this._latlng.lat,_=this._map,S=_.options.crs;if(S.distance===Et.distance){var C=Math.PI/180,N=this._mRadius/Et.R/C,F=_.project([h+N,a]),rt=_.project([h-N,a]),ut=F.add(rt).divideBy(2),bt=_.unproject(ut).lat,kt=Math.acos((Math.cos(N*C)-Math.sin(h*C)*Math.sin(bt*C))/(Math.cos(h*C)*Math.cos(bt*C)))/C;(isNaN(kt)||kt===0)&&(kt=N/Math.cos(Math.PI/180*h)),this._point=ut.subtract(_.getPixelOrigin()),this._radius=isNaN(kt)?0:ut.x-_.project([bt,a-kt]).x,this._radiusY=ut.y-F.y}else{var Zt=S.unproject(S.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(Zt).x}this._updateBounds()}});function tf(a,h,_){return new kl(a,h,_)}var Ds=ls.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,h){A(this,h),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var h=1/0,_=null,S=Ea,C,N,F=0,rt=this._parts.length;F<rt;F++)for(var ut=this._parts[F],bt=1,kt=ut.length;bt<kt;bt++){C=ut[bt-1],N=ut[bt];var Zt=S(a,C,N,!0);Zt<h&&(h=Zt,_=S(a,C,N))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,h){return h=h||this._defaultShape(),a=_t(a),h.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new ot,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return vi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var h=[],_=vi(a),S=0,C=a.length;S<C;S++)_?(h[S]=_t(a[S]),this._bounds.extend(h[S])):h[S]=this._convertLatLngs(a[S]);return h},_project:function(){var a=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),h=new et(a,a);this._rawPxBounds&&(this._pxBounds=new R([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(a,h,_){var S=a[0]instanceof mt,C=a.length,N,F;if(S){for(F=[],N=0;N<C;N++)F[N]=this._map.latLngToLayerPoint(a[N]),_.extend(F[N]);h.push(F)}else for(N=0;N<C;N++)this._projectLatlngs(a[N],h,_)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,S,C,N,F,rt,ut;for(_=0,C=0,N=this._rings.length;_<N;_++)for(ut=this._rings[_],S=0,F=ut.length;S<F-1;S++)rt=Xh(ut[S],ut[S+1],a,S,!0),rt&&(h[C]=h[C]||[],h[C].push(rt[0]),(rt[1]!==ut[S+1]||S===F-2)&&(h[C].push(rt[1]),C++))}},_simplifyPoints:function(){for(var a=this._parts,h=this.options.smoothFactor,_=0,S=a.length;_<S;_++)a[_]=Gh(a[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,h){var _,S,C,N,F,rt,ut=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(_=0,N=this._parts.length;_<N;_++)for(rt=this._parts[_],S=0,F=rt.length,C=F-1;S<F;C=S++)if(!(!h&&S===0)&&Zh(a,rt[C],rt[S])<=ut)return!0;return!1}});function Hp(a,h){return new Ds(a,h)}Ds._flat=Cl;var Ao=Ds.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return jh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var h=Ds.prototype._convertLatLngs.call(this,a),_=h.length;return _>=2&&h[0]instanceof mt&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(a){Ds.prototype._setLatLngs.call(this,a),vi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,h=this.options.weight,_=new et(h,h);if(a=new R(a.min.subtract(_),a.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var S=0,C=this._rings.length,N;S<C;S++)N=qh(this._rings[S],a,!0),N.length&&this._parts.push(N)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var h=!1,_,S,C,N,F,rt,ut,bt;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(N=0,ut=this._parts.length;N<ut;N++)for(_=this._parts[N],F=0,bt=_.length,rt=bt-1;F<bt;rt=F++)S=_[F],C=_[rt],S.y>a.y!=C.y>a.y&&a.x<(C.x-S.x)*(a.y-S.y)/(C.y-S.y)+S.x&&(h=!h);return h||Ds.prototype._containsPoint.call(this,a,!0)}});function Vp(a,h){return new Ao(a,h)}var Os=os.extend({initialize:function(a,h){A(this,h),this._layers={},a&&this.addData(a)},addData:function(a){var h=D(a)?a:a.features,_,S,C;if(h){for(_=0,S=h.length;_<S;_++)C=h[_],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var N=this.options;if(N.filter&&!N.filter(a))return this;var F=zn(a,N);return F?(F.feature=Rl(a),F.defaultOptions=F.options,this.resetStyle(F),N.onEachFeature&&N.onEachFeature(a,F),this.addLayer(F)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=r({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(h){this._setLayerStyle(h,a)},this)},_setLayerStyle:function(a,h){a.setStyle&&(typeof h=="function"&&(h=h(a.feature)),a.setStyle(h))}});function zn(a,h){var _=a.type==="Feature"?a.geometry:a,S=_?_.coordinates:null,C=[],N=h&&h.pointToLayer,F=h&&h.coordsToLatLng||Dl,rt,ut,bt,kt;if(!S&&!_)return null;switch(_.type){case"Point":return rt=F(S),Eo(N,a,rt,h);case"MultiPoint":for(bt=0,kt=S.length;bt<kt;bt++)rt=F(S[bt]),C.push(Eo(N,a,rt,h));return new os(C);case"LineString":case"MultiLineString":return ut=Da(S,_.type==="LineString"?0:1,F),new Ds(ut,h);case"Polygon":case"MultiPolygon":return ut=Da(S,_.type==="Polygon"?1:2,F),new Ao(ut,h);case"GeometryCollection":for(bt=0,kt=_.geometries.length;bt<kt;bt++){var Zt=zn({geometry:_.geometries[bt],type:"Feature",properties:a.properties},h);Zt&&C.push(Zt)}return new os(C);case"FeatureCollection":for(bt=0,kt=_.features.length;bt<kt;bt++){var se=zn(_.features[bt],h);se&&C.push(se)}return new os(C);default:throw new Error("Invalid GeoJSON object.")}}function Eo(a,h,_,S){return a?a(h,_):new ka(_,S&&S.markersInheritOptions&&S)}function Dl(a){return new mt(a[1],a[0],a[2])}function Da(a,h,_){for(var S=[],C=0,N=a.length,F;C<N;C++)F=h?Da(a[C],h-1,_):(_||Dl)(a[C]),S.push(F);return S}function Ol(a,h){return a=_t(a),a.alt!==void 0?[w(a.lng,h),w(a.lat,h),w(a.alt,h)]:[w(a.lng,h),w(a.lat,h)]}function Oa(a,h,_,S){for(var C=[],N=0,F=a.length;N<F;N++)C.push(h?Oa(a[N],vi(a[N])?0:h-1,_,S):Ol(a[N],S));return!h&&_&&C.length>0&&C.push(C[0].slice()),C}function tr(a,h){return a.feature?r({},a.feature,{geometry:h}):Rl(h)}function Rl(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var er={toGeoJSON:function(a){return tr(this,{type:"Point",coordinates:Ol(this.getLatLng(),a)})}};ka.include(er),kl.include(er),To.include(er),Ds.include({toGeoJSON:function(a){var h=!vi(this._latlngs),_=Oa(this._latlngs,h?1:0,!1,a);return tr(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),Ao.include({toGeoJSON:function(a){var h=!vi(this._latlngs),_=h&&!vi(this._latlngs[0]),S=Oa(this._latlngs,_?2:h?1:0,!0,a);return h||(S=[S]),tr(this,{type:(_?"Multi":"")+"Polygon",coordinates:S})}}),So.include({toMultiPoint:function(a){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(a).geometry.coordinates)}),tr(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(a){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(a);var _=h==="GeometryCollection",S=[];return this.eachLayer(function(C){if(C.toGeoJSON){var N=C.toGeoJSON(a);if(_)S.push(N.geometry);else{var F=Rl(N);F.type==="FeatureCollection"?S.push.apply(S,F.features):S.push(F)}}}),_?tr(this,{geometries:S,type:"GeometryCollection"}):{type:"FeatureCollection",features:S}}});function Il(a,h){return new Os(a,h)}var Ra=Il,Co=qi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,h,_){this._url=a,this._bounds=dt(h),A(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ln(this._image),this},bringToBack:function(){return this._map&&Or(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=dt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",h=this._image=a?this._url:le("img");if(te(h,"leaflet-image-layer"),this._zoomAnimated&&te(h,"leaflet-zoom-animated"),this.options.className&&te(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onload=u(this.fire,this,"load"),h.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(a){var h=this._map.getZoomScale(a.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Ls(this._image,_,h)},_reset:function(){var a=this._image,h=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();He(a,h.min),a.style.width=_.x+"px",a.style.height=_.y+"px"},_updateOpacity:function(){We(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),ef=function(a,h,_){return new Co(a,h,_)},nr=Co.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",h=this._image=a?this._url:le("video");if(te(h,"leaflet-image-layer"),this._zoomAnimated&&te(h,"leaflet-zoom-animated"),this.options.className&&te(h,this.options.className),h.onselectstart=y,h.onmousemove=y,h.onloadeddata=u(this.fire,this,"load"),a){for(var _=h.getElementsByTagName("source"),S=[],C=0;C<_.length;C++)S.push(_[C].src);this._url=_.length>0?S:[h.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var N=0;N<this._url.length;N++){var F=le("source");F.src=this._url[N],h.appendChild(F)}}});function Lo(a,h,_){return new nr(a,h,_)}var Nl=Co.extend({_initImage:function(){var a=this._image=this._url;te(a,"leaflet-image-layer"),this._zoomAnimated&&te(a,"leaflet-zoom-animated"),this.options.className&&te(a,this.options.className),a.onselectstart=y,a.onmousemove=y}});function nf(a,h,_){return new Nl(a,h,_)}var Pn=qi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,h){a&&(a instanceof mt||D(a))?(this._latlng=_t(a),A(this,h)):(A(this,a),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&We(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&We(this._container,1),this.bringToFront(),this.options.interactive&&(te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(We(this._container,0),this._removeTimeout=setTimeout(u(Ne,void 0,this._container),200)):Ne(this._container),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=_t(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ln(this._container),this},bringToBack:function(){return this._map&&Or(this._container),this},_prepareOpen:function(a){var h=this._source;if(!h._map)return!1;if(h instanceof os){h=null;var _=this._source._layers;for(var S in _)if(_[S]._map){h=_[S];break}if(!h)return!1;this._source=h}if(!a)if(h.getCenter)a=h.getCenter();else if(h.getLatLng)a=h.getLatLng();else if(h.getBounds)a=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")a.innerHTML=h;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),h=q(this.options.offset),_=this._getAnchor();this._zoomAnimated?He(this._container,a.add(_)):h=h.add(a).add(_);var S=this._containerBottom=-h.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=S+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});fe.include({_initOverlay:function(a,h,_,S){var C=h;return C instanceof a||(C=new a(S).setContent(h)),_&&C.setLatLng(_),C}}),qi.include({_initOverlay:function(a,h,_,S){var C=_;return C instanceof a?(A(C,S),C._source=this):(C=h&&!S?h:new a(S,this),C.setContent(_)),C}});var Ia=Pn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Pn.prototype.openOn.call(this,a)},onAdd:function(a){Pn.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ls||this._source.on("preclick",Vi))},onRemove:function(a){Pn.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ls||this._source.off("preclick",Vi))},getEvents:function(){var a=Pn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",h=this._container=le("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=le("div",a+"-content-wrapper",h);if(this._contentNode=le("div",a+"-content",_),Ir(h),ss(this._contentNode),Qt(h,"contextmenu",Vi),this._tipContainer=le("div",a+"-tip-container",h),this._tip=le("div",a+"-tip",this._tipContainer),this.options.closeButton){var S=this._closeButton=le("a",a+"-close-button",h);S.setAttribute("role","button"),S.setAttribute("aria-label","Close popup"),S.href="#close",S.innerHTML='<span aria-hidden="true">&#215;</span>',Qt(S,"click",function(C){rn(C),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,h=a.style;h.width="",h.whiteSpace="nowrap";var _=a.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var S=a.offsetHeight,C=this.options.maxHeight,N="leaflet-popup-scrolled";C&&S>C?(h.height=C+"px",te(a,N)):$e(a,N),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),_=this._getAnchor();He(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,h=parseInt(ya(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,S=this._containerWidth,C=new et(this._containerLeft,-_-this._containerBottom);C._add(Ks(this._container));var N=a.layerPointToContainerPoint(C),F=q(this.options.autoPanPadding),rt=q(this.options.autoPanPaddingTopLeft||F),ut=q(this.options.autoPanPaddingBottomRight||F),bt=a.getSize(),kt=0,Zt=0;N.x+S+ut.x>bt.x&&(kt=N.x+S-bt.x+ut.x),N.x-kt-rt.x<0&&(kt=N.x-rt.x),N.y+_+ut.y>bt.y&&(Zt=N.y+_-bt.y+ut.y),N.y-Zt-rt.y<0&&(Zt=N.y-rt.y),(kt||Zt)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([kt,Zt]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),sf=function(a,h){return new Ia(a,h)};fe.mergeOptions({closePopupOnClick:!0}),fe.include({openPopup:function(a,h,_){return this._initOverlay(Ia,a,h,_).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),qi.include({bindPopup:function(a,h){return this._popup=this._initOverlay(Ia,this._popup,a,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof os||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Js(a);var h=a.layer||a.target;if(this._popup._source===h&&!(h instanceof ls)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=h,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var Na=Pn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Pn.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Pn.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Pn.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",h=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=le("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var h,_,S=this._map,C=this._container,N=S.latLngToContainerPoint(S.getCenter()),F=S.layerPointToContainerPoint(a),rt=this.options.direction,ut=C.offsetWidth,bt=C.offsetHeight,kt=q(this.options.offset),Zt=this._getAnchor();rt==="top"?(h=ut/2,_=bt):rt==="bottom"?(h=ut/2,_=0):rt==="center"?(h=ut/2,_=bt/2):rt==="right"?(h=0,_=bt/2):rt==="left"?(h=ut,_=bt/2):F.x<N.x?(rt="right",h=0,_=bt/2):(rt="left",h=ut+(kt.x+Zt.x)*2,_=bt/2),a=a.subtract(q(h,_,!0)).add(kt).add(Zt),$e(C,"leaflet-tooltip-right"),$e(C,"leaflet-tooltip-left"),$e(C,"leaflet-tooltip-top"),$e(C,"leaflet-tooltip-bottom"),te(C,"leaflet-tooltip-"+rt),He(C,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&We(this._container,a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(h)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),qp=function(a,h){return new Na(a,h)};fe.include({openTooltip:function(a,h,_){return this._initOverlay(Na,a,h,_).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),qi.include({bindTooltip:function(a,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Na,this._tooltip,a,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var h=a?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof os||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var h=typeof a.getElement=="function"&&a.getElement();h&&(Qt(h,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Qt(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var h=typeof a.getElement=="function"&&a.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var h=a.latlng,_,S;this._tooltip.options.sticky&&a.originalEvent&&(_=this._map.mouseEventToContainerPoint(a.originalEvent),S=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(S)),this._tooltip.setLatLng(h)}});var rf=as.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var h=a&&a.tagName==="DIV"?a:document.createElement("div"),_=this.options;if(_.html instanceof Element?(gi(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var S=q(_.bgPos);h.style.backgroundPosition=-S.x+"px "+-S.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function jp(a){return new rf(a)}as.Default=La;var Mo=qi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Nt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){A(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Ne(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Or(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof et?a:new et(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var h=this.getPane().children,_=-a(-1/0,1/0),S=0,C=h.length,N;S<C;S++)N=h[S].style.zIndex,h[S]!==this._container&&N&&(_=a(_,+N));isFinite(_)&&(this.options.zIndex=_+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Nt.ielt9){We(this._container,this.options.opacity);var a=+new Date,h=!1,_=!1;for(var S in this._tiles){var C=this._tiles[S];if(!(!C.current||!C.loaded)){var N=Math.min(1,(a-C.loaded)/200);We(C.el,N),N<1?h=!0:(C.active?_=!0:this._onOpaqueTile(C),C.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&($(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,h=this.options.maxZoom;if(a!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===a?(this._levels[_].el.style.zIndex=h-Math.abs(a-_),this._onUpdateLevel(_)):(Ne(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var S=this._levels[a],C=this._map;return S||(S=this._levels[a]={},S.el=le("div","leaflet-tile-container leaflet-zoom-animated",this._container),S.el.style.zIndex=h,S.origin=C.project(C.unproject(C.getPixelOrigin()),a).round(),S.zoom=a,this._setZoomTransform(S,C.getCenter(),C.getZoom()),y(S.el.offsetWidth),this._onCreateLevel(S)),this._level=S,S}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var a,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)h=this._tiles[a],h.retain=h.current;for(a in this._tiles)if(h=this._tiles[a],h.current&&!h.active){var S=h.coords;this._retainParent(S.x,S.y,S.z,S.z-5)||this._retainChildren(S.x,S.y,S.z,S.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var h in this._tiles)this._tiles[h].coords.z===a&&this._removeTile(h)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Ne(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,h,_,S){var C=Math.floor(a/2),N=Math.floor(h/2),F=_-1,rt=new et(+C,+N);rt.z=+F;var ut=this._tileCoordsToKey(rt),bt=this._tiles[ut];return bt&&bt.active?(bt.retain=!0,!0):(bt&&bt.loaded&&(bt.retain=!0),F>S?this._retainParent(C,N,F,S):!1)},_retainChildren:function(a,h,_,S){for(var C=2*a;C<2*a+2;C++)for(var N=2*h;N<2*h+2;N++){var F=new et(C,N);F.z=_+1;var rt=this._tileCoordsToKey(F),ut=this._tiles[rt];if(ut&&ut.active){ut.retain=!0;continue}else ut&&ut.loaded&&(ut.retain=!0);_+1<S&&this._retainChildren(C,N,_+1,S)}},_resetView:function(a){var h=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var h=this.options;return h.minNativeZoom!==void 0&&a<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<a?h.maxNativeZoom:a},_setView:function(a,h,_,S){var C=Math.round(h);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var N=this.options.updateWhenZooming&&C!==this._tileZoom;(!S||N)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(a),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(a,h)},_setZoomTransforms:function(a,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],a,h)},_setZoomTransform:function(a,h,_){var S=this._map.getZoomScale(_,a.zoom),C=a.origin.multiplyBy(S).subtract(this._map._getNewPixelOrigin(h,_)).round();Nt.any3d?Ls(a.el,C,S):He(a.el,C)},_resetGrid:function(){var a=this._map,h=a.options.crs,_=this._tileSize=this.getTileSize(),S=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,h.wrapLng[0]],S).x/_.x),Math.ceil(a.project([0,h.wrapLng[1]],S).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([h.wrapLat[0],0],S).y/_.x),Math.ceil(a.project([h.wrapLat[1],0],S).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),S=h.getZoomScale(_,this._tileZoom),C=h.project(a,this._tileZoom).floor(),N=h.getSize().divideBy(S*2);return new R(C.subtract(N),C.add(N))},_update:function(a){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(a===void 0&&(a=h.getCenter()),this._tileZoom!==void 0){var S=this._getTiledPixelBounds(a),C=this._pxBoundsToTileRange(S),N=C.getCenter(),F=[],rt=this.options.keepBuffer,ut=new R(C.getBottomLeft().subtract([rt,-rt]),C.getTopRight().add([rt,-rt]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var bt in this._tiles){var kt=this._tiles[bt].coords;(kt.z!==this._tileZoom||!ut.contains(new et(kt.x,kt.y)))&&(this._tiles[bt].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(a,_);return}for(var Zt=C.min.y;Zt<=C.max.y;Zt++)for(var se=C.min.x;se<=C.max.x;se++){var Mn=new et(se,Zt);if(Mn.z=this._tileZoom,!!this._isValidTile(Mn)){var on=this._tiles[this._tileCoordsToKey(Mn)];on?on.current=!0:F.push(Mn)}}if(F.sort(function(Se,Te){return Se.distanceTo(N)-Te.distanceTo(N)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var li=document.createDocumentFragment();for(se=0;se<F.length;se++)this._addTile(F[se],li);this._level.el.appendChild(li)}}}},_isValidTile:function(a){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(a.x<_.min.x||a.x>_.max.x)||!h.wrapLat&&(a.y<_.min.y||a.y>_.max.y))return!1}if(!this.options.bounds)return!0;var S=this._tileCoordsToBounds(a);return dt(this.options.bounds).overlaps(S)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var h=this._map,_=this.getTileSize(),S=a.scaleBy(_),C=S.add(_),N=h.unproject(S,a.z),F=h.unproject(C,a.z);return[N,F]},_tileCoordsToBounds:function(a){var h=this._tileCoordsToNwSe(a),_=new ot(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var h=a.split(":"),_=new et(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(a){var h=this._tiles[a];h&&(Ne(h.el),delete this._tiles[a],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){te(a,"leaflet-tile");var h=this.getTileSize();a.style.width=h.x+"px",a.style.height=h.y+"px",a.onselectstart=y,a.onmousemove=y,Nt.ielt9&&this.options.opacity<1&&We(a,this.options.opacity)},_addTile:function(a,h){var _=this._getTilePos(a),S=this._tileCoordsToKey(a),C=this.createTile(this._wrapCoords(a),u(this._tileReady,this,a));this._initTile(C),this.createTile.length<2&&Y(u(this._tileReady,this,a,null,C)),He(C,_),this._tiles[S]={el:C,coords:a,current:!0},h.appendChild(C),this.fire("tileloadstart",{tile:C,coords:a})},_tileReady:function(a,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:a});var S=this._tileCoordsToKey(a);_=this._tiles[S],_&&(_.loaded=+new Date,this._map._fadeAnimated?(We(_.el,0),$(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(te(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Nt.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var h=new et(this._wrapX?v(a.x,this._wrapX):a.x,this._wrapY?v(a.y,this._wrapY):a.y);return h.z=a.z,h},_pxBoundsToTileRange:function(a){var h=this.getTileSize();return new R(a.min.unscaleBy(h).floor(),a.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function of(a){return new Mo(a)}var ir=Mo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,h){this._url=a,h=A(this,h),h.detectRetina&&Nt.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,h){return this._url===a&&h===void 0&&(h=!0),this._url=a,h||this.redraw(),this},createTile:function(a,h){var _=document.createElement("img");return Qt(_,"load",u(this._tileOnLoad,this,h,_)),Qt(_,"error",u(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(a),_},getTileUrl:function(a){var h={r:Nt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-a.y;this.options.tms&&(h.y=_),h["-y"]=_}return U(this._url,r(h,this.options))},_tileOnLoad:function(a,h){Nt.ielt9?setTimeout(u(a,this,null,h),0):a(null,h)},_tileOnError:function(a,h,_){var S=this.options.errorTileUrl;S&&h.getAttribute("src")!==S&&(h.src=S),a(_,h)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,S=this.options.zoomOffset;return _&&(a=h-a),a+S},_getSubdomain:function(a){var h=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var a,h;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(h=this._tiles[a].el,h.onload=y,h.onerror=y,!h.complete)){h.src=I;var _=this._tiles[a].coords;Ne(h),delete this._tiles[a],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(a){var h=this._tiles[a];if(h)return h.el.setAttribute("src",I),Mo.prototype._removeTile.call(this,a)},_tileReady:function(a,h,_){if(!(!this._map||_&&_.getAttribute("src")===I))return Mo.prototype._tileReady.call(this,a,h,_)}});function bi(a,h){return new ir(a,h)}var za=ir.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,h){this._url=a;var _=r({},this.defaultWmsParams);for(var S in h)S in this.options||(_[S]=h[S]);h=A(this,h);var C=h.detectRetina&&Nt.retina?2:1,N=this.getTileSize();_.width=N.x*C,_.height=N.y*C,this.wmsParams=_},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,ir.prototype.onAdd.call(this,a)},getTileUrl:function(a){var h=this._tileCoordsToNwSe(a),_=this._crs,S=X(_.project(h[0]),_.project(h[1])),C=S.min,N=S.max,F=(this._wmsVersion>=1.3&&this._crs===iu?[C.y,C.x,N.y,N.x]:[C.x,C.y,N.x,N.y]).join(","),rt=ir.prototype.getTileUrl.call(this,a);return rt+E(this.wmsParams,rt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(a,h){return r(this.wmsParams,a),h||this.redraw(),this}});function wi(a,h){return new za(a,h)}ir.WMS=za,bi.wms=wi;var Kn=qi.extend({options:{padding:.1},initialize:function(a){A(this,a),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,h){var _=this._map.getZoomScale(h,this._zoom),S=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,h),N=S.multiplyBy(-_).add(C).subtract(this._map._getNewPixelOrigin(a,h));Nt.any3d?Ls(this._container,N,_):He(this._container,N)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-a)).round();this._bounds=new R(_,_.add(h.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zl=Kn.extend({options:{tolerance:0},getEvents:function(){var a=Kn.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Qt(a,"mousemove",this._onMouseMove,this),Qt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Qt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,Ne(this._container),ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var h in this._layers)a=this._layers[h],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var a=this._bounds,h=this._container,_=a.getSize(),S=Nt.retina?2:1;He(h,a.min),h.width=S*_.x,h.height=S*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",Nt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Kn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[p(a)]=a;var h=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var h=a._order,_=h.next,S=h.prev;_?_.prev=S:this._drawLast=S,S?S.next=_:this._drawFirst=_,delete a._order,delete this._layers[p(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var h=a.options.dashArray.split(/[, ]+/),_=[],S,C;for(C=0;C<h.length;C++){if(S=Number(h[C]),isNaN(S))return;_.push(S)}a.options._dashArray=_}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var h=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(a._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(a._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var h=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var S=this._drawFirst;S;S=S.next)a=S.layer,(!h||a._pxBounds&&a._pxBounds.intersects(h))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,h){if(this._drawing){var _,S,C,N,F=a._parts,rt=F.length,ut=this._ctx;if(rt){for(ut.beginPath(),_=0;_<rt;_++){for(S=0,C=F[_].length;S<C;S++)N=F[_][S],ut[S?"lineTo":"moveTo"](N.x,N.y);h&&ut.closePath()}this._fillStroke(ut,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var h=a._point,_=this._ctx,S=Math.max(Math.round(a._radius),1),C=(Math.max(Math.round(a._radiusY),1)||S)/S;C!==1&&(_.save(),_.scale(1,C)),_.beginPath(),_.arc(h.x,h.y/C,S,0,Math.PI*2,!1),C!==1&&_.restore(),this._fillStroke(_,a)}},_fillStroke:function(a,h){var _=h.options;_.fill&&(a.globalAlpha=_.fillOpacity,a.fillStyle=_.fillColor||_.color,a.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(a.setLineDash&&a.setLineDash(h.options&&h.options._dashArray||[]),a.globalAlpha=_.opacity,a.lineWidth=_.weight,a.strokeStyle=_.color,a.lineCap=_.lineCap,a.lineJoin=_.lineJoin,a.stroke())},_onClick:function(a){for(var h=this._map.mouseEventToLayerPoint(a),_,S,C=this._drawFirst;C;C=C.next)_=C.layer,_.options.interactive&&_._containsPoint(h)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);this._fireEvent(S?[S]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,h)}},_handleMouseOut:function(a){var h=this._hoveredLayer;h&&($e(this._container,"leaflet-interactive"),this._fireEvent([h],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,h){if(!this._mouseHoverThrottled){for(var _,S,C=this._drawFirst;C;C=C.next)_=C.layer,_.options.interactive&&_._containsPoint(h)&&(S=_);S!==this._hoveredLayer&&(this._handleMouseOut(a),S&&(te(this._container,"leaflet-interactive"),this._fireEvent([S],a,"mouseover"),this._hoveredLayer=S)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,h,_){this._map._fireDOMEvent(h,_||h.type,a)},_bringToFront:function(a){var h=a._order;if(h){var _=h.next,S=h.prev;if(_)_.prev=S;else return;S?S.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(a)}},_bringToBack:function(a){var h=a._order;if(h){var _=h.next,S=h.prev;if(S)S.next=_;else return;_?_.prev=S:S&&(this._drawLast=S),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(a)}}});function Pa(a){return Nt.canvas?new zl(a):null}var sr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),su={_initContainer:function(){this._container=le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kn.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var h=a._container=sr("shape");te(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",a._path=sr("path"),h.appendChild(a._path),this._updateStyle(a),this._layers[p(a)]=a},_addPath:function(a){var h=a._container;this._container.appendChild(h),a.options.interactive&&a.addInteractiveTarget(h)},_removePath:function(a){var h=a._container;Ne(h),a.removeInteractiveTarget(h),delete this._layers[p(a)]},_updateStyle:function(a){var h=a._stroke,_=a._fill,S=a.options,C=a._container;C.stroked=!!S.stroke,C.filled=!!S.fill,S.stroke?(h||(h=a._stroke=sr("stroke")),C.appendChild(h),h.weight=S.weight+"px",h.color=S.color,h.opacity=S.opacity,S.dashArray?h.dashStyle=D(S.dashArray)?S.dashArray.join(" "):S.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=S.lineCap.replace("butt","flat"),h.joinstyle=S.lineJoin):h&&(C.removeChild(h),a._stroke=null),S.fill?(_||(_=a._fill=sr("fill")),C.appendChild(_),_.color=S.fillColor||S.color,_.opacity=S.fillOpacity):_&&(C.removeChild(_),a._fill=null)},_updateCircle:function(a){var h=a._point.round(),_=Math.round(a._radius),S=Math.round(a._radiusY||_);this._setPath(a,a._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+S+" 0,"+65535*360)},_setPath:function(a,h){a._path.v=h},_bringToFront:function(a){Ln(a._container)},_bringToBack:function(a){Or(a._container)}},cs=Nt.vml?sr:Dt,ko=Kn.extend({_initContainer:function(){this._container=cs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=cs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ne(this._container),ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kn.prototype._update.call(this);var a=this._bounds,h=a.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),He(_,a.min),_.setAttribute("viewBox",[a.min.x,a.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(a){var h=a._path=cs("path");a.options.className&&te(h,a.options.className),a.options.interactive&&te(h,"leaflet-interactive"),this._updateStyle(a),this._layers[p(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Ne(a._path),a.removeInteractiveTarget(a._path),delete this._layers[p(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var h=a._path,_=a.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(a,h){this._setPath(a,Wt(a._parts,h))},_updateCircle:function(a){var h=a._point,_=Math.max(Math.round(a._radius),1),S=Math.max(Math.round(a._radiusY),1)||_,C="a"+_+","+S+" 0 1,0 ",N=a._empty()?"M0 0":"M"+(h.x-_)+","+h.y+C+_*2+",0 "+C+-_*2+",0 ";this._setPath(a,N)},_setPath:function(a,h){a._path.setAttribute("d",h)},_bringToFront:function(a){Ln(a._path)},_bringToBack:function(a){Or(a._path)}});Nt.vml&&ko.include(su);function Ba(a){return Nt.svg||Nt.vml?new ko(a):null}fe.include({getRenderer:function(a){var h=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var h=this._paneRenderers[a];return h===void 0&&(h=this._createRenderer({pane:a}),this._paneRenderers[a]=h),h},_createRenderer:function(a){return this.options.preferCanvas&&Pa(a)||Ba(a)}});var zr=Ao.extend({initialize:function(a,h){Ao.prototype.initialize.call(this,this._boundsToLatLngs(a),h)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=dt(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Gp(a,h){return new zr(a,h)}ko.create=cs,ko.pointsToPath=Wt,Os.geometryToLayer=zn,Os.coordsToLatLng=Dl,Os.coordsToLatLngs=Da,Os.latLngToCoords=Ol,Os.latLngsToCoords=Oa,Os.getFeature=tr,Os.asFeature=Rl,fe.mergeOptions({boxZoom:!0});var Jn=rs.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),_o(),xl(),this._startPoint=this._map.mouseEventToContainerPoint(a),Qt(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=le("div","leaflet-zoom-box",this._container),te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var h=new R(this._point,this._startPoint),_=h.getSize();He(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(Ne(this._box),$e(this._container,"leaflet-crosshair")),is(),ba(),ke(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var h=new ot(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});fe.addInitHook("addHandler","boxZoom",Jn),fe.mergeOptions({doubleClickZoom:!0});var Pl=rs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var h=this._map,_=h.getZoom(),S=h.options.zoomDelta,C=a.originalEvent.shiftKey?_-S:_+S;h.options.doubleClickZoom==="center"?h.setZoom(C):h.setZoomAround(a.containerPoint,C)}});fe.addInitHook("addHandler","doubleClickZoom",Pl),fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var us=rs.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new $s(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$e(this._map._container,"leaflet-grab"),$e(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=dt(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,h){return a-(a-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;a.x<h.min.x&&(a.x=this._viscousLimit(a.x,h.min.x)),a.y<h.min.y&&(a.y=this._viscousLimit(a.y,h.min.y)),a.x>h.max.x&&(a.x=this._viscousLimit(a.x,h.max.x)),a.y>h.max.y&&(a.y=this._viscousLimit(a.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,h=Math.round(a/2),_=this._initialWorldOffset,S=this._draggable._newPos.x,C=(S-h+_)%a+h-_,N=(S+h+_)%a-h-_,F=Math.abs(C+_)<Math.abs(N+_)?C:N;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(a){var h=this._map,_=h.options,S=!_.inertia||a.noInertia||this._times.length<2;if(h.fire("dragend",a),S)h.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),N=(this._lastTime-this._times[0])/1e3,F=_.easeLinearity,rt=C.multiplyBy(F/N),ut=rt.distanceTo([0,0]),bt=Math.min(_.inertiaMaxSpeed,ut),kt=rt.multiplyBy(bt/ut),Zt=bt/(_.inertiaDeceleration*F),se=kt.multiplyBy(-Zt/2).round();!se.x&&!se.y?h.fire("moveend"):(se=h._limitOffset(se,h.options.maxBounds),Y(function(){h.panBy(se,{duration:Zt,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});fe.addInitHook("addHandler","dragging",us),fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ru=rs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Qt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,h=document.documentElement,_=a.scrollTop||h.scrollTop,S=a.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(S,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var h=this._panKeys={},_=this.keyCodes,S,C;for(S=0,C=_.left.length;S<C;S++)h[_.left[S]]=[-1*a,0];for(S=0,C=_.right.length;S<C;S++)h[_.right[S]]=[a,0];for(S=0,C=_.down.length;S<C;S++)h[_.down[S]]=[0,a];for(S=0,C=_.up.length;S<C;S++)h[_.up[S]]=[0,-1*a]},_setZoomDelta:function(a){var h=this._zoomKeys={},_=this.keyCodes,S,C;for(S=0,C=_.zoomIn.length;S<C;S++)h[_.zoomIn[S]]=a;for(S=0,C=_.zoomOut.length;S<C;S++)h[_.zoomOut[S]]=-a},_addHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var h=a.keyCode,_=this._map,S;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(S=this._panKeys[h],a.shiftKey&&(S=q(S).multiplyBy(3)),_.options.maxBounds&&(S=_._limitOffset(q(S),_.options.maxBounds)),_.options.worldCopyJump){var C=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(S)));_.panTo(C)}else _.panBy(S)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Js(a)}}});fe.addInitHook("addHandler","keyboard",ru),fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ua=rs.extend({addHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var h=Zn(a),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var S=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),S),Js(a)},_performZoom:function(){var a=this._map,h=a.getZoom(),_=this._map.options.zoomSnap||0;a._stop();var S=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(S))))/Math.LN2,N=_?Math.ceil(C/_)*_:C,F=a._limitZoom(h+(this._delta>0?N:-N))-h;this._delta=0,this._startTime=null,F&&(a.options.scrollWheelZoom==="center"?a.setZoom(h+F):a.setZoomAround(this._lastMousePos,h+F))}});fe.addInitHook("addHandler","scrollWheelZoom",Ua);var Pr=600;fe.mergeOptions({tapHold:Nt.touchNative&&Nt.safari&&Nt.mobile,tapTolerance:15});var Bl=rs.extend({addHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var h=a.touches[0];this._startPos=this._newPos=new et(h.clientX,h.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Qt(document,"touchend",rn),Qt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Pr),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){ke(document,"touchend",rn),ke(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)},_onMove:function(a){var h=a.touches[0];this._newPos=new et(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,h){var _=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});fe.addInitHook("addHandler","tapHold",Bl),fe.mergeOptions({touchZoom:Nt.touch,bounceAtZoomLimits:!0});var ou=rs.extend({addHooks:function(){te(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var h=this._map;if(!(!a.touches||a.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(a.touches[0]),S=h.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(S)._divideBy(2))),this._startDist=_.distanceTo(S),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),rn(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(a.touches[0]),S=h.mouseEventToContainerPoint(a.touches[1]),C=_.distanceTo(S)/this._startDist;if(this._zoom=h.getScaleZoom(C,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&C<1||this._zoom>h.getMaxZoom()&&C>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var N=_._add(S)._divideBy(2)._subtract(this._centerPoint);if(C===1&&N.x===0&&N.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(N),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var F=u(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(F,this,!0),rn(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});fe.addInitHook("addHandler","touchZoom",ou),fe.BoxZoom=Jn,fe.DoubleClickZoom=Pl,fe.Drag=us,fe.Keyboard=ru,fe.ScrollWheelZoom=Ua,fe.TapHold=Bl,fe.TouchZoom=ou,e.Bounds=R,e.Browser=Nt,e.CRS=Ct,e.Canvas=zl,e.Circle=kl,e.CircleMarker=To,e.Class=J,e.Control=ai,e.DivIcon=rf,e.DivOverlay=Pn,e.DomEvent=Al,e.DomUtil=vo,e.Draggable=$s,e.Evented=W,e.FeatureGroup=os,e.GeoJSON=Os,e.GridLayer=Mo,e.Handler=rs,e.Icon=as,e.ImageOverlay=Co,e.LatLng=mt,e.LatLngBounds=ot,e.Layer=qi,e.LayerGroup=So,e.LineUtil=Bp,e.Map=fe,e.Marker=ka,e.Mixin=Ip,e.Path=ls,e.Point=et,e.PolyUtil=eu,e.Polygon=Ao,e.Polyline=Ds,e.Popup=Ia,e.PosAnimation=bo,e.Projection=Qh,e.Rectangle=zr,e.Renderer=Kn,e.SVG=ko,e.SVGOverlay=Nl,e.TileLayer=ir,e.Tooltip=Na,e.Transformation=Re,e.Util=P,e.VideoOverlay=nr,e.bind=u,e.bounds=X,e.canvas=Pa,e.circle=tf,e.circleMarker=$h,e.control=ks,e.divIcon=jp,e.extend=r,e.featureGroup=Kh,e.geoJSON=Il,e.geoJson=Ra,e.gridLayer=of,e.icon=Ca,e.imageOverlay=ef,e.latLng=_t,e.latLngBounds=dt,e.layerGroup=Up,e.map=Qc,e.marker=Jh,e.point=q,e.polygon=Vp,e.polyline=Hp,e.popup=sf,e.rectangle=Gp,e.setOptions=A,e.stamp=p,e.svg=Ba,e.svgOverlay=nf,e.tileLayer=bi,e.tooltip=qp,e.transformation=Fe,e.version=s,e.videoOverlay=Lo;var au=window.L;e.noConflict=function(){return window.L=au,this},window.L=e}))})(Yu,Yu.exports)),Yu.exports}var GA=jA();const cn=_h(GA);(function(i,t,e){function s(r,l){for(;(r=r.parentElement)&&!r.classList.contains(l););return r}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(r,l){this._map=r,this._container=r._container,this._overlayPane=r._panes.overlayPane,this._popupPane=r._panes.popupPane,l&&l.shapeOptions&&(l.shapeOptions=L.Util.extend({},this.options.shapeOptions,l.shapeOptions)),L.setOptions(this,l);var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(L.DomUtil.disableTextSelection(),r.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(r){L.setOptions(this,r)},_fireCreatedEvent:function(r){this._map.fire(L.Draw.Event.CREATED,{layer:r,layerType:this.type})},_cancelDrawing:function(r){r.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(r,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,r,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var r=this._markers.pop(),l=this._poly,u=l.getLatLngs(),f=u.splice(-1,1)[0];this._poly.setLatLngs(u),this._markerGroup.removeLayer(r),l.getLatLngs().length<2&&this._map.removeLayer(l),this._vertexChanged(f,!1)}},addVertex:function(r){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(r))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(r)),this._poly.addLatLng(r),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(r,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var r=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),l=this._poly.newLatLngIntersects(r[r.length-1]);if(!this.options.allowIntersection&&l||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(r){var l=this._map.mouseEventToLayerPoint(r.originalEvent),u=this._map.layerPointToLatLng(l);this._currentLatLng=u,this._updateTooltip(u),this._updateGuide(l),this._mouseMarker.setLatLng(u),L.DomEvent.preventDefault(r.originalEvent)},_vertexChanged:function(r,l){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(r,l),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(r){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(r),this._clickHandled=!0,this._disableNewMarkers();var l=r.originalEvent,u=l.clientX,f=l.clientY;this._startPoint.call(this,u,f)}},_startPoint:function(r,l){this._mouseDownOrigin=L.point(r,l)},_onMouseUp:function(r){var l=r.originalEvent,u=l.clientX,f=l.clientY;this._endPoint.call(this,u,f,r),this._clickHandled=null},_endPoint:function(r,l,u){if(this._mouseDownOrigin){var f=L.point(r,l).distanceTo(this._mouseDownOrigin),p=this._calculateFinishDistance(u.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(u.latlng),this._finishShape()):p<10&&L.Browser.touch?this._finishShape():Math.abs(f)<9*(i.devicePixelRatio||1)&&this.addVertex(u.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(r){var l,u,f=r.originalEvent;!f.touches||!f.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(l=f.touches[0].clientX,u=f.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,l,u),this._endPoint.call(this,l,u,r),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(r){var l;if(this._markers.length>0){var u;if(this.type===L.Draw.Polyline.TYPE)u=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;u=this._markers[0]}var f=this._map.latLngToContainerPoint(u.getLatLng()),p=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(p.getLatLng());l=f.distanceTo(m)}else l=1/0;return l},_updateFinishHandler:function(){var r=this._markers.length;r>1&&this._markers[r-1].on("click",this._finishShape,this),r>2&&this._markers[r-2].off("click",this._finishShape,this)},_createMarker:function(r){var l=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(l),l},_updateGuide:function(r){var l=this._markers?this._markers.length:0;l>0&&(r=r||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[l-1].getLatLng()),r))},_updateTooltip:function(r){var l=this._getTooltipText();r&&this._tooltip.updatePosition(r),this._errorShown||this._tooltip.updateContent(l)},_drawGuide:function(r,l){var u,f,p,m=Math.floor(Math.sqrt(Math.pow(l.x-r.x,2)+Math.pow(l.y-r.y,2))),v=this.options.guidelineDistance,y=this.options.maxGuideLineLength,w=m>y?m-y:v;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));w<m;w+=this.options.guidelineDistance)u=w/m,f={x:Math.floor(r.x*(1-u)+u*l.x),y:Math.floor(r.y*(1-u)+u*l.y)},p=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),p.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(p,f)},_updateGuideColor:function(r){if(this._guidesContainer)for(var l=0,u=this._guidesContainer.childNodes.length;l<u;l++)this._guidesContainer.childNodes[l].style.backgroundColor=r},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var r,l,u=this.options.showLength;return this._markers.length===0?r={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(l=u?this._getMeasurementString():"",r=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:l}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:l}),r},_updateRunningMeasure:function(r,l){var u,f,p=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(u=p-(l?2:1),f=L.GeometryUtil.isVersion07x()?r.distanceTo(this._markers[u].getLatLng())*(this.options.factor||1):this._map.distance(r,this._markers[u].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=f*(l?1:-1))},_getMeasurementString:function(){var r,l=this._currentLatLng,u=this._markers[this._markers.length-1].getLatLng();return r=L.GeometryUtil.isVersion07x()?u&&l&&l.distanceTo?this._measurementRunningTotal+l.distanceTo(u)*(this.options.factor||1):this._measurementRunningTotal||0:u&&l?this._measurementRunningTotal+this._map.distance(l,u)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(r,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var r=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(r,l){L.Draw.Polyline.prototype.initialize.call(this,r,l),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var r=this._markers.length;r===1&&this._markers[0].on("click",this._finishShape,this),r>2&&(this._markers[r-1].on("dblclick",this._finishShape,this),r>3&&this._markers[r-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var r,l;return this._markers.length===0?r=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(r=L.drawLocal.draw.handlers.polygon.tooltip.cont,l=this._getMeasurementString()):(r=L.drawLocal.draw.handlers.polygon.tooltip.end,l=this._getMeasurementString()),{text:r,subtext:l}},_getMeasurementString:function(){var r=this._area,l="";return r||this.options.showLength?(this.options.showLength&&(l=L.Draw.Polyline.prototype._getMeasurementString.call(this)),r&&(l+="<br>"+L.GeometryUtil.readableArea(r,this.options.metric,this.options.precision)),l):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(r,l){var u;!this.options.allowIntersection&&this.options.showArea&&(u=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(u)),L.Draw.Polyline.prototype._vertexChanged.call(this,r,l)},_cleanUpShape:function(){var r=this._markers.length;r>0&&(this._markers[0].off("click",this._finishShape,this),r>2&&this._markers[r-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(r,l){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,r,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(r){this._isDrawing=!0,this._startLatLng=r.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(r.originalEvent)},_onMouseMove:function(r){var l=r.latlng;this._tooltip.updatePosition(l),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(l))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(r,l){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,l)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(r){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!s(r.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(r){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_getTooltipText:function(){var r,l,u,f=L.Draw.SimpleShape.prototype._getTooltipText.call(this),p=this._shape,m=this.options.showArea;return p&&(r=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),l=L.GeometryUtil.geodesicArea(r),u=m?L.GeometryUtil.readableArea(l,this.options.metric):""),{text:f.text,subtext:u}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(r,l){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(r){var l=r.latlng;this._tooltip.updatePosition(l),this._mouseMarker.setLatLng(l),this._marker?(l=this._mouseMarker.getLatLng(),this._marker.setLatLng(l)):(this._marker=this._createMarker(l),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(r){return new L.Marker(r,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(r){this._onMouseMove(r),this._onClick()},_fireCreatedEvent:function(){var r=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(r,l){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,l)},_fireCreatedEvent:function(){var r=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)},_createMarker:function(r){return new L.CircleMarker(r,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(r,l){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,l)},_drawShape:function(r){if(L.GeometryUtil.isVersion07x())var l=this._startLatLng.distanceTo(r);else var l=this._map.distance(this._startLatLng,r);this._shape?this._shape.setRadius(l):(this._shape=new L.Circle(this._startLatLng,l,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_onMouseMove:function(r){var l,u=r.latlng,f=this.options.showRadius,p=this.options.metric;if(this._tooltip.updatePosition(u),this._isDrawing){this._drawShape(u),l=this._shape.getRadius().toFixed(1);var m="";f&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(l,p,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(r,l){this._marker=r,L.setOptions(this,l)},addHooks:function(){var r=this._marker;r.dragging.enable(),r.on("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},removeHooks:function(){var r=this._marker;r.dragging.disable(),r.off("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},_onDragEnd:function(r){var l=r.target;l.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:l})},_toggleMarkerHighlight:function(){var r=this._marker._icon;r&&(r.style.display="none",L.DomUtil.hasClass(r,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,-4)):(L.DomUtil.addClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,4)),r.style.display="")},_offsetMarker:function(r,l){var u=parseInt(r.style.marginTop,10)-l,f=parseInt(r.style.marginLeft,10)-l;r.style.marginTop=u+"px",r.style.marginLeft=f+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(r){this.latlngs=[r._latlngs],r._holes&&(this.latlngs=this.latlngs.concat(r._holes)),this._poly=r,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(r){for(var l=0;l<this._verticesHandlers.length;l++)r(this._verticesHandlers[l])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(r){r.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(r){r.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(r){r.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var r=0;r<this.latlngs.length;r++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))},_updateLatLngs:function(r){this.latlngs=[r.layer._latlngs],r.layer._holes&&(this.latlngs=this.latlngs.concat(r.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(r,l,u){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=r,u&&u.drawError&&(u.drawError=L.Util.extend({},this.options.drawError,u.drawError)),this._latlngs=l,L.setOptions(this,u)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var r=this._poly,l=r._path;r instanceof L.Polygon||(r.options.fill=!1,r.options.editing&&(r.options.editing.fill=!1)),l&&r.options.editing&&r.options.editing.className&&(r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.removeClass(l,u)}),r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.addClass(l,u)})),r.setStyle(r.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var r=this._poly,l=r._path;l&&r.options.editing&&r.options.editing.className&&(r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.removeClass(l,u)}),r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.addClass(l,u)})),r.setStyle(r.options.original),r._map&&(r._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var r,l,u,f,p=this._defaultShape();for(r=0,u=p.length;r<u;r++)f=this._createMarker(p[r],r),f.on("click",this._onMarkerClick,this),f.on("contextmenu",this._onContextMenu,this),this._markers.push(f);var m,v;for(r=0,l=u-1;r<u;l=r++)(r!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[l],v=this._markers[r],this._createMiddleMarker(m,v),this._updatePrevNext(m,v))},_createMarker:function(r,l){var u=new L.Marker.Touch(r,{draggable:!0,icon:this.options.icon});return u._origLatLng=r,u._index=l,u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(u),u},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var r=this._defaultShape(),l=[].splice.apply(r,arguments);return this._poly._convertLatLngs(r,!0),this._poly.redraw(),l},_removeMarker:function(r){var l=r._index;this._markerGroup.removeLayer(r),this._markers.splice(l,1),this._spliceLatLngs(l,1),this._updateIndexes(l,-1),r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(r){var l=r.target,u=this._poly,f=L.LatLngUtil.cloneLatLng(l._origLatLng);if(L.extend(l._origLatLng,l._latlng),u.options.poly){var p=u._map._editTooltip;if(!u.options.poly.allowIntersection&&u.intersects()){L.extend(l._origLatLng,f),l.setLatLng(f);var m=u.options.color;u.setStyle({color:this.options.drawError.color}),p&&p.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){u.setStyle({color:m}),p&&p.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}l._middleLeft&&l._middleLeft.setLatLng(this._getMiddleLatLng(l._prev,l)),l._middleRight&&l._middleRight.setLatLng(this._getMiddleLatLng(l,l._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var v=this._poly.getLatLngs();this._poly._convertLatLngs(v,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(r){var l=L.Polygon&&this._poly instanceof L.Polygon?4:3,u=r.target;this._defaultShape().length<l||(this._removeMarker(u),this._updatePrevNext(u._prev,u._next),u._middleLeft&&this._markerGroup.removeLayer(u._middleLeft),u._middleRight&&this._markerGroup.removeLayer(u._middleRight),u._prev&&u._next?this._createMiddleMarker(u._prev,u._next):u._prev?u._next||(u._prev._middleRight=null):u._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(r){var l=r.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:l,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(r){var l=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(l),f=r.target;L.extend(f._origLatLng,u),f._middleLeft&&f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f)),f._middleRight&&f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(r,l){this._markerGroup.eachLayer(function(u){u._index>r&&(u._index+=l)})},_createMiddleMarker:function(r,l){var u,f,p,m=this._getMiddleLatLng(r,l),v=this._createMarker(m);v.setOpacity(.6),r._middleRight=l._middleLeft=v,f=function(){v.off("touchmove",f,this);var y=l._index;v._index=y,v.off("click",u,this).on("click",this._onMarkerClick,this),m.lat=v.getLatLng().lat,m.lng=v.getLatLng().lng,this._spliceLatLngs(y,0,m),this._markers.splice(y,0,v),v.setOpacity(1),this._updateIndexes(y,1),l._index++,this._updatePrevNext(r,v),this._updatePrevNext(v,l),this._poly.fire("editstart")},p=function(){v.off("dragstart",f,this),v.off("dragend",p,this),v.off("touchmove",f,this),this._createMiddleMarker(r,v),this._createMiddleMarker(v,l)},u=function(){f.call(this),p.call(this),this._fireEdit()},v.on("click",u,this).on("dragstart",f,this).on("dragend",p,this).on("touchmove",f,this),this._markerGroup.addLayer(v)},_updatePrevNext:function(r,l){r&&(r._next=l),l&&(l._prev=r)},_getMiddleLatLng:function(r,l){var u=this._poly._map,f=u.project(r.getLatLng()),p=u.project(l.getLatLng());return u.unproject(f._add(p)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(r,l){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=r,L.Util.setOptions(this,l)},addHooks:function(){var r=this._shape;this._shape._map&&(this._map=this._shape._map,r.setStyle(r.options.editing),r._map&&(this._map=r._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var r=this._shape;if(r.setStyle(r.options.original),r._map){this._unbindMarker(this._moveMarker);for(var l=0,u=this._resizeMarkers.length;l<u;l++)this._unbindMarker(this._resizeMarkers[l]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(r,l){var u=new L.Marker.Touch(r,{draggable:!0,icon:l,zIndexOffset:10});return this._bindMarker(u),this._markerGroup.addLayer(u),u},_bindMarker:function(r){r.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(r){r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(r){r.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(r){var l=r.target,u=l.getLatLng();l===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(r){r.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(r){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r),typeof this._getCorners=="function"){var l=this._getCorners(),u=r.target,f=u._cornerIndex;u.setOpacity(0),this._oppositeCorner=l[(f+2)%4],this._toggleCornerMarkers(0,f)}this._shape.fire("editstart")},_onTouchMove:function(r){var l=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(l);return r.target===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),!1},_onTouchEnd:function(r){r.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getBounds(),l=r.getCenter();this._moveMarker=this._createMarker(l,this.options.moveIcon)},_createResizeMarker:function(){var r=this._getCorners();this._resizeMarkers=[];for(var l=0,u=r.length;l<u;l++)this._resizeMarkers.push(this._createMarker(r[l],this.options.resizeIcon)),this._resizeMarkers[l]._cornerIndex=l},_onMarkerDragStart:function(r){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r);var l=this._getCorners(),u=r.target,f=u._cornerIndex;this._oppositeCorner=l[(f+2)%4],this._toggleCornerMarkers(0,f)},_onMarkerDragEnd:function(r){var l,u,f=r.target;f===this._moveMarker&&(l=this._shape.getBounds(),u=l.getCenter(),f.setLatLng(u)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,r)},_move:function(r){for(var l,u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),f=this._shape.getBounds(),p=f.getCenter(),m=[],v=0,y=u.length;v<y;v++)l=[u[v].lat-p.lat,u[v].lng-p.lng],m.push([r.lat+l[0],r.lng+l[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(r){var l;this._shape.setBounds(L.latLngBounds(r,this._oppositeCorner)),l=this._shape.getBounds(),this._moveMarker.setLatLng(l.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var r=this._shape.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_toggleCornerMarkers:function(r){for(var l=0,u=this._resizeMarkers.length;l<u;l++)this._resizeMarkers[l].setOpacity(r)},_repositionCornerMarkers:function(){for(var r=this._getCorners(),l=0,u=this._resizeMarkers.length;l<u;l++)this._resizeMarkers[l].setLatLng(r[l])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getLatLng();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(r){if(this._resizeMarkers.length){var l=this._getResizeMarkerPoint(r);this._resizeMarkers[0].setLatLng(l)}this._shape.setLatLng(r),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var r=this._shape.getLatLng(),l=this._getResizeMarkerPoint(r);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(l,this.options.resizeIcon))},_getResizeMarkerPoint:function(r){var l=this._shape._radius*Math.cos(Math.PI/4),u=this._map.project(r);return this._map.unproject([u.x+l,u.y-l])},_resize:function(r){var l=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=l.distanceTo(r):radius=this._map.distance(l,r),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(r,l){var u={};if(r.touches!==void 0){if(!r.touches.length)return;u=r.touches[0]}else if(r.pointerType!=="touch"||(u=r,!this._filterClick(r)))return;var f=this._map.mouseEventToContainerPoint(u),p=this._map.mouseEventToLayerPoint(u),m=this._map.layerPointToLatLng(p);this._map.fire(l,{latlng:m,layerPoint:p,containerPoint:f,pageX:u.pageX,pageY:u.pageY,originalEvent:r})},_filterClick:function(r){var l=r.timeStamp||r.originalEvent.timeStamp,u=L.DomEvent._lastClick&&l-L.DomEvent._lastClick;return u&&u>100&&u<500||r.target._simulatedClick&&!r._simulated?(L.DomEvent.stop(r),!1):(L.DomEvent._lastClick=l,!0)},_onTouchStart:function(r){this._map._loaded&&this._touchEvent(r,"touchstart")},_onTouchEnd:function(r){this._map._loaded&&this._touchEvent(r,"touchend")},_onTouchCancel:function(r){if(this._map._loaded){var l="touchcancel";this._detectIE()&&(l="pointercancel"),this._touchEvent(r,l)}},_onTouchLeave:function(r){this._map._loaded&&this._touchEvent(r,"touchleave")},_onTouchMove:function(r){this._map._loaded&&this._touchEvent(r,"touchmove")},_detectIE:function(){var r=i.navigator.userAgent,l=r.indexOf("MSIE ");if(l>0)return parseInt(r.substring(l+5,r.indexOf(".",l)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var f=r.indexOf("Edge/");return f>0&&parseInt(r.substring(f+5,r.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var r=this._icon,l=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?l.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):l.concat(["touchcancel"]),L.DomUtil.addClass(r,"leaflet-clickable"),L.DomEvent.on(r,"click",this._onMouseClick,this),L.DomEvent.on(r,"keypress",this._onKeyPress,this);for(var u=0;u<l.length;u++)L.DomEvent.on(r,l[u],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var r=i.navigator.userAgent,l=r.indexOf("MSIE ");if(l>0)return parseInt(r.substring(l+5,r.indexOf(".",l)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var f=r.indexOf("Edge/");return f>0&&parseInt(r.substring(f+5,r.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(r){for(var l=[],u=0,f=r.length;u<f;u++)Array.isArray(r[u])?l.push(L.LatLngUtil.cloneLatLngs(r[u])):l.push(this.cloneLatLng(r[u]));return l},cloneLatLng:function(r){return L.latLng(r.lat,r.lng)}},(function(){var r={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(l){var u,f,p=l.length,m=0,v=Math.PI/180;if(p>2){for(var y=0;y<p;y++)u=l[y],f=l[(y+1)%p],m+=(f.lng-u.lng)*v*(2+Math.sin(u.lat*v)+Math.sin(f.lat*v));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(l,u){var f=parseFloat(l).toFixed(u),p=L.drawLocal.format&&L.drawLocal.format.numeric,m=p&&p.delimiters,v=m&&m.thousands,y=m&&m.decimal;if(v||y){var w=f.split(".");f=v?w[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+v):w[0],y=y||".",w.length>1&&(f=f+y+w[1])}return f},readableArea:function(l,u,v){var p,m,v=L.Util.extend({},r,v);return u?(m=["ha","m"],type=typeof u,type==="string"?m=[u]:type!=="boolean"&&(m=u),p=l>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*l,v.km)+" km":l>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*l,v.ha)+" ha":L.GeometryUtil.formattedNumber(l,v.m)+" m"):(l/=.836127,p=l>=3097600?L.GeometryUtil.formattedNumber(l/3097600,v.mi)+" mi":l>=4840?L.GeometryUtil.formattedNumber(l/4840,v.ac)+" acres":L.GeometryUtil.formattedNumber(l,v.yd)+" yd"),p},readableDistance:function(l,u,f,p,y){var v,y=L.Util.extend({},r,y);switch(u?typeof u=="string"?u:"metric":f?"feet":p?"nauticalMile":"yards"){case"metric":v=l>1e3?L.GeometryUtil.formattedNumber(l/1e3,y.km)+" km":L.GeometryUtil.formattedNumber(l,y.m)+" m";break;case"feet":l*=3.28083,v=L.GeometryUtil.formattedNumber(l,y.ft)+" ft";break;case"nauticalMile":l*=.53996,v=L.GeometryUtil.formattedNumber(l/1e3,y.nm)+" nm";break;default:l*=1.09361,v=l>1760?L.GeometryUtil.formattedNumber(l/1760,y.mi)+" miles":L.GeometryUtil.formattedNumber(l,y.yd)+" yd"}return v},isVersion07x:function(){var l=L.version.split(".");return parseInt(l[0],10)===0&&parseInt(l[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(r,l,u,f){return this._checkCounterclockwise(r,u,f)!==this._checkCounterclockwise(l,u,f)&&this._checkCounterclockwise(r,l,u)!==this._checkCounterclockwise(r,l,f)},_checkCounterclockwise:function(r,l,u){return(u.y-r.y)*(l.x-r.x)>(l.y-r.y)*(u.x-r.x)}}),L.Polyline.include({intersects:function(){var r,l,u,f=this._getProjectedPoints(),p=f?f.length:0;if(this._tooFewPointsForIntersection())return!1;for(r=p-1;r>=3;r--)if(l=f[r-1],u=f[r],this._lineSegmentsIntersectsRange(l,u,r-2))return!0;return!1},newLatLngIntersects:function(r,l){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(r),l)},newPointIntersects:function(r,l){var u=this._getProjectedPoints(),f=u?u.length:0,p=u?u[f-1]:null,m=f-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(p,r,m,l?1:0)},_tooFewPointsForIntersection:function(r){var l=this._getProjectedPoints(),u=l?l.length:0;return u+=r||0,!l||u<=3},_lineSegmentsIntersectsRange:function(r,l,u,f){var p,m,v=this._getProjectedPoints();f=f||0;for(var y=u;y>f;y--)if(p=v[y-1],m=v[y],L.LineUtil.segmentsIntersect(r,l,p,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var r=[],l=this._defaultShape(),u=0;u<l.length;u++)r.push(this._map.latLngToLayerPoint(l[u]));return r}}),L.Polygon.include({intersects:function(){var r,l,u,f,p=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(r=p.length,l=p[0],u=p[r-1],f=r-2,this._lineSegmentsIntersectsRange(u,l,f,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(r){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,r);var l;this._toolbars={},L.DrawToolbar&&this.options.draw&&(l=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=l,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(l=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=l,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(r){var l,u=L.DomUtil.create("div","leaflet-draw"),f=!1;for(var p in this._toolbars)this._toolbars.hasOwnProperty(p)&&(l=this._toolbars[p].addToolbar(r))&&(f||(L.DomUtil.hasClass(l,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(l.childNodes[0],"leaflet-draw-toolbar-top"),f=!0),u.appendChild(l));return u},onRemove:function(){for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&this._toolbars[r].removeToolbar()},setDrawingOptions:function(r){for(var l in this._toolbars)this._toolbars[l]instanceof L.DrawToolbar&&this._toolbars[l].setOptions(r)},_toolbarEnabled:function(r){var l=r.target;for(var u in this._toolbars)this._toolbars[u]!==l&&this._toolbars[u].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(r){L.setOptions(this,r),this._modes={},this._actionButtons=[],this._activeMode=null;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(r){var l,u=L.DomUtil.create("div","leaflet-draw-section"),f=0,p=this._toolbarClass||"",m=this.getModeHandlers(r);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=r,l=0;l<m.length;l++)m[l].enabled&&this._initModeHandler(m[l].handler,this._toolbarContainer,f++,p,m[l].title);if(f)return this._lastButtonIndex=--f,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),u.appendChild(this._toolbarContainer),u.appendChild(this._actionsContainer),u},removeToolbar:function(){for(var r in this._modes)this._modes.hasOwnProperty(r)&&(this._disposeButton(this._modes[r].button,this._modes[r].handler.enable,this._modes[r].handler),this._modes[r].handler.disable(),this._modes[r].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var l=0,u=this._actionButtons.length;l<u;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(r,l,u,f,p){var m=r.type;this._modes[m]={},this._modes[m].handler=r,this._modes[m].button=this._createButton({type:m,title:p,className:f+"-"+m,container:l,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=u,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!i.MSStream},_createButton:function(r){var l=L.DomUtil.create("a",r.className||"",r.container),u=L.DomUtil.create("span","sr-only",r.container);l.href="#",l.appendChild(u),r.title&&(l.title=r.title,u.innerHTML=r.title),r.text&&(l.innerHTML=r.text,u.innerHTML=r.text);var f=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(l,"click",L.DomEvent.stopPropagation).on(l,"mousedown",L.DomEvent.stopPropagation).on(l,"dblclick",L.DomEvent.stopPropagation).on(l,"touchstart",L.DomEvent.stopPropagation).on(l,"click",L.DomEvent.preventDefault).on(l,f,r.callback,r.context),l},_disposeButton:function(r,l){var u=this._detectIOS()?"touchstart":"click";L.DomEvent.off(r,"click",L.DomEvent.stopPropagation).off(r,"mousedown",L.DomEvent.stopPropagation).off(r,"dblclick",L.DomEvent.stopPropagation).off(r,"touchstart",L.DomEvent.stopPropagation).off(r,"click",L.DomEvent.preventDefault).off(r,u,l)},_handlerActivated:function(r){this.disable(),this._activeMode=this._modes[r.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(r){var l,u,f,p,m=this._actionsContainer,v=this.getActions(r),y=v.length;for(u=0,f=this._actionButtons.length;u<f;u++)this._disposeButton(this._actionButtons[u].button,this._actionButtons[u].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var w=0;w<y;w++)"enabled"in v[w]&&!v[w].enabled||(l=L.DomUtil.create("li","",m),p=this._createButton({title:v[w].title,text:v[w].text,container:l,callback:v[w].callback,context:v[w].context}),this._actionButtons.push({button:p,callback:v[w].callback}))},_showActionsToolbar:function(){var r=this._activeMode.buttonIndex,l=this._lastButtonIndex,u=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=u+"px",r===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),r===l&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(r){this._map=r,this._popupPane=r._panes.popupPane,this._visible=!1,this._container=r.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(r){return this._container?(r.subtext=r.subtext||"",r.subtext.length!==0||this._singleLineLabel?r.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(r.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+r.subtext+"</span><br />":"")+"<span>"+r.text+"</span>",r.text||r.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(r){var l=this._map.latLngToLayerPoint(r),u=this._container;return this._container&&(this._visible&&(u.style.visibility="inherit"),L.DomUtil.setPosition(u,l)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(r){for(var l in this.options)this.options.hasOwnProperty(l)&&r[l]&&(r[l]=L.extend({},this.options[l],r[l]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,r)},getModeHandlers:function(r){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(r,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(r,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(r,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(r,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(r,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(r,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(r){return[{enabled:r.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:r.completeShape,context:r},{enabled:r.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:r.deleteLastVertex,context:r},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(r){L.setOptions(this,r);for(var l in this._modes)this._modes.hasOwnProperty(l)&&r.hasOwnProperty(l)&&this._modes[l].handler.setOptions(r[l])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(r){r.edit&&(r.edit.selectedPathOptions===void 0&&(r.edit.selectedPathOptions=this.options.edit.selectedPathOptions),r.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,r.edit.selectedPathOptions)),r.remove&&(r.remove=L.extend({},this.options.remove,r.remove)),r.poly&&(r.poly=L.extend({},this.options.poly,r.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,r),this._selectedFeatureCount=0},getModeHandlers:function(r){var l=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(r,{featureGroup:l,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(r,{featureGroup:l}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(r){var l=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return r.removeAllLayers&&l.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),l},addToolbar:function(r){var l=L.Toolbar.prototype.addToolbar.call(this,r);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),l},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var r,l=this.options.featureGroup,u=l.getLayers().length!==0;this.options.edit&&(r=this._modes[L.EditToolbar.Edit.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(r=this._modes[L.EditToolbar.Delete.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(r,l){if(L.Handler.prototype.initialize.call(this,r),L.setOptions(this,l),this._featureGroup=l.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),r._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(r){this._revertLayer(r)},this)},save:function(){var r=new L.LayerGroup;this._featureGroup.eachLayer(function(l){l.edited&&(r.addLayer(l),l.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:r})},_backupLayer:function(r){var l=L.Util.stamp(r);this._uneditedLayerProps[l]||(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?this._uneditedLayerProps[l]={latlngs:L.LatLngUtil.cloneLatLngs(r.getLatLngs())}:r instanceof L.Circle?this._uneditedLayerProps[l]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng()),radius:r.getRadius()}:(r instanceof L.Marker||r instanceof L.CircleMarker)&&(this._uneditedLayerProps[l]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(r){var l=L.Util.stamp(r);r.edited=!1,this._uneditedLayerProps.hasOwnProperty(l)&&(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?r.setLatLngs(this._uneditedLayerProps[l].latlngs):r instanceof L.Circle?(r.setLatLng(this._uneditedLayerProps[l].latlng),r.setRadius(this._uneditedLayerProps[l].radius)):(r instanceof L.Marker||r instanceof L.CircleMarker)&&r.setLatLng(this._uneditedLayerProps[l].latlng),r.fire("revert-edited",{layer:r}))},_enableLayerEdit:function(r){var l,u,f=r.layer||r.target||r;this._backupLayer(f),this.options.poly&&(u=L.Util.extend({},this.options.poly),f.options.poly=u),this.options.selectedPathOptions&&(l=L.Util.extend({},this.options.selectedPathOptions),l.maintainColor&&(l.color=f.options.color,l.fillColor=f.options.fillColor),f.options.original=L.extend({},f.options),f.options.editing=l),f instanceof L.Marker?(f.editing&&f.editing.enable(),f.dragging.enable(),f.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):f.editing.enable()},_disableLayerEdit:function(r){var l=r.layer||r.target||r;l.edited=!1,l.editing&&l.editing.disable(),delete l.options.editing,delete l.options.original,this._selectedPathOptions&&(l instanceof L.Marker?this._toggleMarkerHighlight(l):(l.setStyle(l.options.previousOptions),delete l.options.previousOptions)),l instanceof L.Marker?(l.dragging.disable(),l.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):l.editing.disable()},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_onMarkerDragEnd:function(r){var l=r.target;l.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:l})},_onTouchMove:function(r){var l=r.originalEvent.changedTouches[0],u=this._map.mouseEventToLayerPoint(l),f=this._map.layerPointToLatLng(u);r.target.setLatLng(f)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(r,l){if(L.Handler.prototype.initialize.call(this,r),L.Util.setOptions(this,l),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(r){this._deletableLayers.addLayer(r),r.fire("revert-deleted",{layer:r})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(r){this._removeLayer({layer:r})},this),this.save()},_enableLayerDelete:function(r){(r.layer||r.target||r).on("click",this._removeLayer,this)},_disableLayerDelete:function(r){var l=r.layer||r.target||r;l.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(l)},_removeLayer:function(r){var l=r.layer||r.target||r;this._deletableLayers.removeLayer(l),this._deletedLayers.addLayer(l),l.fire("deleted")},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var R_,Dw;function ZA(){if(Dw)return R_;Dw=1;const i=1e-6;return R_={DP_TOL:i,EQ_0:function(t){return t<i&&t>-i},EQ:function(t,e){return t-e<i&&t-e>-i},GT:(t,e)=>t-e>i,GE:(t,e)=>t-e>-i,LT:(t,e)=>t-e<-i,LE:(t,e)=>t-e<i},R_}var I_,Ow;function WA(){return Ow||(Ow=1,I_={ILLEGAL_PARAMETERS:new ReferenceError("Illegal Parameters"),ZERO_DIVISION:new Error("Zero division")}),I_}var N_,Rw;function YA(){return Rw||(Rw=1,N_=function(i){i.Matrix=class fc{constructor(e=1,s=0,r=0,l=1,u=0,f=0){this.a=e,this.b=s,this.c=r,this.d=l,this.tx=u,this.ty=f}clone(){return new fc(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new fc(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let s,r;if(e.length==1&&e[0]instanceof i.Vector)s=e[0].x,r=e[0].y;else if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")s=e[0],r=e[1];else throw i.Errors.ILLEGAL_PARAMETERS;return this.multiply(new fc(1,0,0,1,s,r))}rotate(e){let s=Math.cos(e),r=Math.sin(e);return this.multiply(new fc(s,r,-r,s,0,0))}scale(e,s){return this.multiply(new fc(e,0,0,s,0,0))}equalTo(e){return!(!i.Utils.EQ(this.tx,e.tx)||!i.Utils.EQ(this.ty,e.ty)||!i.Utils.EQ(this.a,e.a)||!i.Utils.EQ(this.b,e.b)||!i.Utils.EQ(this.c,e.c)||!i.Utils.EQ(this.d,e.d))}},i.matrix=(...t)=>new i.Matrix(...t)}),N_}var z_,Iw;function XA(){return Iw||(Iw=1,z_=class Sg{constructor(e,s){this.low=e,this.high=s}get max(){return this.high}interval(e,s){return new Sg(e,s)}clone(){return new Sg(this.low,this.high)}less_than(e){return this.low<e.low||this.low==e.low&&this.high<e.high}equal_to(e){return this.low==e.low&&this.high==e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}output(){return[this.low,this.high]}maximal_val(e,s){return Math.max(e,s)}val_less_than(e,s){return e<s}}),z_}var P_,Nw;function E1(){return Nw||(Nw=1,P_={RB_TREE_COLOR_RED:0,RB_TREE_COLOR_BLACK:1}),P_}var B_,zw;function QA(){if(zw)return B_;zw=1;let i=XA(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=E1();return B_=class{constructor(l=void 0,u=void 0,f=null,p=null,m=null,v=e){this.left=f,this.right=p,this.parent=m,this.color=v,this.item={key:l,value:u},l&&l instanceof Array&&l.length==2&&!Number.isNaN(l[0])&&!Number.isNaN(l[1])&&(this.item.key=new i(Math.min(l[0],l[1]),Math.max(l[0],l[1]))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===e}less_than(l){return this.item.key.less_than(l.item.key)}equal_to(l){let u=!0;return this.item.value&&l.item.value&&(u=this.item.value.equal_to?this.item.value.equal_to(l.item.value):this.item.value==l.item.value),this.item.key.equal_to(l.item.key)&&u}intersect(l){return this.item.key.intersect(l.item.key)}copy_data(l){this.item.key=l.item.key.clone(),this.item.value=l.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){let l=this.item.key.maximal_val;this.max=l(this.max,this.right.max)}if(this.left&&this.left.max){let l=this.item.key.maximal_val;this.max=l(this.max,this.left.max)}}not_intersect_left_subtree(l){let u=this.item.key.val_less_than,f=this.left.max.high?this.left.max.high:this.left.max;return u(f,l.item.key.low)}not_intersect_right_subtree(l){let u=this.item.key.val_less_than,f=this.right.max.low?this.right.max.low:this.right.item.key.low;return u(l.item.key.high,f)}},B_}var U_,Pw;function L1(){if(Pw)return U_;Pw=1;let i=QA(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=E1(),s=new i;return U_=class C1{constructor(){this.root=null}get size(){let u=0;return this.tree_walk(this.root,()=>u++),u}get keys(){let u=[];return this.tree_walk(this.root,f=>u.push(f.item.key.output())),u}get values(){let u=[];return this.tree_walk(this.root,f=>u.push(f.item.value)),u}get items(){let u=[];return this.tree_walk(this.root,f=>u.push({key:f.item.key.output(),value:f.item.value})),u}get isEmpty(){return this.root==null||this.root==s}insert(u,f=u){if(u===void 0)return;let p=new i(u,f,s,s,null,t);return this.tree_insert(p),this.recalc_max(p),p}exist(u,f){let p=new i(u,f);return!!this.tree_search(this.root,p)}remove(u,f){let p=new i(u,f),m=this.tree_search(this.root,p);return m&&this.tree_delete(m),m}search(u){let f=new i(u),p=[];this.tree_search_interval(this.root,f,p);let m=[];return p.forEach(v=>{v.item.value?m.push(v.item.value):m.push(v.item.key.output())},[]),m}forEach(u){this.tree_walk(this.root,f=>u(f.item.key,f.item.value))}map(u){const f=new C1;return this.tree_walk(this.root,p=>f.insert(p.item.key,u(p.item.value,p.item.key))),f}recalc_max(u){let f=u;for(;f.parent!=null;)f.parent.update_max(),f=f.parent}tree_insert(u){let f=this.root,p=null;if(this.root==null||this.root==s)this.root=u;else{for(;f!=s;)p=f,u.less_than(f)?f=f.left:f=f.right;u.parent=p,u.less_than(p)?p.left=u:p.right=u}this.insert_fixup(u)}insert_fixup(u){let f,p;for(f=u;f!=this.root&&f.parent.color==t;)f.parent==f.parent.parent.left?(p=f.parent.parent.right,p.color==t?(f.parent.color=e,p.color=e,f.parent.parent.color=t,f=f.parent.parent):(f==f.parent.right&&(f=f.parent,this.rotate_left(f)),f.parent.color=e,f.parent.parent.color=t,this.rotate_right(f.parent.parent))):(p=f.parent.parent.left,p.color==t?(f.parent.color=e,p.color=e,f.parent.parent.color=t,f=f.parent.parent):(f==f.parent.left&&(f=f.parent,this.rotate_right(f)),f.parent.color=e,f.parent.parent.color=t,this.rotate_left(f.parent.parent)));this.root.color=e}tree_delete(u){let f,p;u.left==s||u.right==s?f=u:f=this.tree_successor(u),f.left!=s?p=f.left:p=f.right,p.parent=f.parent,f==this.root?this.root=p:(f==f.parent.left?f.parent.left=p:f.parent.right=p,f.parent.update_max()),this.recalc_max(p),f!=u&&(u.copy_data(f),u.update_max(),this.recalc_max(u)),f.color==e&&this.delete_fixup(p)}delete_fixup(u){let f=u,p;for(;f!=this.root&&f.parent!=null&&f.color==e;)f==f.parent.left?(p=f.parent.right,p.color==t&&(p.color=e,f.parent.color=t,this.rotate_left(f.parent),p=f.parent.right),p.left.color==e&&p.right.color==e?(p.color=t,f=f.parent):(p.right.color==e&&(p.color=t,p.left.color=e,this.rotate_right(p),p=f.parent.right),p.color=f.parent.color,f.parent.color=e,p.right.color=e,this.rotate_left(f.parent),f=this.root)):(p=f.parent.left,p.color==t&&(p.color=e,f.parent.color=t,this.rotate_right(f.parent),p=f.parent.left),p.left.color==e&&p.right.color==e?(p.color=t,f=f.parent):(p.left.color==e&&(p.color=t,p.right.color=e,this.rotate_left(p),p=f.parent.left),p.color=f.parent.color,f.parent.color=e,p.left.color=e,this.rotate_right(f.parent),f=this.root));f.color=e}tree_search(u,f){if(!(u==null||u==s))return f.equal_to(u)?u:f.less_than(u)?this.tree_search(u.left,f):this.tree_search(u.right,f)}tree_search_interval(u,f,p){u!=null&&u!=s&&(u.left!=s&&!u.not_intersect_left_subtree(f)&&this.tree_search_interval(u.left,f,p),u.intersect(f)&&p.push(u),u.right!=s&&!u.not_intersect_right_subtree(f)&&this.tree_search_interval(u.right,f,p))}local_minimum(u){let f=u;for(;f.left!=null&&f.left!=s;)f=f.left;return f}local_maximum(u){let f=u;for(;f.right!=null&&f.right!=s;)f=f.right;return f}tree_successor(u){let f,p,m;if(u.right!=s)f=this.local_minimum(u.right);else{for(p=u,m=u.parent;m!=null&&m.right==p;)p=m,m=m.parent;f=m}return f}rotate_left(u){let f=u.right;u.right=f.left,f.left!=s&&(f.left.parent=u),f.parent=u.parent,u==this.root?this.root=f:u==u.parent.left?u.parent.left=f:u.parent.right=f,f.left=u,u.parent=f,u!=null&&u!=s&&u.update_max(),f=u.parent,f!=null&&f!=s&&f.update_max()}rotate_right(u){let f=u.left;u.left=f.right,f.right!=s&&(f.right.parent=u),f.parent=u.parent,u==this.root?this.root=f:u==u.parent.left?u.parent.left=f:u.parent.right=f,f.right=u,u.parent=f,u!=null&&u!=s&&u.update_max(),f=u.parent,f!=null&&f!=s&&f.update_max()}tree_walk(u,f){u!=null&&u!=s&&(this.tree_walk(u.left,f),f(u),this.tree_walk(u.right,f))}testRedBlackProperty(){let u=!0;return this.tree_walk(this.root,function(f){f.color==t&&(f.left.color==e&&f.right.color==e||(u=!1))}),u}testBlackHeightProperty(u){let f=0,p=0,m=0;if(u.color==e&&f++,u.left!=s?p=this.testBlackHeightProperty(u.left):p=1,u.right!=s?m=this.testBlackHeightProperty(u.right):m=1,p!=m)throw new Error("Red-black height property violated");return f+=p,f}},U_}var H_,Bw;function FA(){if(Bw)return H_;Bw=1;let i=L1();return H_=function(t){t.PlanarSet=class extends Set{constructor(){super(),this.index=new i}add(s){let r=this.size;return super.add(s),this.size>r&&this.index.insert(s.box,s),this}delete(s){let r=super.delete(s);return r&&this.index.remove(s.box,s),r}clear(){super.clear(),this.index=new i}search(s){return this.index.search(s)}hit(s){let r=new t.Box(s.x-1,s.y-1,s.x+1,s.y+1);return this.index.search(r).filter(u=>s.on(u))}svg(){return[...this].reduce((r,l)=>r+l.svg(),"")}}},H_}var V_,Uw;function KA(){return Uw||(Uw=1,V_=function(i){i.Point=class M1{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw i.Errors.ILLEGAL_PARAMETERS}}get box(){return new i.Box(this.x,this.y,this.x,this.y)}clone(){return new i.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return i.Utils.EQ(this.x,e.x)&&i.Utils.EQ(this.y,e.y)}lessThan(e){return!!(i.Utils.LT(this.y,e.y)||i.Utils.EQ(this.y,e.y)&&i.Utils.LT(this.x,e.x))}rotate(e,s={x:0,y:0}){var r=s.x+(this.x-s.x)*Math.cos(e)-(this.y-s.y)*Math.sin(e),l=s.y+(this.x-s.x)*Math.sin(e)+(this.y-s.y)*Math.cos(e);return new i.Point(r,l)}translate(...e){if(e.length==1&&e[0]instanceof i.Vector)return new i.Point(this.x+e[0].x,this.y+e[0].y);if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")return new i.Point(this.x+e[0],this.y+e[1]);throw i.Errors.ILLEGAL_PARAMETERS}transform(e){return new i.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let s=new i.Vector(this,e.pt);if(i.Utils.EQ_0(s.cross(e.norm)))return e.pt.clone();let r=s.dot(e.norm),l=e.norm.multiply(r);return this.translate(l)}leftTo(e){let s=new i.Vector(e.pt,this);return i.Utils.GT(s.dot(e.norm),0)}distanceTo(e){let{Distance:s}=i;if(e instanceof M1){let r=e.x-this.x,l=e.y-this.y;return[Math.sqrt(r*r+l*l),new i.Segment(this,e)]}if(e instanceof i.Line)return s.point2line(this,e);if(e instanceof i.Circle)return s.point2circle(this,e);if(e instanceof i.Segment)return s.point2segment(this,e);if(e instanceof i.Arc)return s.point2arc(this,e);if(e instanceof i.Polygon)return s.point2polygon(this,e);if(e instanceof i.PlanarSet)return s.shape2planarSet(this,e)}on(e){if(e instanceof i.Point)return this.equalTo(e);if(e instanceof i.Line)return e.contains(this);if(e instanceof i.Circle)return e.contains(this);if(e instanceof i.Segment)return e.contains(this);if(e instanceof i.Arc)return e.contains(this);if(e instanceof i.Polygon)return e.contains(this)}svg(e={}){let{r:s,stroke:r,strokeWidth:l,fill:u,id:f,className:p}=e,m=f&&f.length>0?`id="${f}"`:"",v=p&&p.length>0?`class="${p}"`:"";return`
<circle cx="${this.x}" cy="${this.y}" r="${s||3}" stroke="${r||"black"}" stroke-width="${l||1}" fill="${u||"red"}" ${m} ${v} />`}toJSON(){return Object.assign({},this,{name:"point"})}},i.point=(...t)=>new i.Point(...t)}),V_}var q_,Hw;function JA(){return Hw||(Hw=1,q_=function(i){i.Vector=class gd{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2){let s=e[0],r=e[1];if(typeof s=="number"&&typeof r=="number"){this.x=s,this.y=r;return}if(s instanceof i.Point&&r instanceof i.Point){this.x=r.x-s.x,this.y=r.y-s.y;return}}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new gd(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return i.Utils.EQ(this.x,e.x)&&i.Utils.EQ(this.y,e.y)}multiply(e){return new gd(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!i.Utils.EQ_0(this.length))return new gd(this.x/this.length,this.y/this.length);throw i.Errors.ZERO_DIVISION}rotate(e){let r=new i.Point(this.x,this.y).rotate(e);return new i.Vector(r.x,r.y)}rotate90CCW(){return new i.Vector(-this.y,this.x)}rotate90CW(){return new i.Vector(this.y,-this.x)}invert(){return new i.Vector(-this.x,-this.y)}add(e){return new i.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new i.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let s=this.normalize(),r=e.normalize(),l=Math.atan2(s.cross(r),s.dot(r));return l<0&&(l+=2*Math.PI),l}projectionOn(e){let s=e.normalize(),r=this.dot(s);return s.multiply(r)}toJSON(){return Object.assign({},this,{name:"vector"})}},i.vector=(...t)=>new i.Vector(...t)}),q_}var j_,Vw;function $A(){return Vw||(Vw=1,j_=function(i){i.Line=class Ja{constructor(...e){if(this.pt=new i.Point,this.norm=new i.Vector(0,1),e.length!=0){if(e.length==1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:s,norm:r}=e[0];this.pt=new i.Point(s),this.norm=new i.Vector(r);return}if(e.length==2){let s=e[0],r=e[1];if(s instanceof i.Point&&r instanceof i.Point){this.pt=s,this.norm=Ja.points2norm(s,r);return}if(s instanceof i.Point&&r instanceof i.Vector){if(i.Utils.EQ_0(r.x)&&i.Utils.EQ_0(r.y))throw i.Errors.ILLEGAL_PARAMETERS;this.pt=s.clone(),this.norm=r.clone(),this.norm=this.norm.normalize();return}if(s instanceof i.Vector&&r instanceof i.Point){if(i.Utils.EQ_0(s.x)&&i.Utils.EQ_0(s.y))throw i.Errors.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=s.clone(),this.norm=this.norm.normalize();return}}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new i.Line(this.pt,this.norm)}get slope(){return new i.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,s=this.norm.y,r=this.norm.dot(this.pt);return[e,s,r]}parallelTo(e){return i.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let s=new i.Vector(this.pt,e);return i.Utils.EQ_0(this.norm.dot(s))}intersect(e){if(e instanceof i.Point)return this.contains(e)?[e]:[];if(e instanceof i.Line)return Ja.intersectLine2Line(this,e);if(e instanceof i.Circle)return Ja.intersectLine2Circle(this,e);if(e instanceof i.Segment)return e.intersect(this);if(e instanceof i.Arc)return Ja.intersectLine2Arc(this,e);if(e instanceof i.Polygon)return i.Polygon.intersectLine2Polygon(this,e)}distanceTo(e){let{Distance:s}=i;if(e instanceof i.Point){let[r,l]=s.point2line(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Circle){let[r,l]=s.circle2line(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Segment){let[r,l]=s.segment2line(e,this);return[r,l.reverse()]}if(e instanceof i.Arc){let[r,l]=s.arc2line(e,this);return[r,l.reverse()]}if(e instanceof i.Polygon){let[r,l]=s.shape2polygon(this,e);return[r,l]}}svg(e,s={}){let r=Ja.intersectLine2Box(this,e);if(r.length===0)return"";let l=r[0],u=r.length==2?r[1]:r.find(p=>!p.equalTo(l));return u===void 0&&(u=l),new i.Segment(l,u).svg(s)}toJSON(){return Object.assign({},this,{name:"line"})}static points2norm(e,s){if(e.equalTo(s))throw i.Errors.ILLEGAL_PARAMETERS;return new i.Vector(e,s).normalize().rotate90CCW()}static intersectLine2Line(e,s){let r=[],[l,u,f]=e.standard,[p,m,v]=s.standard,y=l*m-u*p,w=f*m-u*v,T=l*v-f*p;if(!i.Utils.EQ_0(y)){let x=new i.Point(w/y,T/y);r.push(x)}return r}static intersectLine2Circle(e,s){let r=[],l=s.pc.projectionOn(e),u=s.pc.distanceTo(l)[0];if(i.Utils.EQ(u,s.r))r.push(l);else if(i.Utils.LT(u,s.r)){let f=Math.sqrt(s.r*s.r-u*u),p,m;p=e.norm.rotate90CCW().multiply(f),m=l.translate(p),r.push(m),p=e.norm.rotate90CW().multiply(f),m=l.translate(p),r.push(m)}return r}static intersectLine2Box(e,s){let r=[new i.Point(s.xmin,s.ymin),new i.Point(s.xmax,s.ymin),new i.Point(s.xmax,s.ymax),new i.Point(s.xmin,s.ymax)],l=[new i.Segment(r[0],r[1]),new i.Segment(r[1],r[2]),new i.Segment(r[2],r[3]),new i.Segment(r[3],r[0])],u=[];for(let f of l){let p=f.intersect(e);for(let m of p)u.push(m)}return u}static intersectLine2Arc(e,s){let r=[];if(Ja.intersectLine2Box(e,s.box).length==0)return r;let l=new i.Circle(s.pc,s.r),u=e.intersect(l);for(let f of u)f.on(s)&&r.push(f);return r}},i.line=(...t)=>new i.Line(...t)}),j_}var G_,qw;function tE(){return qw||(qw=1,G_=function(i){let{Arc:t,vector:e}=i;i.Circle=class k1{constructor(...r){if(this.pc=new i.Point,this.r=1,r.length==1&&r[0]instanceof Object&&r[0].name==="circle"){let{pc:l,r:u}=r[0];this.pc=new i.Point(l),this.r=u;return}else{let[l,u]=[...r];l&&l instanceof i.Point&&(this.pc=l.clone()),u!==void 0&&(this.r=u);return}}clone(){return new i.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new i.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(r){return i.Utils.LE(r.distanceTo(this.center)[0],this.r)}toArc(r=!0){return new i.Arc(this.center,this.r,Math.PI,-Math.PI,r)}intersect(r){if(r instanceof i.Point)return this.contains(r)?[r]:[];if(r instanceof i.Line)return r.intersect(this);if(r instanceof i.Segment)return r.intersect(this);if(r instanceof i.Circle)return k1.intersectCirle2Circle(this,r);if(r instanceof i.Arc)return r.intersect(this);if(r instanceof i.Polygon)return i.Polygon.intersectShape2Polygon(this,r)}distanceTo(r){let{Distance:l}=i,{point2circle:u,circle2circle:f,circle2line:p,segment2circle:m,arc2circle:v}=l;if(r instanceof i.Point){let[y,w]=u(r,this);return w=w.reverse(),[y,w]}if(r instanceof i.Circle){let[y,w]=f(this,r);return[y,w]}if(r instanceof i.Line){let[y,w]=p(this,r);return[y,w]}if(r instanceof i.Segment){let[y,w]=m(r,this);return w=w.reverse(),[y,w]}if(r instanceof i.Arc){let[y,w]=v(r,this);return w=w.reverse(),[y,w]}if(r instanceof i.Polygon){let[y,w]=l.shape2polygon(this,r);return[y,w]}if(r instanceof i.PlanarSet){let[y,w]=l.shape2planarSet(this,r);return[y,w]}}static intersectCirle2Circle(r,l){let u=[];if(r.box.not_intersect(l.box))return u;let f=new i.Vector(r.pc,l.pc),p=r.r,m=l.r;if(i.Utils.EQ_0(p)||i.Utils.EQ_0(m))return u;if(i.Utils.EQ_0(f.x)&&i.Utils.EQ_0(f.y)&&i.Utils.EQ(p,m))return u.push(r.pc.translate(-p,0)),u;let v=r.pc.distanceTo(l.pc)[0];if(i.Utils.GT(v,p+m)||i.Utils.LT(v,Math.abs(p-m)))return u;f.x/=v,f.y/=v;let y;if(i.Utils.EQ(v,p+m)||i.Utils.EQ(v,Math.abs(p-m)))return y=r.pc.translate(p*f.x,p*f.y),u.push(y),u;let w=p*p/(2*v)-m*m/(2*v)+v/2,T=r.pc.translate(w*f.x,w*f.y),x=Math.sqrt(p*p-w*w);return y=T.translate(f.rotate90CCW().multiply(x)),u.push(y),y=T.translate(f.rotate90CW().multiply(x)),u.push(y),u}svg(r={}){let{stroke:l,strokeWidth:u,fill:f,fillOpacity:p,id:m,className:v}=r,y=m&&m.length>0?`id="${m}"`:"",w=v&&v.length>0?`class="${v}"`:"";return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}" stroke="${l||"black"}" stroke-width="${u||1}" fill="${f||"none"}" fill-opacity="${p||1}" ${y} ${w} />`}toJSON(){return Object.assign({},this,{name:"circle"})}},i.circle=(...s)=>new i.Circle(...s)}),G_}var Z_,jw;function eE(){return jw||(jw=1,Z_=function(i){i.Segment=class ta{constructor(...e){if(this.ps=new i.Point,this.pe=new i.Point,e.length!=0){if(e.length==1&&e[0]instanceof Array&&e[0].length==4){let s=e[0];this.ps=new i.Point(s[0],s[1]),this.pe=new i.Point(s[2],s[3]);return}if(e.length==1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:s,pe:r}=e[0];this.ps=new i.Point(s.x,s.y),this.pe=new i.Point(r.x,r.y);return}if(e.length==2&&e[0]instanceof i.Point&&e[1]instanceof i.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length==4){this.ps=new i.Point(e[0],e[1]),this.pe=new i.Point(e[2],e[3]);return}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new i.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new i.Vector(this.start,this.end).slope}get box(){return new i.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return i.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof i.Point)return this.contains(e)?[e]:[];if(e instanceof i.Line)return ta.intersectSegment2Line(this,e);if(e instanceof i.Segment)return ta.intersectSegment2Segment(this,e);if(e instanceof i.Circle)return ta.intersectSegment2Circle(this,e);if(e instanceof i.Arc)return ta.intersectSegment2Arc(this,e);if(e instanceof i.Polygon)return i.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=i;if(e instanceof i.Point){let[r,l]=s.point2segment(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Circle){let[r,l]=s.segment2circle(this,e);return[r,l]}if(e instanceof i.Line){let[r,l]=s.segment2line(this,e);return[r,l]}if(e instanceof i.Segment){let[r,l]=s.segment2segment(this,e);return[r,l]}if(e instanceof i.Arc){let[r,l]=s.segment2arc(this,e);return[r,l]}if(e instanceof i.Polygon){let[r,l]=s.shape2polygon(this,e);return[r,l]}if(e instanceof i.PlanarSet){let[r,l]=s.shape2planarSet(this,e);return[r,l]}}tangentInStart(){return new i.Vector(this.start,this.end).normalize()}tangentInEnd(){return new i.Vector(this.end,this.start).normalize()}reverse(){return new ta(this.end,this.start)}split(e){return this.contains(e)?this.start.equalTo(this.end)?[this.clone()]:this.start.equalTo(e)||this.end.equalTo(e)?[this]:[new i.Segment(this.start,e),new i.Segment(e,this.end)]:[]}middle(){return new i.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}distanceToPoint(e){let[s,...r]=i.Distance.point2segment(e,this);return s}definiteIntegral(e=0){let s=this.end.x-this.start.x,r=this.start.y-e,l=this.end.y-e;return s*(r+l)/2}translate(...e){return new ta(this.ps.translate(...e),this.pe.translate(...e))}rotate(e=0,s=new i.Point){let r=new i.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new i.Matrix){return new ta(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}static intersectSegment2Line(e,s){let r=[];return e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&!e.isZeroLength()&&r.push(e.pe),r.length>0||e.isZeroLength()||e.ps.leftTo(s)&&e.pe.leftTo(s)||!e.ps.leftTo(s)&&!e.pe.leftTo(s)?r:new i.Line(e.ps,e.pe).intersect(s)}static intersectSegment2Segment(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;if(s.isZeroLength())return s.ps.on(e)&&r.push(s.ps),r;let l=new i.Line(e.ps,e.pe),u=new i.Line(s.ps,s.pe);if(l.incidentTo(u))e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&r.push(e.pe),s.ps.on(e)&&!s.ps.equalTo(e.ps)&&!s.ps.equalTo(e.pe)&&r.push(s.ps),s.pe.on(e)&&!s.pe.equalTo(e.ps)&&!s.pe.equalTo(e.pe)&&r.push(s.pe);else{let f=l.intersect(u);f.length>0&&f[0].on(e)&&f[0].on(s)&&r.push(f[0])}return r}static intersectSegment2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength()){let[f,p]=e.ps.distanceTo(s.pc);return i.Utils.EQ(f,s.r)&&r.push(e.ps),r}let u=new i.Line(e.ps,e.pe).intersect(s);for(let f of u)f.on(e)&&r.push(f);return r}static intersectSegment2Arc(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;let l=new i.Line(e.ps,e.pe),u=new i.Circle(s.pc,s.r),f=l.intersect(u);for(let p of f)p.on(e)&&p.on(s)&&r.push(p);return r}svg(e={}){let{stroke:s,strokeWidth:r,id:l,className:u}=e,f=l&&l.length>0?`id="${l}"`:"",p=u&&u.length>0?`class="${u}"`:"";return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" stroke="${s||"black"}" stroke-width="${r||1}" ${f} ${p} />`}toJSON(){return Object.assign({},this,{name:"segment"})}},i.segment=(...t)=>new i.Segment(...t)}),Z_}var W_,Gw;function nE(){return Gw||(Gw=1,W_=function(i){i.Arc=class dc{constructor(...e){if(this.pc=new i.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=i.CCW,e.length!=0)if(e.length==1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:s,r,startAngle:l,endAngle:u,counterClockwise:f}=e[0];this.pc=new i.Point(s.x,s.y),this.r=r,this.startAngle=l,this.endAngle=u,this.counterClockwise=f;return}else{let[s,r,l,u,f]=[...e];s&&s instanceof i.Point&&(this.pc=s.clone()),r!==void 0&&(this.r=r),l!==void 0&&(this.startAngle=l),u!==void 0&&(this.endAngle=u),f!==void 0&&(this.counterClockwise=f);return}}clone(){return new i.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(i.Utils.EQ(this.startAngle,this.endAngle))return 0;if(i.Utils.EQ(Math.abs(this.startAngle-this.endAngle),i.PIx2))return i.PIx2;let e;return this.counterClockwise?e=i.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+i.PIx2:e=i.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+i.PIx2,i.Utils.GT(e,i.PIx2)&&(e-=i.PIx2),i.Utils.LT(e,0)&&(e+=i.PIx2),e}get start(){return new i.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new i.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let s=this.breakToFunctional().reduce((r,l)=>r.merge(l.start.box),new i.Box);return s=s.merge(this.end.box),s}contains(e){if(!i.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let s=new i.Vector(this.pc,e).slope,r=new i.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise);return i.Utils.LE(r.length,this.length)}split(e){if(!this.contains(e))return[];if(i.Utils.EQ_0(this.sweep))return[this.clone()];if(this.start.equalTo(e)||this.end.equalTo(e))return[this.clone()];let s=new i.Vector(this.pc,e).slope;return[new i.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise),new i.Arc(this.pc,this.r,s,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new i.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof i.Point)return this.contains(e)?[e]:[];if(e instanceof i.Line)return e.intersect(this);if(e instanceof i.Circle)return dc.intersectArc2Circle(this,e);if(e instanceof i.Segment)return e.intersect(this);if(e instanceof i.Arc)return dc.intersectArc2Arc(this,e);if(e instanceof i.Polygon)return i.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=i;if(e instanceof i.Point){let[r,l]=s.point2arc(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Circle){let[r,l]=s.arc2circle(this,e);return[r,l]}if(e instanceof i.Line){let[r,l]=s.arc2line(this,e);return[r,l]}if(e instanceof i.Segment){let[r,l]=s.segment2arc(e,this);return l=l.reverse(),[r,l]}if(e instanceof i.Arc){let[r,l]=s.arc2arc(this,e);return[r,l]}if(e instanceof i.Polygon){let[r,l]=s.shape2polygon(this,e);return[r,l]}if(e instanceof i.PlanarSet){let[r,l]=s.shape2planarSet(this,e);return[r,l]}}breakToFunctional(){let e=[],s=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],l=[];for(let u=0;u<4;u++)r[u].on(this)&&l.push(new i.Arc(this.pc,this.r,this.startAngle,s[u],this.counterClockwise));if(l.length==0)e.push(this.clone());else{l.sort((p,m)=>p.length-m.length);for(let p=0;p<l.length;p++){let m=e.length>0?e[e.length-1]:void 0,v;m?v=new i.Arc(this.pc,this.r,m.endAngle,l[p].endAngle,this.counterClockwise):v=new i.Arc(this.pc,this.r,this.startAngle,l[p].endAngle,this.counterClockwise),i.Utils.EQ_0(v.length)||e.push(v.clone())}let u=e.length>0?e[e.length-1]:void 0,f;u?f=new i.Arc(this.pc,this.r,u.endAngle,this.endAngle,this.counterClockwise):f=new i.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),i.Utils.EQ_0(f.length)||e.push(f.clone())}return e}tangentInStart(){let e=new i.Vector(this.pc,this.start),s=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(s).normalize()}tangentInEnd(){let e=new i.Vector(this.pc,this.end),s=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(s).normalize()}reverse(){return new dc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}translate(...e){let s=this.clone();return s.pc=this.pc.translate(...e),s}rotate(e=0,s=new i.Point){let r=new i.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new i.Matrix){let s=this.start.transform(e),r=this.end.transform(e),l=this.pc.transform(e);return dc.arcSE(l,s,r,this.counterClockwise)}static arcSE(e,s,r,l){let{vector:u}=i,f=u(e,s).slope,p=u(e,r).slope;i.Utils.EQ(f,p)&&(p+=2*Math.PI,l=!0);let m=u(e,s).length;return new dc(e,m,f,p,l)}static intersectArc2Arc(e,s){var r=[];if(e.box.not_intersect(s.box))return r;if(e.pc.equalTo(s.pc)&&i.Utils.EQ(e.r,s.r)){let p;return p=e.start,p.on(s)&&r.push(p),p=e.end,p.on(s)&&r.push(p),p=s.start,p.on(e)&&r.push(p),p=s.end,p.on(e)&&r.push(p),r}let l=new i.Circle(e.pc,e.r),u=new i.Circle(s.pc,s.r),f=l.intersect(u);for(let p of f)p.on(e)&&p.on(s)&&r.push(p);return r}static intersectArc2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(s.pc.equalTo(e.pc)&&i.Utils.EQ(s.r,e.r))return r.push(e.start),r.push(e.end),r;let l=s,u=new i.Circle(e.pc,e.r),f=l.intersect(u);for(let p of f)p.on(e)&&r.push(p);return r}definiteIntegral(e=0){return this.breakToFunctional().reduce((l,u)=>l+u.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let s=new i.Line(this.start,this.end),r=this.pc.leftTo(s),u=new i.Segment(this.start,this.end).definiteIntegral(e),f=this.circularSegmentArea();return r?u-f:u+f}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}svg(e={}){let s=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0",{stroke:l,strokeWidth:u,fill:f,id:p,className:m}=e,v=p&&p.length>0?`id="${p}"`:"",y=m&&m.length>0?`class="${m}"`:"";return i.Utils.EQ(this.sweep,2*Math.PI)?new i.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${s},${r} ${this.end.x},${this.end.y}"
                    stroke="${l||"black"}" stroke-width="${u||1}" fill="${f||"none"}" ${v} ${y} />`}toJSON(){return Object.assign({},this,{name:"arc"})}},i.arc=(...t)=>new i.Arc(...t)}),W_}var Y_,Zw;function iE(){return Zw||(Zw=1,Y_=function(i){i.Box=class Tg{constructor(e=void 0,s=void 0,r=void 0,l=void 0){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=l}clone(){return new Tg(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new i.Point(this.xmin,this.ymin)}get high(){return new i.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new i.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Tg(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}maximal_val(e,s){return e.merge(s)}val_less_than(e,s){return e.lessThan(s)}set(e,s,r,l){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=l}svg(e={}){let{stroke:s,strokeWidth:r,fill:l,id:u,className:f}=e,p=u&&u.length>0?`id="${u}"`:"",m=f&&f.length>0?`class="${f}"`:"",v=this.xmax-this.xmin,y=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width=${v} height=${y} stroke="${s||"black"}" stroke-width="${r||1}" fill="${l||"none"}" ${p} ${m} />`}},i.box=(...t)=>new i.Box(...t)}),Y_}var X_,Ww;function sE(){return Ww||(Ww=1,X_=function(i){i.Edge=class{constructor(e){this.shape=e,this.next,this.prev,this.face,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}isSegment(){return this.shape instanceof i.Segment}isArc(){return this.shape instanceof i.Arc}middle(){return this.shape.middle()}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.bvStart===void 0&&(this.bvStart=i.ray_shoot(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=i.ray_shoot(e,this.end)),this.bvStart===i.OUTSIDE||this.bvEnd==i.OUTSIDE)this.bv=i.OUTSIDE;else if(this.bvStart===i.INSIDE||this.bvEnd==i.INSIDE)this.bv=i.INSIDE;else{let s=i.ray_shoot(e,this.middle());this.bv=s}return this.bv}setOverlap(e){let s,r=this.shape,l=e.shape;r instanceof i.Segment&&l instanceof i.Segment?r.start.equalTo(l.start)&&r.end.equalTo(l.end)?s=i.OVERLAP_SAME:r.start.equalTo(l.end)&&r.end.equalTo(l.start)&&(s=i.OVERLAP_OPPOSITE):(r instanceof i.Arc&&l instanceof i.Arc||r instanceof i.Segment&&l instanceof i.Arc||r instanceof i.Arc&&l instanceof i.Segment)&&(r.start.equalTo(l.start)&&r.end.equalTo(l.end)&&r.middle().equalTo(l.middle())?s=i.OVERLAP_SAME:r.start.equalTo(l.end)&&r.end.equalTo(l.start)&&r.middle().equalTo(l.middle())&&(s=i.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=s),e.overlap===void 0&&(e.overlap=s)}svg(){if(this.shape instanceof i.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof i.Arc){let e=this.shape,s,r=e.counterClockwise?"1":"0";if(i.Utils.EQ(e.sweep,2*Math.PI)){let l=e.counterClockwise?1:-1,u=new i.Arc(e.pc,e.r,e.startAngle,e.startAngle+l*Math.PI,e.counterClockwise),f=new i.Arc(e.pc,e.r,e.startAngle+l*Math.PI,e.endAngle,e.counterClockwise);return s="0",` A${u.r},${u.r} 0 ${s},${r} ${u.end.x},${u.end.y}
                    A${f.r},${f.r} 0 ${s},${r} ${f.end.x},${f.end.y}`}else return s=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${s},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}}),X_}var Q_,Yw;function rE(){return Yw||(Yw=1,Q_=function(i){let{Point:t,point:e,Segment:s,segment:r,Arc:l,Box:u,Edge:f,Circle:p}=i;i.Face=class yd{constructor(v,...y){if(this.first,this.last,this._box=void 0,this._orientation=void 0,y.length!=0){if(y.length==1){if(y[0]instanceof Array){let w=y[0];if(w.length==0)return;if(w.every(T=>T instanceof t)){let T=yd.points2segments(w);this.shapes2face(v.edges,T)}else if(w.every(T=>T instanceof s||T instanceof l))this.shapes2face(v.edges,w);else if(w.every(T=>T.name==="segment"||T.name==="arc")){let T=[];for(let x of w){let A;x.name==="segment"?A=new s(x):A=new l(x),T.push(A)}this.shapes2face(v.edges,T)}}else if(y[0]instanceof yd){let w=y[0];this.first=w.first,this.last=w.last;for(let T of w)v.edges.add(T)}else if(y[0]instanceof p)this.shapes2face(v.edges,[y[0].toArc(i.CCW)]);else if(y[0]instanceof u){let w=y[0];this.shapes2face(v.edges,[r(e(w.xmin,w.ymin),e(w.xmax,w.ymin)),r(e(w.xmax,w.ymin),e(w.xmax,w.ymax)),r(e(w.xmax,w.ymax),e(w.xmin,w.ymax)),r(e(w.xmin,w.ymax),e(w.xmin,w.ymin))])}}y.length==2&&y[0]instanceof f&&y[1]instanceof f&&(this.first=y[0],this.last=y[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}[Symbol.iterator](){let v;return{next:()=>{let y=v||this.first,w=this.first?v?v===this.first:!1:!0;return v=y?y.next:void 0,{value:y,done:w}}}}get edges(){let v=[];for(let y of this)v.push(y);return v}get size(){let v=0;for(let y of this)v++;return v}get box(){if(this._box===void 0){let v=new i.Box;for(let y of this)v=v.merge(y.box);this._box=v}return this._box}static points2segments(v){let y=[];for(let w=0;w<v.length;w++)y.push(new s(v[w],v[(w+1)%v.length]));return y}shapes2face(v,y){for(let w of y){let T=new f(w);this.append(v,T)}}isEmpty(){return this.first===void 0&&this.last===void 0}append(v,y){this.first===void 0?(y.prev=y,y.next=y,this.first=y,this.last=y,y.arc_length=0):(y.prev=this.last,this.last.next=y,this.last=y,this.last.next=this.first,this.first.prev=this.last,y.arc_length=y.prev.arc_length+y.prev.length),y.face=this,v.add(y)}insert(v,y,w){if(this.first===void 0)y.prev=y,y.next=y,this.first=y,this.last=y;else{let T=w.next;w.next=y,T.prev=y,y.prev=w,y.next=T,this.last===w&&(this.first=y)}y.face=this,y.prev===this.last?y.arc_length=0:y.arc_length=y.prev.arc_length+y.prev.length,v.add(y)}remove(v,y){y===this.first&&y===this.last?(this.first=void 0,this.last=void 0):(y.prev.next=y.next,y.next.prev=y.prev,y===this.first&&(this.first=y.next),y===this.last&&(this.last=y.prev)),v.delete(y)}reverse(){let v=[],y=this.last;do y.shape=y.shape.reverse(),v.push(y),y=y.prev;while(y!==this.last);this.first=void 0,this.last=void 0;for(let w of v)this.first===void 0?(w.prev=w,w.next=w,this.first=w,this.last=w,w.arc_length=0):(w.prev=this.last,this.last.next=w,this.last=w,this.last.next=this.first,this.first.prev=this.last,w.arc_length=w.prev.arc_length+w.prev.length);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let v of this)v===this.first?v.arc_length=0:v.arc_length=v.prev.arc_length+v.prev.length,v.face=this}area(){return Math.abs(this.signedArea())}signedArea(){let v=0,y=this.box.ymin;for(let w of this)v+=w.shape.definiteIntegral(y);return v}orientation(){if(this._orientation===void 0){let v=this.signedArea();i.Utils.EQ_0(v)?this._orientation=i.ORIENTATION.NOT_ORIENTABLE:i.Utils.LT(v,0)?this._orientation=i.ORIENTATION.CCW:this._orientation=i.ORIENTATION.CW}return this._orientation}isSimple(v){return yd.getSelfIntersections(this,v,!0).length==0}static getSelfIntersections(v,y,w=!1){let T=[];for(let x of v){let A=y.search(x.box);for(let E of A){if(x===E||x.shape instanceof i.Segment&&E.shape instanceof i.Segment&&(x.next===E||x.prev===E))continue;let O=x.shape.intersect(E.shape);for(let U of O)if(!(U.equalTo(x.start)&&U.equalTo(E.end)&&E===x.prev)&&!(U.equalTo(x.end)&&U.equalTo(E.start)&&E===x.next)&&(T.push(U),w))break;if(T.length>0&&w)break}if(T.length>0&&w)break}return T}toJSON(){return this.edges.map(v=>v.toJSON())}svg(){let v=`
M${this.first.start.x},${this.first.start.y}`;for(let y of this)v+=y.svg();return v+=" z",v}}}),Q_}var F_,Xw;function oE(){return Xw||(Xw=1,F_=function(i){let{Point:t,Segment:e,Line:s,Circle:r,Arc:l,Box:u,Vector:f}=i;i.Ray=class D1{constructor(...m){if(this.pt=new t,m.length!=0){if(m.length==1&&m[0]instanceof t){this.pt=m[0].clone();return}if(m.length==2&&typeof m[0]=="number"&&typeof m[1]=="number"){this.pt=new t(m[0],m[1]);return}throw i.Errors.ILLEGAL_PARAMETERS}}clone(){return new D1(this.pt)}get box(){return new u(this.pt.x,this.pt.y,Number.POSITIVE_INFINITY,this.pt.y)}get start(){return this.pt}get norm(){return new f(0,1)}intersect(m){if(m instanceof e)return this.intersectRay2Segment(this,m);if(m instanceof l)return this.intersectRay2Arc(this,m)}intersectRay2Segment(m,v){let y=[];if(m.box.not_intersect(v.box))return y;let w=new s(m.start,m.norm),T=w.intersect(v);for(let x of T)i.Utils.GE(x.x,m.start.x)&&y.push(x);return T.length==2&&y.length==1&&m.start.on(w)&&y.push(m.start),y}intersectRay2Arc(m,v){let y=[];if(m.box.not_intersect(v.box))return y;let T=new s(m.start,m.norm).intersect(v);for(let x of T)i.Utils.GE(x.x,m.start.x)&&y.push(x);return y}},i.ray=(...p)=>new i.Ray(...p)}),F_}var K_,Qw;function aE(){return Qw||(Qw=1,K_=function(i){let{Polygon:t,Point:e,Segment:s,Arc:r,Line:l,Ray:u}=i;i.ray_shoot=function(f,p){let m;if(f.box.not_intersect(p.box))return i.OUTSIDE;let v=new u(p),y=new l(v.pt,v.norm),w=f.edges.search(v.box);if(w.length==0)return i.OUTSIDE;let T=[];for(let A of w)for(let E of v.intersect(A.shape)){if(E.equalTo(p))return i.BOUNDARY;T.push({pt:E,edge:A})}T.sort((A,E)=>i.Utils.LT(A.pt.x,E.pt.x)?-1:i.Utils.GT(A.pt.x,E.pt.x)?1:0);let x=0;for(let A=0;A<T.length;A++){let E=T[A];if(E.pt.equalTo(E.edge.shape.start)){if(A>0&&E.pt.equalTo(T[A-1].pt)&&E.edge.prev===T[A-1].edge)continue;let O=E.edge.prev;for(;i.Utils.EQ_0(O.length);)O=O.prev;let U=O.shape.tangentInEnd(),D=E.pt.translate(U),Q=E.edge.shape.tangentInStart(),I=E.pt.translate(Q),H=D.leftTo(y),G=I.leftTo(y);(H&&!G||!H&&G)&&x++}else if(E.pt.equalTo(E.edge.shape.end)){if(A>0&&E.pt.equalTo(T[A-1].pt)&&E.edge.next===T[A-1].edge)continue;let O=E.edge.next;for(;i.Utils.EQ_0(O.length);)O=O.next;let U=O.shape.tangentInStart(),D=E.pt.translate(U),Q=E.edge.shape.tangentInEnd(),I=E.pt.translate(Q),H=D.leftTo(y),G=I.leftTo(y);(H&&!G||!H&&G)&&x++}else if(E.edge.shape instanceof s)x++;else{let O=E.edge.shape.box;i.Utils.EQ(E.pt.y,O.ymin)||i.Utils.EQ(E.pt.y,O.ymax)||x++}}return m=x%2==1?i.INSIDE:i.OUTSIDE,m}}),K_}var J_,Fw;function lE(){return Fw||(Fw=1,J_=function(i){let{Edge:t,Face:e,PlanarSet:s,Box:r}=i,{ray_shoot:l}=i;i.Polygon=class eo{constructor(){this.faces=new s,this.edges=new s}get box(){return[...this.faces].reduce((f,p)=>f.merge(p.box),new r)}get vertices(){return[...this.edges].map(f=>f.start)}isEmpty(){return this.edges.size===0}addFace(...f){let p=new e(this,...f);return this.faces.add(p),p}deleteFace(f){for(let m of f)this.edges.delete(m);return this.faces.delete(f)}removeChain(f,p,m){if(m.next===p){this.deleteFace(f);return}for(let v=p;v!==m.next;v=v.next)if(f.remove(this.edges,v),f.isEmpty()){this.deleteFace(f);break}}addVertex(f,p){let m=p.shape.split(f);if(m.length<2)return;let v=new i.Edge(m[0]),y=p.prev;return p.face.insert(this.edges,v,y),this.edges.delete(p),p.shape=m[1],this.edges.add(p),v}reverse(){for(let f of this.faces)f.reverse();return this}clone(){let f=new eo;for(let p of this.faces){let m=[];for(let v of p)m.push(v.shape.clone());f.addFace(m)}return f}area(){let f=[...this.faces].reduce((p,m)=>p+m.signedArea(),0);return Math.abs(f)}contains(f){let p=l(this,f);return p==i.INSIDE||p==i.BOUNDARY}distanceTo(f){let{Distance:p}=i;if(f instanceof i.Point){let[m,v]=p.point2polygon(f,this);return v=v.reverse(),[m,v]}if(f instanceof i.Circle||f instanceof i.Line||f instanceof i.Segment||f instanceof i.Arc){let[m,v]=p.shape2polygon(f,this);return v=v.reverse(),[m,v]}if(f instanceof i.Polygon){let m=[Number.POSITIVE_INFINITY,new i.Segment],v,y;for(let w of this.edges){let T=m[0];[v,y]=p.shape2planarSet(w.shape,f.edges,T),i.Utils.LT(v,T)&&(m=[v,y])}return m}}intersect(f){if(f instanceof i.Point)return this.contains(f)?[f]:[];if(f instanceof i.Line)return eo.intersectLine2Polygon(f,this);if(f instanceof i.Circle||f instanceof i.Segment||f instanceof i.Arc)return eo.intersectShape2Polygon(f,this);if(f instanceof i.Polygon)return eo.intersectPolygon2Polygon(f,this)}isValid(){let f=!0;for(let p of this.faces)if(!p.isSimple(this.edges)){f=!1;break}return f}translate(f){let p=new eo;for(let m of this.faces){let v=[];for(let y of m)v.push(y.shape.translate(f));p.addFace(v)}return p}rotate(f=0,p=new i.Point){let m=new eo;for(let v of this.faces){let y=[];for(let w of v)y.push(w.shape.rotate(f,p));m.addFace(y)}return m}transform(f=new i.Matrix){let p=new eo;for(let m of this.faces){let v=[];for(let y of m)v.push(y.shape.transform(f));p.addFace(v)}return p}static intersectShape2Polygon(f,p){let m=[];if(p.isEmpty()||f.box.not_intersect(p.box))return m;let v=p.edges.search(f.box);for(let y of v)for(let w of f.intersect(y.shape))m.push(w);return m}static intersectLine2Polygon(f,p){let m=[];if(p.isEmpty())return m;for(let v of p.edges)for(let y of f.intersect(v.shape))m.push(y);return m}static intersectPolygon2Polygon(f,p){let m=[];if(f.isEmpty()||p.isEmpty()||f.box.not_intersect(p.box))return m;for(let v of f.edges)for(let y of eo.intersectShape2Polygon(v.shape,p))m.push(y);return m}svg(f={}){let{stroke:p,strokeWidth:m,fill:v,fillRule:y,fillOpacity:w,id:T,className:x}=f,A=T&&T.length>0?`id="${T}"`:"",E=x&&x.length>0?`class="${x}"`:"",O=`
<path stroke="${p||"black"}" stroke-width="${m||1}" fill="${v||"lightcyan"}" fill-rule="${y||"evenodd"}" fill-opacity="${w||1}" ${A} ${E} d="`;for(let U of this.faces)O+=U.svg();return O+=`" >
</path>`,O}toJSON(){return[...this.faces].map(f=>f.toJSON())}}}),J_}var $_,Kw;function cE(){if(Kw)return $_;Kw=1;let i=L1();return $_=function(t){let{Polygon:e,Point:s,Segment:r,Arc:l,Circle:u,Line:f,Ray:p,Vector:m}=t,{vector:v}=t;t.Distance=class Ut{static point2point(w,T){return w.distanceTo(T)}static point2line(w,T){let x=w.projectionOn(T);return[v(w,x).length,new r(w,x)]}static point2circle(w,T){let[x,A]=w.distanceTo(T.center);if(t.Utils.EQ_0(x))return[T.r,new r(w,T.toArc().start)];{let E=Math.abs(x-T.r),O=v(T.pc,w).normalize().multiply(T.r),U=T.pc.translate(O);return[E,new r(w,U)]}}static point2segment(w,T){if(T.start.equalTo(T.end))return Ut.point2point(w,T.start);let x=new t.Vector(T.start,T.end),A=new t.Vector(T.start,w),E=new t.Vector(T.end,w),O=x.dot(A),U=-x.dot(E),D,Q;if(t.Utils.GE(O,0)&&t.Utils.GE(U,0)){let I=T.tangentInStart();return D=Math.abs(I.cross(A)),Q=T.start.translate(I.multiply(I.dot(A))),[D,new r(w,Q)]}else return O<0?w.distanceTo(T.start):w.distanceTo(T.end)}static point2arc(w,T){let x=new t.Circle(T.pc,T.r),A=[],E,O;return[E,O]=Ut.point2circle(w,x),O.end.on(T)&&A.push(Ut.point2circle(w,x)),A.push(Ut.point2point(w,T.start)),A.push(Ut.point2point(w,T.end)),Ut.sort(A),A[0]}static segment2line(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=[];return A.push(Ut.point2line(w.start,T)),A.push(Ut.point2line(w.end,T)),Ut.sort(A),A[0]}static segment2segment(w,T){let x=r.intersectSegment2Segment(w,T);if(x.length>0)return[0,new r(x[0],x[0])];let A=[];return A.push(Ut.point2segment(T.start,w)),A.push(Ut.point2segment(T.end,w)),A.push(Ut.point2segment(w.start,T)),A.push(Ut.point2segment(w.end,T)),Ut.sort(A),A[0]}static segment2circle(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Line(w.ps,w.pe),[E,O]=Ut.point2line(T.center,A);if(t.Utils.GE(E,T.r)&&O.end.on(w))return Ut.point2circle(O.end,T);{let[U,D]=Ut.point2circle(w.start,T),[Q,I]=Ut.point2circle(w.end,T);return t.Utils.LT(U,Q)?[U,D]:[Q,I]}}static segment2arc(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Line(w.ps,w.pe),E=new t.Circle(T.pc,T.r),[O,U]=Ut.point2line(E.center,A);if(t.Utils.GE(O,E.r)&&U.end.on(w)){let[H,G]=Ut.point2circle(U.end,E);if(G.end.on(T))return[H,G]}let D=[];D.push(Ut.point2arc(w.start,T)),D.push(Ut.point2arc(w.end,T));let Q,I;return[Q,I]=Ut.point2segment(T.start,w),D.push([Q,I.reverse()]),[Q,I]=Ut.point2segment(T.end,w),D.push([Q,I.reverse()]),Ut.sort(D),D[0]}static circle2circle(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];if(w.center.equalTo(T.center)){let A=w.toArc(),E=T.toArc();return Ut.point2point(A.start,E.start)}else{let A=new f(w.center,T.center),E=A.intersect(w),O=A.intersect(T),U=[];return U.push(Ut.point2point(E[0],O[0])),U.push(Ut.point2point(E[0],O[1])),U.push(Ut.point2point(E[1],O[0])),U.push(Ut.point2point(E[1],O[1])),Ut.sort(U),U[0]}}static circle2line(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let[A,E]=Ut.point2line(w.center,T),[O,U]=Ut.point2circle(E.end,w);return U=U.reverse(),[O,U]}static arc2line(w,T){let x=T.intersect(w);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(w.center,w.r),[E,O]=Ut.point2line(A.center,T);if(t.Utils.GE(E,A.r)){let[U,D]=Ut.point2circle(O.end,A);if(D.end.on(w))return[U,D]}else{let U=[];return U.push(Ut.point2line(w.start,T)),U.push(Ut.point2line(w.end,T)),Ut.sort(U),U[0]}}static arc2circle(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(w.center,w.r),[E,O]=Ut.circle2circle(A,T);if(O.start.on(w))return[E,O];{let U=[];return U.push(Ut.point2circle(w.start,T)),U.push(Ut.point2circle(w.end,T)),Ut.sort(U),U[0]}}static arc2arc(w,T){let x=w.intersect(T);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(w.center,w.r),E=new t.Circle(T.center,T.r),[O,U]=Ut.circle2circle(A,E);if(U.start.on(w)&&U.end.on(T))return[O,U];{let D=[],Q,I;return[Q,I]=Ut.point2arc(w.start,T),I.end.on(T)&&D.push([Q,I]),[Q,I]=Ut.point2arc(w.end,T),I.end.on(T)&&D.push([Q,I]),[Q,I]=Ut.point2arc(T.start,w),I.end.on(w)&&D.push([Q,I.reverse()]),[Q,I]=Ut.point2arc(T.end,w),I.end.on(w)&&D.push([Q,I.reverse()]),[Q,I]=Ut.point2point(w.start,T.start),D.push([Q,I]),[Q,I]=Ut.point2point(w.start,T.end),D.push([Q,I]),[Q,I]=Ut.point2point(w.end,T.start),D.push([Q,I]),[Q,I]=Ut.point2point(w.end,T.end),D.push([Q,I]),Ut.sort(D),D[0]}}static point2polygon(w,T){let x=[Number.POSITIVE_INFINITY,new r];for(let A of T.edges){let[E,O]=A.shape instanceof r?Ut.point2segment(w,A.shape):Ut.point2arc(w,A.shape);t.Utils.LT(E,x[0])&&(x=[E,O])}return x}static shape2polygon(w,T){let x=[Number.POSITIVE_INFINITY,new r];for(let A of T.edges){let[E,O]=w.distanceTo(A.shape);t.Utils.LT(E,x[0])&&(x=[E,O])}return x}static polygon2polygon(w,T){let x=[Number.POSITIVE_INFINITY,new t.Segment];for(let A of w.edges)for(let E of T.edges){let[O,U]=A.shape.distanceTo(E.shape);t.Utils.LT(O,x[0])&&(x=[O,U])}return x}static box2box_minmax(w,T){let x=Math.max(Math.max(w.xmin-T.xmax,0),Math.max(T.xmin-w.xmax,0)),A=Math.max(Math.max(w.ymin-T.ymax,0),Math.max(T.ymin-w.ymax,0)),E=x*x+A*A,O=w.merge(T),U=O.xmax-O.xmin,D=O.ymax-O.ymin,Q=U*U+D*D;return[E,Q]}static minmax_tree_process_level(w,T,x,A){let E,O;for(let I of T)[E,O]=Ut.box2box_minmax(w.box,I.item.key),I.item.value instanceof t.Edge?A.insert([E,O],I.item.value.shape):A.insert([E,O],I.item.value),t.Utils.LT(O,x)&&(x=O);if(T.length===0)return x;let U=T.map(I=>I.left.isNil()?void 0:I.left).filter(I=>I!==void 0),D=T.map(I=>I.right.isNil()?void 0:I.right).filter(I=>I!==void 0),Q=[...U,...D].filter(I=>{let[H,G]=Ut.box2box_minmax(w.box,I.max);return t.Utils.LE(H,x)});return x=Ut.minmax_tree_process_level(w,Q,x,A),x}static minmax_tree(w,T,x){let A=new i,E=[T.index.root],O=x<Number.POSITIVE_INFINITY?x*x:Number.POSITIVE_INFINITY;return O=Ut.minmax_tree_process_level(w,E,O,A),A}static minmax_tree_calc_distance(w,T,x){let A,E;if(T!=null&&!T.isNil()){if([A,E]=Ut.minmax_tree_calc_distance(w,T.left,x),E)return[A,E];if(t.Utils.LT(A[0],Math.sqrt(T.item.key.low)))return[A,!0];let[O,U]=Ut.distance(w,T.item.value);return t.Utils.LT(O,A[0])&&(A=[O,U]),[A,E]=Ut.minmax_tree_calc_distance(w,T.right,A),[A,E]}return[x,!1]}static shape2planarSet(w,T,x=Number.POSITIVE_INFINITY){let A=[x,new t.Segment],E=!1;if(T instanceof t.PlanarSet){let O=Ut.minmax_tree(w,T,x);[A,E]=Ut.minmax_tree_calc_distance(w,O.root,A)}return A}static sort(w){w.sort((T,x)=>t.Utils.LT(T[0],x[0])?-1:t.Utils.GT(T[0],x[0])?1:0)}static distance(w,T){return w.distanceTo(T)}}},$_}var tg,Jw;function uE(){if(Jw)return tg;Jw=1;let i=ZA(),t=WA(),e=class{constructor(){this.DP_TOL=i.DP_TOL,this.CCW=!0,this.CW=!1,this.ORIENTATION={CCW:-1,CW:1,NOT_ORIENTABLE:0},this.PIx2=2*Math.PI,this.INSIDE=1,this.OUTSIDE=0,this.BOUNDARY=2,this.CONTAINS=3,this.INTERLACE=4,this.OVERLAP_SAME=1,this.OVERLAP_OPPOSITE=2,this.Utils=i,this.Errors=t}},s=new e;return YA()(s),FA()(s),KA()(s),JA()(s),$A()(s),tE()(s),eE()(s),nE()(s),iE()(s),sE()(s),rE()(s),oE()(s),aE()(s),lE()(s),cE()(s),tg=s,tg}var hE=uE();const Fo=_h(hE),O1="15.1.22",$w=(i,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:i}),tx=(i,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:i}),Ag=(i,t)=>({startTime:t,type:"setValue",value:i}),R1=(i,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:i}),I1=(i,t,{startTime:e,target:s,timeConstant:r})=>s+(t-s)*Math.exp((e-i)/r),gc=i=>i.type==="exponentialRampToValue",Cd=i=>i.type==="linearRampToValue",ea=i=>gc(i)||Cd(i),n0=i=>i.type==="setValue",no=i=>i.type==="setValueCurve",Ld=(i,t,e,s)=>{const r=i[t];return r===void 0?s:ea(r)||n0(r)?r.value:no(r)?r.values[r.values.length-1]:I1(e,Ld(i,t-1,r.startTime,s),r)},ex=(i,t,e,s,r)=>e===void 0?[s.insertTime,r]:ea(e)?[e.endTime,e.value]:n0(e)?[e.startTime,e.value]:no(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,Ld(i,t-1,e.startTime,r)],Eg=i=>i.type==="cancelAndHold",Cg=i=>i.type==="cancelScheduledValues",Ko=i=>Eg(i)||Cg(i)?i.cancelTime:gc(i)||Cd(i)?i.endTime:i.startTime,nx=(i,t,e,{endTime:s,value:r})=>e===r?r:0<e&&0<r||e<0&&r<0?e*(r/e)**((i-t)/(s-t)):0,ix=(i,t,e,{endTime:s,value:r})=>e+(i-t)/(s-t)*(r-e),fE=(i,t)=>{const e=Math.floor(t),s=Math.ceil(t);return e===s?i[e]:(1-(t-e))*i[e]+(1-(s-t))*i[s]},dE=(i,{duration:t,startTime:e,values:s})=>{const r=(i-e)/t*(s.length-1);return fE(s,r)},id=i=>i.type==="setTarget";class pE{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=Ko(t);if(Eg(t)||Cg(t)){const s=this._automationEvents.findIndex(l=>Cg(t)&&no(l)?l.startTime+l.duration>=e:Ko(l)>=e),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Eg(t)){const l=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&ea(r)){if(l!==void 0&&id(l))throw new Error("The internal list is malformed.");const u=l===void 0?r.insertTime:no(l)?l.startTime+l.duration:Ko(l),f=l===void 0?this._defaultValue:no(l)?l.values[l.values.length-1]:l.value,p=gc(r)?nx(e,u,f,r):ix(e,u,f,r),m=gc(r)?$w(p,e,this._currenTime):tx(p,e,this._currenTime);this._automationEvents.push(m)}if(l!==void 0&&id(l)&&this._automationEvents.push(Ag(this.getValue(e),e)),l!==void 0&&no(l)&&l.startTime+l.duration>e){const u=e-l.startTime,f=(l.values.length-1)/l.duration,p=Math.max(2,1+Math.ceil(u*f)),m=u/(p-1)*f,v=l.values.slice(0,p);if(m<1)for(let y=1;y<p;y+=1){const w=m*y%1;v[y]=l.values[y-1]*(1-w)+l.values[y]*w}this._automationEvents[this._automationEvents.length-1]=R1(v,l.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>Ko(u)>e),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&no(r)&&Ko(r)+r.duration>e)return!1;const l=gc(t)?$w(t.value,t.endTime,this._currenTime):Cd(t)?tx(t.value,e,this._currenTime):t;if(s===-1)this._automationEvents.push(l);else{if(no(t)&&e+t.duration>Ko(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,l)}}return!0}flush(t){const e=this._automationEvents.findIndex(s=>Ko(s)>t);if(e>1){const s=this._automationEvents.slice(e-1),r=s[0];id(r)&&s.unshift(Ag(Ld(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(u=>Ko(u)>t),s=this._automationEvents[e],r=(e===-1?this._automationEvents.length:e)-1,l=this._automationEvents[r];if(l!==void 0&&id(l)&&(s===void 0||!ea(s)||s.insertTime>t))return I1(t,Ld(this._automationEvents,r-1,l.startTime,this._defaultValue),l);if(l!==void 0&&n0(l)&&(s===void 0||!ea(s)))return l.value;if(l!==void 0&&no(l)&&(s===void 0||!ea(s)||l.startTime+l.duration>t))return t<l.startTime+l.duration?dE(t,l):l.values[l.values.length-1];if(l!==void 0&&ea(l)&&(s===void 0||!ea(s)))return l.value;if(s!==void 0&&gc(s)){const[u,f]=ex(this._automationEvents,r,l,s,this._defaultValue);return nx(t,u,f,s)}if(s!==void 0&&Cd(s)){const[u,f]=ex(this._automationEvents,r,l,s,this._defaultValue);return ix(t,u,f,s)}return this._defaultValue}}const mE=i=>({cancelTime:i,type:"cancelAndHold"}),_E=i=>({cancelTime:i,type:"cancelScheduledValues"}),gE=(i,t)=>({endTime:t,type:"exponentialRampToValue",value:i}),yE=(i,t)=>({endTime:t,type:"linearRampToValue",value:i}),vE=(i,t,e)=>({startTime:t,target:i,timeConstant:e,type:"setTarget"}),bE=()=>new DOMException("","AbortError"),wE=i=>(t,e,[s,r,l],u)=>{i(t[r],[e,s,l],f=>f[0]===e&&f[1]===s,u)},xE=i=>(t,e,s)=>{const r=[];for(let l=0;l<s.numberOfInputs;l+=1)r.push(new Set);i.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},SE=i=>(t,e)=>{i.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},xc=new WeakSet,N1=new WeakMap,i0=new WeakMap,z1=new WeakMap,s0=new WeakMap,Kd=new WeakMap,P1=new WeakMap,Lg=new WeakMap,Mg=new WeakMap,kg=new WeakMap,B1={construct(){return B1}},TE=i=>{try{const t=new Proxy(i,B1);new t}catch{return!1}return!0},sx=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,rx=(i,t)=>{const e=[];let s=i.replace(/^[\s]+/,""),r=s.match(sx);for(;r!==null;){const l=r[1].slice(1,-1),u=r[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,t).toString());e.push(u),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(sx)}return[e.join(";"),s]},ox=i=>{if(i!==void 0&&!Array.isArray(i))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},ax=i=>{if(!TE(i))throw new TypeError("The given value for processorCtor should be a constructor.");if(i.prototype===null||typeof i.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},AE=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>{let T=0;return(x,A,E={credentials:"omit"})=>{const O=v.get(x);if(O!==void 0&&O.has(A))return Promise.resolve();const U=m.get(x);if(U!==void 0){const I=U.get(A);if(I!==void 0)return I}const D=l(x),Q=D.audioWorklet===void 0?r(A).then(([I,H])=>{const[G,j]=rx(I,H),V=`${G};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${j}
})})(window,'_AWGS')`;return e(V)}).then(()=>{const I=w._AWGS.pop();if(I===void 0)throw new SyntaxError;s(D.currentTime,D.sampleRate,()=>I(class{},void 0,(H,G)=>{if(H.trim()==="")throw t();const j=Mg.get(D);if(j!==void 0){if(j.has(H))throw t();ax(G),ox(G.parameterDescriptors),j.set(H,G)}else ax(G),ox(G.parameterDescriptors),Mg.set(D,new Map([[H,G]]))},D.sampleRate,void 0,void 0))}):Promise.all([r(A),Promise.resolve(i(y,y))]).then(([[I,H],G])=>{const j=T+1;T=j;const[V,Z]=rx(I,H),J=`${V};((AudioWorkletProcessor,registerProcessor)=>{${Z}
})(${G?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${G?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${G?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${j}',class extends AudioWorkletProcessor{process(){return !1}})`,tt=new Blob([J],{type:"application/javascript; charset=utf-8"}),B=URL.createObjectURL(tt);return D.audioWorklet.addModule(B,E).then(()=>{if(f(D))return D;const W=u(D);return W.audioWorklet.addModule(B,E).then(()=>W)}).then(W=>{if(p===null)throw new SyntaxError;try{new p(W,`__sac${j}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(B))});return U===void 0?m.set(x,new Map([[A,Q]])):U.set(A,Q),Q.then(()=>{const I=v.get(x);I===void 0?v.set(x,new Set([A])):I.add(A)}).finally(()=>{const I=m.get(x);I!==void 0&&I.delete(A)}),Q}},qs=(i,t)=>{const e=i.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},Jd=(i,t)=>{const e=Array.from(i).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[s]=e;return i.delete(s),s},U1=(i,t,e,s)=>{const r=qs(i,t),l=Jd(r,u=>u[0]===e&&u[1]===s);return r.size===0&&i.delete(t),l},yh=i=>qs(P1,i),Sc=i=>{if(xc.has(i))throw new Error("The AudioNode is already stored.");xc.add(i),yh(i).forEach(t=>t(!0))},H1=i=>"port"in i,vh=i=>{if(!xc.has(i))throw new Error("The AudioNode is not stored.");xc.delete(i),yh(i).forEach(t=>t(!1))},Dg=(i,t)=>{!H1(i)&&t.every(e=>e.size===0)&&vh(i)},EE=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>{const T=new WeakMap;return(x,A,E,O,U)=>{const{activeInputs:D,passiveInputs:Q}=l(A),{outputs:I}=l(x),H=f(x),G=j=>{const V=p(A),Z=p(x);if(j){const Y=U1(Q,x,E,O);i(D,x,Y,!1),!U&&!y(x)&&e(Z,V,E,O),w(A)&&Sc(A)}else{const Y=s(D,x,E,O);t(Q,O,Y,!1),!U&&!y(x)&&r(Z,V,E,O);const $=u(A);if($===0)v(A)&&Dg(A,D);else{const P=T.get(A);P!==void 0&&clearTimeout(P),T.set(A,setTimeout(()=>{v(A)&&Dg(A,D)},$*1e3))}}};return m(I,[A,E,O],j=>j[0]===A&&j[1]===E&&j[2]===O,!0)?(H.add(G),v(x)?i(D,x,[E,O,G],!0):t(Q,O,[x,E,G],!0),!0):!1}},CE=i=>(t,e,[s,r,l],u)=>{const f=t.get(s);f===void 0?t.set(s,new Set([[r,e,l]])):i(f,[r,e,l],p=>p[0]===r&&p[1]===e,u)},LE=i=>(t,e)=>{const s=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const r=()=>{e.removeEventListener("ended",r),e.disconnect(s),s.disconnect()};e.addEventListener("ended",r)},ME=i=>(t,e)=>{i(t).add(e)},kE={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},DE=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=r(f),v={...kE,...p},y=s(m,v),w=l(m)?t():null;super(f,!1,y,w),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(f){this._nativeAnalyserNode.fftSize=f}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(f){const p=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=f,!(f>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=p,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(f){const p=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=f,!(this._nativeAnalyserNode.maxDecibels>f))throw this._nativeAnalyserNode.minDecibels=p,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(f){this._nativeAnalyserNode.smoothingTimeConstant=f}getByteFrequencyData(f){this._nativeAnalyserNode.getByteFrequencyData(f)}getByteTimeDomainData(f){this._nativeAnalyserNode.getByteTimeDomainData(f)}getFloatFrequencyData(f){this._nativeAnalyserNode.getFloatFrequencyData(f)}getFloatTimeDomainData(f){this._nativeAnalyserNode.getFloatTimeDomainData(f)}},ni=(i,t)=>i.context===t,OE=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant};f=i(u,m)}return s.set(u,f),await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},Md=i=>{try{i.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},xr=()=>new DOMException("","IndexSizeError"),r0=i=>{i.getChannelData=(t=>e=>{try{return t.call(i,e)}catch(s){throw s.code===12?xr():s}})(i.getChannelData)},RE={numberOfChannels:1},IE=(i,t,e,s,r,l,u,f)=>{let p=null;return class V1{constructor(v){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:w,sampleRate:T}={...RE,...v};p===null&&(p=new r(1,1,44100));const x=s!==null&&t(l,l)?new s({length:y,numberOfChannels:w,sampleRate:T}):p.createBuffer(w,y,T);if(x.numberOfChannels===0)throw e();return typeof x.copyFromChannel!="function"?(u(x),r0(x)):t(Md,()=>Md(x))||f(x),i.add(x),x}static[Symbol.hasInstance](v){return v!==null&&typeof v=="object"&&Object.getPrototypeOf(v)===V1.prototype||i.has(v)}}},Di=-34028234663852886e22,hi=-Di,ro=i=>xc.has(i),NE={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},zE=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w={...NE,...v},T=r(y,w),x=u(y),A=x?t():null;super(m,!1,T,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=w.buffer!==null,this._nativeAudioBufferSourceNode=T,this._onended=null,this._playbackRate=e(this,x,T.playbackRate,hi,Di)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const v=typeof m=="function"?f(this,m):null;this._nativeAudioBufferSourceNode.onended=v;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===v?m:y}get playbackRate(){return this._playbackRate}start(m=0,v=0,y){if(this._nativeAudioBufferSourceNode.start(m,v,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[m,v]:[m,v,y]),this.context.state!=="closed"){Sc(this);const w=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",w),ro(this)&&vh(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",w)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},PE=(i,t,e,s,r)=>()=>{const l=new WeakMap;let u=null,f=null;const p=async(m,v)=>{let y=e(m);const w=ni(y,v);if(!w){const T={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=t(v,T),u!==null&&y.start(...u),f!==null&&y.stop(f)}return l.set(v,y),w?await i(v,m.playbackRate,y.playbackRate):await s(v,m.playbackRate,y.playbackRate),await r(m,v,y),y};return{set start(m){u=m},set stop(m){f=m},render(m,v){const y=l.get(v);return y!==void 0?Promise.resolve(y):p(m,v)}}},BE=i=>"playbackRate"in i,UE=i=>"frequency"in i&&"gain"in i,HE=i=>"offset"in i,VE=i=>!("frequency"in i)&&"gain"in i,qE=i=>"detune"in i&&"frequency"in i&&!("gain"in i),jE=i=>"pan"in i,fi=i=>qs(N1,i),bh=i=>qs(z1,i),Og=(i,t)=>{const{activeInputs:e}=fi(i);e.forEach(r=>r.forEach(([l])=>{t.includes(i)||Og(l,[...t,i])}));const s=BE(i)?[i.playbackRate]:H1(i)?Array.from(i.parameters.values()):UE(i)?[i.Q,i.detune,i.frequency,i.gain]:HE(i)?[i.offset]:VE(i)?[i.gain]:qE(i)?[i.detune,i.frequency]:jE(i)?[i.pan]:[];for(const r of s){const l=bh(r);l!==void 0&&l.activeInputs.forEach(([u])=>Og(u,t))}ro(i)&&vh(i)},q1=i=>{Og(i.destination,[])},GE=i=>i===void 0||typeof i=="number"||typeof i=="string"&&(i==="balanced"||i==="interactive"||i==="playback"),ZE=(i,t,e,s,r,l,u,f,p)=>class extends i{constructor(v={}){if(p===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new p(v)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?e():x}if(y===null)throw s();if(!GE(v.latencyHint))throw new TypeError(`The provided value '${v.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(v.sampleRate!==void 0&&y.sampleRate!==v.sampleRate)throw e();super(y,2);const{latencyHint:w}=v,{sampleRate:T}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:w==="balanced"?512/T:w==="interactive"||w===void 0?256/T:w==="playback"?1024/T:Math.max(2,Math.min(128,Math.round(w*T/128)))*128/T,this._nativeAudioContext=y,p.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",x)};y.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),q1(this)}))}createMediaElementSource(v){return new r(this,{mediaElement:v})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(v){return new u(this,{mediaStream:v})}createMediaStreamTrackSource(v){return new f(this,{mediaStreamTrack:v})}resume(){return this._state==="suspended"?new Promise((v,y)=>{const w=()=>{this._nativeAudioContext.removeEventListener("statechange",w),this._nativeAudioContext.state==="running"?v():this.resume().then(v,y)};this._nativeAudioContext.addEventListener("statechange",w)}):this._nativeAudioContext.resume().catch(v=>{throw v===void 0||v.code===15?t():v})}suspend(){return this._nativeAudioContext.suspend().catch(v=>{throw v===void 0?t():v})}},WE=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w=u(y),T=r(y,v,w),x=w?t(f):null;super(m,!1,T,x),this._isNodeOfNativeOfflineAudioContext=w,this._nativeAudioDestinationNode=T}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},YE=i=>{const t=new WeakMap,e=async(s,r)=>{const l=r.destination;return t.set(r,l),await i(s,r,l),l};return{render(s,r){const l=t.get(r);return l!==void 0?Promise.resolve(l):e(s,r)}}},XE=(i,t,e,s,r,l,u,f)=>(p,m)=>{const v=m.listener,y=()=>{const I=new Float32Array(1),H=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),G=u(m);let j=!1,V=[0,0,-1,0,1,0],Z=[0,0,0];const Y=()=>{if(j)return;j=!0;const tt=s(m,256,9,0);tt.onaudioprocess=({inputBuffer:B})=>{const W=[l(B,I,0),l(B,I,1),l(B,I,2),l(B,I,3),l(B,I,4),l(B,I,5)];W.some((k,q)=>k!==V[q])&&(v.setOrientation(...W),V=W);const et=[l(B,I,6),l(B,I,7),l(B,I,8)];et.some((k,q)=>k!==Z[q])&&(v.setPosition(...et),Z=et)},H.connect(tt)},$=tt=>B=>{B!==V[tt]&&(V[tt]=B,v.setOrientation(...V))},P=tt=>B=>{B!==Z[tt]&&(Z[tt]=B,v.setPosition(...Z))},J=(tt,B,W)=>{const et=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:B});et.connect(H,0,tt),et.start(),Object.defineProperty(et.offset,"defaultValue",{get(){return B}});const k=i({context:p},G,et.offset,hi,Di);return f(k,"value",q=>()=>q.call(k),q=>R=>{try{q.call(k,R)}catch(X){if(X.code!==9)throw X}Y(),G&&W(R)}),k.cancelAndHoldAtTime=(q=>G?()=>{throw r()}:(...R)=>{const X=q.apply(k,R);return Y(),X})(k.cancelAndHoldAtTime),k.cancelScheduledValues=(q=>G?()=>{throw r()}:(...R)=>{const X=q.apply(k,R);return Y(),X})(k.cancelScheduledValues),k.exponentialRampToValueAtTime=(q=>G?()=>{throw r()}:(...R)=>{const X=q.apply(k,R);return Y(),X})(k.exponentialRampToValueAtTime),k.linearRampToValueAtTime=(q=>G?()=>{throw r()}:(...R)=>{const X=q.apply(k,R);return Y(),X})(k.linearRampToValueAtTime),k.setTargetAtTime=(q=>G?()=>{throw r()}:(...R)=>{const X=q.apply(k,R);return Y(),X})(k.setTargetAtTime),k.setValueAtTime=(q=>G?()=>{throw r()}:(...R)=>{const X=q.apply(k,R);return Y(),X})(k.setValueAtTime),k.setValueCurveAtTime=(q=>G?()=>{throw r()}:(...R)=>{const X=q.apply(k,R);return Y(),X})(k.setValueCurveAtTime),k};return{forwardX:J(0,0,$(0)),forwardY:J(1,0,$(1)),forwardZ:J(2,-1,$(2)),positionX:J(6,0,P(0)),positionY:J(7,0,P(1)),positionZ:J(8,0,P(2)),upX:J(3,0,$(3)),upY:J(4,1,$(4)),upZ:J(5,0,$(5))}},{forwardX:w,forwardY:T,forwardZ:x,positionX:A,positionY:E,positionZ:O,upX:U,upY:D,upZ:Q}=v.forwardX===void 0?y():v;return{get forwardX(){return w},get forwardY(){return T},get forwardZ(){return x},get positionX(){return A},get positionY(){return E},get positionZ(){return O},get upX(){return U},get upY(){return D},get upZ(){return Q}}},kd=i=>"context"in i,wh=i=>kd(i[0]),pl=(i,t,e,s)=>{for(const r of i)if(e(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return i.add(t),!0},lx=(i,t,[e,s],r)=>{pl(i,[t,e,s],l=>l[0]===t&&l[1]===e,r)},cx=(i,[t,e,s],r)=>{const l=i.get(t);l===void 0?i.set(t,new Set([[e,s]])):pl(l,[e,s],u=>u[0]===e,r)},Mc=i=>"inputs"in i,Dd=(i,t,e,s)=>{if(Mc(t)){const r=t.inputs[s];return i.connect(r,e,0),[r,e,0]}return i.connect(t,e,s),[t,e,s]},j1=(i,t,e)=>{for(const s of i)if(s[0]===t&&s[1]===e)return i.delete(s),s;return null},QE=(i,t,e)=>Jd(i,s=>s[0]===t&&s[1]===e),G1=(i,t)=>{if(!yh(i).delete(t))throw new Error("Missing the expected event listener.")},Z1=(i,t,e)=>{const s=qs(i,t),r=Jd(s,l=>l[0]===e);return s.size===0&&i.delete(t),r},Od=(i,t,e,s)=>{Mc(t)?i.disconnect(t.inputs[s],e,0):i.disconnect(t,e,s)},Qe=i=>qs(i0,i),nh=i=>qs(s0,i),ul=i=>Lg.has(i),vd=i=>!xc.has(i),ux=(i,t)=>new Promise(e=>{if(t!==null)e(!0);else{const s=i.createScriptProcessor(256,1,1),r=i.createGain(),l=i.createBuffer(1,2,44100),u=l.getChannelData(0);u[0]=1,u[1]=1;const f=i.createBufferSource();f.buffer=l,f.loop=!0,f.connect(s).connect(i.destination),f.connect(r),f.disconnect(r),s.onaudioprocess=p=>{const m=p.inputBuffer.getChannelData(0);Array.prototype.some.call(m,v=>v===1)?e(!0):e(!1),f.stop(),s.onaudioprocess=null,f.disconnect(s),s.disconnect(i.destination)},f.start()}}),eg=(i,t)=>{const e=new Map;for(const s of i)for(const r of s){const l=e.get(r);e.set(r,l===void 0?1:l+1)}e.forEach((s,r)=>t(r,s))},Rd=i=>"context"in i,FE=i=>{const t=new Map;i.connect=(e=>(s,r=0,l=0)=>{const u=Rd(s)?e(s,r,l):e(s,r),f=t.get(s);return f===void 0?t.set(s,[{input:l,output:r}]):f.every(p=>p.input!==l||p.output!==r)&&f.push({input:l,output:r}),u})(i.connect.bind(i)),i.disconnect=(e=>(s,r,l)=>{if(e.apply(i),s===void 0)t.clear();else if(typeof s=="number")for(const[u,f]of t){const p=f.filter(m=>m.output!==s);p.length===0?t.delete(u):t.set(u,p)}else if(t.has(s))if(r===void 0)t.delete(s);else{const u=t.get(s);if(u!==void 0){const f=u.filter(p=>p.output!==r&&(p.input!==l||l===void 0));f.length===0?t.delete(s):t.set(s,f)}}for(const[u,f]of t)f.forEach(p=>{Rd(u)?i.connect(u,p.output,p.input):i.connect(u,p.output)})})(i.disconnect)},KE=(i,t,e,s)=>{const{activeInputs:r,passiveInputs:l}=bh(t),{outputs:u}=fi(i),f=yh(i),p=m=>{const v=Qe(i),y=nh(t);if(m){const w=Z1(l,i,e);lx(r,i,w,!1),!s&&!ul(i)&&v.connect(y,e)}else{const w=QE(r,i,e);cx(l,w,!1),!s&&!ul(i)&&v.disconnect(y,e)}};return pl(u,[t,e],m=>m[0]===t&&m[1]===e,!0)?(f.add(p),ro(i)?lx(r,i,[e,p],!0):cx(l,[i,e,p],!0),!0):!1},JE=(i,t,e,s)=>{const{activeInputs:r,passiveInputs:l}=fi(t),u=j1(r[s],i,e);return u===null?[U1(l,i,e,s)[2],!1]:[u[2],!0]},$E=(i,t,e)=>{const{activeInputs:s,passiveInputs:r}=bh(t),l=j1(s,i,e);return l===null?[Z1(r,i,e)[1],!1]:[l[2],!0]},o0=(i,t,e,s,r)=>{const[l,u]=JE(i,e,s,r);if(l!==null&&(G1(i,l),u&&!t&&!ul(i)&&Od(Qe(i),Qe(e),s,r)),ro(e)){const{activeInputs:f}=fi(e);Dg(e,f)}},a0=(i,t,e,s)=>{const[r,l]=$E(i,e,s);r!==null&&(G1(i,r),l&&!t&&!ul(i)&&Qe(i).disconnect(nh(e),s))},tC=(i,t)=>{const e=fi(i),s=[];for(const r of e.outputs)wh(r)?o0(i,t,...r):a0(i,t,...r),s.push(r[0]);return e.outputs.clear(),s},eC=(i,t,e)=>{const s=fi(i),r=[];for(const l of s.outputs)l[1]===e&&(wh(l)?o0(i,t,...l):a0(i,t,...l),r.push(l[0]),s.outputs.delete(l));return r},nC=(i,t,e,s,r)=>{const l=fi(i);return Array.from(l.outputs).filter(u=>u[0]===e&&(s===void 0||u[1]===s)&&(r===void 0||u[2]===r)).map(u=>(wh(u)?o0(i,t,...u):a0(i,t,...u),l.outputs.delete(u),u[0]))},iC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T,x,A)=>class extends m{constructor(O,U,D,Q){super(D),this._context=O,this._nativeAudioNode=D;const I=v(O);y(I)&&e(ux,()=>ux(I,A))!==!0&&FE(D),i0.set(this,D),P1.set(this,new Set),O.state!=="closed"&&U&&Sc(this),i(this,Q,D)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(O){this._nativeAudioNode.channelCount=O}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(O){this._nativeAudioNode.channelCountMode=O}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(O){this._nativeAudioNode.channelInterpretation=O}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(O,U=0,D=0){if(U<0||U>=this._nativeAudioNode.numberOfOutputs)throw r();const Q=v(this._context),I=x(Q);if(w(O)||T(O))throw l();if(kd(O)){const j=Qe(O);try{const Z=Dd(this._nativeAudioNode,j,U,D),Y=vd(this);(I||Y)&&this._nativeAudioNode.disconnect(...Z),this.context.state!=="closed"&&!Y&&vd(O)&&Sc(O)}catch(Z){throw Z.code===12?l():Z}if(t(this,O,U,D,I)){const Z=p([this],O);eg(Z,s(I))}return O}const H=nh(O);if(H.name==="playbackRate"&&H.maxValue===1024)throw u();try{this._nativeAudioNode.connect(H,U),(I||vd(this))&&this._nativeAudioNode.disconnect(H,U)}catch(j){throw j.code===12?l():j}if(KE(this,O,U,I)){const j=p([this],O);eg(j,s(I))}}disconnect(O,U,D){let Q;const I=v(this._context),H=x(I);if(O===void 0)Q=tC(this,H);else if(typeof O=="number"){if(O<0||O>=this.numberOfOutputs)throw r();Q=eC(this,H,O)}else{if(U!==void 0&&(U<0||U>=this.numberOfOutputs)||kd(O)&&D!==void 0&&(D<0||D>=O.numberOfInputs))throw r();if(Q=nC(this,H,O,U,D),Q.length===0)throw l()}for(const G of Q){const j=p([this],G);eg(j,f)}}},sC=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>(T,x,A,E=null,O=null)=>{const U=A.value,D=new pE(U),Q=x?s(D):null,I={get defaultValue(){return U},get maxValue(){return E===null?A.maxValue:E},get minValue(){return O===null?A.minValue:O},get value(){return A.value},set value(H){A.value=H,I.setValueAtTime(H,T.context.currentTime)},cancelAndHoldAtTime(H){if(typeof A.cancelAndHoldAtTime=="function")Q===null&&D.flush(T.context.currentTime),D.add(r(H)),A.cancelAndHoldAtTime(H);else{const G=Array.from(D).pop();Q===null&&D.flush(T.context.currentTime),D.add(r(H));const j=Array.from(D).pop();A.cancelScheduledValues(H),G!==j&&j!==void 0&&(j.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(j.value,j.endTime):j.type==="linearRampToValue"?A.linearRampToValueAtTime(j.value,j.endTime):j.type==="setValue"?A.setValueAtTime(j.value,j.startTime):j.type==="setValueCurve"&&A.setValueCurveAtTime(j.values,j.startTime,j.duration))}return I},cancelScheduledValues(H){return Q===null&&D.flush(T.context.currentTime),D.add(l(H)),A.cancelScheduledValues(H),I},exponentialRampToValueAtTime(H,G){if(H===0)throw new RangeError;if(!Number.isFinite(G)||G<0)throw new RangeError;const j=T.context.currentTime;return Q===null&&D.flush(j),Array.from(D).length===0&&(D.add(m(U,j)),A.setValueAtTime(U,j)),D.add(u(H,G)),A.exponentialRampToValueAtTime(H,G),I},linearRampToValueAtTime(H,G){const j=T.context.currentTime;return Q===null&&D.flush(j),Array.from(D).length===0&&(D.add(m(U,j)),A.setValueAtTime(U,j)),D.add(f(H,G)),A.linearRampToValueAtTime(H,G),I},setTargetAtTime(H,G,j){return Q===null&&D.flush(T.context.currentTime),D.add(p(H,G,j)),A.setTargetAtTime(H,G,j),I},setValueAtTime(H,G){return Q===null&&D.flush(T.context.currentTime),D.add(m(H,G)),A.setValueAtTime(H,G),I},setValueCurveAtTime(H,G,j){const V=H instanceof Float32Array?H:new Float32Array(H);if(y!==null&&y.name==="webkitAudioContext"){const Z=G+j,Y=T.context.sampleRate,$=Math.ceil(G*Y),P=Math.floor(Z*Y),J=P-$,tt=new Float32Array(J);for(let W=0;W<J;W+=1){const et=(V.length-1)/j*(($+W)/Y-G),k=Math.floor(et),q=Math.ceil(et);tt[W]=k===q?V[k]:(1-(et-k))*V[k]+(1-(q-et))*V[q]}Q===null&&D.flush(T.context.currentTime),D.add(v(tt,G,j)),A.setValueCurveAtTime(tt,G,j);const B=P/Y;B<Z&&w(I,tt[tt.length-1],B),w(I,V[V.length-1],Z)}else Q===null&&D.flush(T.context.currentTime),D.add(v(V,G,j)),A.setValueCurveAtTime(V,G,j);return I}};return e.set(I,A),t.set(I,T),i(I,Q),I},rC=i=>({replay(t){for(const e of i)if(e.type==="exponentialRampToValue"){const{endTime:s,value:r}=e;t.exponentialRampToValueAtTime(r,s)}else if(e.type==="linearRampToValue"){const{endTime:s,value:r}=e;t.linearRampToValueAtTime(r,s)}else if(e.type==="setTarget"){const{startTime:s,target:r,timeConstant:l}=e;t.setTargetAtTime(r,s,l)}else if(e.type==="setValue"){const{startTime:s,value:r}=e;t.setValueAtTime(r,s)}else if(e.type==="setValueCurve"){const{duration:s,startTime:r,values:l}=e;t.setValueCurveAtTime(l,r,s)}else throw new Error("Can't apply an unknown automation.")}});class W1{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,r)=>t.call(e,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const oC={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},aC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T)=>class extends t{constructor(A,E,O){var U;const D=f(A),Q=p(D),I=v({...oC,...O});w(I);const H=Mg.get(D),G=H?.get(E),j=Q||D.state!=="closed"?D:(U=u(D))!==null&&U!==void 0?U:D,V=r(j,Q?null:A.baseLatency,m,E,G,I),Z=Q?s(E,I,G):null;super(A,!0,V,Z);const Y=[];V.parameters.forEach((P,J)=>{const tt=e(this,Q,P);Y.push([J,tt])}),this._nativeAudioWorkletNode=V,this._onprocessorerror=null,this._parameters=new W1(Y),Q&&i(D,this);const{activeInputs:$}=l(this);y(V,$)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const E=typeof A=="function"?T(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=E;const O=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=O!==null&&O===E?A:O}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Id(i,t,e,s,r){if(typeof i.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),i.copyFromChannel(t[e],s,r);else{const l=i.getChannelData(s);if(t[e].byteLength===0)t[e]=l.slice(r,r+128);else{const u=new Float32Array(l.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const Y1=(i,t,e,s,r)=>{typeof i.copyToChannel=="function"?t[e].byteLength!==0&&i.copyToChannel(t[e],s,r):t[e].byteLength!==0&&i.getChannelData(s).set(t[e],r)},Nd=(i,t)=>{const e=[];for(let s=0;s<i;s+=1){const r=[],l=typeof t=="number"?t:t[s];for(let u=0;u<l;u+=1)r.push(new Float32Array(128));e.push(r)}return e},lC=(i,t)=>{const e=qs(kg,i),s=Qe(t);return qs(e,s)},cC=async(i,t,e,s,r,l,u)=>{const f=t===null?Math.ceil(i.context.length/128)*128:t.length,p=s.channelCount*s.numberOfInputs,m=r.reduce((E,O)=>E+O,0),v=m===0?null:e.createBuffer(m,f,e.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const y=fi(i),w=await lC(e,i),T=Nd(s.numberOfInputs,s.channelCount),x=Nd(s.numberOfOutputs,r),A=Array.from(i.parameters.keys()).reduce((E,O)=>({...E,[O]:new Float32Array(128)}),{});for(let E=0;E<f;E+=128){if(s.numberOfInputs>0&&t!==null)for(let O=0;O<s.numberOfInputs;O+=1)for(let U=0;U<s.channelCount;U+=1)Id(t,T[O],U,U,E);l.parameterDescriptors!==void 0&&t!==null&&l.parameterDescriptors.forEach(({name:O},U)=>{Id(t,A,O,p+U,E)});for(let O=0;O<s.numberOfInputs;O+=1)for(let U=0;U<r[O];U+=1)x[O][U].byteLength===0&&(x[O][U]=new Float32Array(128));try{const O=T.map((D,Q)=>y.activeInputs[Q].size===0?[]:D),U=u(E/e.sampleRate,e.sampleRate,()=>w.process(O,x,A));if(v!==null)for(let D=0,Q=0;D<s.numberOfOutputs;D+=1){for(let I=0;I<r[D];I+=1)Y1(v,x[D],I,Q+I,E);Q+=r[D]}if(!U)break}catch(O){i.dispatchEvent(new ErrorEvent("processorerror",{colno:O.colno,filename:O.filename,lineno:O.lineno,message:O.message}));break}}return v},uC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T,x,A)=>(E,O,U)=>{const D=new WeakMap;let Q=null;const I=async(H,G)=>{let j=v(H),V=null;const Z=ni(j,G),Y=Array.isArray(O.outputChannelCount)?O.outputChannelCount:Array.from(O.outputChannelCount);if(y===null){const $=Y.reduce((B,W)=>B+W,0),P=r(G,{channelCount:Math.max(1,$),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,$)}),J=[];for(let B=0;B<H.numberOfOutputs;B+=1)J.push(s(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Y[B]}));const tt=u(G,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1});tt.connect=t.bind(null,J),tt.disconnect=p.bind(null,J),V=[P,J,tt]}else Z||(j=new y(G,E));if(D.set(G,V===null?j:V[2]),V!==null){if(Q===null){if(U===void 0)throw new Error("Missing the processor constructor.");if(w===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=H.channelCount*H.numberOfInputs,et=U.parameterDescriptors===void 0?0:U.parameterDescriptors.length,k=W+et;Q=cC(H,k===0?null:await(async()=>{const R=new w(k,Math.ceil(H.context.length/128)*128,G.sampleRate),X=[],ot=[];for(let _t=0;_t<O.numberOfInputs;_t+=1)X.push(u(R,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1})),ot.push(r(R,{channelCount:O.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:O.channelCount}));const dt=await Promise.all(Array.from(H.parameters.values()).map(async _t=>{const Ct=l(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_t.value});return await T(R,_t,Ct.offset),Ct})),mt=s(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,W+et)});for(let _t=0;_t<O.numberOfInputs;_t+=1){X[_t].connect(ot[_t]);for(let Ct=0;Ct<O.channelCount;Ct+=1)ot[_t].connect(mt,Ct,_t*O.channelCount+Ct)}for(const[_t,Ct]of dt.entries())Ct.connect(mt,0,W+_t),Ct.start(0);return mt.connect(R.destination),await Promise.all(X.map(_t=>x(H,R,_t))),A(R)})(),G,O,Y,U,m)}const $=await Q,P=e(G,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[J,tt,B]=V;$!==null&&(P.buffer=$,P.start(0)),P.connect(J);for(let W=0,et=0;W<H.numberOfOutputs;W+=1){const k=tt[W];for(let q=0;q<Y[W];q+=1)J.connect(k,et+q,q);et+=Y[W]}return B}if(Z)for(const[$,P]of H.parameters.entries())await i(G,P,j.parameters.get($));else for(const[$,P]of H.parameters.entries())await T(G,P,j.parameters.get($));return await x(H,G,j),j};return{render(H,G){f(G,H);const j=D.get(G);return j!==void 0?Promise.resolve(j):I(H,G)}}},hC=(i,t,e,s,r,l,u,f,p,m,v,y,w,T,x,A,E,O,U,D)=>class extends x{constructor(I,H){super(I,H),this._nativeContext=I,this._audioWorklet=i===void 0?void 0:{addModule:(G,j)=>i(this,G,j)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(I,H,G){return new e({length:H,numberOfChannels:I,sampleRate:G})}createBufferSource(){return new s(this)}createChannelMerger(I=6){return new l(this,{numberOfInputs:I})}createChannelSplitter(I=6){return new u(this,{numberOfOutputs:I})}createConstantSource(){return new f(this)}createConvolver(){return new p(this)}createDelay(I=1){return new v(this,{maxDelayTime:I})}createDynamicsCompressor(){return new y(this)}createGain(){return new w(this)}createIIRFilter(I,H){return new T(this,{feedback:H,feedforward:I})}createOscillator(){return new A(this)}createPanner(){return new E(this)}createPeriodicWave(I,H,G={disableNormalization:!1}){return new O(this,{...G,imag:H,real:I})}createStereoPanner(){return new U(this)}createWaveShaper(){return new D(this)}decodeAudioData(I,H,G){return m(this._nativeContext,I).then(j=>(typeof H=="function"&&H(j),j),j=>{throw typeof G=="function"&&G(j),j})}},fC={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},dC=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w={...fC,...v},T=r(y,w),x=u(y),A=x?e():null;super(m,!1,T,A),this._Q=t(this,x,T.Q,hi,Di),this._detune=t(this,x,T.detune,1200*Math.log2(hi),-1200*Math.log2(hi)),this._frequency=t(this,x,T.frequency,m.sampleRate/2,0),this._gain=t(this,x,T.gain,40*Math.log10(hi),Di),this._nativeBiquadFilterNode=T,f(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,v,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,v,y)}catch(w){throw w.code===11?s():w}if(m.length!==v.length||v.length!==y.length)throw s()}},pC=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=t(p,y)}return l.set(p,m),v?(await i(p,f.Q,m.Q),await i(p,f.detune,m.detune),await i(p,f.frequency,m.frequency),await i(p,f.gain,m.gain)):(await s(p,f.Q,m.Q),await s(p,f.detune,m.detune),await s(p,f.frequency,m.frequency),await s(p,f.gain,m.gain)),await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},mC=(i,t)=>(e,s)=>{const r=t.get(e);if(r!==void 0)return r;const l=i.get(e);if(l!==void 0)return l;try{const u=s();return u instanceof Promise?(i.set(e,u),u.catch(()=>!1).then(f=>(i.delete(e),t.set(e,f),f))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}},_C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},gC=(i,t,e,s,r)=>class extends i{constructor(u,f){const p=s(u),m={..._C,...f},v=e(p,m),y=r(p)?t():null;super(u,!1,v,y)}},yC=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs};f=i(u,m)}return s.set(u,f),await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},vC={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},bC=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=s(f),v=l({...vC,...p}),y=e(m,v),w=r(m)?t():null;super(f,!1,y,w)}},wC=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs};f=i(u,m)}return s.set(u,f),await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},xC=i=>(t,e,s)=>i(e,t,s),SC=i=>(t,e,s=0,r=0)=>{const l=t[s];if(l===void 0)throw i();return Rd(e)?l.connect(e,0,r):l.connect(e,0)},TC=i=>(t,e)=>{const s=i(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}},AC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},EC=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...AC,...m},w=s(v,y),T=l(v),x=T?e():null;super(p,!1,w,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=w,this._offset=t(this,T,w.offset,hi,Di),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeConstantSourceNode.onended=m;const v=this._nativeConstantSourceNode.onended;this._onended=v!==null&&v===m?p:v}start(p=0){if(this._nativeConstantSourceNode.start(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=p),this.context.state!=="closed"){Sc(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),ro(this)&&vh(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(p=0){this._nativeConstantSourceNode.stop(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=p)}},CC=(i,t,e,s,r)=>()=>{const l=new WeakMap;let u=null,f=null;const p=async(m,v)=>{let y=e(m);const w=ni(y,v);if(!w){const T={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=t(v,T),u!==null&&y.start(u),f!==null&&y.stop(f)}return l.set(v,y),w?await i(v,m.offset,y.offset):await s(v,m.offset,y.offset),await r(m,v,y),y};return{set start(m){u=m},set stop(m){f=m},render(m,v){const y=l.get(v);return y!==void 0?Promise.resolve(y):p(m,v)}}},LC=i=>t=>(i[0]=t,i[0]),MC={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},kC=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=s(f),v={...MC,...p},y=e(m,v),T=r(m)?t():null;super(f,!1,y,T),this._isBufferNullified=!1,this._nativeConvolverNode=y,v.buffer!==null&&l(this,v.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(f){if(this._nativeConvolverNode.buffer=f,f===null&&this._nativeConvolverNode.buffer!==null){const p=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=p.createBuffer(1,1,p.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(f){this._nativeConvolverNode.normalize=f}},DC=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize};f=i(u,m)}return s.set(u,f),Mc(f)?await e(l,u,f.inputs[0]):await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},OC=(i,t)=>(e,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,r)}catch(l){throw l.name==="SyntaxError"?i():l}},RC=()=>new DOMException("","DataCloneError"),hx=i=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const r=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>r();try{t.postMessage(i,[i])}catch{}finally{r()}})},IC=(i,t,e,s,r,l,u,f,p,m,v)=>(y,w)=>{const T=u(y)?y:l(y);if(r.has(w)){const x=e();return Promise.reject(x)}try{r.add(w)}catch{}return t(p,()=>p(T))?T.decodeAudioData(w).then(x=>(hx(w).catch(()=>{}),t(f,()=>f(x))||v(x),i.add(x),x)):new Promise((x,A)=>{const E=async()=>{try{await hx(w)}catch{}},O=U=>{A(U),E()};try{T.decodeAudioData(w,U=>{typeof U.copyFromChannel!="function"&&(m(U),r0(U)),i.add(U),E().then(()=>x(U))},U=>{O(U===null?s():U)})}catch(U){O(U)}})},NC=(i,t,e,s,r,l,u,f)=>(p,m)=>{const v=t.get(p);if(v===void 0)throw new Error("Missing the expected cycle count.");const y=l(p.context),w=f(y);if(v===m){if(t.delete(p),!w&&u(p)){const T=s(p),{outputs:x}=e(p);for(const A of x)if(wh(A)){const E=s(A[0]);i(T,E,A[1],A[2])}else{const E=r(A[0]);T.connect(E,A[1])}}}else t.set(p,v-m)},zC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},PC=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...zC,...m},w=s(v,y),T=l(v),x=T?e(y.maxDelayTime):null;super(p,!1,w,x),this._delayTime=t(this,T,w.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},BC=(i,t,e,s,r)=>l=>{const u=new WeakMap,f=async(p,m)=>{let v=e(p);const y=ni(v,m);if(!y){const w={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,delayTime:v.delayTime.value,maxDelayTime:l};v=t(m,w)}return u.set(m,v),y?await i(m,p.delayTime,v.delayTime):await s(m,p.delayTime,v.delayTime),await r(p,m,v),v};return{render(p,m){const v=u.get(m);return v!==void 0?Promise.resolve(v):f(p,m)}}},UC=i=>(t,e,s,r)=>i(t[r],l=>l[0]===e&&l[1]===s),HC=i=>(t,e)=>{i(t).delete(e)},VC=i=>"delayTime"in i,qC=(i,t,e)=>function s(r,l){const u=kd(l)?l:e(i,l);if(VC(u))return[];if(r[0]===u)return[r];if(r.includes(u))return[];const{outputs:f}=t(u);return Array.from(f).map(p=>s([...r,u],p[0])).reduce((p,m)=>p.concat(m),[])},sd=(i,t,e)=>{const s=t[e];if(s===void 0)throw i();return s},jC=i=>(t,e=void 0,s=void 0,r=0)=>e===void 0?t.forEach(l=>l.disconnect()):typeof e=="number"?sd(i,t,e).disconnect():Rd(e)?s===void 0?t.forEach(l=>l.disconnect(e)):r===void 0?sd(i,t,s).disconnect(e,0):sd(i,t,s).disconnect(e,0,r):s===void 0?t.forEach(l=>l.disconnect(e)):sd(i,t,s).disconnect(e,0),GC={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},ZC=(i,t,e,s,r,l,u,f)=>class extends i{constructor(m,v){const y=l(m),w={...GC,...v},T=s(y,w),x=u(y),A=x?e():null;super(m,!1,T,A),this._attack=t(this,x,T.attack),this._knee=t(this,x,T.knee),this._nativeDynamicsCompressorNode=T,this._ratio=t(this,x,T.ratio),this._release=t(this,x,T.release),this._threshold=t(this,x,T.threshold),f(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const v=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=v,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const v=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=v,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},WC=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=t(p,y)}return l.set(p,m),v?(await i(p,f.attack,m.attack),await i(p,f.knee,m.knee),await i(p,f.ratio,m.ratio),await i(p,f.release,m.release),await i(p,f.threshold,m.threshold)):(await s(p,f.attack,m.attack),await s(p,f.knee,m.knee),await s(p,f.ratio,m.ratio),await s(p,f.release,m.release),await s(p,f.threshold,m.threshold)),await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},YC=()=>new DOMException("","EncodingError"),XC=i=>t=>new Promise((e,s)=>{if(i===null){s(new SyntaxError);return}const r=i.document.head;if(r===null)s(new SyntaxError);else{const l=i.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),f=URL.createObjectURL(u),p=i.onerror,m=()=>{i.onerror=p,URL.revokeObjectURL(f)};i.onerror=(v,y,w,T,x)=>{if(y===f||y===i.location.href&&w===1&&T===1)return m(),s(x),!1;if(p!==null)return p(v,y,w,T,x)},l.onerror=()=>{m(),s(new SyntaxError)},l.onload=()=>{m(),e()},l.src=f,l.type="module",r.appendChild(l)}}),QC=i=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,r){if(s!==null){let l=this._listeners.get(s);l===void 0&&(l=i(this,s),typeof s=="function"&&this._listeners.set(s,l)),this._nativeEventTarget.addEventListener(e,l,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,r){const l=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,l===void 0?null:l,r)}},FC=i=>(t,e,s)=>{Object.defineProperties(i,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{i!==null&&(delete i.currentFrame,delete i.currentTime)}},KC=i=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw i()},JC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},$C=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=r(f),v={...JC,...p},y=s(m,v),w=l(m),T=w?e():null;super(f,!1,y,T),this._gain=t(this,w,y.gain,hi,Di)}get gain(){return this._gain}},tL=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=t(p,y)}return l.set(p,m),v?await i(p,f.gain,m.gain):await s(p,f.gain,m.gain),await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},eL=(i,t)=>e=>t(i,e),nL=i=>t=>{const e=i(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},iL=i=>t=>{var e;return(e=i.get(t))!==null&&e!==void 0?e:0},sL=i=>t=>{const e=i(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},rL=i=>t=>i.get(t),Hn=()=>new DOMException("","InvalidStateError"),oL=i=>t=>{const e=i.get(t);if(e===void 0)throw Hn();return e},aL=(i,t)=>e=>{let s=i.get(e);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),i.set(e,s),s},lL=i=>t=>{const e=i.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},$d=()=>new DOMException("","InvalidAccessError"),cL=i=>{i.getFrequencyResponse=(t=>(e,s,r)=>{if(e.length!==s.length||s.length!==r.length)throw $d();return t.call(i,e,s,r)})(i.getFrequencyResponse)},uL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},hL=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=s(f),v=r(m),y={...uL,...p},w=t(m,v?null:f.baseLatency,y),T=v?e(y.feedback,y.feedforward):null;super(f,!1,w,T),cL(w),this._nativeIIRFilterNode=w,l(this,1)}getFrequencyResponse(f,p,m){return this._nativeIIRFilterNode.getFrequencyResponse(f,p,m)}},X1=(i,t,e,s,r,l,u,f,p,m,v)=>{const y=m.length;let w=f;for(let T=0;T<y;T+=1){let x=e[0]*m[T];for(let A=1;A<r;A+=1){const E=w-A&p-1;x+=e[A]*l[E],x-=i[A]*u[E]}for(let A=r;A<s;A+=1)x+=e[A]*l[w-A&p-1];for(let A=r;A<t;A+=1)x-=i[A]*u[w-A&p-1];l[w]=m[T],u[w]=x,w=w+1&p-1,v[T]=x}return w},fL=(i,t,e,s)=>{const r=e instanceof Float64Array?e:new Float64Array(e),l=s instanceof Float64Array?s:new Float64Array(s),u=r.length,f=l.length,p=Math.min(u,f);if(r[0]!==1){for(let x=0;x<u;x+=1)l[x]/=r[0];for(let x=1;x<f;x+=1)r[x]/=r[0]}const m=32,v=new Float32Array(m),y=new Float32Array(m),w=t.createBuffer(i.numberOfChannels,i.length,i.sampleRate),T=i.numberOfChannels;for(let x=0;x<T;x+=1){const A=i.getChannelData(x),E=w.getChannelData(x);v.fill(0),y.fill(0),X1(r,u,l,f,p,v,y,0,m,A,E)}return w},dL=(i,t,e,s,r)=>(l,u)=>{const f=new WeakMap;let p=null;const m=async(v,y)=>{let w=null,T=t(v);const x=ni(T,y);if(y.createIIRFilter===void 0?w=i(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(T=y.createIIRFilter(u,l)),f.set(y,w===null?T:w),w!==null){if(p===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const E=new e(v.context.destination.channelCount,v.context.length,y.sampleRate);p=(async()=>{await s(v,E,E.destination);const O=await r(E);return fL(O,y,l,u)})()}const A=await p;return w.buffer=A,w.start(0),w}return await s(v,y,T),T};return{render(v,y){const w=f.get(y);return w!==void 0?Promise.resolve(w):m(v,y)}}},pL=(i,t,e,s,r,l)=>u=>(f,p)=>{const m=i.get(f);if(m===void 0){if(!u&&l(f)){const v=s(f),{outputs:y}=e(f);for(const w of y)if(wh(w)){const T=s(w[0]);t(v,T,w[1],w[2])}else{const T=r(w[0]);v.disconnect(T,w[1])}}i.set(f,p)}else i.set(f,m+p)},mL=(i,t)=>e=>{const s=i.get(e);return t(s)||t(e)},_L=(i,t)=>e=>i.has(e)||t(e),gL=(i,t)=>e=>i.has(e)||t(e),yL=(i,t)=>e=>{const s=i.get(e);return t(s)||t(e)},vL=i=>t=>i!==null&&t instanceof i,bL=i=>t=>i!==null&&typeof i.AudioNode=="function"&&t instanceof i.AudioNode,wL=i=>t=>i!==null&&typeof i.AudioParam=="function"&&t instanceof i.AudioParam,xL=(i,t)=>e=>i(e)||t(e),SL=i=>t=>i!==null&&t instanceof i,TL=i=>i!==null&&i.isSecureContext,AL=(i,t,e,s)=>class extends i{constructor(l,u){const f=e(l),p=t(f,u);if(s(f))throw TypeError();super(l,!0,p,null),this._nativeMediaElementAudioSourceNode=p}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},EL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},CL=(i,t,e,s)=>class extends i{constructor(l,u){const f=e(l);if(s(f))throw new TypeError;const p={...EL,...u},m=t(f,p);super(l,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},LL=(i,t,e,s)=>class extends i{constructor(l,u){const f=e(l),p=t(f,u);if(s(f))throw new TypeError;super(l,!0,p,null),this._nativeMediaStreamAudioSourceNode=p}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},ML=(i,t,e)=>class extends i{constructor(r,l){const u=e(r),f=t(u,l);super(r,!0,f,null)}},kL=(i,t,e,s,r,l)=>class extends e{constructor(f,p){super(f),this._nativeContext=f,Kd.set(this,f),s(f)&&r.set(f,new Set),this._destination=new i(this,p),this._listener=t(this,f),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(f){const p=typeof f=="function"?l(this,f):null;this._nativeContext.onstatechange=p;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===p?f:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ih=i=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=i.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},DL=(i,t)=>(e,s,r)=>{const l=new Set;return e.connect=(u=>(f,p=0,m=0)=>{const v=l.size===0;if(t(f))return u.call(e,f,p,m),i(l,[f,p,m],y=>y[0]===f&&y[1]===p&&y[2]===m,!0),v&&s(),f;u.call(e,f,p),i(l,[f,p],y=>y[0]===f&&y[1]===p,!0),v&&s()})(e.connect),e.disconnect=(u=>(f,p,m)=>{const v=l.size>0;if(f===void 0)u.apply(e),l.clear();else if(typeof f=="number"){u.call(e,f);for(const w of l)w[1]===f&&l.delete(w)}else{t(f)?u.call(e,f,p,m):u.call(e,f,p);for(const w of l)w[0]===f&&(p===void 0||w[1]===p)&&(m===void 0||w[2]===m)&&l.delete(w)}const y=l.size===0;v&&y&&r()})(e.disconnect),e},en=(i,t,e)=>{const s=t[e];s!==void 0&&s!==i[e]&&(i[e]=s)},In=(i,t)=>{en(i,t,"channelCount"),en(i,t,"channelCountMode"),en(i,t,"channelInterpretation")},fx=i=>typeof i.getFloatTimeDomainData=="function",OL=i=>{i.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);i.getByteTimeDomainData(e);const s=Math.max(e.length,i.fftSize);for(let r=0;r<s;r+=1)t[r]=(e[r]-128)*.0078125;return t}},RL=(i,t)=>(e,s)=>{const r=e.createAnalyser();if(In(r,s),!(s.maxDecibels>s.minDecibels))throw t();return en(r,s,"fftSize"),en(r,s,"maxDecibels"),en(r,s,"minDecibels"),en(r,s,"smoothingTimeConstant"),i(fx,()=>fx(r))||OL(r),r},IL=i=>i===null?null:i.hasOwnProperty("AudioBuffer")?i.AudioBuffer:null,hn=(i,t,e)=>{const s=t[e];s!==void 0&&s!==i[e].value&&(i[e].value=s)},NL=i=>{i.start=(t=>{let e=!1;return(s=0,r=0,l)=>{if(e)throw Hn();t.call(i,s,r,l),e=!0}})(i.start)},l0=i=>{i.start=(t=>(e=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(i,e,s,r)})(i.start)},c0=i=>{i.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(i,e)})(i.stop)},zL=(i,t,e,s,r,l,u,f,p,m,v)=>(y,w)=>{const T=y.createBufferSource();return In(T,w),hn(T,w,"playbackRate"),en(T,w,"buffer"),en(T,w,"loop"),en(T,w,"loopEnd"),en(T,w,"loopStart"),t(e,()=>e(y))||NL(T),t(s,()=>s(y))||p(T),t(r,()=>r(y))||m(T,y),t(l,()=>l(y))||l0(T),t(u,()=>u(y))||v(T,y),t(f,()=>f(y))||c0(T),i(y,T),T},PL=i=>i===null?null:i.hasOwnProperty("AudioContext")?i.AudioContext:i.hasOwnProperty("webkitAudioContext")?i.webkitAudioContext:null,BL=(i,t)=>(e,s,r)=>{const l=e.destination;if(l.channelCount!==s)try{l.channelCount=s}catch{}r&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:s});const u=i(e,{channelCount:s,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return t(u,"channelCount",f=>()=>f.call(u),f=>p=>{f.call(u,p);try{l.channelCount=p}catch(m){if(p>l.maxChannelCount)throw m}}),t(u,"channelCountMode",f=>()=>f.call(u),f=>p=>{f.call(u,p),l.channelCountMode=p}),t(u,"channelInterpretation",f=>()=>f.call(u),f=>p=>{f.call(u,p),l.channelInterpretation=p}),Object.defineProperty(u,"maxChannelCount",{get:()=>l.maxChannelCount}),u.connect(l),u},UL=i=>i===null?null:i.hasOwnProperty("AudioWorkletNode")?i.AudioWorkletNode:null,HL=i=>{const{port1:t}=new MessageChannel;try{t.postMessage(i)}finally{t.close()}},VL=(i,t,e,s,r)=>(l,u,f,p,m,v)=>{if(f!==null)try{const y=new f(l,p,v),w=new Map;let T=null;if(Object.defineProperties(y,{channelCount:{get:()=>v.channelCount,set:()=>{throw i()}},channelCountMode:{get:()=>"explicit",set:()=>{throw i()}},onprocessorerror:{get:()=>T,set:x=>{typeof T=="function"&&y.removeEventListener("processorerror",T),T=typeof x=="function"?x:null,typeof T=="function"&&y.addEventListener("processorerror",T)}}}),y.addEventListener=(x=>(...A)=>{if(A[0]==="processorerror"){const E=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(E!==null){const O=w.get(A[1]);O!==void 0?A[1]=O:(A[1]=U=>{U.type==="error"?(Object.defineProperties(U,{type:{value:"processorerror"}}),E(U)):E(new ErrorEvent(A[0],{...U}))},w.set(E,A[1]))}}return x.call(y,"error",A[1],A[2]),x.call(y,...A)})(y.addEventListener),y.removeEventListener=(x=>(...A)=>{if(A[0]==="processorerror"){const E=w.get(A[1]);E!==void 0&&(w.delete(A[1]),A[1]=E)}return x.call(y,"error",A[1],A[2]),x.call(y,A[0],A[1],A[2])})(y.removeEventListener),v.numberOfOutputs!==0){const x=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(x).connect(l.destination),r(y,()=>x.disconnect(),()=>x.connect(l.destination))}return y}catch(y){throw y.code===11?s():y}if(m===void 0)throw s();return HL(v),t(l,u,m,v)},Q1=(i,t)=>i===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(i*t))))),qL=i=>new Promise((t,e)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:l})=>{s.close(),r.close(),t(l)},s.onmessageerror=({data:l})=>{s.close(),r.close(),e(l)},r.postMessage(i)}),jL=async(i,t)=>{const e=await qL(t);return new i(e)},GL=(i,t,e,s)=>{let r=kg.get(i);r===void 0&&(r=new WeakMap,kg.set(i,r));const l=jL(e,s);return r.set(t,l),l},ZL=(i,t,e,s,r,l,u,f,p,m,v,y,w)=>(T,x,A,E)=>{if(E.numberOfInputs===0&&E.numberOfOutputs===0)throw p();const O=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(O.some(Dt=>Dt<1))throw p();if(O.length!==E.numberOfOutputs)throw t();if(E.channelCountMode!=="explicit")throw p();const U=E.channelCount*E.numberOfInputs,D=O.reduce((Dt,Wt)=>Dt+Wt,0),Q=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(U+Q>6||D>6)throw p();const I=new MessageChannel,H=[],G=[];for(let Dt=0;Dt<E.numberOfInputs;Dt+=1)H.push(u(T,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),G.push(r(T,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const j=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:Dt,maxValue:Wt,minValue:Ie,name:be}of A.parameterDescriptors){const oe=l(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:E.parameterData[be]!==void 0?E.parameterData[be]:Dt===void 0?0:Dt});Object.defineProperties(oe.offset,{defaultValue:{get:()=>Dt===void 0?0:Dt},maxValue:{get:()=>Wt===void 0?hi:Wt},minValue:{get:()=>Ie===void 0?Di:Ie}}),j.push(oe)}const V=s(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+Q)}),Z=Q1(x,T.sampleRate),Y=f(T,Z,U+Q,Math.max(1,D)),$=r(T,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),P=[];for(let Dt=0;Dt<E.numberOfOutputs;Dt+=1)P.push(s(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[Dt]}));for(let Dt=0;Dt<E.numberOfInputs;Dt+=1){H[Dt].connect(G[Dt]);for(let Wt=0;Wt<E.channelCount;Wt+=1)G[Dt].connect(V,Wt,Dt*E.channelCount+Wt)}const J=new W1(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:Dt},Wt)=>{const Ie=j[Wt];return Ie.connect(V,0,U+Wt),Ie.start(0),[Dt,Ie.offset]}));V.connect(Y);let tt=E.channelInterpretation,B=null;const W=E.numberOfOutputs===0?[Y]:P,et={get bufferSize(){return Z},get channelCount(){return E.channelCount},set channelCount(Dt){throw e()},get channelCountMode(){return E.channelCountMode},set channelCountMode(Dt){throw e()},get channelInterpretation(){return tt},set channelInterpretation(Dt){for(const Wt of H)Wt.channelInterpretation=Dt;tt=Dt},get context(){return Y.context},get inputs(){return H},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return B},set onprocessorerror(Dt){typeof B=="function"&&et.removeEventListener("processorerror",B),B=typeof Dt=="function"?Dt:null,typeof B=="function"&&et.addEventListener("processorerror",B)},get parameters(){return J},get port(){return I.port2},addEventListener(...Dt){return Y.addEventListener(Dt[0],Dt[1],Dt[2])},connect:i.bind(null,W),disconnect:m.bind(null,W),dispatchEvent(...Dt){return Y.dispatchEvent(Dt[0])},removeEventListener(...Dt){return Y.removeEventListener(Dt[0],Dt[1],Dt[2])}},k=new Map;I.port1.addEventListener=(Dt=>(...Wt)=>{if(Wt[0]==="message"){const Ie=typeof Wt[1]=="function"?Wt[1]:typeof Wt[1]=="object"&&Wt[1]!==null&&typeof Wt[1].handleEvent=="function"?Wt[1].handleEvent:null;if(Ie!==null){const be=k.get(Wt[1]);be!==void 0?Wt[1]=be:(Wt[1]=oe=>{v(T.currentTime,T.sampleRate,()=>Ie(oe))},k.set(Ie,Wt[1]))}}return Dt.call(I.port1,Wt[0],Wt[1],Wt[2])})(I.port1.addEventListener),I.port1.removeEventListener=(Dt=>(...Wt)=>{if(Wt[0]==="message"){const Ie=k.get(Wt[1]);Ie!==void 0&&(k.delete(Wt[1]),Wt[1]=Ie)}return Dt.call(I.port1,Wt[0],Wt[1],Wt[2])})(I.port1.removeEventListener);let q=null;Object.defineProperty(I.port1,"onmessage",{get:()=>q,set:Dt=>{typeof q=="function"&&I.port1.removeEventListener("message",q),q=typeof Dt=="function"?Dt:null,typeof q=="function"&&(I.port1.addEventListener("message",q),I.port1.start())}}),A.prototype.port=I.port1;let R=null;GL(T,et,A,E).then(Dt=>R=Dt);const ot=Nd(E.numberOfInputs,E.channelCount),dt=Nd(E.numberOfOutputs,O),mt=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((Dt,{name:Wt})=>({...Dt,[Wt]:new Float32Array(128)}),{});let _t=!0;const Ct=()=>{E.numberOfOutputs>0&&Y.disconnect($);for(let Dt=0,Wt=0;Dt<E.numberOfOutputs;Dt+=1){const Ie=P[Dt];for(let be=0;be<O[Dt];be+=1)$.disconnect(Ie,Wt+be,be);Wt+=O[Dt]}},Et=new Map;Y.onaudioprocess=({inputBuffer:Dt,outputBuffer:Wt})=>{if(R!==null){const Ie=y(et);for(let be=0;be<Z;be+=128){for(let oe=0;oe<E.numberOfInputs;oe+=1)for(let xe=0;xe<E.channelCount;xe+=1)Id(Dt,ot[oe],xe,xe,be);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:oe},xe)=>{Id(Dt,mt,oe,U+xe,be)});for(let oe=0;oe<E.numberOfInputs;oe+=1)for(let xe=0;xe<O[oe];xe+=1)dt[oe][xe].byteLength===0&&(dt[oe][xe]=new Float32Array(128));try{const oe=ot.map((nn,si)=>{if(Ie[si].size>0)return Et.set(si,Z/128),nn;const dn=Et.get(si);return dn===void 0?[]:(nn.every(ho=>ho.every(ri=>ri===0))&&(dn===1?Et.delete(si):Et.set(si,dn-1)),nn)});_t=v(T.currentTime+be/T.sampleRate,T.sampleRate,()=>R.process(oe,dt,mt));for(let nn=0,si=0;nn<E.numberOfOutputs;nn+=1){for(let _i=0;_i<O[nn];_i+=1)Y1(Wt,dt[nn],_i,si+_i,be);si+=O[nn]}}catch(oe){_t=!1,et.dispatchEvent(new ErrorEvent("processorerror",{colno:oe.colno,filename:oe.filename,lineno:oe.lineno,message:oe.message}))}if(!_t){for(let oe=0;oe<E.numberOfInputs;oe+=1){H[oe].disconnect(G[oe]);for(let xe=0;xe<E.channelCount;xe+=1)G[be].disconnect(V,xe,oe*E.channelCount+xe)}if(A.parameterDescriptors!==void 0){const oe=A.parameterDescriptors.length;for(let xe=0;xe<oe;xe+=1){const nn=j[xe];nn.disconnect(V,0,U+xe),nn.stop()}}V.disconnect(Y),Y.onaudioprocess=null,ne?Ct():Fe();break}}}};let ne=!1;const Me=u(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Re=()=>Y.connect(Me).connect(T.destination),Fe=()=>{Y.disconnect(Me),Me.disconnect()},jn=()=>{if(_t){Fe(),E.numberOfOutputs>0&&Y.connect($);for(let Dt=0,Wt=0;Dt<E.numberOfOutputs;Dt+=1){const Ie=P[Dt];for(let be=0;be<O[Dt];be+=1)$.connect(Ie,Wt+be,be);Wt+=O[Dt]}}ne=!0},ii=()=>{_t&&(Re(),Ct()),ne=!1};return Re(),w(et,jn,ii)},F1=(i,t)=>{const e=i.createBiquadFilter();return In(e,t),hn(e,t,"Q"),hn(e,t,"detune"),hn(e,t,"frequency"),hn(e,t,"gain"),en(e,t,"type"),e},WL=(i,t)=>(e,s)=>{const r=e.createChannelMerger(s.numberOfInputs);return i!==null&&i.name==="webkitAudioContext"&&t(e,r),In(r,s),r},YL=i=>{const t=i.numberOfOutputs;Object.defineProperty(i,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Hn()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Hn()}}),Object.defineProperty(i,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Hn()}})},xh=(i,t)=>{const e=i.createChannelSplitter(t.numberOfOutputs);return In(e,t),YL(e),e},XL=(i,t,e,s,r)=>(l,u)=>{if(l.createConstantSource===void 0)return e(l,u);const f=l.createConstantSource();return In(f,u),hn(f,u,"offset"),t(s,()=>s(l))||l0(f),t(r,()=>r(l))||c0(f),i(l,f),f},kc=(i,t)=>(i.connect=t.connect.bind(t),i.disconnect=t.disconnect.bind(t),i),QL=(i,t,e,s)=>(r,{offset:l,...u})=>{const f=r.createBuffer(1,2,44100),p=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=e(r,{...u,gain:l}),v=f.getChannelData(0);v[0]=1,v[1]=1,p.buffer=f,p.loop=!0;const y={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(x){m.channelCount=x},get channelCountMode(){return m.channelCountMode},set channelCountMode(x){m.channelCountMode=x},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(x){m.channelInterpretation=x},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return p.onended},set onended(x){p.onended=x},addEventListener(...x){return p.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return p.dispatchEvent(x[0])},removeEventListener(...x){return p.removeEventListener(x[0],x[1],x[2])},start(x=0){p.start.call(p,x)},stop(x=0){p.stop.call(p,x)}},w=()=>p.connect(m),T=()=>p.disconnect(m);return i(r,p),s(kc(y,m),w,T)},FL=(i,t)=>(e,s)=>{const r=e.createConvolver();if(In(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),en(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",l=>()=>l.call(r),l=>u=>{if(u>2)throw i();return l.call(r,u)}),s.channelCountMode==="max"))throw i();return t(r,"channelCountMode",l=>()=>l.call(r),l=>u=>{if(u==="max")throw i();return l.call(r,u)}),r},K1=(i,t)=>{const e=i.createDelay(t.maxDelayTime);return In(e,t),hn(e,t,"delayTime"),e},KL=i=>(t,e)=>{const s=t.createDynamicsCompressor();if(In(s,e),e.channelCount>2||e.channelCountMode==="max")throw i();return hn(s,e,"attack"),hn(s,e,"knee"),hn(s,e,"ratio"),hn(s,e,"release"),hn(s,e,"threshold"),s},Ni=(i,t)=>{const e=i.createGain();return In(e,t),hn(e,t,"gain"),e},JL=i=>(t,e,s)=>{if(t.createIIRFilter===void 0)return i(t,e,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return In(r,s),r};function $L(i,t){const e=t[0]*t[0]+t[1]*t[1];return[(i[0]*t[0]+i[1]*t[1])/e,(i[1]*t[0]-i[0]*t[1])/e]}function tM(i,t){return[i[0]*t[0]-i[1]*t[1],i[0]*t[1]+i[1]*t[0]]}function dx(i,t){let e=[0,0];for(let s=i.length-1;s>=0;s-=1)e=tM(e,t),e[0]+=i[s];return e}const eM=(i,t,e,s)=>(r,l,{channelCount:u,channelCountMode:f,channelInterpretation:p,feedback:m,feedforward:v})=>{const y=Q1(l,r.sampleRate),w=m instanceof Float64Array?m:new Float64Array(m),T=v instanceof Float64Array?v:new Float64Array(v),x=w.length,A=T.length,E=Math.min(x,A);if(x===0||x>20)throw s();if(w[0]===0)throw t();if(A===0||A>20)throw s();if(T[0]===0)throw t();if(w[0]!==1){for(let j=0;j<A;j+=1)T[j]/=w[0];for(let j=1;j<x;j+=1)w[j]/=w[0]}const O=e(r,y,u,u);O.channelCount=u,O.channelCountMode=f,O.channelInterpretation=p;const U=32,D=[],Q=[],I=[];for(let j=0;j<u;j+=1){D.push(0);const V=new Float32Array(U),Z=new Float32Array(U);V.fill(0),Z.fill(0),Q.push(V),I.push(Z)}O.onaudioprocess=j=>{const V=j.inputBuffer,Z=j.outputBuffer,Y=V.numberOfChannels;for(let $=0;$<Y;$+=1){const P=V.getChannelData($),J=Z.getChannelData($);D[$]=X1(w,x,T,A,E,Q[$],I[$],D[$],U,P,J)}};const H=r.sampleRate/2;return kc({get bufferSize(){return y},get channelCount(){return O.channelCount},set channelCount(j){O.channelCount=j},get channelCountMode(){return O.channelCountMode},set channelCountMode(j){O.channelCountMode=j},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(j){O.channelInterpretation=j},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},addEventListener(...j){return O.addEventListener(j[0],j[1],j[2])},dispatchEvent(...j){return O.dispatchEvent(j[0])},getFrequencyResponse(j,V,Z){if(j.length!==V.length||V.length!==Z.length)throw i();const Y=j.length;for(let $=0;$<Y;$+=1){const P=-Math.PI*(j[$]/H),J=[Math.cos(P),Math.sin(P)],tt=dx(T,J),B=dx(w,J),W=$L(tt,B);V[$]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),Z[$]=Math.atan2(W[1],W[0])}},removeEventListener(...j){return O.removeEventListener(j[0],j[1],j[2])}},O)},nM=(i,t)=>i.createMediaElementSource(t.mediaElement),iM=(i,t)=>{const e=i.createMediaStreamDestination();return In(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},sM=(i,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((l,u)=>l.id<u.id?-1:l.id>u.id?1:0);const s=e.slice(0,1),r=i.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},rM=(i,t)=>(e,{mediaStreamTrack:s})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(s);const r=new MediaStream([s]),l=e.createMediaStreamSource(r);if(s.kind!=="audio")throw i();if(t(e))throw new TypeError;return l},oM=i=>i===null?null:i.hasOwnProperty("OfflineAudioContext")?i.OfflineAudioContext:i.hasOwnProperty("webkitOfflineAudioContext")?i.webkitOfflineAudioContext:null,aM=(i,t,e,s,r,l)=>(u,f)=>{const p=u.createOscillator();return In(p,f),hn(p,f,"detune"),hn(p,f,"frequency"),f.periodicWave!==void 0?p.setPeriodicWave(f.periodicWave):en(p,f,"type"),t(e,()=>e(u))||l0(p),t(s,()=>s(u))||l(p,u),t(r,()=>r(u))||c0(p),i(u,p),p},lM=i=>(t,e)=>{const s=t.createPanner();return s.orientationX===void 0?i(t,e):(In(s,e),hn(s,e,"orientationX"),hn(s,e,"orientationY"),hn(s,e,"orientationZ"),hn(s,e,"positionX"),hn(s,e,"positionY"),hn(s,e,"positionZ"),en(s,e,"coneInnerAngle"),en(s,e,"coneOuterAngle"),en(s,e,"coneOuterGain"),en(s,e,"distanceModel"),en(s,e,"maxDistance"),en(s,e,"panningModel"),en(s,e,"refDistance"),en(s,e,"rolloffFactor"),s)},cM=(i,t,e,s,r,l,u,f,p,m)=>(v,{coneInnerAngle:y,coneOuterAngle:w,coneOuterGain:T,distanceModel:x,maxDistance:A,orientationX:E,orientationY:O,orientationZ:U,panningModel:D,positionX:Q,positionY:I,positionZ:H,refDistance:G,rolloffFactor:j,...V})=>{const Z=v.createPanner();if(V.channelCount>2||V.channelCountMode==="max")throw u();In(Z,V);const Y={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},$=e(v,{...Y,channelInterpretation:"speakers",numberOfInputs:6}),P=s(v,{...V,gain:1}),J=s(v,{...Y,gain:1}),tt=s(v,{...Y,gain:0}),B=s(v,{...Y,gain:0}),W=s(v,{...Y,gain:0}),et=s(v,{...Y,gain:0}),k=s(v,{...Y,gain:0}),q=r(v,256,6,1),R=l(v,{...Y,curve:new Float32Array([1,1]),oversample:"none"});let X=[E,O,U],ot=[Q,I,H];const dt=new Float32Array(1);q.onaudioprocess=({inputBuffer:Et})=>{const ne=[p(Et,dt,0),p(Et,dt,1),p(Et,dt,2)];ne.some((Re,Fe)=>Re!==X[Fe])&&(Z.setOrientation(...ne),X=ne);const Me=[p(Et,dt,3),p(Et,dt,4),p(Et,dt,5)];Me.some((Re,Fe)=>Re!==ot[Fe])&&(Z.setPosition(...Me),ot=Me)},Object.defineProperty(tt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(et.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0});const mt={get bufferSize(){},get channelCount(){return Z.channelCount},set channelCount(Et){if(Et>2)throw u();P.channelCount=Et,Z.channelCount=Et},get channelCountMode(){return Z.channelCountMode},set channelCountMode(Et){if(Et==="max")throw u();P.channelCountMode=Et,Z.channelCountMode=Et},get channelInterpretation(){return Z.channelInterpretation},set channelInterpretation(Et){P.channelInterpretation=Et,Z.channelInterpretation=Et},get coneInnerAngle(){return Z.coneInnerAngle},set coneInnerAngle(Et){Z.coneInnerAngle=Et},get coneOuterAngle(){return Z.coneOuterAngle},set coneOuterAngle(Et){Z.coneOuterAngle=Et},get coneOuterGain(){return Z.coneOuterGain},set coneOuterGain(Et){if(Et<0||Et>1)throw t();Z.coneOuterGain=Et},get context(){return Z.context},get distanceModel(){return Z.distanceModel},set distanceModel(Et){Z.distanceModel=Et},get inputs(){return[P]},get maxDistance(){return Z.maxDistance},set maxDistance(Et){if(Et<0)throw new RangeError;Z.maxDistance=Et},get numberOfInputs(){return Z.numberOfInputs},get numberOfOutputs(){return Z.numberOfOutputs},get orientationX(){return J.gain},get orientationY(){return tt.gain},get orientationZ(){return B.gain},get panningModel(){return Z.panningModel},set panningModel(Et){Z.panningModel=Et},get positionX(){return W.gain},get positionY(){return et.gain},get positionZ(){return k.gain},get refDistance(){return Z.refDistance},set refDistance(Et){if(Et<0)throw new RangeError;Z.refDistance=Et},get rolloffFactor(){return Z.rolloffFactor},set rolloffFactor(Et){if(Et<0)throw new RangeError;Z.rolloffFactor=Et},addEventListener(...Et){return P.addEventListener(Et[0],Et[1],Et[2])},dispatchEvent(...Et){return P.dispatchEvent(Et[0])},removeEventListener(...Et){return P.removeEventListener(Et[0],Et[1],Et[2])}};y!==mt.coneInnerAngle&&(mt.coneInnerAngle=y),w!==mt.coneOuterAngle&&(mt.coneOuterAngle=w),T!==mt.coneOuterGain&&(mt.coneOuterGain=T),x!==mt.distanceModel&&(mt.distanceModel=x),A!==mt.maxDistance&&(mt.maxDistance=A),E!==mt.orientationX.value&&(mt.orientationX.value=E),O!==mt.orientationY.value&&(mt.orientationY.value=O),U!==mt.orientationZ.value&&(mt.orientationZ.value=U),D!==mt.panningModel&&(mt.panningModel=D),Q!==mt.positionX.value&&(mt.positionX.value=Q),I!==mt.positionY.value&&(mt.positionY.value=I),H!==mt.positionZ.value&&(mt.positionZ.value=H),G!==mt.refDistance&&(mt.refDistance=G),j!==mt.rolloffFactor&&(mt.rolloffFactor=j),(X[0]!==1||X[1]!==0||X[2]!==0)&&Z.setOrientation(...X),(ot[0]!==0||ot[1]!==0||ot[2]!==0)&&Z.setPosition(...ot);const _t=()=>{P.connect(Z),i(P,R,0,0),R.connect(J).connect($,0,0),R.connect(tt).connect($,0,1),R.connect(B).connect($,0,2),R.connect(W).connect($,0,3),R.connect(et).connect($,0,4),R.connect(k).connect($,0,5),$.connect(q).connect(v.destination)},Ct=()=>{P.disconnect(Z),f(P,R,0,0),R.disconnect(J),J.disconnect($),R.disconnect(tt),tt.disconnect($),R.disconnect(B),B.disconnect($),R.disconnect(W),W.disconnect($),R.disconnect(et),et.disconnect($),R.disconnect(k),k.disconnect($),$.disconnect(q),q.disconnect(v.destination)};return m(kc(mt,Z),_t,Ct)},uM=i=>(t,{disableNormalization:e,imag:s,real:r})=>{const l=s instanceof Float32Array?s:new Float32Array(s),u=r instanceof Float32Array?r:new Float32Array(r),f=t.createPeriodicWave(u,l,{disableNormalization:e});if(Array.from(s).length<2)throw i();return f},Sh=(i,t,e,s)=>i.createScriptProcessor(t,e,s),hM=(i,t)=>(e,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(e.createStereoPanner===void 0)return i(e,s);const l=e.createStereoPanner();return In(l,s),hn(l,s,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>r,set:u=>{if(u!==r)throw t()}}),l},fM=(i,t,e,s,r,l)=>{const f=new Float32Array([1,1]),p=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},v={...m,oversample:"none"},y=(x,A,E,O)=>{const U=new Float32Array(16385),D=new Float32Array(16385);for(let V=0;V<16385;V+=1){const Z=V/16384*p;U[V]=Math.cos(Z),D[V]=Math.sin(Z)}const Q=e(x,{...m,gain:0}),I=s(x,{...v,curve:U}),H=s(x,{...v,curve:f}),G=e(x,{...m,gain:0}),j=s(x,{...v,curve:D});return{connectGraph(){A.connect(Q),A.connect(H.inputs===void 0?H:H.inputs[0]),A.connect(G),H.connect(E),E.connect(I.inputs===void 0?I:I.inputs[0]),E.connect(j.inputs===void 0?j:j.inputs[0]),I.connect(Q.gain),j.connect(G.gain),Q.connect(O,0,0),G.connect(O,0,1)},disconnectGraph(){A.disconnect(Q),A.disconnect(H.inputs===void 0?H:H.inputs[0]),A.disconnect(G),H.disconnect(E),E.disconnect(I.inputs===void 0?I:I.inputs[0]),E.disconnect(j.inputs===void 0?j:j.inputs[0]),I.disconnect(Q.gain),j.disconnect(G.gain),Q.disconnect(O,0,0),G.disconnect(O,0,1)}}},w=(x,A,E,O)=>{const U=new Float32Array(16385),D=new Float32Array(16385),Q=new Float32Array(16385),I=new Float32Array(16385),H=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>H){const et=(W-H)/(16384-H)*p;U[W]=Math.cos(et),D[W]=Math.sin(et),Q[W]=0,I[W]=1}else{const et=W/(16384-H)*p;U[W]=1,D[W]=0,Q[W]=Math.cos(et),I[W]=Math.sin(et)}const G=t(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),j=e(x,{...m,gain:0}),V=s(x,{...v,curve:U}),Z=e(x,{...m,gain:0}),Y=s(x,{...v,curve:D}),$=s(x,{...v,curve:f}),P=e(x,{...m,gain:0}),J=s(x,{...v,curve:Q}),tt=e(x,{...m,gain:0}),B=s(x,{...v,curve:I});return{connectGraph(){A.connect(G),A.connect($.inputs===void 0?$:$.inputs[0]),G.connect(j,0),G.connect(Z,0),G.connect(P,1),G.connect(tt,1),$.connect(E),E.connect(V.inputs===void 0?V:V.inputs[0]),E.connect(Y.inputs===void 0?Y:Y.inputs[0]),E.connect(J.inputs===void 0?J:J.inputs[0]),E.connect(B.inputs===void 0?B:B.inputs[0]),V.connect(j.gain),Y.connect(Z.gain),J.connect(P.gain),B.connect(tt.gain),j.connect(O,0,0),P.connect(O,0,0),Z.connect(O,0,1),tt.connect(O,0,1)},disconnectGraph(){A.disconnect(G),A.disconnect($.inputs===void 0?$:$.inputs[0]),G.disconnect(j,0),G.disconnect(Z,0),G.disconnect(P,1),G.disconnect(tt,1),$.disconnect(E),E.disconnect(V.inputs===void 0?V:V.inputs[0]),E.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),E.disconnect(J.inputs===void 0?J:J.inputs[0]),E.disconnect(B.inputs===void 0?B:B.inputs[0]),V.disconnect(j.gain),Y.disconnect(Z.gain),J.disconnect(P.gain),B.disconnect(tt.gain),j.disconnect(O,0,0),P.disconnect(O,0,0),Z.disconnect(O,0,1),tt.disconnect(O,0,1)}}},T=(x,A,E,O,U)=>{if(A===1)return y(x,E,O,U);if(A===2)return w(x,E,O,U);throw r()};return(x,{channelCount:A,channelCountMode:E,pan:O,...U})=>{if(E==="max")throw r();const D=i(x,{...U,channelCount:1,channelCountMode:E,numberOfInputs:2}),Q=e(x,{...U,channelCount:A,channelCountMode:E,gain:1}),I=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:O});let{connectGraph:H,disconnectGraph:G}=T(x,A,Q,I,D);Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"maxValue",{get:()=>1}),Object.defineProperty(I.gain,"minValue",{get:()=>-1});const j={get bufferSize(){},get channelCount(){return Q.channelCount},set channelCount($){Q.channelCount!==$&&(V&&G(),{connectGraph:H,disconnectGraph:G}=T(x,$,Q,I,D),V&&H()),Q.channelCount=$},get channelCountMode(){return Q.channelCountMode},set channelCountMode($){if($==="clamped-max"||$==="max")throw r();Q.channelCountMode=$},get channelInterpretation(){return Q.channelInterpretation},set channelInterpretation($){Q.channelInterpretation=$},get context(){return Q.context},get inputs(){return[Q]},get numberOfInputs(){return Q.numberOfInputs},get numberOfOutputs(){return Q.numberOfOutputs},get pan(){return I.gain},addEventListener(...$){return Q.addEventListener($[0],$[1],$[2])},dispatchEvent(...$){return Q.dispatchEvent($[0])},removeEventListener(...$){return Q.removeEventListener($[0],$[1],$[2])}};let V=!1;const Z=()=>{H(),V=!0},Y=()=>{G(),V=!1};return l(kc(j,D),Z,Y)}},dM=(i,t,e,s,r,l,u)=>(f,p)=>{const m=f.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&f.createGain().gain.automationRate===void 0)return e(f,p);In(m,p);const v=p.curve===null||p.curve instanceof Float32Array?p.curve:new Float32Array(p.curve);if(v!==null&&v.length<2)throw t();en(m,{curve:v},"curve"),en(m,p,"oversample");let y=null,w=!1;return u(m,"curve",A=>()=>A.call(m),A=>E=>(A.call(m,E),w&&(s(E)&&y===null?y=i(f,m):!s(E)&&y!==null&&(y(),y=null)),E)),r(m,()=>{w=!0,s(m.curve)&&(y=i(f,m))},()=>{w=!1,y!==null&&(y(),y=null)})},pM=(i,t,e,s,r)=>(l,{curve:u,oversample:f,...p})=>{const m=l.createWaveShaper(),v=l.createWaveShaper();In(m,p),In(v,p);const y=e(l,{...p,gain:1}),w=e(l,{...p,gain:-1}),T=e(l,{...p,gain:1}),x=e(l,{...p,gain:-1});let A=null,E=!1,O=null;const U={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(I){y.channelCount=I,w.channelCount=I,m.channelCount=I,T.channelCount=I,v.channelCount=I,x.channelCount=I},get channelCountMode(){return m.channelCountMode},set channelCountMode(I){y.channelCountMode=I,w.channelCountMode=I,m.channelCountMode=I,T.channelCountMode=I,v.channelCountMode=I,x.channelCountMode=I},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(I){y.channelInterpretation=I,w.channelInterpretation=I,m.channelInterpretation=I,T.channelInterpretation=I,v.channelInterpretation=I,x.channelInterpretation=I},get context(){return m.context},get curve(){return O},set curve(I){if(I!==null&&I.length<2)throw t();if(I===null)m.curve=I,v.curve=I;else{const H=I.length,G=new Float32Array(H+2-H%2),j=new Float32Array(H+2-H%2);G[0]=I[0],j[0]=-I[H-1];const V=Math.ceil((H+1)/2),Z=(H+1)/2-1;for(let Y=1;Y<V;Y+=1){const $=Y/V*Z,P=Math.floor($),J=Math.ceil($);G[Y]=P===J?I[P]:(1-($-P))*I[P]+(1-(J-$))*I[J],j[Y]=P===J?-I[H-1-P]:-((1-($-P))*I[H-1-P])-(1-(J-$))*I[H-1-J]}G[V]=H%2===1?I[V-1]:(I[V-2]+I[V-1])/2,m.curve=G,v.curve=j}O=I,E&&(s(O)&&A===null?A=i(l,y):A!==null&&(A(),A=null))},get inputs(){return[y]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(I){m.oversample=I,v.oversample=I},addEventListener(...I){return y.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return y.dispatchEvent(I[0])},removeEventListener(...I){return y.removeEventListener(I[0],I[1],I[2])}};u!==null&&(U.curve=u instanceof Float32Array?u:new Float32Array(u)),f!==U.oversample&&(U.oversample=f);const D=()=>{y.connect(m).connect(T),y.connect(w).connect(v).connect(x).connect(T),E=!0,s(O)&&(A=i(l,y))},Q=()=>{y.disconnect(m),m.disconnect(T),y.disconnect(w),w.disconnect(v),v.disconnect(x),x.disconnect(T),E=!1,A!==null&&(A(),A=null)};return r(kc(U,T),D,Q)},mi=()=>new DOMException("","NotSupportedError"),mM={numberOfChannels:1},_M=(i,t,e,s,r)=>class extends i{constructor(u,f,p){let m;if(typeof u=="number"&&f!==void 0&&p!==void 0)m={length:f,numberOfChannels:u,sampleRate:p};else if(typeof u=="object")m=u;else throw new Error("The given parameters are not valid.");const{length:v,numberOfChannels:y,sampleRate:w}={...mM,...m},T=s(y,v,w);t(ih,()=>ih(T))||T.addEventListener("statechange",(()=>{let x=0;const A=E=>{this._state==="running"&&(x>0?(T.removeEventListener("statechange",A),E.stopImmediatePropagation(),this._waitForThePromiseToSettle(E)):x+=1)};return A})()),super(T,y),this._length=v,this._nativeOfflineAudioContext=T,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,q1(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},gM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},yM=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...gM,...m},w=e(v,y),T=l(v),x=T?s():null,A=p.sampleRate/2;super(p,!1,w,x),this._detune=t(this,T,w.detune,153600,-153600),this._frequency=t(this,T,w.frequency,A,-A),this._nativeOscillatorNode=w,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeOscillatorNode.onended=m;const v=this._nativeOscillatorNode.onended;this._onended=v!==null&&v===m?p:v}get type(){return this._nativeOscillatorNode.type}set type(p){this._nativeOscillatorNode.type=p,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(p){this._nativeOscillatorNode.setPeriodicWave(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=p)}start(p=0){if(this._nativeOscillatorNode.start(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=p),this.context.state!=="closed"){Sc(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),ro(this)&&vh(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(p=0){this._nativeOscillatorNode.stop(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=p)}},vM=(i,t,e,s,r)=>()=>{const l=new WeakMap;let u=null,f=null,p=null;const m=async(v,y)=>{let w=e(v);const T=ni(w,y);if(!T){const x={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,detune:w.detune.value,frequency:w.frequency.value,periodicWave:u===null?void 0:u,type:w.type};w=t(y,x),f!==null&&w.start(f),p!==null&&w.stop(p)}return l.set(y,w),T?(await i(y,v.detune,w.detune),await i(y,v.frequency,w.frequency)):(await s(y,v.detune,w.detune),await s(y,v.frequency,w.frequency)),await r(v,y,w),w};return{set periodicWave(v){u=v},set start(v){f=v},set stop(v){p=v},render(v,y){const w=l.get(y);return w!==void 0?Promise.resolve(w):m(v,y)}}},bM={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},wM=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...bM,...m},w=e(v,y),T=l(v),x=T?s():null;super(p,!1,w,x),this._nativePannerNode=w,this._orientationX=t(this,T,w.orientationX,hi,Di),this._orientationY=t(this,T,w.orientationY,hi,Di),this._orientationZ=t(this,T,w.orientationZ,hi,Di),this._positionX=t(this,T,w.positionX,hi,Di),this._positionY=t(this,T,w.positionY,hi,Di),this._positionZ=t(this,T,w.positionZ,hi,Di),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(p){this._nativePannerNode.coneInnerAngle=p}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(p){this._nativePannerNode.coneOuterAngle=p}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(p){this._nativePannerNode.coneOuterGain=p}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(p){this._nativePannerNode.distanceModel=p}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(p){this._nativePannerNode.maxDistance=p}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(p){this._nativePannerNode.panningModel=p}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(p){this._nativePannerNode.refDistance=p}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(p){this._nativePannerNode.rolloffFactor=p}},xM=(i,t,e,s,r,l,u,f,p,m)=>()=>{const v=new WeakMap;let y=null;const w=async(T,x)=>{let A=null,E=l(T);const O={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation},U={...O,coneInnerAngle:E.coneInnerAngle,coneOuterAngle:E.coneOuterAngle,coneOuterGain:E.coneOuterGain,distanceModel:E.distanceModel,maxDistance:E.maxDistance,panningModel:E.panningModel,refDistance:E.refDistance,rolloffFactor:E.rolloffFactor},D=ni(E,x);if("bufferSize"in E)A=s(x,{...O,gain:1});else if(!D){const Q={...U,orientationX:E.orientationX.value,orientationY:E.orientationY.value,orientationZ:E.orientationZ.value,positionX:E.positionX.value,positionY:E.positionY.value,positionZ:E.positionZ.value};E=r(x,Q)}if(v.set(x,A===null?E:A),A!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Y=new u(6,T.context.length,x.sampleRate),$=t(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});$.connect(Y.destination),y=(async()=>{const P=await Promise.all([T.orientationX,T.orientationY,T.orientationZ,T.positionX,T.positionY,T.positionZ].map(async(J,tt)=>{const B=e(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:tt===0?1:0});return await f(Y,J,B.offset),B}));for(let J=0;J<6;J+=1)P[J].connect($,0,J),P[J].start(0);return m(Y)})()}const Q=await y,I=s(x,{...O,gain:1});await p(T,x,I);const H=[];for(let Y=0;Y<Q.numberOfChannels;Y+=1)H.push(Q.getChannelData(Y));let G=[H[0][0],H[1][0],H[2][0]],j=[H[3][0],H[4][0],H[5][0]],V=s(x,{...O,gain:1}),Z=r(x,{...U,orientationX:G[0],orientationY:G[1],orientationZ:G[2],positionX:j[0],positionY:j[1],positionZ:j[2]});I.connect(V).connect(Z.inputs[0]),Z.connect(A);for(let Y=128;Y<Q.length;Y+=128){const $=[H[0][Y],H[1][Y],H[2][Y]],P=[H[3][Y],H[4][Y],H[5][Y]];if($.some((J,tt)=>J!==G[tt])||P.some((J,tt)=>J!==j[tt])){G=$,j=P;const J=Y/x.sampleRate;V.gain.setValueAtTime(0,J),V=s(x,{...O,gain:0}),Z=r(x,{...U,orientationX:G[0],orientationY:G[1],orientationZ:G[2],positionX:j[0],positionY:j[1],positionZ:j[2]}),V.gain.setValueAtTime(1,J),I.connect(V).connect(Z.inputs[0]),Z.connect(A)}}return A}return D?(await i(x,T.orientationX,E.orientationX),await i(x,T.orientationY,E.orientationY),await i(x,T.orientationZ,E.orientationZ),await i(x,T.positionX,E.positionX),await i(x,T.positionY,E.positionY),await i(x,T.positionZ,E.positionZ)):(await f(x,T.orientationX,E.orientationX),await f(x,T.orientationY,E.orientationY),await f(x,T.orientationZ,E.orientationZ),await f(x,T.positionX,E.positionX),await f(x,T.positionY,E.positionY),await f(x,T.positionZ,E.positionZ)),Mc(E)?await p(T,x,E.inputs[0]):await p(T,x,E),E};return{render(T,x){const A=v.get(x);return A!==void 0?Promise.resolve(A):w(T,x)}}},SM={disableNormalization:!1},TM=(i,t,e,s)=>class J1{constructor(l,u){const f=t(l),p=s({...SM,...u}),m=i(f,p);return e.add(m),m}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===J1.prototype||e.has(l)}},AM=(i,t)=>(e,s,r)=>(i(s).replay(r),t(s,e,r)),EM=(i,t,e)=>async(s,r,l)=>{const u=i(s);await Promise.all(u.activeInputs.map((f,p)=>Array.from(f).map(async([m,v])=>{const w=await t(m).render(m,r),T=s.context.destination;!e(m)&&(s!==T||!e(s))&&w.connect(l,v,p)})).reduce((f,p)=>[...f,...p],[]))},CM=(i,t,e)=>async(s,r,l)=>{const u=t(s);await Promise.all(Array.from(u.activeInputs).map(async([f,p])=>{const v=await i(f).render(f,r);e(f)||v.connect(l,p)}))},LM=(i,t,e,s)=>r=>i(ih,()=>ih(r))?Promise.resolve(i(s,s)).then(l=>{if(!l){const u=e(r,512,0,1);r.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>r.currentTime,u.connect(r.destination)}return r.startRendering()}):new Promise(l=>{const u=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=f=>{u.disconnect(),l(f.renderedBuffer)},u.connect(r.destination),r.startRendering()}),MM=i=>(t,e)=>{i.set(t,e)},kM=i=>(t,e)=>i.set(t,e),DM=(i,t,e,s,r,l,u,f)=>(p,m)=>e(p).render(p,m).then(()=>Promise.all(Array.from(s(m)).map(v=>e(v).render(v,m)))).then(()=>r(m)).then(v=>(typeof v.copyFromChannel!="function"?(u(v),r0(v)):t(l,()=>l(v))||f(v),i.add(v),v)),OM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},RM=(i,t,e,s,r,l)=>class extends i{constructor(f,p){const m=r(f),v={...OM,...p},y=e(m,v),w=l(m),T=w?s():null;super(f,!1,y,T),this._pan=t(this,w,y.pan)}get pan(){return this._pan}},IM=(i,t,e,s,r)=>()=>{const l=new WeakMap,u=async(f,p)=>{let m=e(f);const v=ni(m,p);if(!v){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=t(p,y)}return l.set(p,m),v?await i(p,f.pan,m.pan):await s(p,f.pan,m.pan),Mc(m)?await r(f,p,m.inputs[0]):await r(f,p,m),m};return{render(f,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):u(f,p)}}},NM=i=>()=>{if(i===null)return!1;try{new i({length:1,sampleRate:44100})}catch{return!1}return!0},zM=(i,t)=>async()=>{if(i===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(e);let l=!1,u=!1;try{await s.audioWorklet.addModule(r);const f=new i(s,"a",{numberOfOutputs:0}),p=s.createOscillator();f.port.onmessage=()=>l=!0,f.onprocessorerror=()=>u=!0,p.connect(f),p.start(0),await s.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(r)}return l&&!u},PM=(i,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),s=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{e.oncomplete=()=>{s.disconnect(),r(e.currentTime!==0)},e.startRendering()})},BM=()=>new DOMException("","UnknownError"),UM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},HM=(i,t,e,s,r,l,u)=>class extends i{constructor(p,m){const v=r(p),y={...UM,...m},w=e(v,y),x=l(v)?s():null;super(p,!0,w,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=w,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(p){if(p===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(p.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=p}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(p){this._nativeWaveShaperNode.oversample=p}},VM=(i,t,e)=>()=>{const s=new WeakMap,r=async(l,u)=>{let f=t(l);if(!ni(f,u)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample};f=i(u,m)}return s.set(u,f),Mc(f)?await e(l,u,f.inputs[0]):await e(l,u,f),f};return{render(l,u){const f=s.get(u);return f!==void 0?Promise.resolve(f):r(l,u)}}},qM=()=>typeof window>"u"?null:window,jM=(i,t)=>e=>{e.copyFromChannel=(s,r,l=0)=>{const u=i(l),f=i(r);if(f>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(f),v=s.length;for(let y=u<0?-u:0;y+u<p&&y<v;y+=1)s[y]=m[y+u]},e.copyToChannel=(s,r,l=0)=>{const u=i(l),f=i(r);if(f>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(f),v=s.length;for(let y=u<0?-u:0;y+u<p&&y<v;y+=1)m[y+u]=s[y]}},GM=i=>t=>{t.copyFromChannel=(e=>(s,r,l=0)=>{const u=i(l),f=i(r);if(u<t.length)return e.call(t,s,f,u)})(t.copyFromChannel),t.copyToChannel=(e=>(s,r,l=0)=>{const u=i(l),f=i(r);if(u<t.length)return e.call(t,s,f,u)})(t.copyToChannel)},ZM=i=>(t,e)=>{const s=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),i(t,"buffer",r=>()=>{const l=r.call(t);return l===s?null:l},r=>l=>r.call(t,l===null?s:l))},WM=(i,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw i()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw i()}});const r=e.createBufferSource();t(s,()=>{const f=s.numberOfInputs;for(let p=0;p<f;p+=1)r.connect(s,0,p)},()=>r.disconnect(s))},$1=(i,t,e)=>i.copyFromChannel===void 0?i.getChannelData(e)[0]:(i.copyFromChannel(t,e),t[0]),tS=i=>{if(i===null)return!1;const t=i.length;return t%2!==0?i[Math.floor(t/2)]!==0:i[t/2-1]+i[t/2]!==0},Th=(i,t,e,s)=>{let r=i;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:l,set:u}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(i,t,{get:e(l),set:s(u)})},YM=i=>({...i,outputChannelCount:i.outputChannelCount!==void 0?i.outputChannelCount:i.numberOfInputs===1&&i.numberOfOutputs===1?[i.channelCount]:Array.from({length:i.numberOfOutputs},()=>1)}),XM=i=>({...i,channelCount:i.numberOfOutputs}),QM=i=>{const{imag:t,real:e}=i;return t===void 0?e===void 0?{...i,imag:[0,0],real:[0,0]}:{...i,imag:Array.from(e,()=>0),real:e}:e===void 0?{...i,imag:t,real:Array.from(t,()=>0)}:{...i,imag:t,real:e}},eS=(i,t,e)=>{try{i.setValueAtTime(t,e)}catch(s){if(s.code!==9)throw s;eS(i,t,e+1e-7)}},FM=i=>{const t=i.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},KM=i=>{const t=i.createBufferSource(),e=i.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},JM=i=>{const t=i.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},u0=i=>{const t=i.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},nS=i=>{const t=i.createBuffer(1,1,44100),e=i.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},h0=i=>{const t=i.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},$M=i=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(i)}finally{t.close(),e.close()}},tk=i=>{i.start=(t=>(e=0,s=0,r)=>{const l=i.buffer,u=l===null?s:Math.min(l.duration,s);l!==null&&u>l.duration-.5/i.context.sampleRate?t.call(i,e,0,0):t.call(i,e,u,r)})(i.start)},iS=(i,t)=>{const e=t.createGain();i.connect(e);const s=(r=>()=>{r.call(i,e),i.removeEventListener("ended",s)})(i.disconnect);i.addEventListener("ended",s),kc(i,e),i.stop=(r=>{let l=!1;return(u=0)=>{if(l)try{r.call(i,u)}catch{e.gain.setValueAtTime(0,u)}else r.call(i,u),l=!0}})(i.stop)},Dc=(i,t)=>e=>{const s={value:i};return Object.defineProperties(e,{currentTarget:s,target:s}),typeof t=="function"?t.call(i,e):t.handleEvent.call(i,e)},ek=wE(pl),nk=CE(pl),ik=UC(Jd),sS=new WeakMap,sk=iL(sS),Gs=mC(new Map,new WeakMap),yr=qM(),rS=RL(Gs,xr),f0=nL(fi),Fn=EM(fi,f0,ul),rk=OE(rS,Qe,Fn),Ze=oL(Kd),ao=oM(yr),Ue=SL(ao),oS=new WeakMap,aS=QC(Dc),Ah=PL(yr),d0=vL(Ah),p0=bL(yr),lS=wL(yr),sh=UL(yr),yn=iC(xE(N1),EE(ek,nk,Dd,ik,Od,fi,sk,yh,Qe,pl,ro,ul,vd),Gs,pL(Lg,Od,fi,Qe,nh,ro),xr,$d,mi,NC(Dd,Lg,fi,Qe,nh,Ze,ro,Ue),qC(oS,fi,qs),aS,Ze,d0,p0,lS,Ue,sh),ok=DE(yn,rk,xr,rS,Ze,Ue),m0=new WeakSet,px=IL(yr),cS=LC(new Uint32Array(1)),_0=jM(cS,xr),g0=GM(cS),uS=IE(m0,Gs,mi,px,ao,NM(px),_0,g0),tp=LE(Ni),hS=CM(f0,bh,ul),Sr=xC(hS),Oc=zL(tp,Gs,FM,KM,JM,u0,nS,h0,tk,ZM(Th),iS),Tr=AM(sL(bh),hS),ak=PE(Sr,Oc,Qe,Tr,Fn),Zs=sC(SE(z1),oS,s0,rC,mE,_E,gE,yE,vE,Ag,R1,Ah,eS),lk=zE(yn,ak,Zs,Hn,Oc,Ze,Ue,Dc),ck=WE(yn,YE,xr,Hn,BL(Ni,Th),Ze,Ue,Fn),uk=pC(Sr,F1,Qe,Tr,Fn),ml=kM(sS),hk=dC(yn,Zs,uk,$d,F1,Ze,Ue,ml),ha=DL(pl,p0),fk=WM(Hn,ha),fa=WL(Ah,fk),dk=yC(fa,Qe,Fn),pk=gC(yn,dk,fa,Ze,Ue),mk=wC(xh,Qe,Fn),_k=bC(yn,mk,xh,Ze,Ue,XM),gk=QL(tp,Oc,Ni,ha),Rc=XL(tp,Gs,gk,u0,h0),yk=CC(Sr,Rc,Qe,Tr,Fn),vk=EC(yn,Zs,yk,Rc,Ze,Ue,Dc),fS=FL(mi,Th),bk=DC(fS,Qe,Fn),wk=kC(yn,bk,fS,Ze,Ue,ml),xk=BC(Sr,K1,Qe,Tr,Fn),Sk=PC(yn,Zs,xk,K1,Ze,Ue,ml),dS=KL(mi),Tk=WC(Sr,dS,Qe,Tr,Fn),Ak=ZC(yn,Zs,Tk,dS,mi,Ze,Ue,ml),Ek=tL(Sr,Ni,Qe,Tr,Fn),Ck=$C(yn,Zs,Ek,Ni,Ze,Ue),Lk=eM($d,Hn,Sh,mi),ep=LM(Gs,Ni,Sh,PM(Ni,ao)),Mk=dL(Oc,Qe,ao,Fn,ep),kk=JL(Lk),Dk=hL(yn,kk,Mk,Ze,Ue,ml),Ok=XE(Zs,fa,Rc,Sh,mi,$1,Ue,Th),pS=new WeakMap,Rk=kL(ck,Ok,aS,Ue,pS,Dc),mS=aM(tp,Gs,u0,nS,h0,iS),Ik=vM(Sr,mS,Qe,Tr,Fn),Nk=yM(yn,Zs,mS,Ik,Ze,Ue,Dc),_S=TC(Oc),zk=pM(_S,Hn,Ni,tS,ha),np=dM(_S,Hn,zk,tS,ha,Ah,Th),Pk=cM(Dd,Hn,fa,Ni,Sh,np,mi,Od,$1,ha),gS=lM(Pk),Bk=xM(Sr,fa,Rc,Ni,gS,Qe,ao,Tr,Fn,ep),Uk=wM(yn,Zs,gS,Bk,Ze,Ue,ml),Hk=uM(xr),Vk=TM(Hk,Ze,new WeakSet,QM),qk=fM(fa,xh,Ni,np,mi,ha),yS=hM(qk,mi),jk=IM(Sr,yS,Qe,Tr,Fn),Gk=RM(yn,Zs,yS,jk,Ze,Ue),Zk=VM(np,Qe,Fn),Wk=HM(yn,Hn,np,Zk,Ze,Ue,ml),vS=TL(yr),y0=FC(yr),bS=new WeakMap,Yk=aL(bS,ao),Xk=vS?AE(Gs,mi,XC(yr),y0,KC(bE),Ze,Yk,Ue,sh,new WeakMap,new WeakMap,zM(sh,ao),yr):void 0,Qk=xL(d0,Ue),Fk=IC(m0,Gs,RC,YC,new WeakSet,Ze,Qk,Md,ih,_0,g0),wS=hC(Xk,ok,uS,lk,hk,pk,_k,vk,wk,Fk,Sk,Ak,Ck,Dk,Rk,Nk,Uk,Vk,Gk,Wk),Kk=AL(yn,nM,Ze,Ue),Jk=CL(yn,iM,Ze,Ue),$k=LL(yn,sM,Ze,Ue),tD=rM(Hn,Ue),eD=ML(yn,tD,Ze),nD=ZE(wS,Hn,mi,BM,Kk,Jk,$k,eD,Ah),v0=lL(pS),iD=ME(v0),xS=SC(xr),sD=HC(v0),SS=jC(xr),TS=new WeakMap,rD=eL(TS,qs),oD=ZL(xS,xr,Hn,fa,xh,Rc,Ni,Sh,mi,SS,y0,rD,ha),aD=VL(Hn,oD,Ni,mi,ha),lD=uC(Sr,xS,Oc,fa,xh,Rc,Ni,sD,SS,y0,Qe,sh,ao,Tr,Fn,ep),cD=rL(bS),uD=MM(TS),mx=vS?aC(iD,yn,Zs,lD,aD,fi,cD,Ze,Ue,sh,YM,uD,$M,Dc):void 0,hD=OC(mi,ao),fD=DM(m0,Gs,f0,v0,ep,Md,_0,g0),dD=_M(wS,Gs,Hn,hD,fD),pD=mL(Kd,d0),mD=_L(i0,p0),_D=gL(s0,lS),gD=yL(Kd,Ue);function Ts(i){return i===void 0}function _e(i){return i!==void 0}function yD(i){return typeof i=="function"}function vr(i){return typeof i=="number"}function al(i){return Object.prototype.toString.call(i)==="[object Object]"&&i.constructor===Object}function AS(i){return typeof i=="boolean"}function Vs(i){return Array.isArray(i)}function oo(i){return typeof i=="string"}function rd(i){return oo(i)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(i)}function $t(i,t){if(!i)throw new Error(t)}function es(i,t,e=1/0){if(!(t<=i&&i<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${i}`)}function ES(i){!i.isOffline&&i.state!=="running"&&b0('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let CS=!1,_x=!1;function gx(i){CS=i}function vD(i){Ts(i)&&CS&&!_x&&(_x=!0,b0("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let LS=console;function bD(...i){LS.log(...i)}function b0(...i){LS.warn(...i)}function wD(i){return new nD(i)}function xD(i,t,e){return new dD(i,t,e)}const Ji=typeof self=="object"?self:null,SD=Ji&&(Ji.hasOwnProperty("AudioContext")||Ji.hasOwnProperty("webkitAudioContext"));function TD(i,t,e){return $t(_e(mx),"AudioWorkletNode only works in a secure context (https or localhost)"),new(i instanceof Ji?.BaseAudioContext?Ji?.AudioWorkletNode:mx)(i,t,e)}function Ws(i,t,e,s){var r=arguments.length,l=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,t,e,s);else for(var f=i.length-1;f>=0;f--)(u=i[f])&&(l=(r<3?u(l):r>3?u(t,e,l):u(t,e))||l);return r>3&&l&&Object.defineProperty(t,e,l),l}function gn(i,t,e,s){function r(l){return l instanceof e?l:new e(function(u){u(l)})}return new(e||(e=Promise))(function(l,u){function f(v){try{m(s.next(v))}catch(y){u(y)}}function p(v){try{m(s.throw(v))}catch(y){u(y)}}function m(v){v.done?l(v.value):r(v.value).then(f,p)}m((s=s.apply(i,t||[])).next())})}class AD{constructor(t,e,s,r){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function hl(i){return _D(i)}function na(i){return mD(i)}function bd(i){return gD(i)}function pc(i){return pD(i)}function ED(i){return i instanceof uS}function CD(i,t){return i==="value"||hl(t)||na(t)||ED(t)}function gr(i,...t){if(!t.length)return i;const e=t.shift();if(al(i)&&al(e))for(const s in e)CD(s,e[s])?i[s]=e[s]:al(e[s])?(i[s]||Object.assign(i,{[s]:{}}),gr(i[s],e[s])):Object.assign(i,{[s]:e[s]});return gr(i,...t)}function LD(i,t){return i.length===t.length&&i.every((e,s)=>t[s]===e)}function zt(i,t,e=[],s){const r={},l=Array.from(t);if(al(l[0])&&s&&!Reflect.has(l[0],s)&&(Object.keys(l[0]).some(f=>Reflect.has(i,f))||(gr(r,{[s]:l[0]}),e.splice(e.indexOf(s),1),l.shift())),l.length===1&&al(l[0]))gr(r,l[0]);else for(let u=0;u<e.length;u++)_e(l[u])&&(r[e[u]]=l[u]);return gr(i,r)}function MD(i){return i.constructor.getDefaults()}function ll(i,t){return Ts(i)?t:i}function ws(i,t){return t.forEach(e=>{Reflect.has(i,e)&&delete i[e]}),i}class lo{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Ji&&this.toString()===Ji.TONE_DEBUG_CLASS)&&bD(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}lo.version=O1;const w0=1e-6;function Tc(i,t){return i>t+w0}function Rg(i,t){return Tc(i,t)||Us(i,t)}function zd(i,t){return i+w0<t}function Us(i,t){return Math.abs(i-t)<w0}function _l(i,t,e){return Math.max(Math.min(i,e),t)}class As extends lo{constructor(){super(),this.name="Timeline",this._timeline=[];const t=zt(As.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if($t(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];$t(Rg(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Us(this._timeline[e].time,t)){for(let s=e;s>=0&&Us(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&Rg(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let l=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;s<l;){let u=Math.floor(s+(l-s)/2);const f=this._timeline[u],p=this._timeline[u+1];if(Us(f[e],t)){for(let m=u;m<this._timeline.length;m++){const v=this._timeline[m];if(Us(v[e],t))u=m;else break}return u}else{if(zd(f[e],t)&&Tc(p[e],t))return u;Tc(f[e],t)?l=u:s=u+1}}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return s!==-1&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let r=this._search(t),l=this._search(e);return r!==-1&&l!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[l].time===e&&(l-=1),this._iterate(s,r,l)):r===-1&&this._iterate(s,0,l),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(s!==-1&&Us(this._timeline[s].time,t)){let r=s;for(let l=s;l>=0&&Us(this._timeline[l].time,t);l--)r=l;this._iterate(l=>{e(l)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const MS=[];function ip(i){MS.push(i)}function kD(i){MS.forEach(t=>t(i))}const kS=[];function sp(i){kS.push(i)}function DD(i){kS.forEach(t=>t(i))}class Eh extends lo{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(r=>{Ts(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}),this}once(t,e){const s=(...r)=>{e(...r),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(r=>{if(Ts(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Ts(e))this._events[r]=[];else{const l=this._events[r];for(let u=l.length-1;u>=0;u--)l[u]===e&&l.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,l=s.length;r<l;r++)s[r].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(Eh.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class DS extends Eh{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ch extends DS{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new As,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=zt(Ch.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=wD({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new AD(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(kD(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return $t(pc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return $t(pc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return $t(pc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){$t(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){$t(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){$t(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){$t(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return TD(this.rawContext,t,e)}addAudioWorkletModule(t){return gn(this,void 0,void 0,function*(){$t(_e(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return gn(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return pc(this._context)?this._context.resume():Promise.resolve()}close(){return gn(this,void 0,void 0,function*(){pc(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&DD(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let l=0;l<s.length;l++)s[l]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,r=()=>{const l=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:l+e})};return r(),s}}class OD extends DS{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return gn(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function ge(i,t){Vs(t)?t.forEach(e=>ge(i,e)):Object.defineProperty(i,t,{enumerable:!0,writable:!1})}function x0(i,t){Vs(t)?t.forEach(e=>x0(i,e)):Object.defineProperty(i,t,{writable:!0})}const we=()=>{};class Ge extends lo{constructor(){super(),this.name="ToneAudioBuffer",this.onload=we;const t=zt(Ge.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,oo(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:we,onload:we,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:di().sampleRate}set(t){return t instanceof Ge?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return gn(this,void 0,void 0,function*(){const e=Ge.load(t).then(s=>{this.set(s),this.onload(this)});Ge.downloads.push(e);try{yield e}finally{const s=Ge.downloads.indexOf(e);Ge.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Vs(t)&&t[0].length>0,s=e?t.length:1,r=e?t[0].length:t.length,l=di(),u=l.createBuffer(s,r,l.sampleRate),f=!e&&s===1?[t]:t;for(let p=0;p<s;p++)u.copyToChannel(f[p],p);return this._buffer=u,this}toMono(t){if(vr(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const l=this.toArray(r);for(let u=0;u<l.length;u++)e[u]+=l[u]}e=e.map(r=>r/s),this.fromArray(e)}return this}toArray(t){if(vr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let s=0;s<this.numberOfChannels;s++)e[s]=this.getChannelData(s);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){$t(this.loaded,"Buffer is not loaded");const s=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);$t(s<r,"The start time must be less than the end time");const l=r-s,u=di().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)u.copyToChannel(this.getChannelData(f).subarray(s,r),f);return new Ge(u)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Ge().fromArray(t)}static fromUrl(t){return gn(this,void 0,void 0,function*(){return yield new Ge().load(t)})}static load(t){return gn(this,void 0,void 0,function*(){const e=Ge.baseUrl===""||Ge.baseUrl.endsWith("/")?Ge.baseUrl:Ge.baseUrl+"/",s=yield fetch(e+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const r=yield s.arrayBuffer();return yield di().decodeAudioData(r)})}static supportsType(t){const e=t.split("."),s=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return gn(this,void 0,void 0,function*(){for(yield Promise.resolve();Ge.downloads.length;)yield Ge.downloads[0]})}}Ge.baseUrl="";Ge.downloads=[];class rp extends Ch{constructor(){super({clockSource:"offline",context:bd(arguments[0])?arguments[0]:xD(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:bd(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=bd(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return gn(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return gn(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Ge(e)})}close(){return Promise.resolve()}}const OS=new OD;let il=OS;function di(){return il===OS&&SD&&RD(new Ch),il}function RD(i,t=!1){t&&il.dispose(),pc(i)?il=new Ch(i):bd(i)?il=new rp(i):il=i}function od(){return il.resume()}if(Ji&&!Ji.TONE_SILENCE_LOGGING){const t=` * Tone.js v${O1} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function ID(i){return Math.pow(10,i/20)}function ND(i){return 20*(Math.log(i)/Math.LN10)}function RS(i){return Math.pow(2,i/12)}let op=440;function zD(){return op}function PD(i){op=i}function Ig(i){return Math.round(IS(i))}function IS(i){return 69+12*Math.log2(i/op)}function BD(i){return op*Math.pow(2,(i-69)/12)}class S0 extends lo{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),r=e==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r+=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof S0&&this.fromType(this._val),Ts(this._val))return this._noArg();if(oo(this._val)&&Ts(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(al(this._val)){let t=0;for(const e in this._val)if(_e(this._val[e])){const s=this._val[e],r=new this.constructor(this.context,e).valueOf()*s;t+=r}return t}if(_e(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return oo(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class xs extends S0{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new xs(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),f=Math.round(r/s)*s-r;return r+f*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let l=1;l<9;l++){const u=Math.pow(2,l);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let s=e[0],r=new xs(this.context,e[0]).toSeconds();return e.forEach(l=>{const u=new xs(this.context,l).toSeconds();Math.abs(u-t)<Math.abs(r-t)&&(s=l,r=u)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const l=r.toString();return l.length>3&&(r=parseFloat(parseFloat(l).toFixed(3))),[s,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ig(this.toFrequency())}_now(){return this.context.now()}}function UD(i,t){return new xs(di(),i,t)}class Ss extends xs{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return zD()}static set A4(t){PD(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:Ss.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const r=HD[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?r:Ss.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r*=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new Ss(this.context,this.valueOf()*RS(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return Ig(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Ss.A4);let s=Math.round(12*e)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),VD[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return BD(t)}static ftom(t){return Ig(t)}}const HD={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},VD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Qu extends xs{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Vn extends lo{constructor(){super();const t=zt(Vn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:di()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return vD(t),new xs(this.context,t).toSeconds()}toFrequency(t){return new Ss(this.context,t).toFrequency()}toTicks(t){return new Qu(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{Ts(t[s])&&delete e[s]}),e}get(){const t=MD(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];_e(s)&&_e(s.value)&&_e(s.setValueAtTime)?t[e]=s.value:s instanceof Vn?t[e]=s._getPartialProperties(t[e]):Vs(s)||vr(s)||oo(s)||AS(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&_e(this[e])&&(this[e]&&_e(this[e].value)&&_e(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Vn?this[e].set(t[e]):this[e]=t[e])}),this}}class ap extends As{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,s){return es(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){const s=this._search(e);for(let r=s;r>=0;r--){const l=this._timeline[r];if(l.state===t)return l}}getNextState(t,e){const s=this._search(e);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const l=this._timeline[r];if(l.state===t)return l}}}class ve extends Vn{constructor(){const t=zt(ve.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,$t(_e(t.param)&&(hl(t.param)||t.param instanceof ve),"param must be an AudioParam");!hl(t.param);)t.param=t.param._param;this._swappable=_e(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new As(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,_e(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Vn.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return _e(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return _e(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return _e(this.maxValue)&&_e(this.minValue)&&es(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?ID(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?ND(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),r=this._fromType(t);return $t(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),r=this._events.get(e);let l=this._initialValue;if(r===null)l=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(r.time);let f;u===null?f=this._initialValue:f=u.value,r.type==="setTargetAtTime"&&(l=this._exponentialApproach(r.time,f,r.value,r.constant,e))}else if(s===null)l=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=r.value;if(r.type==="setTargetAtTime"){const f=this._events.getBefore(r.time);f===null?u=this._initialValue:u=f.value}s.type==="linearRampToValueAtTime"?l=this._linearInterpolate(r.time,u,s.time,s.value,e):l=this._exponentialInterpolate(r.time,u,s.time,s.value,e)}else l=r.value;return this._toType(l)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),r=this.toSeconds(e);return $t(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=Us(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(e);return $t(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+s*.9),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const r=this._fromType(t);$t(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(e);return this._assertRange(r),$t(isFinite(r)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:l,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,l,s),this._param.setTargetAtTime(r,l,s),this}setValueCurveAtTime(t,e,s,r=1){s=this.toSeconds(s),e=this.toSeconds(e);const l=this._fromType(t[0])*r;this.setValueAtTime(this._toType(l),e);const u=s/(t.length-1);for(let f=1;f<t.length;f++){const p=this._fromType(t[f])*r;this.linearRampToValueAtTime(this._toType(p),e+f*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return $t(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));$t(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const r=this._events.get(e),l=this._events.getAfter(e);return r&&Us(r.time,e)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),e):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),l=r?r.time:e+2,u=(l-e)/10;for(let f=e;f<l;f+=u)t.linearRampToValueAtTime(this.getValueAtTime(f),f)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){$t(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,r,l){return s+(e-s)*Math.exp(-(l-t)/r)}_linearInterpolate(t,e,s,r,l){return e+(r-e)*((l-t)/(s-t))}_exponentialInterpolate(t,e,s,r,l){return e*Math.pow(r/e,(l-t)/(s-t))}}class Bt extends Vn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return _e(this.input)?hl(this.input)||this.input instanceof ve?1:this.input.numberOfInputs:0}get numberOfOutputs(){return _e(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return _e(t)&&(t instanceof Bt||na(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();$t(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return js(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return b0("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return NS(this,t,e,s),this}chain(...t){return ia(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),_e(this.input)&&(this.input instanceof Bt?this.input.dispose():na(this.input)&&this.input.disconnect()),_e(this.output)&&(this.output instanceof Bt?this.output.dispose():na(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ia(...i){const t=i.shift();i.reduce((e,s)=>(e instanceof Bt?e.connect(s):na(e)&&js(e,s),s),t)}function js(i,t,e=0,s=0){for($t(_e(i),"Cannot connect from undefined node"),$t(_e(t),"Cannot connect to undefined node"),(t instanceof Bt||na(t))&&$t(t.numberOfInputs>0,"Cannot connect to node with no inputs"),$t(i.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Bt||t instanceof ve;)_e(t.input)&&(t=t.input);for(;i instanceof Bt;)_e(i.output)&&(i=i.output);hl(t)?i.connect(t,e):i.connect(t,e,s)}function NS(i,t,e=0,s=0){if(_e(t))for(;t instanceof Bt;)t=t.input;for(;!na(i);)_e(i.output)&&(i=i.output);hl(t)?i.disconnect(t,e):na(t)?i.disconnect(t,e,s):i.disconnect()}class ae extends Bt{constructor(){const t=zt(ae.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ve({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),ge(this,"gain")}static getDefaults(){return Object.assign(Bt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ac extends Bt{constructor(t){super(t),this.onended=we,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ae({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Bt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:we})}_startGain(t,e=1){$t(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){$t(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==we&&(this.onended(this),this.onended=we,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),$t(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=we,this}}class T0 extends Ac{constructor(){const t=zt(T0.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),js(this._source,this._gainNode),this.offset=new ve({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Ac.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ce extends Bt{constructor(){const t=zt(Ce.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new T0({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Bt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return lp(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,r){return this._param.setValueCurveAtTime(t,e,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function lp(i,t,e,s){(t instanceof ve||hl(t)||t instanceof Ce&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ce&&(t.overridden=!0)),js(i,t,e,s)}class A0 extends ve{constructor(){const t=zt(A0.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new As(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ve.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const r=this._fromType(t),l=this._events.get(e),u=Math.round(Math.max(1/s,1));for(let f=0;f<=u;f++){const p=s*f+e,m=this._exponentialApproach(l.time,l.value,r,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const r=this._events.get(s),l=this._events.previousEvent(r),u=this._getTicksUntilEvent(l,s);return r.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const r=this._events.get(s),l=this._events.previousEvent(r),u=this._getTicksUntilEvent(l,s);return r.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),r=this._events.get(e),l=Math.round(Math.max((e-r.time)*10,1)),u=(e-r.time)/l;for(let f=0;f<=l;f++){const p=u*f+r.time,m=this._exponentialInterpolate(r.time,r.value,e,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ts(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(e));const l=this._events.get(e);return l&&l.time===e&&l.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&s.type==="linearRampToValueAtTime"&&e.value!==s.value){const r=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-e.time),f=Math.sqrt(Math.pow(r,2)-2*u*(e.ticks-t)),p=(-r+f)/u,m=(-r-f)/u;return(p>0?p:m)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),r=this.toSeconds(t),l=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-l}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class E0 extends Ce{constructor(){const t=zt(E0.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new A0({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ce.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class C0 extends Vn{constructor(){const t=zt(C0.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new ap,this._tickOffset=new As,this._ticksAtTime=new As,this._secondsAtTime=new As,this.frequency=new E0({context:this.context,units:t.units,value:t.frequency}),ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Vn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),_e(e)&&this.setTicksAtTime(e,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),r=this._ticksAtTime.get(e),l={state:"paused",time:e};this._state.add(l);let u=r||s,f=r?r.ticks:0,p=null;return this._state.forEachBetween(u.time,e+this.sampleTime,m=>{let v=u.time;const y=this._tickOffset.get(m.time);y&&y.time>=u.time&&(f=y.ticks,v=y.time),u.state==="started"&&m.state!=="started"&&(f+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(v),m.time!==l.time&&(p={state:m.state,time:m.time,ticks:f})),u=m}),this._state.remove(l),p&&this._ticksAtTime.add(p),f}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);const r=this._secondsAtTime.get(t);let l=r||e,u=r?r.seconds:0,f=null;return this._state.forEachBetween(l.time,t+this.sampleTime,p=>{let m=l.time;const v=this._tickOffset.get(p.time);v&&v.time>=l.time&&(u=v.seconds,m=v.time),l.state==="started"&&p.state!=="started"&&(u+=p.time-m,p.time!==s.time&&(f={state:p.state,time:p.time,seconds:u})),l=p}),this._state.remove(s),f&&this._secondsAtTime.add(f),u}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),r=this._state.get(e),l=Math.max(s.time,r.time),u=this.frequency.getTicksAtTime(l)+t-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,s){let r=this._state.get(t);this._state.forEachBetween(t,e,u=>{r&&r.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),u.time-this.sampleTime,s),r=u});let l=null;if(r&&r.state==="started"){const u=Math.max(r.time,t),f=this.frequency.getTicksAtTime(u),p=this.frequency.getTicksAtTime(r.time),m=f-p;let v=Math.ceil(m)-m;v=Us(v,1)?0:v;let y=this.frequency.getTimeOfTick(f+v);for(;y<e;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(w){l=w;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class cp extends Vn{constructor(){const t=zt(cp.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=we,this._lastUpdate=0,this._state=new ap("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new C0({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ge(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Vn.getDefaults(),{callback:we,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){ES(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,e,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Eh.mixin(cp);class rh extends Bt{constructor(){const t=zt(rh.getDefaults(),arguments,["delayTime","maxDelay"]);super(t),this.name="Delay";const e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new ve({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),ge(this,"delayTime")}static getDefaults(){return Object.assign(Bt.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Ic extends Bt{constructor(){const t=zt(Ic.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new ae({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,ge(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class L0 extends Bt{constructor(){const t=zt(L0.getDefaults(),arguments);super(t),this.name="Destination",this.input=new Ic({context:this.context}),this.output=new ae({context:this.context}),this.volume=this.input.volume,ia(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),ia(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ip(i=>{i.destination=new L0({context:i})});sp(i=>{i.destination.dispose()});class qD extends Bt{constructor(){super(...arguments),this.name="Listener",this.positionX=new ve({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ve({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ve({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ve({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ve({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ve({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ve({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ve({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ve({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Bt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ip(i=>{i.listener=new qD({context:i})});sp(i=>{i.listener.dispose()});class M0 extends lo{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=zt(M0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const s=t.urls[e];this.add(e,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:we,onload:we,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return $t(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=we,r=we){return oo(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Ge(this.baseUrl+e,s,r))):this._buffers.set(t.toString(),new Ge(e,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class ms extends Qu{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class jD extends Vn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new As,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ip(i=>{i.draw=new jD({context:i})});sp(i=>{i.draw.dispose()});class GD extends lo{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){$t(_e(t.time),"Events must have a time property"),$t(_e(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new ZD(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let s,r=null;if(e>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let r=1;r<e.length;r++)e[r].low>s.low&&(s=e[r]);return s.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}forEachFrom(t,e){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class ZD{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class WD extends lo{constructor(t){super(),this.name="TimelineValue",this._timeline=new As({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class br extends Bt{constructor(){super(zt(br.getDefaults(),arguments,["context"]))}connect(t,e=0,s=0){return lp(this,t,e,s),this}}class Nc extends br{constructor(){const t=zt(Nc.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Vs(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):yD(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ce.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let r=0,l=e;r<l;r++){const u=r/(l-1)*2-1;s[r]=t(u,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(s=>s.includes(t));$t(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class up extends br{constructor(){const t=zt(up.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Nc({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(br.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class sa{constructor(t,e){this.id=sa._eventId++,this._remainderTime=0;const s=Object.assign(sa.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:we,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}sa._eventId=0;class k0 extends sa{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(k0.getDefaults(),e);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},sa.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return zd(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ms(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){zd(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ms(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);Tc(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class hp extends Vn{constructor(){const t=zt(hp.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new WD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new As,this._repeatedEvents=new GD,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new cp({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),ge(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Vn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const s=e%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new ms(this.context,this._swingTicks*2/3).toSeconds()*r}gx(!0),this._timeline.forEachAtTime(e,s=>s.invoke(t)),gx(!1)}schedule(t,e){const s=new sa(this,{callback:t,time:new Qu(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,r=1/0){const l=new k0(this,{callback:t,duration:new xs(this.context,r).toTicks(),interval:new xs(this.context,e).toTicks(),time:new Qu(this.context,s).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(t,e){const s=new sa(this,{callback:t,once:!0,time:new Qu(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new ms(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let s;return _e(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Vs(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new xs(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new xs(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new ms(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new ms(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(e),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e),l=e+r;this.emit("stop",l),this._clock.setTicksAtTime(t,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),s=this.getTicksAtTime(e),r=t-s%t;return this._clock.nextTickTime(r,e)}}syncSignal(t,e){const s=this.now();let r=this.bpm,l=1/(60/r.getValueAtTime(s)/this.PPQ),u=[];if(t.units==="time"){const p=.015625/l,m=new ae(p),v=new up(-1),y=new ae(p);r.chain(m,v,y),r=y,l=1/l,u=[m,v,y]}e||(t.getValueAtTime(s)!==0?e=t.getValueAtTime(s)/l:e=0);const f=new ae(e);return r.connect(f),f.connect(t._param),u.push(f),this._syncedSignals.push({initial:t.value,nodes:u,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),x0(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Eh.mixin(hp);ip(i=>{i.transport=new hp({context:i})});sp(i=>{i.transport.dispose()});class qn extends Bt{constructor(t){super(t),this.input=void 0,this._state=new ap("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=we,this._syncedStop=we,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ic({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,ge(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,onstop:we,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let r=Ts(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")$t(Tc(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const l=this._state.get(r);l&&(l.offset=this.toSeconds(ll(e,0)),l.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(f=>{this._start(f,e,s)},r);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else ES(this.context),this._start(r,e,s);return this}stop(t){let e=Ts(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||_e(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(Tc(e,0)){const s=this._state.get(e);if(s&&s.state==="started"&&s.time!==e){const r=e-this.toSeconds(s.time);let l;s.duration&&(l=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,l)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=we,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Lh extends Ac{constructor(){const t=zt(Lh.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,js(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ve({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Ge(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ac.getDefaults(),{url:new Ge,loop:!1,loopEnd:0,loopStart:0,onload:we,onerror:we,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,r=1){$t(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(t);this._startGain(l,r),this.loop?e=ll(e,this.loopStart):e=ll(e,0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const f=this.toSeconds(this.loopEnd)||this.buffer.duration,p=this.toSeconds(this.loopStart),m=f-p;Rg(u,f)&&(u=(u-p)%m+p),Us(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,zd(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,u)),_e(s)){let f=this.toSeconds(s);f=Math.max(f,0),this.stop(l+f)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ra extends qn{constructor(){const t=zt(ra.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(qn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if($t(t in yx,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,this.state==="started")){const e=this.now();this._stop(e),this._start(e)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=yx[this._type];this._source=new Lh({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ac=44100*5,ng=2,Kr={brown:null,pink:null,white:null},yx={get brown(){if(!Kr.brown){const i=[];for(let t=0;t<ng;t++){const e=new Float32Array(ac);i[t]=e;let s=0;for(let r=0;r<ac;r++){const l=Math.random()*2-1;e[r]=(s+.02*l)/1.02,s=e[r],e[r]*=3.5}}Kr.brown=new Ge().fromArray(i)}return Kr.brown},get pink(){if(!Kr.pink){const i=[];for(let t=0;t<ng;t++){const e=new Float32Array(ac);i[t]=e;let s,r,l,u,f,p,m;s=r=l=u=f=p=m=0;for(let v=0;v<ac;v++){const y=Math.random()*2-1;s=.99886*s+y*.0555179,r=.99332*r+y*.0750759,l=.969*l+y*.153852,u=.8665*u+y*.3104856,f=.55*f+y*.5329522,p=-.7616*p-y*.016898,e[v]=s+r+l+u+f+p+m+y*.5362,e[v]*=.11,m=y*.115926}}Kr.pink=new Ge().fromArray(i)}return Kr.pink},get white(){if(!Kr.white){const i=[];for(let t=0;t<ng;t++){const e=new Float32Array(ac);i[t]=e;for(let s=0;s<ac;s++)e[s]=Math.random()*2-1}Kr.white=new Ge().fromArray(i)}return Kr.white}};function gl(i,t){return gn(this,void 0,void 0,function*(){const e=t/i.context.sampleRate,s=new rp(1,e,i.context.sampleRate);return new i.constructor(Object.assign(i.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class D0 extends Ac{constructor(){const t=zt(D0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],js(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new ve({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new ve({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ac.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class fn extends qn{constructor(){const t=zt(fn.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Ce({context:this.context,units:"frequency",value:t.frequency}),ge(this,"frequency"),this.detune=new Ce({context:this.context,units:"cents",value:t.detune}),ge(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(qn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),s=new D0({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return fn._periodicWaveCache.find(e=>e.phase===this._phase&&LD(e.partials,this._partials));{const t=fn._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(_e(s)){const{partials:r,wave:l}=s;this._wave=l,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,l]=this._getRealImaginary(t,this._phase),u=this.context.createPeriodicWave(r,l);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),fn._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),fn._periodicWaveCache.length>100&&fn._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){es(t,0);let e=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const r=new Float32Array(t);this._partials.forEach((l,u)=>r[u]=l),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,e){let r=2048;const l=new Float32Array(r),u=new Float32Array(r);let f=1;if(t==="custom"){if(f=this._partials.length+1,this._partialCount=this._partials.length,r=f,this._partials.length===0)return[l,u]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);p?(f=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),t=p[1],f=Math.max(f,2),r=f):this._partialCount=0,this._partials=[]}for(let p=1;p<r;++p){const m=2/(p*Math.PI);let v;switch(t){case"sine":v=p<=f?1:0,this._partials[p-1]=v;break;case"square":v=p&1?2*m:0,this._partials[p-1]=v;break;case"sawtooth":v=m*(p&1?1:-1),this._partials[p-1]=v;break;case"triangle":p&1?v=2*(m*m)*(p-1>>1&1?-1:1):v=0,this._partials[p-1]=v;break;case"custom":v=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}v!==0?(l[p]=-v*Math.sin(e*p),u[p]=v*Math.cos(e*p)):(l[p]=0,u[p]=0)}return[l,u]}_inverseFFT(t,e,s){let r=0;const l=t.length;for(let u=0;u<l;u++)r+=t[u]*Math.cos(u*s)+e[u]*Math.sin(u*s);return r}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,l=32;for(let u=0;u<l;u++)s=Math.max(this._inverseFFT(t,e,u/l*r),s);return _l(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return gn(this,arguments,void 0,function*(t=1024){return gl(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}fn._periodicWaveCache=[];class O0 extends br{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Nc({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class wr extends Ce{constructor(){const t=zt(wr.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ae({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ce.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class fp extends qn{constructor(){const t=zt(fp.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new O0({context:this.context}),this._modulationNode=new ae({context:this.context}),this._carrier=new fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new fn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new wr({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ge(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return gn(this,arguments,void 0,function*(t=1024){return gl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class dp extends qn{constructor(){const t=zt(dp.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new ae({context:this.context,gain:0}),this._carrier=new fn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ce({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new fn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new wr({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new wr({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ge(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return gn(this,arguments,void 0,function*(t=1024){return gl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Mh extends qn{constructor(){const t=zt(Mh.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new ae({context:this.context,gain:0}),this._thresh=new Nc({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Ce({context:this.context,units:"audioRange",value:t.width}),this._triangle=new fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ge(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(qn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return gn(this,arguments,void 0,function*(t=1024){return gl(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class pp extends qn{constructor(){const t=zt(pp.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ce({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ce({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,ge(this,["frequency","detune"])}static getDefaults(){return Object.assign(fn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,l)=>r.detune.value=e+s*l)}}get count(){return this._oscillators.length}set count(t){if(es(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new fn({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):we});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return gn(this,arguments,void 0,function*(t=1024){return gl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class mp extends qn{constructor(){const t=zt(mp.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new wr({context:this.context,value:2}),this._pulse=new Mh({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new fn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ge(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(qn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return gn(this,arguments,void 0,function*(t=1024){return gl(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const vx={am:fp,fat:pp,fm:dp,oscillator:fn,pulse:Mh,pwm:mp};class oa extends qn{constructor(){const t=zt(oa.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Ce({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ce({context:this.context,units:"cents",value:t.detune}),ge(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(fn.getDefaults(),dp.getDefaults(),fp.getDefaults(),pp.getDefaults(),Mh.getDefaults(),mp.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=vx[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof vx[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&vr(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&vr(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&oo(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return gn(this,arguments,void 0,function*(t=1024){return gl(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class R0 extends Ce{constructor(){super(zt(R0.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ae({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ia(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Ce.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class _p extends br{constructor(){const t=zt(_p.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new wr({context:this.context,value:t.max-t.min}),this._add=this.output=new R0({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(br.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class I0 extends br{constructor(){super(zt(I0.getDefaults(),arguments)),this.name="Zero",this._gain=new ae({context:this.context}),this.output=this._gain,this.input=void 0,js(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),NS(this.context.getConstant(0),this._gain),this}}class oh extends Bt{constructor(){const t=zt(oh.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ve.prototype._fromType,this._toType=ve.prototype._toType,this._is=ve.prototype._is,this._clampValue=ve.prototype._clampValue,this._oscillator=new fn(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new ae({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Ce({context:this.context,units:"audioRange",value:0}),this._zeros=new I0({context:this.context}),this._a2g=new O0({context:this.context}),this._scaler=this.output=new _p({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),ge(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(fn.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,s=this.max;this._units=t,this.min=e,this.max=s}get state(){return this._oscillator.state}connect(t,e,s){return(t instanceof ve||t instanceof Ce)&&(this.convert=t.convert,this.units=t.units),lp(this,t,e,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function zS(i,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(l){es(l,i,t),e.set(this,l)}})}}function co(i,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(l){es(this.toSeconds(l),i,t),e.set(this,l)}})}}class aa extends qn{constructor(){const t=zt(aa.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Ge({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(qn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:we,onerror:we,playbackRate:1,reverse:!1})}load(t){return gn(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=we){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){this._loop?e=ll(e,this._loopStart):e=ll(e,0);const r=this.toSeconds(e),l=s;s=ll(s,Math.max(this._buffer.duration-r,0));let u=this.toSeconds(s);u=u/this._playbackRate,t=this.toSeconds(t);const f=new Lh({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(f),this._loop&&Ts(l)?f.start(t,r):f.start(t,r,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&es(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&es(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Ws([co(0)],aa.prototype,"fadeIn",void 0);Ws([co(0)],aa.prototype,"fadeOut",void 0);class YD extends br{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Nc({context:this.context,mapping:t=>Math.abs(t)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ns extends Bt{constructor(){const t=zt(ns.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Ce({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Bt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(oo(t))return t;{let s;for(s in ad)if(ad[s][e]===t)return s;return t}}_setCurve(t,e,s){if(oo(s)&&Reflect.has(ad,s)){const r=ad[s];al(r)?t!=="_decayCurve"&&(this[t]=r[e]):this[t]=r}else if(Vs(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0){const f=1/r;r=(1-u)/f}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);let f=this._attackCurve;for(let p=1;p<f.length;p++)if(f[p-1]<=u&&u<=f[p]){f=this._attackCurve.slice(p),f[0]=u;break}this._sig.setValueCurveAtTime(f,t,r,e)}if(l&&this.sustain<1){const f=e*this.sustain,p=t+r;this.log("decay",p),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(f,l+p):this._sig.exponentialApproachValueAtTime(f,p,l)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):($t(Vs(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return lp(this,t,e,s),this}asArray(){return gn(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,s=new rp(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=r+this.toSeconds(this.release),u=l*.1,f=l+u,p=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/f,decay:e*this.toSeconds(this.decay)/f,release:e*this.toSeconds(this.release)/f,context:s}));return p._sig.toDestination(),p.triggerAttackRelease(e*(r+u)/f,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Ws([co(0)],ns.prototype,"attack",void 0);Ws([co(0)],ns.prototype,"decay",void 0);Ws([zS(0,1)],ns.prototype,"sustain",void 0);Ws([co(0)],ns.prototype,"release",void 0);const ad=(()=>{let t,e;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const r=[],l=6.4;for(t=0;t<127;t++){e=t/127;const w=Math.sin(e*(Math.PI*2)*l-Math.PI/2)+1;r[t]=w/10+e*.83}r[127]=1;const u=[],f=5;for(t=0;t<128;t++)u[t]=Math.ceil(t/127*f)/f;const p=[];for(t=0;t<128;t++)e=t/127,p[t]=.5*(1-Math.cos(Math.PI*e));const m=[];for(t=0;t<128;t++){e=t/127;const w=Math.pow(e,3)*4+.2,T=Math.cos(w*Math.PI*2*e);m[t]=Math.abs(T*(1-e))}function v(w){const T=new Array(w.length);for(let x=0;x<w.length;x++)T[x]=1-w[x];return T}function y(w){return w.slice(0).reverse()}return{bounce:{In:v(m),Out:m},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:v(r)},sine:{In:p,Out:v(p)},step:{In:u,Out:v(u)}}})();class la extends Bt{constructor(){const t=zt(la.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new Ic({context:this.context,volume:t.volume}),this.volume=this._volume.volume,ge(this,"volume")}static getDefaults(){return Object.assign(Bt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const l=r[e],u=this.context.transport.schedule(f=>{r[e]=f,s.apply(this,r)},l);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,s,r){const l=this.toSeconds(s),u=this.toSeconds(e);return this.triggerAttack(t,l,r),this.triggerRelease(l+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ri extends la{constructor(){const t=zt(Ri.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(la.getDefaults(),{detune:0,onsilence:we,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),r=t instanceof Ss?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,l,s)}else this.frequency.setValueAtTime(r,s);return this}}Ws([co(0)],Ri.prototype,"portamento",void 0);class gp extends ns{constructor(){super(zt(gp.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ae({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class $i extends Ri{constructor(){const t=zt($i.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new oa(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new gp(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),ge(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ri.getDefaults(),{envelope:Object.assign(ws(ns.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ws(oa.getDefaults(),[...Object.keys(qn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ah extends Ri{constructor(){const t=zt(ah.getDefaults(),arguments);super(t),this.name="ModulationSynth",this._carrier=new $i({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new $i({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Ce({context:this.context,units:"frequency"}),this.detune=new Ce({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new wr({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new ae({context:this.context,gain:0}),ge(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Ri.getDefaults(),{harmonicity:3,oscillator:Object.assign(ws(oa.getDefaults(),[...Object.keys(qn.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(ws(ns.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(ws(oa.getDefaults(),[...Object.keys(qn.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(ws(ns.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class tl extends ah{constructor(){super(zt(tl.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new O0({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Pd extends Bt{constructor(){const t=zt(Pd.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ve({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new ve({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new ve({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new ve({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(Bt.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){$t(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let u=0;u<t;u++){const p=Math.pow(u/t,2)*19980+20;e[u]=p}const s=new Float32Array(t),r=new Float32Array(t),l=this.context.createBiquadFilter();return l.type=this.type,l.Q.value=this.Q.value,l.frequency.value=this.frequency.value,l.gain.value=this.gain.value,l.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Bd extends Bt{constructor(){const t=zt(Bd.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this._filters=[],this._filters=[],this.Q=new Ce({context:this.context,units:"positive",value:t.Q}),this.frequency=new Ce({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ce({context:this.context,units:"cents",value:t.detune}),this.gain=new Ce({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,ge(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){$t(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(s=>s.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const e=vr(t)?t:parseInt(t,10),s=[-12,-24,-48,-96];let r=s.indexOf(e);$t(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(l=>l.disconnect()),this._filters=new Array(r);for(let l=0;l<r;l++){const u=new Pd({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[l]=u}this._internalChannels=this._filters,ia(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new Pd({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{e.getFrequencyResponse(t).forEach((l,u)=>s[u]*=l)}),e.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),x0(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Ud extends ns{constructor(){const t=zt(Ud.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="FrequencyEnvelope",this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new up({context:this.context,value:t.exponent}),this._scale=this.output=new _p({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ns.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);es(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class sl extends Ri{constructor(){const t=zt(sl.getDefaults(),arguments);super(t),this.name="MonoSynth",this.oscillator=new oa(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Bd(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Ud(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new gp(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),ge(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Ri.getDefaults(),{envelope:Object.assign(ws(ns.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ws(Bd.getDefaults(),Object.keys(Bt.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ws(Ud.getDefaults(),Object.keys(Bt.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ws(oa.getDefaults(),Object.keys(qn.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Fu extends Ri{constructor(){const t=zt(Fu.getDefaults(),arguments);super(t),this.name="DuoSynth",this.voice0=new sl(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new sl(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new wr({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new oh({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new ae({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Ce({context:this.context,units:"frequency",value:440}),this.detune=new Ce({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),ge(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return gr(Ri.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:gr(ws(sl.getDefaults(),Object.keys(Ri.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:gr(ws(sl.getDefaults(),Object.keys(Ri.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Ku extends ah{constructor(){const t=zt(Ku.getDefaults(),arguments);super(t),this.name="FMSynth",this.modulationIndex=new wr({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(ah.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class kh extends $i{constructor(){const t=zt(kh.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,ge(this,["oscillator","envelope"])}static getDefaults(){return gr(Ri.getDefaults(),$i.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),r=this.toFrequency(t instanceof Ss?t.toFrequency():t),l=r*this.octaves;return this.oscillator.frequency.setValueAtTime(l,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Ws([zS(0)],kh.prototype,"octaves",void 0);Ws([co(0)],kh.prototype,"pitchDecay",void 0);const N0=new Set;function z0(i){N0.add(i)}function PS(i,t){const e=`registerProcessor("${i}", ${t})`;N0.add(e)}function XD(){return Array.from(N0).join(`
`)}class QD extends Bt{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=we;const e=URL.createObjectURL(new Blob([XD()],{type:"text/javascript"})),s=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(s,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const FD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;z0(FD);const KD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;z0(KD);const JD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;z0(JD);const BS="feedback-comb-filter",$D=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;PS(BS,$D);class P0 extends QD{constructor(){const t=zt(P0.getDefaults(),arguments,["delayTime","resonance"]);super(t),this.name="FeedbackCombFilter",this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this.delayTime=new ve({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new ve({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),ge(this,["resonance","delayTime"])}_audioWorkletName(){return BS}static getDefaults(){return Object.assign(Bt.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){ia(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const s=t.parameters.get("feedback");this.resonance.setParam(s)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class B0 extends Bt{constructor(){const t=zt(B0.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OnePoleFilter",this._frequency=t.frequency,this._type=t.type,this.input=new ae({context:this.context}),this.output=new ae({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Bt.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),s=1/(2*Math.PI*e);if(this._type==="lowpass"){const r=1/(s*this.context.sampleRate),l=r-1;this._filter=this.context.createIIRFilter([r,0],[1,l])}else{const r=1/(s*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,r])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let l=0;l<t;l++){const f=Math.pow(l/t,2)*19980+20;e[l]=f}const s=new Float32Array(t),r=new Float32Array(t);return this._filter.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class U0 extends Bt{constructor(){const t=zt(U0.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(t),this.name="LowpassCombFilter",this._combFilter=this.output=new P0({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new B0({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Bt.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class H0 extends la{constructor(){const t=zt(H0.getDefaults(),arguments);super(t),this.name="PluckSynth",this._noise=new ra({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new U0({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return gr(la.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const s=this.toFrequency(t);e=this.toSeconds(e);const r=1/s;return this._lfcf.delayTime.setValueAtTime(r,e),this._noise.start(e),this._noise.stop(e+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class yp extends la{constructor(){const t=zt(yp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if($t(rd(s)||vr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),rd(s)){const l=new Ss(this.context,s).toMidi();e[l]=t.urls[s]}else vr(r)&&isFinite(r)&&(e[r]=t.urls[r])}),this._buffers=new M0({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(la.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:we,onerror:we,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const l=IS(new Ss(this.context,r).toFrequency()),u=Math.round(l),f=l-u,p=this._findClosest(u),m=u-p,v=this._buffers.get(m),y=RS(p+f),w=new Lh({url:v,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);w.start(e,0,v.duration/y,s),Vs(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(w),w.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const T=this._activeSources.get(u),x=T.indexOf(w);x!==-1&&T.splice(x,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new Ss(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const l=this._activeSources.get(r);e=this.toSeconds(e),l.forEach(u=>{u.stop(e)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,r=1){const l=this.toSeconds(s);return this.triggerAttack(t,l,r),Vs(e)?($t(Vs(t),"notes must be an array when duration is array"),t.forEach((u,f)=>{const p=e[Math.min(f,e.length-1)];this.triggerRelease(u,l+this.toSeconds(p))})):this.triggerRelease(t,l+this.toSeconds(e)),this}add(t,e,s){if($t(rd(t)||isFinite(t),`note must be a pitch or midi: ${t}`),rd(t)){const r=new Ss(this.context,t).toMidi();this._buffers.add(r,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}Ws([co(0)],yp.prototype,"attack",void 0);Ws([co(0)],yp.prototype,"release",void 0);class V0 extends Vn{constructor(){const t=zt(V0.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new ap("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Vn.getDefaults(),{callback:we,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let s;if(e.state==="started"){e.id!==-1&&this.context.transport.clear(e.id);const r=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||vr(this._loop)&&this._loop>1){s=1/0,vr(this._loop)&&(s=this._loop*this._getLoopDuration());const l=this._state.getAfter(r);l!==null&&(s=Math.min(s,l.time-r)),s!==1/0&&(s=new ms(this.context,s));const u=new ms(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new ms(this.context,r),s)}else e.id=this.context.transport.schedule(this._tick.bind(this),new ms(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return this._state.getValueAtTime(e)==="stopped"&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if(this._state.getValueAtTime(e)==="started"){this._state.setStateAtTime("stopped",e,{id:-1});const s=this._state.getBefore(e);let r=e;s!==null&&(r=s.time),this._rescheduleEvents(r)}return this}cancel(t){t=ll(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,s=>{this.context.transport.clear(s.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(e)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;AS(this.humanize)||(s=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*s}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new ms(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new ms(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(e!==null&&e.state==="started"){const s=this._getLoopDuration();return(t-e.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ca extends Vn{constructor(){const t=zt(ca.getDefaults(),arguments,["callback","interval"]);super(t),this.name="Loop",this._event=new V0({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(Vn.getDefaults(),{interval:"4n",callback:we,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(t){t===1/0?this._event.loop=!0:this._event.loop=t}dispose(){return super.dispose(),this._event.dispose(),this}}function*tO(i){let t=0;for(;t<i;)t=_l(t,0,i-1),yield t,t++}function*eO(i){let t=i-1;for(;t>=0;)t=_l(t,0,i-1),yield t,t--}function*ju(i,t){for(;;)yield*t(i)}function*bx(i,t){let e=t?0:i-1;for(;;)e=_l(e,0,i-1),yield e,t?(e++,e>=i-1&&(t=!1)):(e--,e<=0&&(t=!0))}function*nO(i){let t=0,e=0;for(;t<i;)t=_l(t,0,i-1),yield t,e++,t+=e%2?2:-1}function*iO(i){let t=i-1,e=0;for(;t>=0;)t=_l(t,0,i-1),yield t,e++,t+=e%2?-2:1}function*sO(i){for(;;)yield Math.floor(Math.random()*i)}function*rO(i){const t=[];for(let e=0;e<i;e++)t.push(e);for(;t.length>0;){const e=t.splice(Math.floor(t.length*Math.random()),1);yield _l(e[0],0,i-1)}}function*oO(i){let t=Math.floor(Math.random()*i);for(;;)t===0?t++:t===i-1||Math.random()<.5?t--:t++,yield t}function*wx(i,t="up",e=0){switch($t(i>=1,"The number of values must be at least one"),t){case"up":yield*ju(i,tO);case"down":yield*ju(i,eO);case"upDown":yield*bx(i,!0);case"downUp":yield*bx(i,!1);case"alternateUp":yield*ju(i,nO);case"alternateDown":yield*ju(i,iO);case"random":yield*sO(i);case"randomOnce":yield*ju(i,rO);case"randomWalk":yield*oO(i)}}class Fi extends ca{constructor(){const t=zt(Fi.getDefaults(),arguments,["callback","values","pattern"]);super(t),this.name="Pattern",this.callback=t.callback,this._values=t.values,this._pattern=wx(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(ca.getDefaults(),{pattern:"up",values:[],callback:we})}_tick(t){const e=this._pattern.next();this._index=e.value,this._value=this._values[e.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=wx(this._values.length,this._type)}}class vp extends Bt{constructor(){const t=zt(vp.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new YD({context:this.context}),this.a=new ae({context:this.context,gain:0}),this.b=new ae({context:this.context,gain:0}),this.output=new ae({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Ce({context:this.context,units:"normalRange",value:t.fade}),ge(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",js(this._split,this.a.gain,0),js(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Bt.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Hd extends Bt{constructor(t){super(t),this.name="Effect",this._dryWet=new vp({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ae({context:this.context}),this.effectReturn=new ae({context:this.context}),this.input=new ae({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ge(this,"wet")}static getDefaults(){return Object.assign(Bt.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class q0 extends Bt{constructor(){const t=zt(q0.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ve({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",ge(this,"pan")}static getDefaults(){return Object.assign(Bt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const aO="bit-crusher",lO=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;PS(aO,lO);class bp extends Bt{constructor(){const t=zt(bp.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Bt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class zc extends Bt{constructor(){const t=zt(zc.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(Bt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class xx extends Bt{constructor(t){super(t),this.name="StereoEffect",this.input=new ae({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new vp({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new bp({context:this.context,channels:2}),this._merge=new zc({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),ge(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),ia(...t),js(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),ia(...t),js(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Bt.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Sx extends xx{constructor(t){super(t),this.feedback=new Ce({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new ae({context:this.context}),this._feedbackR=new ae({context:this.context}),this._feedbackSplit=new bp({context:this.context,channels:2}),this._feedbackMerge=new zc({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),ge(this,["feedback"])}static getDefaults(){return Object.assign(xx.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Ju extends Sx{constructor(){const t=zt(Ju.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new oh({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new oh({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new rh({context:this.context}),this._delayNodeR=new rh({context:this.context}),this.frequency=this._lfoL.frequency,ge(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(Sx.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return this._delayTime*1e3}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Tx extends Hd{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new ae({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,ge(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Hd.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class $u extends Tx{constructor(){const t=zt($u.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="FeedbackDelay",this._delayNode=new rh({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),ge(this,"delayTime")}static getDefaults(){return Object.assign(Tx.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class fr extends Hd{constructor(){const t=zt(fr.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=this.toSeconds(t.decay);es(e,.001),this._decay=e;const s=this.toSeconds(t.preDelay);es(s,0),this._preDelay=s,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Hd.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){t=this.toSeconds(t),es(t,.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){t=this.toSeconds(t),es(t,0),this._preDelay=t,this.generate()}generate(){return gn(this,void 0,void 0,function*(){const t=this.ready,e=new rp(2,this._decay+this._preDelay,this.context.sampleRate),s=new ra({context:e}),r=new ra({context:e}),l=new zc({context:e});s.connect(l,0,0),r.connect(l,0,1);const u=new ae({context:e}).toDestination();l.connect(u),s.start(0),r.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const f=e.render();return this.ready=f.then(we),yield t,this._convolver.buffer=(yield f).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class An extends Bt{constructor(){const t=zt(An.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new ae({context:this.context}),An._allSolos.has(this.context)||An._allSolos.set(this.context,new Set),An._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Bt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),An._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){An._soloed.has(this.context)||An._soloed.set(this.context,new Set),An._soloed.get(this.context).add(this)}_removeSolo(){An._soloed.has(this.context)&&An._soloed.get(this.context).delete(this)}_isSoloed(){return An._soloed.has(this.context)&&An._soloed.get(this.context).has(this)}_noSolos(){return!An._soloed.has(this.context)||An._soloed.has(this.context)&&An._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),An._allSolos.get(this.context).delete(this),this._removeSolo(),this}}An._allSolos=new Map;An._soloed=new Map;class j0 extends Bt{constructor(){const t=zt(j0.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new q0({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ic({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class yc extends Bt{constructor(){const t=zt(yc.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new An({solo:t.solo,context:this.context}),this._panVol=this.output=new j0({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ge(this,["pan","volume"])}static getDefaults(){return Object.assign(Bt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return yc.buses.has(t)||yc.buses.set(t,new ae({context:this.context})),yc.buses.get(t)}send(t,e=0){const s=this._getBus(t),r=new ae({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}yc.buses=new Map;function ig(){return di().now()}di().transport;function Jr(){return di().transport}const ps=di().destination;di().destination;function Ax(){return di().destination}di().listener;di().draw;di();const G0=[{id:"fm-synth",name:"FM Synth",defaultNote:"C4",create:()=>new Ku().toDestination()},{id:"am-synth",name:"AM Synth",defaultNote:"G4",create:()=>new tl().toDestination()},{id:"bass",name:"Bass",defaultNote:"C2",create:()=>new sl({oscillator:{type:"sawtooth"},envelope:{attack:.1,decay:.3,sustain:.3,release:.8}}).toDestination()},{id:"lead",name:"Lead",defaultNote:"C5",create:()=>new $i({oscillator:{type:"square"},envelope:{attack:.05,decay:.2,sustain:.2,release:.4}}).toDestination()},{id:"drum",name:"Drum Hit",defaultNote:"C3",create:()=>new kh().toDestination()},{id:"beat_loop",name:"Beat Loop",defaultNote:"C4",create:()=>{const i=new aa("https://tonejs.github.io/audio/drum-samples/loops/blueyellow.mp3").toDestination();return i.loop=!0,i}},{id:"organ_loop",name:"Organ Loop",defaultNote:"C4",create:()=>{const i=new aa("https://tonejs.github.io/audio/drum-samples/loops/organ-echo-chords.mp3").toDestination();return i.loop=!0,i}},{id:"combo_synth",name:"Combo Synth",defaultNote:"C4",create:()=>{const i=new Ku().toDestination(),t=new tl().toDestination(),e=new ca(r=>{i.triggerAttackRelease("D2","8n",r)},"4n").start(0),s=new ca(r=>{t.triggerAttackRelease("A2","8n",r)},"4n").start("8n");return[e,s]}},{id:"noise",name:"Noise",defaultNote:"D6",create:()=>new ra({type:"pink",volume:-15,fadeIn:.5,fadeOut:.5}).toDestination()},{id:"arp",name:"Arpeggiator",defaultNote:"C4",create:()=>{const i=new zc,t=new fr({wet:.3});i.chain(t,ps);const e=new $i({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(i,0,0),s=new $i({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(i,0,1),r=new Fi((u,f)=>{e.triggerAttackRelease(f,"8n",u)},["G2","D3","E2","A3"],"upDown"),l=new Fi((u,f)=>{s.triggerAttackRelease(f,"8n",u)},["G2","D3","E2","A3"],"upDown");return r.interval="4n",l.interval="4n",l.playbackRate=.985,r.start(0),l.start(0),[r,l]}},{id:"generative",name:"Self-Playing Generative",defaultNote:"C4",create:()=>{const i=new fr({wet:.9}),t=new $u("8n",.8),e=["C3","E3","G3","B3","D4","F#4","A4"];let s=0,r=0;const l=new $i({oscillator:{type:"triangle"},envelope:{attack:.01,decay:.3,sustain:.5,release:1},volume:-10,onsilence:()=>{s=(s+1)%e.length,s%4===0&&(r=Math.random()>.5?1:-1);let u=e[s];const f=parseInt(u.match(/\d+/)?.[0]||"3");u=(u.match(/[A-G]#?/)?.[0]||"C")+(f+r);const m=["8n","4n","16n"],v=m[Math.floor(Math.random()*m.length)];l.triggerAttackRelease(u,v),console.log(`Next note: ${u}, duration: ${v}`)}}).chain(i,t,ps);return l.triggerAttackRelease(e[0],"4n"),l}},{id:"dual_voices",name:"Dual Generative Voices",defaultNote:"C4",create:()=>{const i=new fr({wet:.99}),t=new $u("8n",.6),e=["C4","D4","E4","G4","A4"],s=["E3","G3","B3","D4"];let r=0,l=0;const u=new $i({oscillator:{type:"sine"},envelope:{attack:.04,decay:.2,sustain:.15,release:1},volume:-15,onsilence:()=>{l=(l+1)%s.length,f.triggerAttackRelease(s[l],"8n")}}).chain(t,ps),f=new Ku({harmonicity:3,modulationIndex:10,envelope:{attack:.01,decay:.5,sustain:.1,release:.5},volume:-3,onsilence:()=>{r=(r+1)%e.length,u.triggerAttackRelease(e[r],"4n")}}).chain(i,ps);return u.triggerAttackRelease(e[0],"4n"),[u,f]}},{id:"pattern_accent",name:"Pattern + Accent Hybrid",defaultNote:"C4",create:()=>{const i=new fr({wet:.8}),t=new $u("8n",.5),e=new H0({attackNoise:1,dampening:4e3,resonance:.9,volume:-10}).chain(i,t,ps),s=new Fi((p,m)=>{e.triggerAttackRelease(m,"8n",p)},["C3","E3","G3","B3"],"upDown");s.interval="8n",s.start(0);const r=["C3","D3","E3","G3","A3","E3"];let l=0;const u=new fr({wet:.99}),f=new $i({oscillator:{type:"custom",partials:[1,.5,1,1]},envelope:{attack:.01,decay:.3,sustain:.3,release:1.5},volume:-24,portamento:.05,onsilence:()=>{const p=["2n","4n","8n","16n"],m=p[Math.floor(Math.random()*p.length)],v=UD(m).toMilliseconds();setTimeout(()=>{l=Math.floor(Math.random()*r.length),f.triggerAttackRelease(r[l],"16n")},v)}}).chain(t,u,ps);return[s,f]}},{id:"tintinnabular",name:"Tintinnabular (Prt Style)",defaultNote:"C4",create:()=>{const i=new fr({wet:.6,decay:4}),t=new Ju({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new Fu({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-18}).chain(t,i,ps),s=new tl({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-16}).chain(t,i,ps),r=new Fi((u,f)=>{e.triggerAttackRelease(f,"4n",u)},["C3","E3","G3"],"up");r.interval="2n";const l=new Fi((u,f)=>{s.triggerAttackRelease(f,"2n",u)},["C4","D4","E4","F4","E4","D4"],"upDown");return l.interval="1n",r.start(0),l.start(0),[r,l]}},{id:"tintinnabular_harmony",name:"Tintinnabular Harmony (Thirds & Sixths)",defaultNote:"C4",create:()=>{const i=new fr({wet:.6,decay:4}),t=new Ju({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new Fu({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-20}).chain(t,i,ps),s=new tl({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-18}).chain(t,i,ps),r=new Fi((u,f)=>{e.triggerAttackRelease(f,"4n",u)},["E4","G4","B4"],"up");r.interval="2n";const l=new Fi((u,f)=>{s.triggerAttackRelease(f,"2n",u)},["A5","B5","C6","D6","C6","B5"],"upDown");return l.interval="1n",r.start("8n"),l.start("4n"),[r,l]}},{id:"tintinnabular_dissonance",name:"Tintinnabular Dissonance (Tension)",defaultNote:"C4",create:()=>{const i=new fr({wet:.3,decay:2}),t=new Ju({frequency:.5,delayTime:2,depth:.4,wet:.2}).start(),e=new Fu({vibratoAmount:.3,vibratoRate:4.5,harmonicity:1.2,voice0:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},voice1:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},volume:-19}).chain(t,i,ps),s=new tl({harmonicity:1.8,oscillator:{type:"sine"},envelope:{attack:.25,decay:.3,sustain:.7,release:2},modulation:{type:"sine"},modulationEnvelope:{attack:.4,decay:.4,sustain:.6,release:1.8},volume:-17}).chain(t,i,ps),r=new Fi((u,f)=>{e.triggerAttackRelease(f,"4n",u)},["Db4","F4","Ab4"],"up");r.interval="2n";const l=new Fi((u,f)=>{s.triggerAttackRelease(f,"2n",u)},["B5","C#6","F5","B5","F5","C#6"],"upDown");return l.interval="1n",r.start("16n"),l.start("8n."),[r,l]}}];function cO(i){return G0.find(t=>t.id===i)}const uO=({show:i,shapeId:t,position:e,onSoundSelect:s,onClose:r,selectedsoundId:l})=>{const u=f=>{s(f),r()};return i?Tt.jsxs("div",{style:{position:"absolute",left:e.x,top:e.y,backgroundColor:"white",border:"2px solid #333",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"200px",padding:"8px 0",fontFamily:"Arial, sans-serif"},children:[Tt.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #ddd",fontWeight:"bold",fontSize:"14px",color:"#333",backgroundColor:"#f8f8f8"},children:["Select Sound for ",t]}),Tt.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",overflowX:"hidden"},children:G0.map(f=>Tt.jsxs("button",{onClick:()=>u(f.id),style:{width:"100%",padding:"10px 12px",border:"none",backgroundColor:"white",textAlign:"left",cursor:"pointer",fontSize:"14px",color:"#333",transition:"background-color 0.2s",display:"block",position:"relative"},onMouseOver:p=>{p.target.style.backgroundColor="#e3f2fd",p.target.style.color="#1976d2"},onMouseOut:p=>{p.target.style.backgroundColor="white",p.target.style.color="#333"},children:[f.name,l===f.id&&Tt.jsx("span",{style:{position:"absolute",right:"12px",color:"#10b981",fontWeight:"bold",fontSize:"16px"},children:""})]},f.id))}),Tt.jsx("div",{style:{borderTop:"1px solid #ddd",padding:"8px"},children:Tt.jsx("button",{onClick:r,style:{width:"100%",padding:"8px",border:"1px solid #ccc",backgroundColor:"#f0f0f0",color:"#666",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseOver:f=>f.target.style.backgroundColor="#e0e0e0",onMouseOut:f=>f.target.style.backgroundColor="#f0f0f0",children:"Cancel"})})]}):null};class Mi{static instance;activeSounds=[];soundMap=new Map;isSyncingTransport=!1;static getInstance(){return Mi.instance||(Mi.instance=new Mi),Mi.instance}async playSingle(t,e){await od();const s=8e3,r=this.createSound(t);this.activeSounds.push(r),this.triggerSound(r,e),setTimeout(()=>{this.destroySound(r);const l=this.activeSounds.indexOf(r);l>-1&&this.activeSounds.splice(l,1)},s)}async playMultiple(t){await od(),this.stopAll();const e=t.map(({soundId:r,note:l})=>{const u=this.createSound(r);return this.activeSounds.push(u),{sound:u,note:l}}),s=ig()+.1;e.forEach(({sound:r,note:l})=>{this.triggerSound(r,l,s)})}async playMultipleWithVolume(t){await od();const e=new Set(t.map(r=>r.soundId)),s=[];for(const r of this.soundMap.keys())e.has(r)||s.push(r);s.forEach(r=>this.stopSound(r));for(const{soundId:r,note:l,volume:u}of t)if(this.soundMap.has(r)){const f=this.soundMap.get(r);this.setSoundGain(f,u)}else{const f=this.createSound(r);this.soundMap.set(r,f),this.activeSounds.push(f),this.setSoundGain(f,u,0);const p=ig()+.1;this.triggerSound(f,l,p)}}setSoundGain(t,e,s=.1){(Array.isArray(t)?t:[t]).forEach(l=>{if("volume"in l){const u=e<=0?-1/0:20*Math.log10(e);s>0?l.volume.rampTo(u,s):l.volume.value=u}})}async startSound(t,e="C4"){if(this.soundMap.has(t))return;await od();const s=this.createSound(t);this.soundMap.set(t,s),this.activeSounds.push(s),this.triggerSound(s,e)}stopSound(t){const e=this.soundMap.get(t);e&&(this.setSoundGain(e,0,.1),setTimeout(()=>{this.destroySound(e),this.soundMap.delete(t);const s=this.activeSounds.indexOf(e);s>-1&&this.activeSounds.splice(s,1)},150))}isSoundPlaying(t){return this.soundMap.has(t)}stopAll(){this.activeSounds.forEach(t=>{this.destroySound(t)}),this.activeSounds=[],this.soundMap.clear(),Jr().stop(),Jr().cancel(),Ax().volume.rampTo(-1/0,.1),setTimeout(()=>{Ax().volume.value=0},150)}createSound(t){const e=cO(t);return e?e.create():new $i().toDestination()}triggerSound(t,e,s){const r=Array.isArray(t)?t:[t],l=s||ig();r.forEach(u=>{u instanceof ca||u instanceof Fi?Jr().start():u instanceof aa?u.autostart=!0:u instanceof ra?u.start():this.isSynthInstrument(u)&&u.triggerAttackRelease(e,"8n",l)})}destroySound(t){(Array.isArray(t)?t:[t]).forEach(s=>{try{s instanceof ca||s instanceof Fi||s instanceof aa||s instanceof ra?s.stop():this.isSynthInstrument(s)&&(s.triggerRelease(),"onsilence"in s&&(s.onsilence=()=>{})),s.dispose()}catch(r){console.warn("Error disposing sound:",r)}})}isSynthInstrument(t){return"triggerAttackRelease"in t}syncTransportState(t){if(!this.isSyncingTransport){this.isSyncingTransport=!0;try{const e=Jr();e.bpm.value!==t.bpm&&(e.bpm.value=t.bpm),e.position!==t.position&&(e.position=t.position),t.isPlaying&&e.state!=="started"?e.start():!t.isPlaying&&e.state==="started"&&e.pause()}finally{this.isSyncingTransport=!1}}}getTransportState(t){const e=Jr();return{bpm:e.bpm.value,isPlaying:e.state==="started",position:e.position.toString(),lastUpdated:Date.now(),masterId:t}}initializeTransport(t=120){const e=Jr();e.bpm.value=t,e.loop=!1}startTransport(t){return this.isSyncingTransport||Jr().start(),this.getTransportState(t)}stopTransport(t){return this.isSyncingTransport||Jr().pause(),this.getTransportState(t)}setBPM(t,e){return this.isSyncingTransport||(Jr().bpm.value=t),this.getTransportState(e)}}const hO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",fO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let dO=cn.icon({iconUrl:hO,shadowUrl:fO,iconSize:[25,41],iconAnchor:[12,41]});cn.Marker.prototype.options.icon=dO;const pO=({connectedUsers:i,currentUserId:t,updateUserPosition:e,syncedShapes:s,addShape:r,updateShapeSound:l,updateShapeCoordinates:u,deleteShape:f,clearAllShapes:p,updateTransportState:m,initializeTransportIfNeeded:v,transportState:y,locationMode:w})=>{const T=Rt.useRef(null),x=Rt.useRef(null),[A]=Rt.useState([42.308606,-83.747036]),E=Rt.useRef(null),[O,U]=Rt.useState([]),D=Rt.useRef(new Map),Q=Rt.useRef(new Map),[I,H]=Rt.useState({show:!1,position:{x:0,y:0},shapeId:null,soundId:null}),[G,j]=Rt.useState(!1),[V,Z]=Rt.useState(!1),[Y,$]=Rt.useState(new Set);let{point:P}=Fo;const J=Rt.useRef(new Map),tt=Rt.useRef(!1),[B,W]=Rt.useState(!1),et=Rt.useRef(""),k=Rt.useRef(new Map),q=Rt.useRef(new Map),R=Rt.useRef(new Set),X=Rt.useRef(new Set),ot=Rt.useRef(0),dt=500,mt=Rt.useRef(r),_t=Rt.useRef(f),Ct=Rt.useRef(s);Rt.useEffect(()=>{mt.current=r,_t.current=f,Ct.current=s},[r,f,s]);const[Et,ne]=Rt.useState(!1),[Me,Re]=Rt.useState(120),[Fe,jn]=Rt.useState(!1),[ii,Dt]=Rt.useState(!1),Wt=(St,Lt)=>{D.current.set(St,Lt)},Ie=St=>{D.current.delete(St),U(Lt=>Lt.filter(Vt=>Vt!==St))},be=St=>{for(const[Lt,Vt]of D.current.entries())if(Vt.id===St)return Lt;return null};Rt.useEffect(()=>{if(!T.current||x.current)return;const St=cn.map(T.current,{maxZoom:23}).setView(A,13);cn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:23,maxNativeZoom:19}).addTo(St),cn.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:23,maxNativeZoom:19}).addTo(St);const Lt=new cn.FeatureGroup;St.addLayer(Lt);const Vt=new cn.Control.Draw({draw:{polyline:!1,marker:!1},edit:{featureGroup:Lt}});return St.addControl(Vt),cn.control.scale().addTo(St),x.current=St,E.current=Lt,St.on(cn.Draw.Event.CREATED,function(Mt){const It=Mt.layer,Ot=Mt.layerType;if(Ot==="marker")return;Lt.addLayer(It);const jt=si(It,Ot),Gt=ho(Ot,jt),Ft=mt.current(Ot,jt,null);k.current.set(Ft,It),q.current.set(It,Ft),R.current.add(Ft),X.current.add(Ft);const Ke={id:cn.stamp(It),type:Ot,coordinates:jt,soundId:null};(Gt instanceof Fo.Circle||Gt instanceof Fo.Polygon)&&(Wt(Gt,Ke),U(Je=>[...Je,Gt])),Gt!==null&&(It.on("click",function(Je){if(!x.current)return;const Bi=St.mouseEventToContainerPoint(Je.originalEvent),Nt=Ct.current.find(oi=>oi.id===Ft)?.soundId||null;H({show:!0,position:{x:Bi.x,y:Bi.y},shapeId:Ft,soundId:Nt})}),console.log("Shape created and synced:",Ft,Ot))}),St.on(cn.Draw.Event.DELETED,function(Mt){var It=Mt.layers;It.eachLayer(function(Ot){const jt=q.current.get(Ot);jt&&(_t.current(jt),k.current.delete(jt),q.current.delete(Ot),R.current.delete(jt),X.current.delete(jt),console.log("Shape deleted and synced:",jt));const Gt=cn.stamp(Ot),Ft=be(Gt);Ft&&Ie(Ft)})}),St.on("click",function(Mt){Mt.originalEvent.target.closest(".leaflet-interactive")||H(It=>({...It,show:!1}))}),()=>{x.current&&(x.current.remove(),x.current=null)}},[]);const oe=(St,Lt,Vt)=>{const Mt=Lt?"#3b82f6":"#10b981",It=Lt?"#fbbf24":"white",Ot=Lt&&Vt==="gps",jt=`
            <div style="position: relative;">
                <div style="
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    background-color: ${Mt};
                    border: 3px solid ${It};
                    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    color: white;
                    font-size: 14px;
                ">
                    ${St.substring(0,1).toUpperCase()}
                </div>
                ${Ot?`
                <div style="
                    position: absolute;
                    top: -4px;
                    right: -4px;
                    width: 14px;
                    height: 14px;
                    background-color: #22c55e;
                    border-radius: 50%;
                    border: 2px solid white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 8px;
                ">
                    
                </div>
                `:""}
                <div style="
                    position: absolute;
                    top: 35px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: rgba(0, 0, 0, 0.75);
                    color: white;
                    padding: 2px 6px;
                    border-radius: 3px;
                    font-size: 11px;
                    white-space: nowrap;
                    pointer-events: none;
                ">
                    ${St}${Lt?" (you)":""}${Ot?" ":""}
                </div>
            </div>
        `;return cn.divIcon({html:jt,className:"user-marker-icon",iconSize:[30,30],iconAnchor:[15,15]})};Rt.useEffect(()=>{if(!x.current)return;const St=x.current,Lt=J.current,Vt=new Set;i.forEach(Mt=>{Vt.add(Mt.id);const It=Mt.id===t,Ot=Mt.name||"Anonymous",jt=It&&w==="manual";let Gt=Lt.get(Mt.id);if(Gt)It&&tt.current||(Mt.position&&Gt.setLatLng([Mt.position.lat,Mt.position.lng]),Gt.setIcon(oe(Ot,It,w)),It&&(jt&&!Gt.dragging?.enabled()?Gt.dragging?.enable():!jt&&Gt.dragging?.enabled()&&Gt.dragging?.disable()));else{const Ft=Mt.position?[Mt.position.lat,Mt.position.lng]:[A[0],A[1]];Gt=cn.marker(Ft,{icon:oe(Ot,It,w),draggable:jt}).addTo(St),It&&(Gt.on("dragstart",()=>{tt.current=!0}),Gt.on("dragend",Ke=>{tt.current=!1;const Je=Ke.target.getLatLng();e(Je.lat,Je.lng)}),!Mt.position&&w==="manual"&&e(Ft[0],Ft[1])),Lt.set(Mt.id,Gt)}});for(const[Mt,It]of Lt.entries())Vt.has(Mt)||(St.removeLayer(It),Lt.delete(Mt))},[i,t,e,A,w]),Rt.useEffect(()=>{if(!x.current||!E.current)return;const St=x.current,Lt=E.current,Vt=new Set;s.forEach(Mt=>{if(Vt.add(Mt.id),X.current.has(Mt.id)&&(X.current.delete(Mt.id),console.log("Local shape confirmed by Automerge:",Mt.id)),R.current.has(Mt.id))return;let It=null;const Ot=Mt.coordinates;switch(Mt.type){case"circle":It=cn.circle(Ot.center,{radius:Ot.radius});break;case"rectangle":It=cn.rectangle(Ot);break;case"polygon":It=cn.polygon(Ot);break;case"circlemarker":It=cn.circleMarker(Ot.center,{radius:Ot.radius});break;default:console.log("Unknown shape type:",Mt.type);break}if(It){Lt.addLayer(It),k.current.set(Mt.id,It),q.current.set(It,Mt.id),R.current.add(Mt.id);const jt=ho(Mt.type,Ot);if(jt instanceof Fo.Circle||jt instanceof Fo.Polygon){const Ft={id:cn.stamp(It),type:Mt.type,coordinates:Ot,soundId:Mt.soundId};Wt(jt,Ft),U(Ke=>[...Ke,jt])}const Gt=Mt.id;It.on("click",function(Ft){if(!x.current)return;const Ke=St.mouseEventToContainerPoint(Ft.originalEvent),Bi=Ct.current.find(pn=>pn.id===Gt)?.soundId||null;H({show:!0,position:{x:Ke.x,y:Ke.y},shapeId:Gt,soundId:Bi})}),console.log("Synced shape from another user:",Mt.id,Mt.type)}});for(const[Mt,It]of k.current.entries())if(!Vt.has(Mt)&&!X.current.has(Mt)){Lt.removeLayer(It),k.current.delete(Mt),q.current.delete(It),R.current.delete(Mt);const Ot=cn.stamp(It),jt=be(Ot);jt&&Ie(jt),console.log("Removed shape (deleted by another user):",Mt)}},[s]),Rt.useEffect(()=>{if(!B)return;const St=Mi.getInstance();if(v()){console.log("Became transport master - initializing transport"),ne(!0),St.initializeTransport(120);const Vt=St.getTransportState(t);m(Vt),Re(Vt.bpm)}else console.log("Syncing to existing transport"),ne(!1),y&&(St.syncTransportState(y),Re(y.bpm))},[B,t,v,m]),Rt.useEffect(()=>{if(!B||!y||y.masterId===t)return;Mi.getInstance().syncTransportState(y),Re(y.bpm)},[y,B,t]);const xe=()=>{const St=i.find(jt=>jt.id===t);if(!St?.position)return null;const{lat:Lt,lng:Vt}=St.position,Mt=A[0],It=A[1],Ot=ri(Lt,Vt,Mt,It);return P(Ot.x,Ot.y)},nn=(()=>{const St=i.find(Lt=>Lt.id===t);return St?.position?`${St.position.lat},${St.position.lng}`:null})();Rt.useEffect(()=>{const St=Date.now();if(St-ot.current<dt){console.log("throttled...");return}if(ot.current=St,!B||O.length===0||!nn)return;const Lt=xe();if(!Lt)return;let Vt=new Fo.PlanarSet;O.forEach(Ft=>{Vt.add(Ft)});const Mt=Vt.hit(Lt),It=300,Ot=Ys({threshold:It}),jt=[];Mt.forEach(Ft=>{const Ke=D.current.get(Ft);if(Ke){let Je;for(const[Nt,oi]of k.current.entries())if(cn.stamp(oi)===Ke.id){Je=Nt;break}const pn=s.find(Nt=>Nt.id===Je)?.soundId;pn&&jt.push({soundId:pn,note:"C4",volume:1})}}),Ot&&Ot.length>0&&Ot.forEach(({shape:Ft,dist:Ke})=>{if(Mt.includes(Ft))return;const Je=D.current.get(Ft);if(Je){let Bi;for(const[oi,ma]of k.current.entries())if(cn.stamp(ma)===Je.id){Bi=oi;break}const Nt=s.find(oi=>oi.id===Bi)?.soundId;if(Nt){const oi=Math.max(0,1-Ke/It);jt.push({soundId:Nt,note:"C4",volume:oi})}}});const Gt=jt.map(Ft=>Ft.soundId).sort().join(",");if(Gt!==et.current){et.current=Gt;const Ft=Mi.getInstance();jt.length>0?(console.log("Updating sounds with volumes:",jt),Ft.playMultipleWithVolume(jt)):(console.log("Stopping all sounds"),Ft.stopAll())}else jt.length>0&&Mi.getInstance().playMultipleWithVolume(jt)},[B,nn,O,A,P,s]);const si=function(St,Lt){switch(Lt){case"marker":const Vt=St.getLatLng();return[Vt.lat,Vt.lng];case"circle":const Mt=St.getLatLng();return{center:[Mt.lat,Mt.lng],radius:St.getRadius()};case"rectangle":case"polygon":return St.getLatLngs()[0].map(Ot=>[Ot.lat,Ot.lng]);case"circlemarker":const It=St.getLatLng();return{center:[It.lat,It.lng],radius:St.getRadius()};default:return null}},_i=()=>{E.current&&(E.current.clearLayers(),U([]),D.current.clear(),Q.current.clear(),k.current.clear(),q.current.clear(),R.current.clear(),X.current.clear(),H(St=>({...St,show:!1})),p())},dn=()=>{let St=null;if(x.current){const Gt=x.current.getCenter(),Ft=x.current.getZoom();St={center:[Gt.lat,Gt.lng],zoom:Ft}}const Vt={shapes:Ct.current.map(Gt=>({id:Gt.id,type:Gt.type,coordinates:Gt.coordinates,soundId:Gt.soundId})),mapView:St},Mt=JSON.stringify(Vt,null,2),It=new Blob([Mt],{type:"application/json"}),Ot=URL.createObjectURL(It),jt=document.createElement("a");jt.href=Ot,jt.download="arrangement.json",document.body.appendChild(jt),jt.click(),document.body.removeChild(jt),URL.revokeObjectURL(Ot)},ho=(St,Lt)=>{const Vt=A[0],Mt=A[1];let{point:It,circle:Ot,Polygon:jt}=Fo;switch(St){case"marker":{const Gt=ri(Lt[0],Lt[1],Vt,Mt);return It(Gt.x,Gt.y)}case"circle":{const Gt=ri(Lt.center[0],Lt.center[1],Vt,Mt);return Ot(It(Gt.x,Gt.y),Lt.radius)}case"rectangle":{const Gt=[];Lt.forEach(Ke=>{const Je=ri(Ke[0],Ke[1],Vt,Mt);Gt.push(It(Je.x,Je.y))});const Ft=new jt;return Ft.addFace(Gt),Ft}case"polygon":{const Gt=[];Lt.forEach(Ke=>{const Je=ri(Ke[0],Ke[1],Vt,Mt);Gt.push(It(Je.x,Je.y))});const Ft=new jt;return Ft.addFace(Gt),Ft}case"circlemarker":{const Gt=ri(Lt.center[0],Lt.center[1],Vt,Mt);return Ot(It(Gt.x,Gt.y),Lt.radius)}default:throw new Error(`Unknown shape type: ${St}`)}},ri=(St,Lt,Vt,Mt)=>{const Ot=(St-Vt)*Math.PI/180,Gt=(Lt-Mt)*Math.PI/180*Math.cos(Vt*Math.PI/180)*6371e3,Ft=Ot*6371e3;return{x:Gt,y:Ft}},da=St=>{if(!St){console.log("no marker selected");return}if(O.length===0)return console.log("No shapes to check collisions"),[];let Lt=new Fo.PlanarSet;O.forEach(Mt=>{Lt.add(Mt)});const Vt=Lt.hit(St);return Vt.length>0?(console.log("get collisions output:",Vt),Vt):(console.log("no marker collisions"),null)},Ys=({threshold:St})=>{if(O.length===0)return console.log("No shapes to check collisions"),[];const Lt=xe();if(!Lt)return console.log("No user position available"),[];const Vt=da(Lt),Mt=O.filter(Ot=>!Vt?.includes(Ot)),It=[];return Mt.forEach(Ot=>{const jt=Lt.distanceTo(Ot)[0];St==null?It.push({shape:Ot,dist:jt}):jt<=St&&It.push({shape:Ot,dist:jt})}),It.sort((Ot,jt)=>Ot.dist-jt.dist),console.log(It),It},Pc=St=>{const Lt=St.target.files?.[0];if(!Lt)return;const Vt=new FileReader;Vt.onload=Mt=>{try{const It=JSON.parse(Mt.target?.result);if(It&&Array.isArray(It.shapes)){if(_i(),It.shapes.forEach(Ot=>{Ot.type!=="marker"&&mt.current(Ot.type,Ot.coordinates,Ot.soundId)}),It.mapView&&x.current){const{center:Ot,zoom:jt}=It.mapView;Array.isArray(Ot)&&Ot.length===2&&typeof Ot[0]=="number"&&typeof Ot[1]=="number"&&typeof jt=="number"&&x.current.setView([Ot[0],Ot[1]],jt)}console.log("Imported",It.shapes.length,"shapes to Automerge")}else Array.isArray(It)&&(console.log("Importing old format (no sound data)"),_i(),It.forEach(Ot=>{Ot.type&&Ot.coordinates&&mt.current(Ot.type,Ot.coordinates,null)}))}catch(It){console.log(It),alert("Invalid JSON file")}},Vt.readAsText(Lt),St.target.value=""},pa=St=>{const Lt=I.shapeId;Lt&&(l(Lt,St),console.log(`Synced sound "${St}" to shape ${Lt}`)),H(Vt=>({...Vt,soundId:St}))},bl=()=>{H({show:!1,position:{x:0,y:0},shapeId:null,soundId:null})},Bc=()=>{W(!0)},Es=()=>{W(!1),et.current="",Mi.getInstance().stopAll()},Cn=()=>{j(!G)},Pi=async St=>{const Lt=Mi.getInstance();Y.has(St)?(console.log(`Stopping debug instrument: ${St}`),Lt.stopSound(St),$(Vt=>{const Mt=new Set(Vt);return Mt.delete(St),Mt})):(console.log(`Starting debug instrument: ${St}`),await Lt.startSound(St,"C4"),$(Vt=>new Set(Vt).add(St)))},Gn=()=>{j(!1)},Er=()=>{jn(!1)},Uc=()=>{Dt(!1)},Hc=()=>{const Lt=Mi.getInstance().startTransport(t);m(Lt)},Cr=()=>{const Lt=Mi.getInstance().stopTransport(t);m(Lt)},Lr=St=>{const Vt=Mi.getInstance().setBPM(St,t);m(Vt),Re(St)};return Tt.jsxs("div",{style:{height:"100vh",width:"100vw",position:"relative"},children:[Tt.jsx("div",{ref:T,style:{height:"100%",width:"100%"}}),Tt.jsx("button",{onClick:()=>Dt(!ii),style:{position:"absolute",top:"600px",left:"10px",backgroundColor:"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:ii?" Hide Zones":" Zone Management"}),ii&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("div",{onClick:Uc,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Tt.jsxs("div",{style:{position:"absolute",top:"540px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Tt.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"12px",color:"#374151"},children:"Zone Management"}),Tt.jsx("button",{onClick:dn,style:{width:"100%",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",fontWeight:"500"},children:" Export Arrangement"}),Tt.jsxs("label",{htmlFor:"importArrangement",style:{display:"block",width:"100%",backgroundColor:"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",textAlign:"center",fontWeight:"500",boxSizing:"border-box"},children:[" Import Arrangement",Tt.jsx("input",{id:"importArrangement",type:"file",accept:"application/json",style:{display:"none"},onChange:Pc})]}),Tt.jsx("button",{onClick:_i,style:{width:"100%",backgroundColor:"#ef4444",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:" Clear Arrangement"})]})]}),Tt.jsx("button",{onClick:()=>Z(!V),style:{position:"absolute",bottom:"10px",right:"10px",backgroundColor:V?"#6b7280":"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:V?"hide experimental":"experimental"}),V&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("button",{onClick:Cn,style:{position:"absolute",bottom:"100px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"sound bank"}),Tt.jsx("button",{onClick:()=>Ys({threshold:100}),style:{position:"absolute",bottom:"55px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"get nearest (debug)"}),Tt.jsx("button",{onClick:Es,style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"#f63b3bff",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"stop all audio"})]}),G&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("div",{onClick:Gn,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Tt.jsxs("div",{style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",zIndex:1001,maxHeight:"300px",overflowY:"auto",minWidth:"200px"},children:[Tt.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #e5e5e5",fontWeight:"bold",color:"#111"},children:"Select sounds"}),G0.map(St=>{const Lt=Y.has(St.id);return Tt.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[Tt.jsxs("div",{style:{flex:1},children:[Tt.jsx("div",{style:{fontWeight:"500",color:"#111"},children:St.name}),Tt.jsxs("div",{style:{fontSize:"12px",color:"#1f34b8ff"},children:["ID: ",St.id]})]}),Tt.jsx("button",{onClick:()=>Pi(St.id),style:{padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",backgroundColor:Lt?"#ef4444":"#10b981",color:"white",transition:"all 0.2s",minWidth:"60px"},onMouseEnter:Vt=>{Vt.currentTarget.style.backgroundColor=Lt?"#dc2626":"#059669"},onMouseLeave:Vt=>{Vt.currentTarget.style.backgroundColor=Lt?"#ef4444":"#10b981"},children:Lt?" Stop":" Play"})]},St.id)})]})]}),Tt.jsx("button",{onClick:B?()=>jn(!Fe):Bc,style:{position:"absolute",top:"325px",left:"10px",backgroundColor:B?"#3b82f6":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:B?Fe?" Hide Transport":" Transport Controls":"Start Audio"}),Tt.jsx("button",{onClick:Es,disabled:!B,style:{position:"absolute",top:"360px",left:"10px",backgroundColor:B?"#f63b3bff":"#6b7280",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:B?"pointer":"not-allowed",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",opacity:B?1:.6},children:"Stop Audio"}),B&&Fe&&Tt.jsxs(Tt.Fragment,{children:[Tt.jsx("div",{onClick:Er,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Tt.jsxs("div",{style:{position:"absolute",top:"400px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Tt.jsxs("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[" Transport Controls",y?.masterId===t&&Tt.jsx("span",{style:{fontSize:"10px",backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Master"})]}),Tt.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[Tt.jsx("button",{onClick:Hc,disabled:y?.isPlaying,style:{flex:1,backgroundColor:y?.isPlaying?"#6b7280":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:y?.isPlaying?"not-allowed":"pointer",opacity:y?.isPlaying?.6:1,fontWeight:"600"},children:" Play"}),Tt.jsx("button",{onClick:Cr,disabled:!y?.isPlaying,style:{flex:1,backgroundColor:y?.isPlaying?"#ef4444":"#6b7280",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:y?.isPlaying?"pointer":"not-allowed",opacity:y?.isPlaying?1:.6,fontWeight:"600"},children:" Pause"})]}),Tt.jsxs("div",{style:{marginBottom:"4px"},children:[Tt.jsxs("label",{style:{fontSize:"11px",color:"#6b7280",display:"block",marginBottom:"4px",fontWeight:"500"},children:["Tempo: ",Me," BPM"]}),Tt.jsx("input",{type:"range",min:"60",max:"200",value:Me,onChange:St=>Lr(Number(St.target.value)),style:{width:"100%",cursor:"pointer"}}),Tt.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#9ca3af",marginTop:"2px"},children:[Tt.jsx("span",{children:"60"}),Tt.jsx("span",{children:"200"})]})]}),y&&Tt.jsxs("div",{style:{fontSize:"10px",color:"#9ca3af",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:["Position: ",y.position]})]})]}),Tt.jsx(uO,{show:I.show,shapeId:I.shapeId,position:I.position,onSoundSelect:pa,onClose:bl,selectedsoundId:I.soundId})]})},wp=Symbol.for("_am_meta"),lh=Symbol.for("_am_trace"),ch=Symbol.for("_am_objectId"),Z0=Symbol.for("_am_isProxy"),US=Symbol.for("_am_clearCache"),mO=Symbol.for("_am_uint"),_O=Symbol.for("_am_int"),gO=Symbol.for("_am_f64"),HS=Symbol.for("_am_counter"),VS=Symbol.for("_am_immutableString");class Ng{constructor(t){this.value=t||0,Reflect.defineProperty(this,HS,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(t){throw new Error("Counters should not be incremented outside of a change callback")}decrement(t){throw new Error("Counters should not be decremented outside of a change callback")}}class yO extends Ng{constructor(t,e,s,r,l){super(t),this.context=e,this.path=s,this.objectId=r,this.key=l}increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}}function vO(i,t,e,s,r){return new yO(i,t,e,s,r)}var qS;class jS{constructor(t){this[qS]=!0,this.val=t}toString(){return this.val}toJSON(){return this.val}}qS=VS;const bO=BigInt("9223372036854775807");function io(i){if(typeof i=="string"&&/^[0-9]+$/.test(i)&&(i=parseInt(i,10)),typeof i!="number")return i;if(i<0||isNaN(i)||i===1/0||i===-1/0)throw new RangeError("A list index must be positive, but you passed "+i);return i}function Qi(i,t){const{context:e,objectId:s,path:r}=i,l=e.getWithType(s,t);if(l===null)return;const u=l[0],f=l[1];switch(u){case void 0:return;case"map":return Dh(e,f,[...r,t]);case"list":return Sp(e,f,[...r,t]);case"text":return e.text(f);case"str":return new jS(f);case"uint":return f;case"int":return f;case"f64":return f;case"boolean":return f;case"null":return null;case"bytes":return f;case"timestamp":return f;case"counter":return vO(f,e,r,s,t);default:throw RangeError(`datatype ${u} unimplemented`)}}function Vd(i,t,e){const s=typeof i;switch(s){case"object":if(i==null)return[null,"null"];if(i[mO])return[i.value,"uint"];if(i[_O])return[i.value,"int"];if(i[gO])return[i.value,"f64"];if(i[HS])return[i.value,"counter"];if(i instanceof Date)return[i.getTime(),"timestamp"];if(GS(i))return[i.toString(),"str"];if(i instanceof Uint8Array)return[i,"bytes"];if(i instanceof Array)return[i,"list"];if(Object.prototype.toString.call(i)==="[object Object]")return[i,"map"];throw xp(i,e)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${i}`);case"boolean":return[i,"boolean"];case"bigint":return i>bO?[i,"uint"]:[i,"int"];case"number":return Number.isInteger(i)?[i,"int"]:[i,"f64"];case"string":return[i,"text"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${Ex(t)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${s} value at ${Ex(t)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${s} values are not. `].join(""))}}function xp(i,t){var e,s;return i instanceof Date?!1:!!(i&&((s=(e=i[wp])===null||e===void 0?void 0:e.handle)===null||s===void 0?void 0:s.__wbg_ptr)===t.__wbg_ptr)}const wO={get(i,t){const{context:e,objectId:s,cache:r}=i;return t===Symbol.toStringTag?i[Symbol.toStringTag]:t===ch?s:t===Z0?!0:t===lh?i.trace:t===wp?{handle:e}:(r[t]||(r[t]=Qi(i,t)),r[t])},set(i,t,e){const{context:s,objectId:r,path:l}=i;if(i.cache={},xp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===lh)return i.trace=e,!0;if(t===US)return!0;const[u,f]=Vd(e,[...l,t],s);switch(f){case"list":{const p=s.putObject(r,t,[]),m=Sp(s,p,[...l,t]);for(let v=0;v<u.length;v++)m[v]=u[v];break}case"text":{s.putObject(r,t,u);break}case"map":{const p=s.putObject(r,t,{}),m=Dh(s,p,[...l,t]);for(const v in u)m[v]=u[v];break}default:s.put(r,t,u,f)}return!0},deleteProperty(i,t){const{context:e,objectId:s}=i;return i.cache={},e.delete(s,t),!0},has(i,t){return this.get(i,t)!==void 0},getOwnPropertyDescriptor(i,t){const e=this.get(i,t);if(typeof e<"u")return{configurable:!0,enumerable:!0,value:e}},ownKeys(i){const{context:t,objectId:e}=i,s=t.keys(e);return[...new Set(s)]}},xO={get(i,t){const{context:e,objectId:s}=i;return t=io(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?i[Symbol.toStringTag]:t===ch?s:t===Z0?!0:t===lh?i.trace:t===wp?{handle:e}:t==="length"?e.length(s):typeof t=="number"?Qi(i,t):TO(i)[t]},set(i,t,e){const{context:s,objectId:r,path:l}=i;if(t=io(t),xp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===US)return!0;if(t===lh)return i.trace=e,!0;if(typeof t=="string")throw new RangeError("list index must be a number");const[u,f]=Vd(e,[...l,t],s);switch(f){case"list":{let p;t>=s.length(r)?p=s.insertObject(r,t,[]):p=s.putObject(r,t,[]),Sp(s,p,[...l,t]).splice(0,0,...u);break}case"text":{t>=s.length(r)?s.insertObject(r,t,u):s.putObject(r,t,u);break}case"map":{let p;t>=s.length(r)?p=s.insertObject(r,t,{}):p=s.putObject(r,t,{});const m=Dh(s,p,[...l,t]);for(const v in u)m[v]=u[v];break}default:t>=s.length(r)?s.insert(r,t,u,f):s.put(r,t,u,f)}return!0},deleteProperty(i,t){const{context:e,objectId:s}=i;t=io(t);const r=e.get(s,t);if(r!=null&&r[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return e.delete(s,t),!0},has(i,t){const{context:e,objectId:s}=i;return t=io(t),typeof t=="number"?t<e.length(s):t==="length"},getOwnPropertyDescriptor(i,t){const{context:e,objectId:s}=i;return t==="length"?{writable:!0,value:e.length(s)}:t===ch?{configurable:!1,enumerable:!1,value:s}:(t=io(t),{configurable:!0,enumerable:!0,value:Qi(i,t)})},getPrototypeOf(i){return Object.getPrototypeOf(i)},ownKeys(){const i=[];return i.push("length"),i}};function Dh(i,t,e){const s={context:i,objectId:t,path:e||[],cache:{}},r={};return Object.assign(r,s),new Proxy(r,wO)}function Sp(i,t,e){const s={context:i,objectId:t,path:e||[],cache:{}},r=[];return Object.assign(r,s),new Proxy(r,xO)}function SO(i){return Dh(i,"_root",[])}function TO(i){const{context:t,objectId:e,path:s}=i;return{at(l){return Qi(i,l)},deleteAt(l,u){return typeof u=="number"?t.splice(e,l,u):t.delete(e,l),this},fill(l,u,f){const[p,m]=Vd(l,[...s,u],t),v=t.length(e);u=io(u||0),f=io(f||v);for(let y=u;y<Math.min(f,v);y++)m==="list"||m==="map"||m==="text"?t.putObject(e,y,p):t.put(e,y,p,m);return this},indexOf(l,u=0){const f=t.length(e);for(let p=u;p<f;p++){const m=t.getWithType(e,p);if(!m)continue;const[v,y]=m;if(!["map","list","text"].includes(v)){if(y===l)return p;continue}if(v==="text"&&typeof l=="string"&&l===Qi(i,p)||l[ch]===y)return p}return-1},insertAt(l,...u){return this.splice(l,0,...u),this},pop(){const l=t.length(e);if(l==0)return;const u=Qi(i,l-1);return t.delete(e,l-1),u},push(...l){const u=t.length(e);return this.splice(u,0,...l),t.length(e)},shift(){if(t.length(e)==0)return;const l=Qi(i,0);return t.delete(e,0),l},splice(l,u,...f){l=io(l),typeof u!="number"&&(u=t.length(e)-l),u=io(u);for(const v of f)if(xp(v,t))throw new RangeError("Cannot create a reference to an existing document object");const p=[];for(let v=0;v<u;v++){const y=Qi(i,l);y!==void 0&&p.push(y),t.delete(e,l)}const m=f.map((v,y)=>{try{return Vd(v,[...s],t)}catch(w){throw w instanceof RangeError?new RangeError(`${w.message} (at index ${y} in the input)`):w}});for(const[v,y]of m){switch(y){case"list":{const w=t.insertObject(e,l,[]);Sp(t,w,[...s,l]).splice(0,0,...v);break}case"text":{t.insertObject(e,l,v);break}case"map":{const w=t.insertObject(e,l,{}),T=Dh(t,w,[...s,l]);for(const x in v)T[x]=v[x];break}default:t.insert(e,l,v,y)}l+=1}return p},unshift(...l){return this.splice(0,0,...l),t.length(e)},entries(){let l=0;return{next:()=>{const f=Qi(i,l);return f===void 0?{value:void 0,done:!0}:{value:[l++,f],done:!1}},[Symbol.iterator](){return this}}},keys(){let l=0;const u=t.length(e);return{next:()=>l<u?{value:l++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let l=0;return{next:()=>{const f=Qi(i,l++);return f===void 0?{value:void 0,done:!0}:{value:f,done:!1}},[Symbol.iterator](){return this}}},toArray(){const l=[];let u;do u=Qi(i,l.length),u!==void 0&&l.push(u);while(u!==void 0);return l},map(l){return this.toArray().map(l)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(l){return this.toArray().forEach(l)},concat(l){return this.toArray().concat(l)},every(l){return this.toArray().every(l)},filter(l){return this.toArray().filter(l)},find(l){let u=0;for(const f of this){if(l(f,u))return f;u+=1}},findIndex(l){let u=0;for(const f of this){if(l(f,u))return u;u+=1}return-1},includes(l){return this.find(u=>u===l)!==void 0},join(l){return this.toArray().join(l)},reduce(l,u){return this.toArray().reduce(l,u)},reduceRight(l,u){return this.toArray().reduceRight(l,u)},lastIndexOf(l,u=1/0){return this.toArray().lastIndexOf(l,u)},slice(l,u){return this.toArray().slice(l,u)},some(l){let u=0;for(const f of this){if(l(f,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let l=0,u=Qi(i,l);for(;u!==void 0;)yield u,l+=1,u=Qi(i,l)}}}function Ex(i){const t=i.map(e=>{if(typeof e=="number")return e.toString();if(typeof e=="string")return e.replace(/~/g,"~0").replace(/\//g,"~1")});return i.length===0?"":"/"+t.join("/")}function GS(i){return typeof i=="object"&&i!==null&&Object.prototype.hasOwnProperty.call(i,VS)}typeof FinalizationRegistry>"u"||new FinalizationRegistry(i=>ZS.__wbg_automerge_free(i>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(i=>ZS.__wbg_syncstate_free(i>>>0,1));let AO=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});AO.decode();const sg=new TextEncoder;"encodeInto"in sg||(sg.encodeInto=function(i,t){const e=sg.encode(i);return t.set(e),{read:i.length,written:e.length}});let ZS,EO=[];function CO(i){for(const t in i)pi[t]=i[t];for(const t of EO)t()}const pi={create(i){throw new RangeError("Automerge.use() not called")},load(i,t){throw new RangeError("Automerge.use() not called (load)")},encodeChange(i){throw new RangeError("Automerge.use() not called (encodeChange)")},decodeChange(i){throw new RangeError("Automerge.use() not called (decodeChange)")},initSyncState(){throw new RangeError("Automerge.use() not called (initSyncState)")},encodeSyncMessage(i){throw new RangeError("Automerge.use() not called (encodeSyncMessage)")},decodeSyncMessage(i){throw new RangeError("Automerge.use() not called (decodeSyncMessage)")},encodeSyncState(i){throw new RangeError("Automerge.use() not called (encodeSyncState)")},decodeSyncState(i){throw new RangeError("Automerge.use() not called (decodeSyncState)")},exportSyncState(i){throw new RangeError("Automerge.use() not called (exportSyncState)")},importSyncState(i){throw new RangeError("Automerge.use() not called (importSyncState)")},readBundle(i){throw new RangeError("Automerge.use() not called (readBundle)")},wasmReleaseInfo(){throw new RangeError("Automerge.use() not called (wasmReleaseInfo)")}},LO="b4408e7cbf82439f4666b539f190a7626c4e91b4";function Rn(i,t=!0){if(typeof i!="object")throw new RangeError("must be the document root");const e=Reflect.get(i,wp);if(e===void 0||e==null||t&&MO(i)!=="_root")throw new RangeError("must be the document root");return e}function WS(i){return Reflect.get(i,lh)}function MO(i){return typeof i!="object"||i===null?null:Reflect.get(i,ch)}function Tp(i){return!!Reflect.get(i,Z0)}var kO=function(i,t){var e={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&t.indexOf(s)<0&&(e[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(e[s[r]]=i[s[r]]);return e};function W0(i){return typeof i=="object"?i:{actor:i}}function vs(i){const t=W0(i),e=!!t.freeze,s=t.patchCallback,r=t.actor,l=pi.create({actor:r});return l.enableFreeze(!!t.freeze),FS(l),l.materialize("/",void 0,{handle:l,heads:void 0,freeze:e,patchCallback:s})}function DO(i,t){const e=Rn(i),s=e.handle;return e.handle.materialize("/",t,Object.assign(Object.assign({},e),{handle:s,heads:t}))}function qd(i,t){const e=Rn(i),s=e.heads,r=W0(t),l=e.handle.fork(r.actor,s);l.updateDiffCursor();const{heads:u}=e,f=kO(e,["heads"]);return f.patchCallback=r.patchCallback,l.applyPatches(i,Object.assign(Object.assign({},f),{handle:l}))}function Cx(i,t){return uh(vs(t),"from",{},e=>Object.assign(e,i)).newDoc}function OO(i,t,e){if(typeof t=="function")return uh(i,"change",{},t).newDoc;if(typeof e=="function")return typeof t=="string"&&(t={message:t}),uh(i,"change",t,e).newDoc;throw RangeError("Invalid args for change")}function RO(i,t,e,s){if(typeof e=="function")return uh(i,"changeAt",{},e,t);if(typeof s=="function")return typeof e=="string"&&(e={message:e}),uh(i,"changeAt",e,s,t);throw RangeError("Invalid args for changeAt")}function Oh(i,t,e,s){if(e==null)return i;const r=Rn(i),l=Object.assign(Object.assign({},r),{heads:void 0}),{value:u,patches:f}=r.handle.applyAndReturnPatches(i,l);if(f.length>0){s?.(f,{before:i,after:u,source:t});const p=Rn(u);p.mostRecentPatch={before:Rn(i).heads,after:p.handle.getHeads(),patches:f}}return r.heads=e,u}function uh(i,t,e,s,r){if(typeof s!="function")throw new RangeError("invalid change function");const l=Rn(i);if(i===void 0||l===void 0)throw new RangeError("must be the document root");if(l.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Tp(i))throw new RangeError("Calls to Automerge.change cannot be nested");let u=l.handle.getHeads();r&&NO(r,u)&&(r=void 0),r&&(l.handle.isolate(r),u=r),"time"in e||(e.time=Math.floor(Date.now()/1e3));try{l.heads=u;const f=SO(l.handle);if(s(f),l.handle.pendingOps()===0)return l.heads=void 0,r&&l.handle.integrate(),{newDoc:i,newHeads:null};{const p=l.handle.commit(e.message,e.time);return l.handle.integrate(),{newDoc:Oh(i,t,u,e.patchCallback||l.patchCallback),newHeads:p!=null?[p]:null}}}catch(f){throw l.heads=void 0,l.handle.rollback(),f}}function Lx(i,t){t===void 0&&(t={}),typeof t=="string"&&(t={message:t}),"time"in t||(t.time=Math.floor(Date.now()/1e3));const e=Rn(i);if(e.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Tp(i))throw new RangeError("Calls to Automerge.change cannot be nested");const s=e.handle.getHeads();return e.handle.emptyChange(t.message,t.time),Oh(i,"emptyChange",s)}function IO(i,t){const e=W0(t);if(e.patchCallback)return Y0(vs(e),i);const s=e.actor,r=e.patchCallback,l=e.unchecked||!1,u=e.allowMissingChanges||!1,f=e.convertImmutableStringsToText||!1,p=pi.load(i,{actor:s,unchecked:l,allowMissingDeps:u,convertImmutableStringsToText:f});return p.enableFreeze(!!e.freeze),FS(p),p.materialize("/",void 0,{handle:p,heads:void 0,patchCallback:r})}function Y0(i,t,e){e||(e={});const s=Rn(i);if(s.heads)throw new RangeError("Attempting to change an out of date document - set at: "+WS(i));if(Tp(i))throw new RangeError("Calls to Automerge.change cannot be nested");const r=s.handle.getHeads();return s.handle.loadIncremental(t),Oh(i,"loadIncremental",r,e.patchCallback||s.patchCallback)}function YS(i){return Rn(i).handle.save()}function Mx(i,t){const e=Rn(i);if(e.heads)throw new RangeError("Attempting to change an out of date document - set at: "+WS(i));const s=e.handle.getHeads(),r=Rn(t),l=e.handle.getChangesAdded(r.handle);return e.handle.applyChanges(l),Oh(i,"merge",s,e.patchCallback)}function rg(i,t,e){kx(t,"before heads"),kx(e,"after heads");const s=Rn(i);return s.mostRecentPatch&&zg(s.mostRecentPatch.before,t)&&zg(s.mostRecentPatch.after,e)?s.mostRecentPatch.patches:s.handle.diff(t,e)}function NO(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0}function kx(i,t){if(!Array.isArray(i))throw new Error(`invalid ${t}: must be an array`)}function zg(i,t){if(!Dx(i)||!Dx(t))return i===t;const e=Object.keys(i).sort(),s=Object.keys(t).sort();if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==s[r]||!zg(i[e[r]],t[s[r]]))return!1;return!0}function XS(i){const t=pi.importSyncState(i),e=pi.encodeSyncState(t);return t.free(),e}function QS(i){const t=pi.decodeSyncState(i),e=pi.exportSyncState(t);return t.free(),e}function zO(i,t){const e=Rn(i),s=pi.importSyncState(t),r=e.handle.generateSyncMessage(s);return[pi.exportSyncState(s),r]}function PO(i,t,e,s){const r=pi.importSyncState(t);s||(s={});const l=Rn(i);if(l.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Tp(i))throw new RangeError("Calls to Automerge.change cannot be nested");const u=l.handle.getHeads();l.handle.receiveSyncMessage(r,e);const f=pi.exportSyncState(r);return[Oh(i,"receiveSyncMessage",u,s.patchCallback||l.patchCallback),f,null]}function BO(){return pi.exportSyncState(pi.initSyncState())}function UO(i){return pi.decodeSyncMessage(i)}function mr(i){const t=Rn(i);return t.heads||t.handle.getHeads()}function Dx(i){return typeof i=="object"&&i!==null}function HO(i,t){return Rn(i).handle.saveSince(t)}function FS(i){i.registerDatatype("counter",t=>new Ng(t),t=>{if(t instanceof Ng)return t.value}),i.registerDatatype("str",t=>new jS(t),t=>{if(GS(t))return t.val})}function VO(i){return Rn(i).handle.topoHistoryTraversal()}function qO(i,t){return Rn(i).handle.getDecodedChangeByHash(t)}function X0(i){var t,e,s,r,l,u;const p=Rn(i).handle.stats(),m=jO();return Object.assign(Object.assign({},p),{cargoPackageName:(e=(t=m.wasm)===null||t===void 0?void 0:t.cargoPackageName)!==null&&e!==void 0?e:"unknown",cargoPackageVersion:(r=(s=m.wasm)===null||s===void 0?void 0:s.cargoPackageVersion)!==null&&r!==void 0?r:"unknown",rustcVersion:(u=(l=m.wasm)===null||l===void 0?void 0:l.rustcVersion)!==null&&u!==void 0?u:"unknown"})}function jO(){let i=null;try{i=pi.wasmReleaseInfo()}catch{}return{js:{gitHead:LO},wasm:i}}var ld={exports:{}},og,Ox;function GO(){if(Ox)return og;Ox=1;var i=1e3,t=i*60,e=t*60,s=e*24,r=s*7,l=s*365.25;og=function(v,y){y=y||{};var w=typeof v;if(w==="string"&&v.length>0)return u(v);if(w==="number"&&isFinite(v))return y.long?p(v):f(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function u(v){if(v=String(v),!(v.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(y){var w=parseFloat(y[1]),T=(y[2]||"ms").toLowerCase();switch(T){case"years":case"year":case"yrs":case"yr":case"y":return w*l;case"weeks":case"week":case"w":return w*r;case"days":case"day":case"d":return w*s;case"hours":case"hour":case"hrs":case"hr":case"h":return w*e;case"minutes":case"minute":case"mins":case"min":case"m":return w*t;case"seconds":case"second":case"secs":case"sec":case"s":return w*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function f(v){var y=Math.abs(v);return y>=s?Math.round(v/s)+"d":y>=e?Math.round(v/e)+"h":y>=t?Math.round(v/t)+"m":y>=i?Math.round(v/i)+"s":v+"ms"}function p(v){var y=Math.abs(v);return y>=s?m(v,y,s,"day"):y>=e?m(v,y,e,"hour"):y>=t?m(v,y,t,"minute"):y>=i?m(v,y,i,"second"):v+" ms"}function m(v,y,w,T){var x=y>=w*1.5;return Math.round(v/w)+" "+T+(x?"s":"")}return og}var ag,Rx;function ZO(){if(Rx)return ag;Rx=1;function i(t){s.debug=s,s.default=s,s.coerce=m,s.disable=f,s.enable=l,s.enabled=p,s.humanize=GO(),s.destroy=v,Object.keys(t).forEach(y=>{s[y]=t[y]}),s.names=[],s.skips=[],s.formatters={};function e(y){let w=0;for(let T=0;T<y.length;T++)w=(w<<5)-w+y.charCodeAt(T),w|=0;return s.colors[Math.abs(w)%s.colors.length]}s.selectColor=e;function s(y){let w,T=null,x,A;function E(...O){if(!E.enabled)return;const U=E,D=Number(new Date),Q=D-(w||D);U.diff=Q,U.prev=w,U.curr=D,w=D,O[0]=s.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let I=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(G,j)=>{if(G==="%%")return"%";I++;const V=s.formatters[j];if(typeof V=="function"){const Z=O[I];G=V.call(U,Z),O.splice(I,1),I--}return G}),s.formatArgs.call(U,O),(U.log||s.log).apply(U,O)}return E.namespace=y,E.useColors=s.useColors(),E.color=s.selectColor(y),E.extend=r,E.destroy=s.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(x!==s.namespaces&&(x=s.namespaces,A=s.enabled(y)),A),set:O=>{T=O}}),typeof s.init=="function"&&s.init(E),E}function r(y,w){const T=s(this.namespace+(typeof w>"u"?":":w)+y);return T.log=this.log,T}function l(y){s.save(y),s.namespaces=y,s.names=[],s.skips=[];const w=(typeof y=="string"?y:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const T of w)T[0]==="-"?s.skips.push(T.slice(1)):s.names.push(T)}function u(y,w){let T=0,x=0,A=-1,E=0;for(;T<y.length;)if(x<w.length&&(w[x]===y[T]||w[x]==="*"))w[x]==="*"?(A=x,E=T,x++):(T++,x++);else if(A!==-1)x=A+1,E++,T=E;else return!1;for(;x<w.length&&w[x]==="*";)x++;return x===w.length}function f(){const y=[...s.names,...s.skips.map(w=>"-"+w)].join(",");return s.enable(""),y}function p(y){for(const w of s.skips)if(u(y,w))return!1;for(const w of s.names)if(u(y,w))return!0;return!1}function m(y){return y instanceof Error?y.stack||y.message:y}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return ag=i,ag}var Ix;function WO(){return Ix||(Ix=1,(function(i,t){var e={};t.formatArgs=r,t.save=l,t.load=u,t.useColors=s,t.storage=f(),t.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let m;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const v="color: "+this.color;m.splice(1,0,v,"color: inherit");let y=0,w=0;m[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(y++,T==="%c"&&(w=y))}),m.splice(w,0,v)}t.log=console.debug||console.log||(()=>{});function l(m){try{m?t.storage.setItem("debug",m):t.storage.removeItem("debug")}catch{}}function u(){let m;try{m=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=e.DEBUG),m}function f(){try{return localStorage}catch{}}i.exports=ZO()(t);const{formatters:p}=i.exports;p.j=function(m){try{return JSON.stringify(m)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}}})(ld,ld.exports)),ld.exports}var YO=WO();const uo=_h(YO);var lg={exports:{}},Nx;function XO(){return Nx||(Nx=1,(function(i){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,v){this.fn=p,this.context=m,this.once=v||!1}function l(p,m,v,y,w){if(typeof v!="function")throw new TypeError("The listener must be a function");var T=new r(v,y||p,w),x=e?e+m:m;return p._events[x]?p._events[x].fn?p._events[x]=[p._events[x],T]:p._events[x].push(T):(p._events[x]=T,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var m=[],v,y;if(this._eventsCount===0)return m;for(y in v=this._events)t.call(v,y)&&m.push(e?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},f.prototype.listeners=function(m){var v=e?e+m:m,y=this._events[v];if(!y)return[];if(y.fn)return[y.fn];for(var w=0,T=y.length,x=new Array(T);w<T;w++)x[w]=y[w].fn;return x},f.prototype.listenerCount=function(m){var v=e?e+m:m,y=this._events[v];return y?y.fn?1:y.length:0},f.prototype.emit=function(m,v,y,w,T,x){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],O=arguments.length,U,D;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),O){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,v),!0;case 3:return E.fn.call(E.context,v,y),!0;case 4:return E.fn.call(E.context,v,y,w),!0;case 5:return E.fn.call(E.context,v,y,w,T),!0;case 6:return E.fn.call(E.context,v,y,w,T,x),!0}for(D=1,U=new Array(O-1);D<O;D++)U[D-1]=arguments[D];E.fn.apply(E.context,U)}else{var Q=E.length,I;for(D=0;D<Q;D++)switch(E[D].once&&this.removeListener(m,E[D].fn,void 0,!0),O){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,v);break;case 3:E[D].fn.call(E[D].context,v,y);break;case 4:E[D].fn.call(E[D].context,v,y,w);break;default:if(!U)for(I=1,U=new Array(O-1);I<O;I++)U[I-1]=arguments[I];E[D].fn.apply(E[D].context,U)}}return!0},f.prototype.on=function(m,v,y){return l(this,m,v,y,!1)},f.prototype.once=function(m,v,y){return l(this,m,v,y,!0)},f.prototype.removeListener=function(m,v,y,w){var T=e?e+m:m;if(!this._events[T])return this;if(!v)return u(this,T),this;var x=this._events[T];if(x.fn)x.fn===v&&(!w||x.once)&&(!y||x.context===y)&&u(this,T);else{for(var A=0,E=[],O=x.length;A<O;A++)(x[A].fn!==v||w&&!x[A].once||y&&x[A].context!==y)&&E.push(x[A]);E.length?this._events[T]=E.length===1?E[0]:E:u(this,T)}return this},f.prototype.removeAllListeners=function(m){var v;return m?(v=e?e+m:m,this._events[v]&&u(this,v)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,i.exports=f})(lg)),lg.exports}var QO=XO();const yl=_h(QO);function FO(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function KO(){const i=FO();if(i.__xstate__)return i.__xstate__}const JO=i=>{if(typeof window>"u")return;const t=KO();t&&t.register(i)};class zx{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const KS=".",$O="",JS="",t3="#",e3="*",$S="xstate.init",n3="xstate.error",Pg="xstate.stop";function i3(i,t){return{type:`xstate.after.${i}.${t}`}}function Bg(i,t){return{type:`xstate.done.state.${i}`,output:t}}function s3(i,t){return{type:`xstate.done.actor.${i}`,output:t,actorId:i}}function tT(i,t){return{type:`xstate.error.actor.${i}`,error:t,actorId:i}}function eT(i){return{type:$S,input:i}}function ur(i){setTimeout(()=>{throw i})}const r3=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nT(i,t){const e=Px(i),s=Px(t);return typeof s=="string"?typeof e=="string"?s===e:!1:typeof e=="string"?e in s:Object.keys(e).every(r=>r in s?nT(e[r],s[r]):!1)}function Q0(i){if(sT(i))return i;const t=[];let e="";for(let s=0;s<i.length;s++){switch(i.charCodeAt(s)){case 92:e+=i[s+1],s++;continue;case 46:t.push(e),e="";continue}e+=i[s]}return t.push(e),t}function Px(i){if(P3(i))return i.value;if(typeof i!="string")return i;const t=Q0(i);return o3(t)}function o3(i){if(i.length===1)return i[0];const t={};let e=t;for(let s=0;s<i.length-1;s++)if(s===i.length-2)e[i[s]]=i[s+1];else{const r=e;e={},r[i[s]]=e}return t}function Bx(i,t){const e={},s=Object.keys(i);for(let r=0;r<s.length;r++){const l=s[r];e[l]=t(i[l],l,i,r)}return e}function iT(i){return sT(i)?i:[i]}function so(i){return i===void 0?[]:iT(i)}function Ug(i,t,e,s){return typeof i=="function"?i({context:t,event:e,self:s}):i}function sT(i){return Array.isArray(i)}function a3(i){return i.type.startsWith("xstate.error.actor")}function mc(i){return iT(i).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function rT(i){if(!(i===void 0||i===$O))return so(i)}function Hg(i,t,e){const s=typeof i=="object",r=s?i:void 0;return{next:(s?i.next:i)?.bind(r),error:(s?i.error:t)?.bind(r),complete:(s?i.complete:e)?.bind(r)}}function Ux(i,t){return`${t}.${i}`}function F0(i,t){const e=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!e)return i.implementations.actors[t];const[,s,r]=e,u=i.getStateNodeById(r).config.invoke;return(Array.isArray(u)?u[s]:u).src}function oT(i,t){if(t===i||t===e3)return!0;if(!t.endsWith(".*"))return!1;const e=t.split("."),s=i.split(".");for(let r=0;r<e.length;r++){const l=e[r],u=s[r];if(l==="*")return r===e.length-1;if(l!==u)return!1}return!0}function Hx(i,t){return`${i.sessionId}.${t}`}let l3=0;function c3(i,t){const e=new Map,s=new Map,r=new WeakMap,l=new Set,u={},{clock:f,logger:p}=t,m={schedule:(w,T,x,A,E=Math.random().toString(36).slice(2))=>{const O={source:w,target:T,event:x,delay:A,id:E,startedAt:Date.now()},U=Hx(w,E);y._snapshot._scheduledEvents[U]=O;const D=f.setTimeout(()=>{delete u[U],delete y._snapshot._scheduledEvents[U],y._relay(w,T,x)},A);u[U]=D},cancel:(w,T)=>{const x=Hx(w,T),A=u[x];delete u[x],delete y._snapshot._scheduledEvents[x],A!==void 0&&f.clearTimeout(A)},cancelAll:w=>{for(const T in y._snapshot._scheduledEvents){const x=y._snapshot._scheduledEvents[T];x.source===w&&m.cancel(w,x.id)}}},v=w=>{if(!l.size)return;const T={...w,rootId:i.sessionId};l.forEach(x=>x.next?.(T))},y={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${l3++}`,_register:(w,T)=>(e.set(w,T),w),_unregister:w=>{e.delete(w.sessionId);const T=r.get(w);T!==void 0&&(s.delete(T),r.delete(w))},get:w=>s.get(w),getAll:()=>Object.fromEntries(s.entries()),_set:(w,T)=>{const x=s.get(w);if(x&&x!==T)throw new Error(`Actor with system ID '${w}' already exists.`);s.set(w,T),r.set(T,w)},inspect:w=>{const T=Hg(w);return l.add(T),{unsubscribe(){l.delete(T)}}},_sendInspectionEvent:v,_relay:(w,T,x)=>{y._sendInspectionEvent({type:"@xstate.event",sourceRef:w,actorRef:T,event:x}),T._send(x)},scheduler:m,getSnapshot:()=>({_scheduledEvents:{...y._snapshot._scheduledEvents}}),start:()=>{const w=y._snapshot._scheduledEvents;y._snapshot._scheduledEvents={};for(const T in w){const{source:x,target:A,event:E,delay:O,id:U}=w[T];m.schedule(x,A,E,O,U)}},_clock:f,_logger:p};return y}let cg=!1;const K0=1;let Li=(function(i){return i[i.NotStarted=0]="NotStarted",i[i.Running=1]="Running",i[i.Stopped=2]="Stopped",i})({});const u3={clock:{setTimeout:(i,t)=>setTimeout(i,t),clearTimeout:i=>clearTimeout(i)},logger:console.log.bind(console),devTools:!1};class h3{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new zx(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Li.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...u3,...e},{clock:r,logger:l,parent:u,syncSnapshot:f,id:p,systemId:m,inspect:v}=s;this.system=u?u.system:c3(this,{clock:r,logger:l}),v&&!u&&this.system.inspect(Hg(v)),this.sessionId=this.system._bookId(),this.id=p??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=u,this._syncSnapshot=f,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:y=>{this._deferred.push(y)},system:this.system,stopChild:y=>{if(y._parent!==this)throw new Error(`Cannot stop child actor ${y.id} of ${this.id} because it is not a child`);y._stop()},emit:y=>{const w=this.eventListeners.get(y.type),T=this.eventListeners.get("*");if(!w&&!T)return;const x=[...w?w.values():[],...T?T.values():[]];for(const A of x)try{A(y)}catch(E){ur(E)}},actionExecutor:y=>{const w=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:y.type,params:y.params}}),!y.exec)return;const T=cg;try{cg=!0,y.exec(y.info,y.params)}finally{cg=T}};this._processingStatus===Li.Running?w():this._deferred.push(w)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),m&&(this.systemId=m,this.system._set(m,this)),this._initState(e?.snapshot??e?.state),m&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(e){this._snapshot={status:"error",output:void 0,error:e}}}update(t,e){this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(r){this._deferred.length=0,this._snapshot={...t,status:"error",error:r}}switch(this._snapshot.status){case"active":for(const r of this.observers)try{r.next?.(t)}catch(l){ur(l)}break;case"done":for(const r of this.observers)try{r.next?.(t)}catch(l){ur(l)}this._stopProcedure(),this._complete(),this._doneEvent=s3(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,s){const r=Hg(t,e,s);if(this._processingStatus!==Li.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(l){ur(l)}break;case"error":{const l=this._snapshot.error;if(!r.error)ur(l);else try{r.error(l)}catch(u){ur(u)}break}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,e){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const r=e.bind(void 0);return s.add(r),{unsubscribe:()=>{s.delete(r)}}}start(){if(this._processingStatus===Li.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=Li.Running;const t=eT(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,s;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(r){s={err:r}}if(s){const{err:r}=s;this._snapshot={...this._snapshot,status:"error",error:r},this._error(r);return}this.update(e,t),t.type===Pg&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Li.Stopped?this:(this.mailbox.clear(),this._processingStatus===Li.NotStarted?(this._processingStatus=Li.Stopped,this):(this.mailbox.enqueue({type:Pg}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(e){ur(e)}this.observers.clear(),this.eventListeners.clear()}_reportError(t){if(!this.observers.size){this._parent||ur(t),this.eventListeners.clear();return}let e=!1;for(const s of this.observers){const r=s.error;e||=!r;try{r?.(t)}catch(l){ur(l)}}this.observers.clear(),this.eventListeners.clear(),e&&ur(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,tT(this.id,t))}_stopProcedure(){return this._processingStatus!==Li.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new zx(this._process.bind(this)),this._processingStatus=Li.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==Li.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:JO)(this)}toJSON(){return{xstate$$type:K0,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[r3](){return this}getSnapshot(){return this._snapshot}}function hh(i,...[t]){return new h3(i,t)}function f3(i,t,e,s,{sendId:r}){const l=typeof r=="function"?r(e,s):r;return[t,{sendId:l},void 0]}function d3(i,t){i.defer(()=>{i.system.scheduler.cancel(i.self,t.sendId)})}function J0(i){function t(e,s){}return t.type="xstate.cancel",t.sendId=i,t.resolve=f3,t.execute=d3,t}function p3(i,t,e,s,{id:r,systemId:l,src:u,input:f,syncSnapshot:p}){const m=typeof u=="string"?F0(t.machine,u):u,v=typeof r=="function"?r(e):r;let y,w;return m&&(w=typeof f=="function"?f({context:t.context,event:e.event,self:i.self}):f,y=hh(m,{id:v,src:u,parent:i.self,syncSnapshot:p,systemId:l,input:w})),[fl(t,{children:{...t.children,[v]:y}}),{id:r,systemId:l,actorRef:y,src:u,input:w},void 0]}function m3(i,{actorRef:t}){t&&i.defer(()=>{t._processingStatus!==Li.Stopped&&t.start()})}function $0(...[i,{id:t,systemId:e,input:s,syncSnapshot:r=!1}={}]){function l(u,f){}return l.type="xstate.spawnChild",l.id=t,l.systemId=e,l.src=i,l.input=s,l.syncSnapshot=r,l.resolve=p3,l.execute=m3,l}function _3(i,t,e,s,{actorRef:r}){const l=typeof r=="function"?r(e,s):r,u=typeof l=="string"?t.children[l]:l;let f=t.children;return u&&(f={...f},delete f[u.id]),[fl(t,{children:f}),u,void 0]}function aT(i,t){const e=t.getSnapshot();if(e&&"children"in e)for(const s of Object.values(e.children))aT(i,s);i.system._unregister(t)}function g3(i,t){if(t){if(aT(i,t),t._processingStatus!==Li.Running){i.stopChild(t);return}i.defer(()=>{i.stopChild(t)})}}function Ap(i){function t(e,s){}return t.type="xstate.stopChild",t.actorRef=i,t.resolve=_3,t.execute=g3,t}function Ep(i,t,e,s){const{machine:r}=s,l=typeof i=="function",u=l?i:r.implementations.guards[typeof i=="string"?i:i.type];if(!l&&!u)throw new Error(`Guard '${typeof i=="string"?i:i.type}' is not implemented.'.`);if(typeof u!="function")return Ep(u,t,e,s);const f={context:t,event:e},p=l||typeof i=="string"?void 0:"params"in i?typeof i.params=="function"?i.params({context:t,event:e}):i.params:void 0;return"check"in u?u.check(s,f,u):u(f,p)}function ty(i){return i.type==="atomic"||i.type==="final"}function Ec(i){return Object.values(i.states).filter(t=>t.type!=="history")}function Rh(i,t){const e=[];if(t===i)return e;let s=i.parent;for(;s&&s!==t;)e.push(s),s=s.parent;return e}function jd(i){const t=new Set(i),e=cT(t);for(const s of t)if(s.type==="compound"&&(!e.get(s)||!e.get(s).length))Vx(s).forEach(r=>t.add(r));else if(s.type==="parallel"){for(const r of Ec(s))if(r.type!=="history"&&!t.has(r)){const l=Vx(r);for(const u of l)t.add(u)}}for(const s of t){let r=s.parent;for(;r;)t.add(r),r=r.parent}return t}function lT(i,t){const e=t.get(i);if(!e)return{};if(i.type==="compound"){const r=e[0];if(r){if(ty(r))return r.key}else return{}}const s={};for(const r of e)s[r.key]=lT(r,t);return s}function cT(i){const t=new Map;for(const e of i)t.has(e)||t.set(e,[]),e.parent&&(t.has(e.parent)||t.set(e.parent,[]),t.get(e.parent).push(e));return t}function uT(i,t){const e=jd(t);return lT(i,cT(e))}function ey(i,t){return t.type==="compound"?Ec(t).some(e=>e.type==="final"&&i.has(e)):t.type==="parallel"?Ec(t).every(e=>ey(i,e)):t.type==="final"}const Cp=i=>i[0]===t3;function y3(i,t){return i.transitions.get(t)||[...i.transitions.keys()].filter(s=>oT(t,s)).sort((s,r)=>r.length-s.length).flatMap(s=>i.transitions.get(s))}function v3(i){const t=i.config.after;if(!t)return[];const e=r=>{const l=i3(r,i.id),u=l.type;return i.entry.push(sy(l,{id:u,delay:r})),i.exit.push(J0(u)),u};return Object.keys(t).flatMap(r=>{const l=t[r],u=typeof l=="string"?{target:l}:l,f=Number.isNaN(+r)?r:+r,p=e(f);return so(u).map(m=>({...m,event:p,delay:f}))}).map(r=>{const{delay:l}=r;return{...el(i,r.event,r),delay:l}})}function el(i,t,e){const s=rT(e.target),r=e.reenter??!1,l=x3(i,s),u={...e,actions:so(e.actions),guard:e.guard,target:l,source:i,reenter:r,eventType:t,toJSON:()=>({...u,source:`#${i.id}`,target:l?l.map(f=>`#${f.id}`):void 0})};return u}function b3(i){const t=new Map;if(i.config.on)for(const e of Object.keys(i.config.on)){if(e===JS)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=i.config.on[e];t.set(e,mc(s).map(r=>el(i,e,r)))}if(i.config.onDone){const e=`xstate.done.state.${i.id}`;t.set(e,mc(i.config.onDone).map(s=>el(i,e,s)))}for(const e of i.invoke){if(e.onDone){const s=`xstate.done.actor.${e.id}`;t.set(s,mc(e.onDone).map(r=>el(i,s,r)))}if(e.onError){const s=`xstate.error.actor.${e.id}`;t.set(s,mc(e.onError).map(r=>el(i,s,r)))}if(e.onSnapshot){const s=`xstate.snapshot.${e.id}`;t.set(s,mc(e.onSnapshot).map(r=>el(i,s,r)))}}for(const e of i.after){let s=t.get(e.eventType);s||(s=[],t.set(e.eventType,s)),s.push(e)}return t}function w3(i,t){const e=typeof t=="string"?i.states[t]:t?i.states[t.target]:void 0;if(!e&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${i.id}`);const s={source:i,actions:!t||typeof t=="string"?[]:so(t.actions),eventType:null,reenter:!1,target:e?[e]:[],toJSON:()=>({...s,source:`#${i.id}`,target:e?[`#${e.id}`]:[]})};return s}function x3(i,t){if(t!==void 0)return t.map(e=>{if(typeof e!="string")return e;if(Cp(e))return i.machine.getStateNodeById(e);const s=e[0]===KS;if(s&&!i.parent)return Gd(i,e.slice(1));const r=s?i.key+e:e;if(i.parent)try{return Gd(i.parent,r)}catch(l){throw new Error(`Invalid transition definition for state node '${i.id}':
${l.message}`)}else throw new Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}function hT(i){const t=rT(i.config.target);return t?{target:t.map(e=>typeof e=="string"?Gd(i.parent,e):e)}:i.parent.initial}function rl(i){return i.type==="history"}function Vx(i){const t=fT(i);for(const e of t)for(const s of Rh(e,i))t.add(s);return t}function fT(i){const t=new Set;function e(s){if(!t.has(s)){if(t.add(s),s.type==="compound")e(s.initial.target[0]);else if(s.type==="parallel")for(const r of Ec(s))e(r)}}return e(i),t}function Cc(i,t){if(Cp(t))return i.machine.getStateNodeById(t);if(!i.states)throw new Error(`Unable to retrieve child state '${t}' from '${i.id}'; no child states exist.`);const e=i.states[t];if(!e)throw new Error(`Child state '${t}' does not exist on '${i.id}'`);return e}function Gd(i,t){if(typeof t=="string"&&Cp(t))try{return i.machine.getStateNodeById(t)}catch{}const e=Q0(t).slice();let s=i;for(;e.length;){const r=e.shift();if(!r.length)break;s=Cc(s,r)}return s}function Zd(i,t){if(typeof t=="string"){const r=i.states[t];if(!r)throw new Error(`State '${t}' does not exist on '${i.id}'`);return[i,r]}const e=Object.keys(t),s=e.map(r=>Cc(i,r)).filter(Boolean);return[i.machine.root,i].concat(s,e.reduce((r,l)=>{const u=Cc(i,l);if(!u)return r;const f=Zd(u,t[l]);return r.concat(f)},[]))}function S3(i,t,e,s){const l=Cc(i,t).next(e,s);return!l||!l.length?i.next(e,s):l}function T3(i,t,e,s){const r=Object.keys(t),l=Cc(i,r[0]),u=ny(l,t[r[0]],e,s);return!u||!u.length?i.next(e,s):u}function A3(i,t,e,s){const r=[];for(const l of Object.keys(t)){const u=t[l];if(!u)continue;const f=Cc(i,l),p=ny(f,u,e,s);p&&r.push(...p)}return r.length?r:i.next(e,s)}function ny(i,t,e,s){return typeof t=="string"?S3(i,t,e,s):Object.keys(t).length===1?T3(i,t,e,s):A3(i,t,e,s)}function E3(i){return Object.keys(i.states).map(t=>i.states[t]).filter(t=>t.type==="history")}function ua(i,t){let e=i;for(;e.parent&&e.parent!==t;)e=e.parent;return e.parent===t}function C3(i,t){const e=new Set(i),s=new Set(t);for(const r of e)if(s.has(r))return!0;for(const r of s)if(e.has(r))return!0;return!1}function dT(i,t,e){const s=new Set;for(const r of i){let l=!1;const u=new Set;for(const f of s)if(C3(Vg([r],t,e),Vg([f],t,e)))if(ua(r.source,f.source))u.add(f);else{l=!0;break}if(!l){for(const f of u)s.delete(f);s.add(r)}}return Array.from(s)}function L3(i){const[t,...e]=i;for(const s of Rh(t,void 0))if(e.every(r=>ua(r,s)))return s}function iy(i,t){if(!i.target)return[];const e=new Set;for(const s of i.target)if(rl(s))if(t[s.id])for(const r of t[s.id])e.add(r);else for(const r of iy(hT(s),t))e.add(r);else e.add(s);return[...e]}function pT(i,t){const e=iy(i,t);if(!e)return;if(!i.reenter&&e.every(r=>r===i.source||ua(r,i.source)))return i.source;const s=L3(e.concat(i.source));if(s)return s;if(!i.reenter)return i.source.machine.root}function Vg(i,t,e){const s=new Set;for(const r of i)if(r.target?.length){const l=pT(r,e);r.reenter&&r.source===l&&s.add(l);for(const u of t)ua(u,l)&&s.add(u)}return[...s]}function M3(i,t){if(i.length!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0}function qg(i,t,e,s,r,l){if(!i.length)return t;const u=new Set(t._nodes);let f=t.historyValue;const p=dT(i,u,f);let m=t;r||([m,f]=R3(m,s,e,p,u,f,l,e.actionExecutor)),m=Lc(m,s,e,p.flatMap(y=>y.actions),l,void 0),m=D3(m,s,e,p,u,l,f,r);const v=[...u];m.status==="done"&&(m=Lc(m,s,e,v.sort((y,w)=>w.order-y.order).flatMap(y=>y.exit),l,void 0));try{return f===t.historyValue&&M3(t._nodes,u)?m:fl(m,{_nodes:v,historyValue:f})}catch(y){throw y}}function k3(i,t,e,s,r){if(s.output===void 0)return;const l=Bg(r.id,r.output!==void 0&&r.parent?Ug(r.output,i.context,t,e.self):void 0);return Ug(s.output,i.context,l,e.self)}function D3(i,t,e,s,r,l,u,f){let p=i;const m=new Set,v=new Set;O3(s,u,v,m),f&&v.add(i.machine.root);const y=new Set;for(const w of[...m].sort((T,x)=>T.order-x.order)){r.add(w);const T=[];T.push(...w.entry);for(const x of w.invoke)T.push($0(x.src,{...x,syncSnapshot:!!x.onSnapshot}));if(v.has(w)){const x=w.initial.actions;T.push(...x)}if(p=Lc(p,t,e,T,l,w.invoke.map(x=>x.id)),w.type==="final"){const x=w.parent;let A=x?.type==="parallel"?x:x?.parent,E=A||w;for(x?.type==="compound"&&l.push(Bg(x.id,w.output!==void 0?Ug(w.output,p.context,t,e.self):void 0));A?.type==="parallel"&&!y.has(A)&&ey(r,A);)y.add(A),l.push(Bg(A.id)),E=A,A=A.parent;if(A)continue;p=fl(p,{status:"done",output:k3(p,t,e,p.machine.root,E)})}}return p}function O3(i,t,e,s){for(const r of i){const l=pT(r,t);for(const f of r.target||[])!rl(f)&&(r.source!==f||r.source!==l||r.reenter)&&(s.add(f),e.add(f)),vc(f,t,e,s);const u=iy(r,t);for(const f of u){const p=Rh(f,l);l?.type==="parallel"&&p.push(l),mT(s,t,e,p,!r.source.parent&&r.reenter?void 0:l)}}}function vc(i,t,e,s){if(rl(i))if(t[i.id]){const r=t[i.id];for(const l of r)s.add(l),vc(l,t,e,s);for(const l of r)ug(l,i.parent,s,t,e)}else{const r=hT(i);for(const l of r.target)s.add(l),r===i.parent?.initial&&e.add(i.parent),vc(l,t,e,s);for(const l of r.target)ug(l,i.parent,s,t,e)}else if(i.type==="compound"){const[r]=i.initial.target;rl(r)||(s.add(r),e.add(r)),vc(r,t,e,s),ug(r,i,s,t,e)}else if(i.type==="parallel")for(const r of Ec(i).filter(l=>!rl(l)))[...s].some(l=>ua(l,r))||(rl(r)||(s.add(r),e.add(r)),vc(r,t,e,s))}function mT(i,t,e,s,r){for(const l of s)if((!r||ua(l,r))&&i.add(l),l.type==="parallel")for(const u of Ec(l).filter(f=>!rl(f)))[...i].some(f=>ua(f,u))||(i.add(u),vc(u,t,e,i))}function ug(i,t,e,s,r){mT(e,s,r,Rh(i,t))}function R3(i,t,e,s,r,l,u,f){let p=i;const m=Vg(s,r,l);m.sort((y,w)=>w.order-y.order);let v;for(const y of m)for(const w of E3(y)){let T;w.history==="deep"?T=x=>ty(x)&&ua(x,y):T=x=>x.parent===y,v??={...l},v[w.id]=Array.from(r).filter(T)}for(const y of m)p=Lc(p,t,e,[...y.exit,...y.invoke.map(w=>Ap(w.id))],u,void 0),r.delete(y);return[p,v||l]}function I3(i,t){return i.implementations.actions[t]}function _T(i,t,e,s,r,l){const{machine:u}=i;let f=i;for(const p of s){const m=typeof p=="function",v=m?p:I3(u,typeof p=="string"?p:p.type),y={context:f.context,event:t,self:e.self,system:e.system},w=m||typeof p=="string"?void 0:"params"in p?typeof p.params=="function"?p.params({context:f.context,event:t}):p.params:void 0;if(!v||!("resolve"in v)){e.actionExecutor({type:typeof p=="string"?p:typeof p=="object"?p.type:p.name||"(anonymous)",info:y,params:w,exec:v});continue}const T=v,[x,A,E]=T.resolve(e,f,y,w,v,r);f=x,"retryResolve"in T&&l?.push([T,A]),"execute"in T&&e.actionExecutor({type:T.type,info:y,params:A,exec:T.execute.bind(null,e,A)}),E&&(f=_T(f,t,e,E,r,l))}return f}function Lc(i,t,e,s,r,l){const u=l?[]:void 0,f=_T(i,t,e,s,{internalQueue:r,deferredActorIds:l},u);return u?.forEach(([p,m])=>{p.retryResolve(e,f,m)}),f}function hg(i,t,e,s){let r=i;const l=[];function u(m,v,y){e.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:e.self,event:v,snapshot:m,_transitions:y}),l.push(m)}if(t.type===Pg)return r=fl(qx(r,t,e),{status:"stopped"}),u(r,t,[]),{snapshot:r,microstates:l};let f=t;if(f.type!==$S){const m=f,v=a3(m),y=jx(m,r);if(v&&!y.length)return r=fl(i,{status:"error",error:m.error}),u(r,m,[]),{snapshot:r,microstates:l};r=qg(y,i,e,f,!1,s),u(r,m,y)}let p=!0;for(;r.status==="active";){let m=p?N3(r,f):[];const v=m.length?r:void 0;if(!m.length){if(!s.length)break;f=s.shift(),m=jx(f,r)}r=qg(m,r,e,f,!1,s),p=r!==v,u(r,f,m)}return r.status!=="active"&&qx(r,f,e),{snapshot:r,microstates:l}}function qx(i,t,e){return Lc(i,t,e,Object.values(i.children).map(s=>Ap(s)),[],void 0)}function jx(i,t){return t.machine.getTransitionData(t,i)}function N3(i,t){const e=new Set,s=i._nodes.filter(ty);for(const r of s)t:for(const l of[r].concat(Rh(r,void 0)))if(l.always){for(const u of l.always)if(u.guard===void 0||Ep(u.guard,i.context,t,i)){e.add(u);break t}}return dT(Array.from(e),new Set(i._nodes),i.historyValue)}function z3(i,t){const e=jd(Zd(i,t));return uT(i,[...e])}function P3(i){return!!i&&typeof i=="object"&&"machine"in i&&"value"in i}const B3=function(t){return nT(t,this.value)},U3=function(t){return this.tags.has(t)},H3=function(t){const e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(s=>s.target!==void 0||s.actions.length)},V3=function(){const{_nodes:t,tags:e,machine:s,getMeta:r,toJSON:l,can:u,hasTag:f,matches:p,...m}=this;return{...m,tags:Array.from(e)}},q3=function(){return this._nodes.reduce((t,e)=>(e.meta!==void 0&&(t[e.id]=e.meta),t),{})};function wd(i,t){return{status:i.status,output:i.output,error:i.error,machine:t,context:i.context,_nodes:i._nodes,value:uT(t.root,i._nodes),tags:new Set(i._nodes.flatMap(e=>e.tags)),children:i.children,historyValue:i.historyValue||{},matches:B3,hasTag:U3,can:H3,getMeta:q3,toJSON:V3}}function fl(i,t={}){return wd({...i,...t},i.machine)}function j3(i){if(typeof i!="object"||i===null)return{};const t={};for(const e in i){const s=i[e];Array.isArray(s)&&(t[e]=s.map(r=>({id:r.id})))}return t}function G3(i,t){const{_nodes:e,tags:s,machine:r,children:l,context:u,can:f,hasTag:p,matches:m,getMeta:v,toJSON:y,...w}=i,T={};for(const A in l){const E=l[A];T[A]={snapshot:E.getPersistedSnapshot(t),src:E.src,systemId:E.systemId,syncSnapshot:E._syncSnapshot}}return{...w,context:gT(u),children:T,historyValue:j3(w.historyValue)}}function gT(i){let t;for(const e in i){const s=i[e];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??=Array.isArray(i)?i.slice():{...i},t[e]={xstate$$type:K0,id:s.id};else{const r=gT(s);r!==s&&(t??=Array.isArray(i)?i.slice():{...i},t[e]=r)}}return t??i}function Z3(i,t,e,s,{event:r,id:l,delay:u},{internalQueue:f}){const p=t.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${r}" }) instead`);const m=typeof r=="function"?r(e,s):r;let v;if(typeof u=="string"){const y=p&&p[u];v=typeof y=="function"?y(e,s):y}else v=typeof u=="function"?u(e,s):u;return typeof v!="number"&&f.push(m),[t,{event:m,id:l,delay:v},void 0]}function W3(i,t){const{event:e,delay:s,id:r}=t;if(typeof s=="number"){i.defer(()=>{const l=i.self;i.system.scheduler.schedule(l,l,e,s,r)});return}}function sy(i,t){function e(s,r){}return e.type="xstate.raise",e.event=i,e.id=t?.id,e.delay=t?.delay,e.resolve=Z3,e.execute=W3,e}function Y3(i,{machine:t,context:e},s,r){const l=(u,f)=>{if(typeof u=="string"){const p=F0(t,u);if(!p)throw new Error(`Actor logic '${u}' not implemented in machine '${t.id}'`);const m=hh(p,{id:f?.id,parent:i.self,syncSnapshot:f?.syncSnapshot,input:typeof f?.input=="function"?f.input({context:e,event:s,self:i.self}):f?.input,src:u,systemId:f?.systemId});return r[m.id]=m,m}else return hh(u,{id:f?.id,parent:i.self,syncSnapshot:f?.syncSnapshot,input:f?.input,src:u,systemId:f?.systemId})};return(u,f)=>{const p=l(u,f);return r[p.id]=p,i.defer(()=>{p._processingStatus!==Li.Stopped&&p.start()}),p}}function X3(i,t,e,s,{assignment:r}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const l={},u={context:t.context,event:e.event,spawn:Y3(i,t,e.event,l),self:i.self,system:i.system};let f={};if(typeof r=="function")f=r(u,s);else for(const m of Object.keys(r)){const v=r[m];f[m]=typeof v=="function"?v(u,s):v}const p=Object.assign({},t.context,f);return[fl(t,{context:p,children:Object.keys(l).length?{...t.children,...l}:t.children}),void 0,void 0]}function ol(i){function t(e,s){}return t.type="xstate.assign",t.assignment=i,t.resolve=X3,t}const Gx=new WeakMap;function lc(i,t,e){let s=Gx.get(i);return s?t in s||(s[t]=e()):(s={[t]:e()},Gx.set(i,s)),s[t]}const Q3={},Gu=i=>typeof i=="string"?{type:i}:typeof i=="function"?"resolve"in i?{type:i.type}:{type:i.name}:i;class Wd{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(KS),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Bx(this.config.states,(s,r)=>new Wd(s,{_parent:this,_key:r,_machine:this.machine})):Q3,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=so(this.config.entry).slice(),this.exit=so(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=so(t.tags).slice()}_initialize(){this.transitions=b3(this),this.config.always&&(this.always=mc(this.config.always).map(t=>el(this,JS,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Gu),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Gu),eventType:null})}:void 0,history:this.history,states:Bx(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(Gu)})),entry:this.entry.map(Gu),exit:this.exit.map(Gu),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return lc(this,"invoke",()=>so(this.config.invoke).map((t,e)=>{const{src:s,systemId:r}=t,l=t.id??Ux(this.id,e),u=typeof s=="string"?s:`xstate.invoke.${Ux(this.id,e)}`;return{...t,src:u,id:l,systemId:r,toJSON(){const{onDone:f,onError:p,...m}=t;return{...m,type:"xstate.invoke",src:u,id:l}}}}))}get on(){return lc(this,"on",()=>[...this.transitions].flatMap(([e,s])=>s.map(r=>[e,r])).reduce((e,[s,r])=>(e[s]=e[s]||[],e[s].push(r),e),{}))}get after(){return lc(this,"delayedTransitions",()=>v3(this))}get initial(){return lc(this,"initial",()=>w3(this,this.config.initial))}next(t,e){const s=e.type,r=[];let l;const u=lc(this,`candidates-${s}`,()=>y3(this,s));for(const f of u){const{guard:p}=f,m=t.context;let v=!1;try{v=!p||Ep(p,m,e,t)}catch(y){const w=typeof p=="string"?p:typeof p=="object"?p.type:void 0;throw new Error(`Unable to evaluate guard ${w?`'${w}' `:""}in transition for event '${s}' in state node '${this.id}':
${y.message}`)}if(v){r.push(...f.actions),l=f;break}}return l?[l]:void 0}get events(){return lc(this,"events",()=>{const{states:t}=this,e=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const r=t[s];if(r.states)for(const l of r.events)e.add(`${l}`)}return Array.from(e)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),e=new Set(t.filter(s=>this.transitions.get(s).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const F3="#";class ry{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:e?.actors??{},actions:e?.actions??{},delays:e?.delays??{},guards:e?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Wd(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:e,guards:s,actors:r,delays:l}=this.implementations;return new ry(this.config,{actions:{...e,...t.actions},guards:{...s,...t.guards},actors:{...r,...t.actors},delays:{...l,...t.delays}})}resolveState(t){const e=z3(this.root,t.value),s=jd(Zd(this.root,e));return wd({_nodes:[...s],context:t.context||{},children:{},status:ey(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,s){return hg(t,e,s,[]).snapshot}microstep(t,e,s){return hg(t,e,s,[]).microstates}getTransitionData(t,e){return ny(this.root,t.value,t,e)||[]}getPreInitialState(t,e,s){const{context:r}=this.config,l=wd({context:typeof r!="function"&&r?r:{},_nodes:[this.root],children:{},status:"active"},this);return typeof r=="function"?Lc(l,e,t,[ol(({spawn:f,event:p,self:m})=>r({spawn:f,input:p.input,self:m}))],s,void 0):l}getInitialSnapshot(t,e){const s=eT(e),r=[],l=this.getPreInitialState(t,s,r),u=qg([{target:[...fT(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],l,t,s,!0,r),{snapshot:f}=hg(u,s,t,r);return f}start(t){Object.values(t.children).forEach(e=>{e.getSnapshot().status==="active"&&e.start()})}getStateNodeById(t){const e=Q0(t),s=e.slice(1),r=Cp(e[0])?e[0].slice(F3.length):e[0],l=this.idMap.get(r);if(!l)throw new Error(`Child state node '#${r}' does not exist on machine '${this.id}'`);return Gd(l,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return G3(t,e)}restoreSnapshot(t,e){const s={},r=t.children;Object.keys(r).forEach(y=>{const w=r[y],T=w.snapshot,x=w.src,A=typeof x=="string"?F0(this,x):x;if(!A)return;const E=hh(A,{id:y,parent:e.self,syncSnapshot:w.syncSnapshot,snapshot:T,src:x,systemId:w.systemId});s[y]=E});function l(y,w){if(w instanceof Wd)return w;try{return y.machine.getStateNodeById(w.id)}catch{}}function u(y,w){if(!w||typeof w!="object")return{};const T={};for(const x in w){const A=w[x];for(const E of A){const O=l(y,E);O&&(T[x]??=[],T[x].push(O))}}return T}const f=u(this.root,t.historyValue),p=wd({...t,children:s,_nodes:Array.from(jd(Zd(this.root,t.value))),historyValue:f},this),m=new Set;function v(y,w){if(!m.has(y)){m.add(y);for(const T in y){const x=y[T];if(x&&typeof x=="object"){if("xstate$$type"in x&&x.xstate$$type===K0){y[T]=w[x.id];continue}v(x,w)}}}}return v(p.context,s),p}}function K3(i,t,e,s,{event:r}){const l=typeof r=="function"?r(e,s):r;return[t,{event:l},void 0]}function J3(i,{event:t}){i.defer(()=>i.emit(t))}function yT(i){function t(e,s){}return t.type="xstate.emit",t.event=i,t.resolve=K3,t.execute=J3,t}let jg=(function(i){return i.Parent="#_parent",i.Internal="#_internal",i})({});function $3(i,t,e,s,{to:r,event:l,id:u,delay:f},p){const m=t.machine.implementations.delays;if(typeof l=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${l}" }) instead`);const v=typeof l=="function"?l(e,s):l;let y;if(typeof f=="string"){const x=m&&m[f];y=typeof x=="function"?x(e,s):x}else y=typeof f=="function"?f(e,s):f;const w=typeof r=="function"?r(e,s):r;let T;if(typeof w=="string"){if(w===jg.Parent?T=i.self._parent:w===jg.Internal?T=i.self:w.startsWith("#_")?T=t.children[w.slice(2)]:T=p.deferredActorIds?.includes(w)?w:t.children[w],!T)throw new Error(`Unable to send event to actor '${w}' from machine '${t.machine.id}'.`)}else T=w||i.self;return[t,{to:T,targetId:typeof w=="string"?w:void 0,event:v,id:u,delay:y},void 0]}function t4(i,t,e){typeof e.to=="string"&&(e.to=t.children[e.to])}function e4(i,t){i.defer(()=>{const{to:e,event:s,delay:r,id:l}=t;if(typeof r=="number"){i.system.scheduler.schedule(i.self,e,s,r,l);return}i.system._relay(i.self,e,s.type===n3?tT(i.self.id,s.data):s)})}function oy(i,t,e){function s(r,l){}return s.type="xstate.sendTo",s.to=i,s.event=t,s.id=e?.id,s.delay=e?.delay,s.resolve=$3,s.retryResolve=t4,s.execute=e4,s}function n4(i,t){return oy(jg.Parent,i,t)}function i4(i,t,e,s,{collect:r}){const l=[],u=function(p){l.push(p)};return u.assign=(...f)=>{l.push(ol(...f))},u.cancel=(...f)=>{l.push(J0(...f))},u.raise=(...f)=>{l.push(sy(...f))},u.sendTo=(...f)=>{l.push(oy(...f))},u.sendParent=(...f)=>{l.push(n4(...f))},u.spawnChild=(...f)=>{l.push($0(...f))},u.stopChild=(...f)=>{l.push(Ap(...f))},u.emit=(...f)=>{l.push(yT(...f))},r({context:e.context,event:e.event,enqueue:u,check:f=>Ep(f,t.context,e.event,t),self:i.self,system:i.system},s),[t,void 0,l]}function s4(i){function t(e,s){}return t.type="xstate.enqueueActions",t.collect=i,t.resolve=i4,t}function r4(i,t,e,s,{value:r,label:l}){return[t,{value:typeof r=="function"?r(e,s):r,label:l},void 0]}function o4({logger:i},{value:t,label:e}){e?i(e,t):i(t)}function a4(i=({context:e,event:s})=>({context:e,event:s}),t){function e(s,r){}return e.type="xstate.log",e.value=i,e.label=t,e.resolve=r4,e.execute=o4,e}function l4(i,t){const e=so(t);if(!e.some(r=>oT(i.type,r))){const r=e.length===1?`type matching "${e[0]}"`:`one of types matching "${e.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(i)} to have ${r}`)}}function c4(i,t){return new ry(i,t)}function vT({schemas:i,actors:t,actions:e,guards:s,delays:r}){return{assign:ol,sendTo:oy,raise:sy,log:a4,cancel:J0,stopChild:Ap,enqueueActions:s4,emit:yT,spawnChild:$0,createStateConfig:l=>l,createAction:l=>l,createMachine:l=>c4({...l,schemas:i},{actors:t,actions:e,guards:s,delays:r}),extend:l=>vT({schemas:i,actors:t,actions:{...e,...l.actions},guards:{...s,...l.guards},delays:{...r,...l.delays}})}}const u4={timeout:1/0};function h4(i,t,e){const s={...u4,...e};return new Promise((r,l)=>{const{signal:u}=s;if(u?.aborted){l(u.reason);return}let f=!1;const p=s.timeout===1/0?void 0:setTimeout(()=>{m(),l(new Error(`Timeout of ${s.timeout} ms exceeded`))},s.timeout),m=()=>{clearTimeout(p),f=!0,w?.unsubscribe(),y&&u.removeEventListener("abort",y)};function v(T){t(T)&&(m(),r(T))}let y,w;v(i.getSnapshot()),!f&&(u&&(y=()=>{m(),l(u.reason)},u.addEventListener("abort",y)),w=i.subscribe({next:v,error:T=>{m(),l(T)},complete:()=>{m(),l(new Error("Actor terminated without satisfying predicate"))}}),f&&w.unsubscribe())})}let cd;const f4=new Uint8Array(16);function d4(){if(!cd&&(cd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!cd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cd(f4)}const p4=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function bT(i){return typeof i=="string"&&p4.test(i)}const Qn=[];for(let i=0;i<256;++i)Qn.push((i+256).toString(16).slice(1));function m4(i,t=0){return Qn[i[t+0]]+Qn[i[t+1]]+Qn[i[t+2]]+Qn[i[t+3]]+"-"+Qn[i[t+4]]+Qn[i[t+5]]+"-"+Qn[i[t+6]]+Qn[i[t+7]]+"-"+Qn[i[t+8]]+Qn[i[t+9]]+"-"+Qn[i[t+10]]+Qn[i[t+11]]+Qn[i[t+12]]+Qn[i[t+13]]+Qn[i[t+14]]+Qn[i[t+15]]}function _4(i){if(!bT(i))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}const g4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zx={randomUUID:g4};function wT(i,t,e){if(Zx.randomUUID&&!t&&!i)return Zx.randomUUID();i=i||{};const s=i.random||(i.rng||d4)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return m4(s)}var Bs={},je={},ei={},fg={},Zu={},Wx;function y4(){return Wx||(Wx=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.crypto=void 0,Zu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Zu}var Yx;function xT(){return Yx||(Yx=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.wrapXOFConstructorWithOpts=i.wrapConstructorWithOpts=i.wrapConstructor=i.Hash=i.nextTick=i.swap32IfBE=i.byteSwapIfBE=i.swap8IfBE=i.isLE=void 0,i.isBytes=e,i.anumber=s,i.abytes=r,i.ahash=l,i.aexists=u,i.aoutput=f,i.u8=p,i.u32=m,i.clean=v,i.createView=y,i.rotr=w,i.rotl=T,i.byteSwap=x,i.byteSwap32=A,i.bytesToHex=U,i.hexToBytes=I,i.asyncLoop=G,i.utf8ToBytes=j,i.bytesToUtf8=V,i.toBytes=Z,i.kdfInputToBytes=Y,i.concatBytes=$,i.checkOpts=P,i.createHasher=tt,i.createOptHasher=B,i.createXOFer=W,i.randomBytes=et;const t=y4();function e(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function s(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function r(k,...q){if(!e(k))throw new Error("Uint8Array expected");if(q.length>0&&!q.includes(k.length))throw new Error("Uint8Array expected of length "+q+", got length="+k.length)}function l(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(k.outputLen),s(k.blockLen)}function u(k,q=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(q&&k.finished)throw new Error("Hash#digest() has already been called")}function f(k,q){r(k);const R=q.outputLen;if(k.length<R)throw new Error("digestInto() expects output buffer of length at least "+R)}function p(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function m(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function v(...k){for(let q=0;q<k.length;q++)k[q].fill(0)}function y(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function w(k,q){return k<<32-q|k>>>q}function T(k,q){return k<<q|k>>>32-q>>>0}i.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}i.swap8IfBE=i.isLE?k=>k:k=>x(k),i.byteSwapIfBE=i.swap8IfBE;function A(k){for(let q=0;q<k.length;q++)k[q]=x(k[q]);return k}i.swap32IfBE=i.isLE?k=>k:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",O=Array.from({length:256},(k,q)=>q.toString(16).padStart(2,"0"));function U(k){if(r(k),E)return k.toHex();let q="";for(let R=0;R<k.length;R++)q+=O[k[R]];return q}const D={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q(k){if(k>=D._0&&k<=D._9)return k-D._0;if(k>=D.A&&k<=D.F)return k-(D.A-10);if(k>=D.a&&k<=D.f)return k-(D.a-10)}function I(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(E)return Uint8Array.fromHex(k);const q=k.length,R=q/2;if(q%2)throw new Error("hex string expected, got unpadded hex of length "+q);const X=new Uint8Array(R);for(let ot=0,dt=0;ot<R;ot++,dt+=2){const mt=Q(k.charCodeAt(dt)),_t=Q(k.charCodeAt(dt+1));if(mt===void 0||_t===void 0){const Ct=k[dt]+k[dt+1];throw new Error('hex string expected, got non-hex character "'+Ct+'" at index '+dt)}X[ot]=mt*16+_t}return X}const H=async()=>{};i.nextTick=H;async function G(k,q,R){let X=Date.now();for(let ot=0;ot<k;ot++){R(ot);const dt=Date.now()-X;dt>=0&&dt<q||(await(0,i.nextTick)(),X+=dt)}}function j(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function V(k){return new TextDecoder().decode(k)}function Z(k){return typeof k=="string"&&(k=j(k)),r(k),k}function Y(k){return typeof k=="string"&&(k=j(k)),r(k),k}function $(...k){let q=0;for(let X=0;X<k.length;X++){const ot=k[X];r(ot),q+=ot.length}const R=new Uint8Array(q);for(let X=0,ot=0;X<k.length;X++){const dt=k[X];R.set(dt,ot),ot+=dt.length}return R}function P(k,q){if(q!==void 0&&{}.toString.call(q)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,q)}class J{}i.Hash=J;function tt(k){const q=X=>k().update(Z(X)).digest(),R=k();return q.outputLen=R.outputLen,q.blockLen=R.blockLen,q.create=()=>k(),q}function B(k){const q=(X,ot)=>k(ot).update(Z(X)).digest(),R=k({});return q.outputLen=R.outputLen,q.blockLen=R.blockLen,q.create=X=>k(X),q}function W(k){const q=(X,ot)=>k(ot).update(Z(X)).digest(),R=k({});return q.outputLen=R.outputLen,q.blockLen=R.blockLen,q.create=X=>k(X),q}i.wrapConstructor=tt,i.wrapConstructorWithOpts=B,i.wrapXOFConstructorWithOpts=W;function et(k=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(k));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}})(fg)),fg}var Xx;function v4(){if(Xx)return ei;Xx=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.SHA512_IV=ei.SHA384_IV=ei.SHA224_IV=ei.SHA256_IV=ei.HashMD=void 0,ei.setBigUint64=t,ei.Chi=e,ei.Maj=s;const i=xT();function t(l,u,f,p){if(typeof l.setBigUint64=="function")return l.setBigUint64(u,f,p);const m=BigInt(32),v=BigInt(4294967295),y=Number(f>>m&v),w=Number(f&v),T=p?4:0,x=p?0:4;l.setUint32(u+T,y,p),l.setUint32(u+x,w,p)}function e(l,u,f){return l&u^~l&f}function s(l,u,f){return l&u^l&f^u&f}class r extends i.Hash{constructor(u,f,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=f,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,i.createView)(this.buffer)}update(u){(0,i.aexists)(this),u=(0,i.toBytes)(u),(0,i.abytes)(u);const{view:f,buffer:p,blockLen:m}=this,v=u.length;for(let y=0;y<v;){const w=Math.min(m-this.pos,v-y);if(w===m){const T=(0,i.createView)(u);for(;m<=v-y;y+=m)this.process(T,y);continue}p.set(u.subarray(y,y+w),this.pos),this.pos+=w,y+=w,this.pos===m&&(this.process(f,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,i.aexists)(this),(0,i.aoutput)(u,this),this.finished=!0;const{buffer:f,view:p,blockLen:m,isLE:v}=this;let{pos:y}=this;f[y++]=128,(0,i.clean)(this.buffer.subarray(y)),this.padOffset>m-y&&(this.process(p,0),y=0);for(let E=y;E<m;E++)f[E]=0;t(p,m-8,BigInt(this.length*8),v),this.process(p,0);const w=(0,i.createView)(u),T=this.outputLen;if(T%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=T/4,A=this.get();if(x>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<x;E++)w.setUint32(4*E,A[E],v)}digest(){const{buffer:u,outputLen:f}=this;this.digestInto(u);const p=u.slice(0,f);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:f,buffer:p,length:m,finished:v,destroyed:y,pos:w}=this;return u.destroyed=y,u.finished=v,u.length=m,u.pos=w,m%f&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return ei.HashMD=r,ei.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ei.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),ei.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ei.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ei}var Jt={},Qx;function b4(){if(Qx)return Jt;Qx=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.toBig=Jt.shrSL=Jt.shrSH=Jt.rotrSL=Jt.rotrSH=Jt.rotrBL=Jt.rotrBH=Jt.rotr32L=Jt.rotr32H=Jt.rotlSL=Jt.rotlSH=Jt.rotlBL=Jt.rotlBH=Jt.add5L=Jt.add5H=Jt.add4L=Jt.add4H=Jt.add3L=Jt.add3H=void 0,Jt.add=O,Jt.fromBig=e,Jt.split=s;const i=BigInt(2**32-1),t=BigInt(32);function e(V,Z=!1){return Z?{h:Number(V&i),l:Number(V>>t&i)}:{h:Number(V>>t&i)|0,l:Number(V&i)|0}}function s(V,Z=!1){const Y=V.length;let $=new Uint32Array(Y),P=new Uint32Array(Y);for(let J=0;J<Y;J++){const{h:tt,l:B}=e(V[J],Z);[$[J],P[J]]=[tt,B]}return[$,P]}const r=(V,Z)=>BigInt(V>>>0)<<t|BigInt(Z>>>0);Jt.toBig=r;const l=(V,Z,Y)=>V>>>Y;Jt.shrSH=l;const u=(V,Z,Y)=>V<<32-Y|Z>>>Y;Jt.shrSL=u;const f=(V,Z,Y)=>V>>>Y|Z<<32-Y;Jt.rotrSH=f;const p=(V,Z,Y)=>V<<32-Y|Z>>>Y;Jt.rotrSL=p;const m=(V,Z,Y)=>V<<64-Y|Z>>>Y-32;Jt.rotrBH=m;const v=(V,Z,Y)=>V>>>Y-32|Z<<64-Y;Jt.rotrBL=v;const y=(V,Z)=>Z;Jt.rotr32H=y;const w=(V,Z)=>V;Jt.rotr32L=w;const T=(V,Z,Y)=>V<<Y|Z>>>32-Y;Jt.rotlSH=T;const x=(V,Z,Y)=>Z<<Y|V>>>32-Y;Jt.rotlSL=x;const A=(V,Z,Y)=>Z<<Y-32|V>>>64-Y;Jt.rotlBH=A;const E=(V,Z,Y)=>V<<Y-32|Z>>>64-Y;Jt.rotlBL=E;function O(V,Z,Y,$){const P=(Z>>>0)+($>>>0);return{h:V+Y+(P/2**32|0)|0,l:P|0}}const U=(V,Z,Y)=>(V>>>0)+(Z>>>0)+(Y>>>0);Jt.add3L=U;const D=(V,Z,Y,$)=>Z+Y+$+(V/2**32|0)|0;Jt.add3H=D;const Q=(V,Z,Y,$)=>(V>>>0)+(Z>>>0)+(Y>>>0)+($>>>0);Jt.add4L=Q;const I=(V,Z,Y,$,P)=>Z+Y+$+P+(V/2**32|0)|0;Jt.add4H=I;const H=(V,Z,Y,$,P)=>(V>>>0)+(Z>>>0)+(Y>>>0)+($>>>0)+(P>>>0);Jt.add5L=H;const G=(V,Z,Y,$,P,J)=>Z+Y+$+P+J+(V/2**32|0)|0;Jt.add5H=G;const j={fromBig:e,split:s,toBig:r,shrSH:l,shrSL:u,rotrSH:f,rotrSL:p,rotrBH:m,rotrBL:v,rotr32H:y,rotr32L:w,rotlSH:T,rotlSL:x,rotlBH:A,rotlBL:E,add:O,add3L:U,add3H:D,add4L:Q,add4H:I,add5H:G,add5L:H};return Jt.default=j,Jt}var Fx;function w4(){if(Fx)return je;Fx=1,Object.defineProperty(je,"__esModule",{value:!0}),je.sha512_224=je.sha512_256=je.sha384=je.sha512=je.sha224=je.sha256=je.SHA512_256=je.SHA512_224=je.SHA384=je.SHA512=je.SHA224=je.SHA256=void 0;const i=v4(),t=b4(),e=xT(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class l extends i.HashMD{constructor(D=32){super(64,D,8,!1),this.A=i.SHA256_IV[0]|0,this.B=i.SHA256_IV[1]|0,this.C=i.SHA256_IV[2]|0,this.D=i.SHA256_IV[3]|0,this.E=i.SHA256_IV[4]|0,this.F=i.SHA256_IV[5]|0,this.G=i.SHA256_IV[6]|0,this.H=i.SHA256_IV[7]|0}get(){const{A:D,B:Q,C:I,D:H,E:G,F:j,G:V,H:Z}=this;return[D,Q,I,H,G,j,V,Z]}set(D,Q,I,H,G,j,V,Z){this.A=D|0,this.B=Q|0,this.C=I|0,this.D=H|0,this.E=G|0,this.F=j|0,this.G=V|0,this.H=Z|0}process(D,Q){for(let P=0;P<16;P++,Q+=4)r[P]=D.getUint32(Q,!1);for(let P=16;P<64;P++){const J=r[P-15],tt=r[P-2],B=(0,e.rotr)(J,7)^(0,e.rotr)(J,18)^J>>>3,W=(0,e.rotr)(tt,17)^(0,e.rotr)(tt,19)^tt>>>10;r[P]=W+r[P-7]+B+r[P-16]|0}let{A:I,B:H,C:G,D:j,E:V,F:Z,G:Y,H:$}=this;for(let P=0;P<64;P++){const J=(0,e.rotr)(V,6)^(0,e.rotr)(V,11)^(0,e.rotr)(V,25),tt=$+J+(0,i.Chi)(V,Z,Y)+s[P]+r[P]|0,W=((0,e.rotr)(I,2)^(0,e.rotr)(I,13)^(0,e.rotr)(I,22))+(0,i.Maj)(I,H,G)|0;$=Y,Y=Z,Z=V,V=j+tt|0,j=G,G=H,H=I,I=tt+W|0}I=I+this.A|0,H=H+this.B|0,G=G+this.C|0,j=j+this.D|0,V=V+this.E|0,Z=Z+this.F|0,Y=Y+this.G|0,$=$+this.H|0,this.set(I,H,G,j,V,Z,Y,$)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}je.SHA256=l;class u extends l{constructor(){super(28),this.A=i.SHA224_IV[0]|0,this.B=i.SHA224_IV[1]|0,this.C=i.SHA224_IV[2]|0,this.D=i.SHA224_IV[3]|0,this.E=i.SHA224_IV[4]|0,this.F=i.SHA224_IV[5]|0,this.G=i.SHA224_IV[6]|0,this.H=i.SHA224_IV[7]|0}}je.SHA224=u;const f=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(U=>BigInt(U))),p=f[0],m=f[1],v=new Uint32Array(80),y=new Uint32Array(80);class w extends i.HashMD{constructor(D=64){super(128,D,16,!1),this.Ah=i.SHA512_IV[0]|0,this.Al=i.SHA512_IV[1]|0,this.Bh=i.SHA512_IV[2]|0,this.Bl=i.SHA512_IV[3]|0,this.Ch=i.SHA512_IV[4]|0,this.Cl=i.SHA512_IV[5]|0,this.Dh=i.SHA512_IV[6]|0,this.Dl=i.SHA512_IV[7]|0,this.Eh=i.SHA512_IV[8]|0,this.El=i.SHA512_IV[9]|0,this.Fh=i.SHA512_IV[10]|0,this.Fl=i.SHA512_IV[11]|0,this.Gh=i.SHA512_IV[12]|0,this.Gl=i.SHA512_IV[13]|0,this.Hh=i.SHA512_IV[14]|0,this.Hl=i.SHA512_IV[15]|0}get(){const{Ah:D,Al:Q,Bh:I,Bl:H,Ch:G,Cl:j,Dh:V,Dl:Z,Eh:Y,El:$,Fh:P,Fl:J,Gh:tt,Gl:B,Hh:W,Hl:et}=this;return[D,Q,I,H,G,j,V,Z,Y,$,P,J,tt,B,W,et]}set(D,Q,I,H,G,j,V,Z,Y,$,P,J,tt,B,W,et){this.Ah=D|0,this.Al=Q|0,this.Bh=I|0,this.Bl=H|0,this.Ch=G|0,this.Cl=j|0,this.Dh=V|0,this.Dl=Z|0,this.Eh=Y|0,this.El=$|0,this.Fh=P|0,this.Fl=J|0,this.Gh=tt|0,this.Gl=B|0,this.Hh=W|0,this.Hl=et|0}process(D,Q){for(let R=0;R<16;R++,Q+=4)v[R]=D.getUint32(Q),y[R]=D.getUint32(Q+=4);for(let R=16;R<80;R++){const X=v[R-15]|0,ot=y[R-15]|0,dt=t.rotrSH(X,ot,1)^t.rotrSH(X,ot,8)^t.shrSH(X,ot,7),mt=t.rotrSL(X,ot,1)^t.rotrSL(X,ot,8)^t.shrSL(X,ot,7),_t=v[R-2]|0,Ct=y[R-2]|0,Et=t.rotrSH(_t,Ct,19)^t.rotrBH(_t,Ct,61)^t.shrSH(_t,Ct,6),ne=t.rotrSL(_t,Ct,19)^t.rotrBL(_t,Ct,61)^t.shrSL(_t,Ct,6),Me=t.add4L(mt,ne,y[R-7],y[R-16]),Re=t.add4H(Me,dt,Et,v[R-7],v[R-16]);v[R]=Re|0,y[R]=Me|0}let{Ah:I,Al:H,Bh:G,Bl:j,Ch:V,Cl:Z,Dh:Y,Dl:$,Eh:P,El:J,Fh:tt,Fl:B,Gh:W,Gl:et,Hh:k,Hl:q}=this;for(let R=0;R<80;R++){const X=t.rotrSH(P,J,14)^t.rotrSH(P,J,18)^t.rotrBH(P,J,41),ot=t.rotrSL(P,J,14)^t.rotrSL(P,J,18)^t.rotrBL(P,J,41),dt=P&tt^~P&W,mt=J&B^~J&et,_t=t.add5L(q,ot,mt,m[R],y[R]),Ct=t.add5H(_t,k,X,dt,p[R],v[R]),Et=_t|0,ne=t.rotrSH(I,H,28)^t.rotrBH(I,H,34)^t.rotrBH(I,H,39),Me=t.rotrSL(I,H,28)^t.rotrBL(I,H,34)^t.rotrBL(I,H,39),Re=I&G^I&V^G&V,Fe=H&j^H&Z^j&Z;k=W|0,q=et|0,W=tt|0,et=B|0,tt=P|0,B=J|0,{h:P,l:J}=t.add(Y|0,$|0,Ct|0,Et|0),Y=V|0,$=Z|0,V=G|0,Z=j|0,G=I|0,j=H|0;const jn=t.add3L(Et,Me,Fe);I=t.add3H(jn,Ct,ne,Re),H=jn|0}({h:I,l:H}=t.add(this.Ah|0,this.Al|0,I|0,H|0)),{h:G,l:j}=t.add(this.Bh|0,this.Bl|0,G|0,j|0),{h:V,l:Z}=t.add(this.Ch|0,this.Cl|0,V|0,Z|0),{h:Y,l:$}=t.add(this.Dh|0,this.Dl|0,Y|0,$|0),{h:P,l:J}=t.add(this.Eh|0,this.El|0,P|0,J|0),{h:tt,l:B}=t.add(this.Fh|0,this.Fl|0,tt|0,B|0),{h:W,l:et}=t.add(this.Gh|0,this.Gl|0,W|0,et|0),{h:k,l:q}=t.add(this.Hh|0,this.Hl|0,k|0,q|0),this.set(I,H,G,j,V,Z,Y,$,P,J,tt,B,W,et,k,q)}roundClean(){(0,e.clean)(v,y)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}je.SHA512=w;class T extends w{constructor(){super(48),this.Ah=i.SHA384_IV[0]|0,this.Al=i.SHA384_IV[1]|0,this.Bh=i.SHA384_IV[2]|0,this.Bl=i.SHA384_IV[3]|0,this.Ch=i.SHA384_IV[4]|0,this.Cl=i.SHA384_IV[5]|0,this.Dh=i.SHA384_IV[6]|0,this.Dl=i.SHA384_IV[7]|0,this.Eh=i.SHA384_IV[8]|0,this.El=i.SHA384_IV[9]|0,this.Fh=i.SHA384_IV[10]|0,this.Fl=i.SHA384_IV[11]|0,this.Gh=i.SHA384_IV[12]|0,this.Gl=i.SHA384_IV[13]|0,this.Hh=i.SHA384_IV[14]|0,this.Hl=i.SHA384_IV[15]|0}}je.SHA384=T;const x=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends w{constructor(){super(28),this.Ah=x[0]|0,this.Al=x[1]|0,this.Bh=x[2]|0,this.Bl=x[3]|0,this.Ch=x[4]|0,this.Cl=x[5]|0,this.Dh=x[6]|0,this.Dl=x[7]|0,this.Eh=x[8]|0,this.El=x[9]|0,this.Fh=x[10]|0,this.Fl=x[11]|0,this.Gh=x[12]|0,this.Gl=x[13]|0,this.Hh=x[14]|0,this.Hl=x[15]|0}}je.SHA512_224=E;class O extends w{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return je.SHA512_256=O,je.sha256=(0,e.createHasher)(()=>new l),je.sha224=(0,e.createHasher)(()=>new u),je.sha512=(0,e.createHasher)(()=>new w),je.sha384=(0,e.createHasher)(()=>new T),je.sha512_256=(0,e.createHasher)(()=>new O),je.sha512_224=(0,e.createHasher)(()=>new E),je}var Kx;function x4(){if(Kx)return Bs;Kx=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.sha224=Bs.SHA224=Bs.sha256=Bs.SHA256=void 0;const i=w4();return Bs.SHA256=i.SHA256,Bs.sha256=i.sha256,Bs.SHA224=i.SHA224,Bs.sha224=i.sha224,Bs}var dg,Jx;function S4(){if(Jx)return dg;Jx=1;function i(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var l=t.charAt(r),u=l.charCodeAt(0);if(e[u]!==255)throw new TypeError(l+" is ambiguous");e[u]=r}var f=t.length,p=t.charAt(0),m=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function y(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,O=0,U=x.length;O!==U&&x[O]===0;)O++,A++;for(var D=(U-O)*v+1>>>0,Q=new Uint8Array(D);O!==U;){for(var I=x[O],H=0,G=D-1;(I!==0||H<E)&&G!==-1;G--,H++)I+=256*Q[G]>>>0,Q[G]=I%f>>>0,I=I/f>>>0;if(I!==0)throw new Error("Non-zero carry");E=H,O++}for(var j=D-E;j!==D&&Q[j]===0;)j++;for(var V=p.repeat(A);j<D;++j)V+=t.charAt(Q[j]);return V}function w(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,O=0;x[A]===p;)E++,A++;for(var U=(x.length-A)*m+1>>>0,D=new Uint8Array(U);x[A];){var Q=x.charCodeAt(A);if(Q>255)return;var I=e[Q];if(I===255)return;for(var H=0,G=U-1;(I!==0||H<O)&&G!==-1;G--,H++)I+=f*D[G]>>>0,D[G]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");O=H,A++}for(var j=U-O;j!==U&&D[j]===0;)j++;for(var V=new Uint8Array(E+(U-j)),Z=E;j!==U;)V[Z++]=D[j++];return V}function T(x){var A=w(x);if(A)return A;throw new Error("Non-base"+f+" character")}return{encode:y,decodeUnsafe:w,decode:T}}return dg=i,dg}var pg,$x;function T4(){return $x||($x=1,pg=S4()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),pg}var mg,t1;function A4(){if(t1)return mg;t1=1;var i=T4();return mg=function(t){function e(u){var f=Uint8Array.from(u),p=t(f),m=f.length+4,v=new Uint8Array(m);return v.set(f,0),v.set(p.subarray(0,4),f.length),i.encode(v,m)}function s(u){var f=u.slice(0,-4),p=u.slice(-4),m=t(f);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return f}function r(u){var f=i.decodeUnsafe(u);if(f)return s(f)}function l(u){var f=i.decode(u),p=s(f);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:l,decodeUnsafe:r}},mg}var _g,e1;function E4(){if(e1)return _g;e1=1;var{sha256:i}=x4(),t=A4();function e(s){return i(i(s))}return _g=t(e),_g}var C4=E4();const vl=_h(C4),L4=i=>{if(i.length%2!==0)throw new Error("Hex string must have an even length");const t=new Uint8Array(i.length/2);for(let e=0;e<i.length;e+=2)t[e>>1]=parseInt(i.slice(e,e+2),16);return t},ST=i=>Array.from(i,t=>t.toString(16).padStart(2,"0")).join(""),Yd="automerge:",wc=i=>{const[t,e,...s]=i.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${Yd}(\\w+)$`),[,l]=t.match(r)||[],u=l,f=CT(u);if(!f)throw new Error("Invalid document URL: "+i);if(e===void 0)return{binaryDocumentId:f,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(v=>{try{return ST(vl.decode(v))}catch{throw new Error(`Invalid head in URL: ${v}`)}});return{binaryDocumentId:f,hexHeads:m,documentId:u,heads:p}},TT=i=>{if(i instanceof Uint8Array||typeof i=="string")return Yd+(i instanceof Uint8Array?fh(i):i);const{documentId:t,heads:e=void 0}=i;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?fh(t):t;let r=`${Yd}${s}`;return e!==void 0&&(e.forEach(l=>{try{vl.decode(l)}catch{throw new Error(`Invalid head: ${l}`)}}),r+="#"+e.join("|")),r},AT=i=>{if(typeof i!="string"||!i||!i.startsWith(Yd))return!1;try{const{documentId:t,heads:e}=wc(i);return!(!ET(t)||e&&!e.every(s=>{try{return vl.decode(s),!0}catch{return!1}}))}catch{return!1}},ET=i=>typeof i!="string"?!1:CT(i)!==void 0,M4=i=>typeof i=="string"&&bT(i),n1=()=>{const i=wT(null,new Uint8Array(16));return TT({documentId:i})},CT=i=>vl.decodeUnsafe(i),fh=i=>vl.encode(i),_r=i=>i.map(t=>vl.encode(L4(t))),Ka=i=>i.map(t=>ST(vl.decode(t))),ud=i=>{if(i instanceof Uint8Array)return fh(i);if(AT(i))return wc(i).documentId;if(ET(i))return i;if(M4(i)){console.warn("Future versions will not support UUIDs as document IDs; use Automerge URLs instead.");const t=_4(i);return fh(t)}throw new Error(`Invalid AutomergeUrl: '${i}'`)};let Gg;try{Gg=new TextDecoder}catch{}let Ht,cl,yt=0;const k4=105,D4=57342,O4=57343,i1=57337,s1=6,cc={};let Wu=11281e4,$r=1681e4,me={},un,Xd,Qd=0,dh=0,On,_s,En=[],Zg=[],Oi,ui,Xu,r1={useRecords:!1,mapsAsObjects:!0},ph=!1,LT=2;try{new Function("")}catch{LT=1/0}class mh{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[e,s]of Object.entries(t.keyMap))this.mapKey.set(s,e)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let e=new Map;for(let[s,r]of Object.entries(t))e.set(this._keyMap.hasOwnProperty(s)?this._keyMap[s]:s,r);return e}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[s,r]of Object.entries(this._keyMap))this._mapKey.set(r,s)}let e={};return t.forEach((s,r)=>e[gs(this._mapKey.has(r)?this._mapKey.get(r):r)]=s),e}mapDecode(t,e){let s=this.decode(t);return this._keyMap&&s.constructor.name==="Array"?s.map(r=>this.decodeKeys(r)):s}decode(t,e){if(Ht)return OT(()=>(Qg(),this?this.decode(t,e):mh.prototype.decode.call(r1,t,e)));cl=e>-1?e:t.length,yt=0,dh=0,Xd=null,On=null,Ht=t;try{ui=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw Ht=null,t instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof mh){if(me=this,Oi=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return un=this.structures,hd();(!un||un.length>0)&&(un=[])}else me=r1,(!un||un.length>0)&&(un=[]),Oi=null;return hd()}decodeMultiple(t,e){let s,r=0;try{let l=t.length;ph=!0;let u=this?this.decode(t,l):cy.decode(t,l);if(e){if(e(u)===!1)return;for(;yt<l;)if(r=yt,e(hd())===!1)return}else{for(s=[u];yt<l;)r=yt,s.push(hd());return s}}catch(l){throw l.lastPosition=r,l.values=s,l}finally{ph=!1,Qg()}}}function hd(){try{let i=ye();if(On){if(yt>=On.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}yt=On.postBundlePosition,On=null}if(yt==cl)un=null,Ht=null,_s&&(_s=null);else if(yt>cl){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!ph)throw new Error("Data read, but end of buffer not reached");return i}catch(i){throw Qg(),(i instanceof RangeError||i.message.startsWith("Unexpected end of buffer"))&&(i.incomplete=!0),i}}function ye(){let i=Ht[yt++],t=i>>5;if(i=i&31,i>23)switch(i){case 24:i=Ht[yt++];break;case 25:if(t==7)return z4();i=ui.getUint16(yt),yt+=2;break;case 26:if(t==7){let e=ui.getFloat32(yt);if(me.useFloat32>2){let s=ly[(Ht[yt]&127)<<1|Ht[yt+1]>>7];return yt+=4,(s*e+(e>0?.5:-.5)>>0)/s}return yt+=4,e}i=ui.getUint32(yt),yt+=4;break;case 27:if(t==7){let e=ui.getFloat64(yt);return yt+=8,e}if(t>1){if(ui.getUint32(yt)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");i=ui.getUint32(yt+4)}else me.int64AsNumber?(i=ui.getUint32(yt)*4294967296,i+=ui.getUint32(yt+4)):i=ui.getBigUint64(yt);yt+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[],s,r=0;for(;(s=ye())!=cc;){if(r>=Wu)throw new Error(`Array length exceeds ${Wu}`);e[r++]=s}return t==4?e:t==3?e.join(""):Buffer.concat(e);case 5:let l;if(me.mapsAsObjects){let u={},f=0;if(me.keyMap)for(;(l=ye())!=cc;){if(f++>=$r)throw new Error(`Property count exceeds ${$r}`);u[gs(me.decodeKey(l))]=ye()}else for(;(l=ye())!=cc;){if(f++>=$r)throw new Error(`Property count exceeds ${$r}`);u[gs(l)]=ye()}return u}else{Xu&&(me.mapsAsObjects=!0,Xu=!1);let u=new Map;if(me.keyMap){let f=0;for(;(l=ye())!=cc;){if(f++>=$r)throw new Error(`Map size exceeds ${$r}`);u.set(me.decodeKey(l),ye())}}else{let f=0;for(;(l=ye())!=cc;){if(f++>=$r)throw new Error(`Map size exceeds ${$r}`);u.set(l,ye())}}return u}case 7:return cc;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+i)}switch(t){case 0:return i;case 1:return~i;case 2:return N4(i);case 3:if(dh>=yt)return Xd.slice(yt-Qd,(yt+=i)-Qd);if(dh==0&&cl<140&&i<32){let r=i<16?MT(i):I4(i);if(r!=null)return r}return R4(i);case 4:if(i>=Wu)throw new Error(`Array length exceeds ${Wu}`);let e=new Array(i);for(let r=0;r<i;r++)e[r]=ye();return e;case 5:if(i>=$r)throw new Error(`Map size exceeds ${Wu}`);if(me.mapsAsObjects){let r={};if(me.keyMap)for(let l=0;l<i;l++)r[gs(me.decodeKey(ye()))]=ye();else for(let l=0;l<i;l++)r[gs(ye())]=ye();return r}else{Xu&&(me.mapsAsObjects=!0,Xu=!1);let r=new Map;if(me.keyMap)for(let l=0;l<i;l++)r.set(me.decodeKey(ye()),ye());else for(let l=0;l<i;l++)r.set(ye(),ye());return r}case 6:if(i>=i1){let r=un[i&8191];if(r)return r.read||(r.read=Wg(r)),r.read();if(i<65536){if(i==O4){let l=bc(),u=ye(),f=ye();Xg(u,f);let p={};if(me.keyMap)for(let m=2;m<l;m++){let v=me.decodeKey(f[m-2]);p[gs(v)]=ye()}else for(let m=2;m<l;m++){let v=f[m-2];p[gs(v)]=ye()}return p}else if(i==D4){let l=bc(),u=ye();for(let f=2;f<l;f++)Xg(u++,ye());return ye()}else if(i==i1)return q4();if(me.getShared&&(ay(),r=un[i&8191],r))return r.read||(r.read=Wg(r)),r.read()}}let s=En[i];if(s)return s.handlesRead?s(ye):s(ye());{let r=ye();for(let l=0;l<Zg.length;l++){let u=Zg[l](i,r);if(u!==void 0)return u}return new dl(r,i)}case 7:switch(i){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let r=(Oi||$a())[i];if(r!==void 0)return r;throw new Error("Unknown token "+i)}default:if(isNaN(i)){let r=new Error("Unexpected end of CBOR data");throw r.incomplete=!0,r}throw new Error("Unknown CBOR token "+i)}}const o1=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Wg(i){if(!i)throw new Error("Structure is required in record definition");function t(){let e=Ht[yt++];if(e=e&31,e>23)switch(e){case 24:e=Ht[yt++];break;case 25:e=ui.getUint16(yt),yt+=2;break;case 26:e=ui.getUint32(yt),yt+=4;break;default:throw new Error("Expected array header, but got "+Ht[yt-1])}let s=this.compiledReader;for(;s;){if(s.propertyCount===e)return s(ye);s=s.next}if(this.slowReads++>=LT){let l=this.length==e?this:this.slice(0,e);return s=me.keyMap?new Function("r","return {"+l.map(u=>me.decodeKey(u)).map(u=>o1.test(u)?gs(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+l.map(u=>o1.test(u)?gs(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(s.next=this.compiledReader),s.propertyCount=e,this.compiledReader=s,s(ye)}let r={};if(me.keyMap)for(let l=0;l<e;l++)r[gs(me.decodeKey(this[l]))]=ye();else for(let l=0;l<e;l++)r[gs(this[l])]=ye();return r}return i.slowReads=0,t}function gs(i){if(typeof i=="string")return i==="__proto__"?"__proto_":i;if(typeof i=="number"||typeof i=="boolean"||typeof i=="bigint")return i.toString();if(i==null)return i+"";throw new Error("Invalid property name type "+typeof i)}let R4=Yg;function Yg(i){let t;if(i<16&&(t=MT(i)))return t;if(i>64&&Gg)return Gg.decode(Ht.subarray(yt,yt+=i));const e=yt+i,s=[];for(t="";yt<e;){const r=Ht[yt++];if((r&128)===0)s.push(r);else if((r&224)===192){const l=Ht[yt++]&63;s.push((r&31)<<6|l)}else if((r&240)===224){const l=Ht[yt++]&63,u=Ht[yt++]&63;s.push((r&31)<<12|l<<6|u)}else if((r&248)===240){const l=Ht[yt++]&63,u=Ht[yt++]&63,f=Ht[yt++]&63;let p=(r&7)<<18|l<<12|u<<6|f;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(r);s.length>=4096&&(t+=Un.apply(String,s),s.length=0)}return s.length>0&&(t+=Un.apply(String,s)),t}let Un=String.fromCharCode;function I4(i){let t=yt,e=new Array(i);for(let s=0;s<i;s++){const r=Ht[yt++];if((r&128)>0){yt=t;return}e[s]=r}return Un.apply(String,e)}function MT(i){if(i<4)if(i<2){if(i===0)return"";{let t=Ht[yt++];if((t&128)>1){yt-=1;return}return Un(t)}}else{let t=Ht[yt++],e=Ht[yt++];if((t&128)>0||(e&128)>0){yt-=2;return}if(i<3)return Un(t,e);let s=Ht[yt++];if((s&128)>0){yt-=3;return}return Un(t,e,s)}else{let t=Ht[yt++],e=Ht[yt++],s=Ht[yt++],r=Ht[yt++];if((t&128)>0||(e&128)>0||(s&128)>0||(r&128)>0){yt-=4;return}if(i<6){if(i===4)return Un(t,e,s,r);{let l=Ht[yt++];if((l&128)>0){yt-=5;return}return Un(t,e,s,r,l)}}else if(i<8){let l=Ht[yt++],u=Ht[yt++];if((l&128)>0||(u&128)>0){yt-=6;return}if(i<7)return Un(t,e,s,r,l,u);let f=Ht[yt++];if((f&128)>0){yt-=7;return}return Un(t,e,s,r,l,u,f)}else{let l=Ht[yt++],u=Ht[yt++],f=Ht[yt++],p=Ht[yt++];if((l&128)>0||(u&128)>0||(f&128)>0||(p&128)>0){yt-=8;return}if(i<10){if(i===8)return Un(t,e,s,r,l,u,f,p);{let m=Ht[yt++];if((m&128)>0){yt-=9;return}return Un(t,e,s,r,l,u,f,p,m)}}else if(i<12){let m=Ht[yt++],v=Ht[yt++];if((m&128)>0||(v&128)>0){yt-=10;return}if(i<11)return Un(t,e,s,r,l,u,f,p,m,v);let y=Ht[yt++];if((y&128)>0){yt-=11;return}return Un(t,e,s,r,l,u,f,p,m,v,y)}else{let m=Ht[yt++],v=Ht[yt++],y=Ht[yt++],w=Ht[yt++];if((m&128)>0||(v&128)>0||(y&128)>0||(w&128)>0){yt-=12;return}if(i<14){if(i===12)return Un(t,e,s,r,l,u,f,p,m,v,y,w);{let T=Ht[yt++];if((T&128)>0){yt-=13;return}return Un(t,e,s,r,l,u,f,p,m,v,y,w,T)}}else{let T=Ht[yt++],x=Ht[yt++];if((T&128)>0||(x&128)>0){yt-=14;return}if(i<15)return Un(t,e,s,r,l,u,f,p,m,v,y,w,T,x);let A=Ht[yt++];if((A&128)>0){yt-=15;return}return Un(t,e,s,r,l,u,f,p,m,v,y,w,T,x,A)}}}}}function N4(i){return me.copyBuffers?Uint8Array.prototype.slice.call(Ht,yt,yt+=i):Ht.subarray(yt,yt+=i)}let kT=new Float32Array(1),fd=new Uint8Array(kT.buffer,0,4);function z4(){let i=Ht[yt++],t=Ht[yt++],e=(i&127)>>2;if(e===31)return t||i&3?NaN:i&128?-1/0:1/0;if(e===0){let s=((i&3)<<8|t)/16777216;return i&128?-s:s}return fd[3]=i&128|(e>>1)+56,fd[2]=(i&7)<<5|t>>3,fd[1]=t<<5,fd[0]=0,kT[0]}new Array(4096);class dl{constructor(t,e){this.value=t,this.tag=e}}En[0]=i=>new Date(i);En[1]=i=>new Date(Math.round(i*1e3));En[2]=i=>{let t=BigInt(0);for(let e=0,s=i.byteLength;e<s;e++)t=BigInt(i[e])+(t<<BigInt(8));return t};En[3]=i=>BigInt(-1)-En[2](i);En[4]=i=>+(i[1]+"e"+i[0]);En[5]=i=>i[1]*Math.exp(i[0]*Math.log(2));const Xg=(i,t)=>{i=i-57344;let e=un[i];e&&e.isShared&&((un.restoreStructures||(un.restoreStructures=[]))[i]=e),un[i]=t,t.read=Wg(t)};En[k4]=i=>{let t=i.length,e=i[1];Xg(i[0],e);let s={};for(let r=2;r<t;r++){let l=e[r-2];s[gs(l)]=i[r]}return s};En[14]=i=>On?On[0].slice(On.position0,On.position0+=i):new dl(i,14);En[15]=i=>On?On[1].slice(On.position1,On.position1+=i):new dl(i,15);let P4={Error,RegExp};En[27]=i=>(P4[i[0]]||Error)(i[1],i[2]);const DT=i=>{if(Ht[yt++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");throw Ht.length<yt&&(e.incomplete=!0),e}let t=i();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return Oi=Oi?t.concat(Oi.slice(t.length)):t,Oi.prefixes=i(),Oi.suffixes=i(),i()};DT.handlesRead=!0;En[51]=DT;En[s1]=i=>{if(!Oi)if(me.getShared)ay();else return new dl(i,s1);if(typeof i=="number")return Oi[16+(i>=0?2*i:-2*i-1)];let t=new Error("No support for non-integer packed references yet");throw i===void 0&&(t.incomplete=!0),t};En[28]=i=>{_s||(_s=new Map,_s.id=0);let t=_s.id++,e=yt,s=Ht[yt],r;s>>5==4?r=[]:r={};let l={target:r};_s.set(t,l);let u=i();return l.used?(Object.getPrototypeOf(r)!==Object.getPrototypeOf(u)&&(yt=e,r=u,_s.set(t,{target:r}),u=i()),Object.assign(r,u)):(l.target=u,u)};En[28].handlesRead=!0;En[29]=i=>{let t=_s.get(i);return t.used=!0,t.target};En[258]=i=>new Set(i);(En[259]=i=>(me.mapsAsObjects&&(me.mapsAsObjects=!1,Xu=!0),i())).handlesRead=!0;function uc(i,t){return typeof i=="string"?i+t:i instanceof Array?i.concat(t):Object.assign({},i,t)}function $a(){if(!Oi)if(me.getShared)ay();else throw new Error("No packed values available");return Oi}const B4=1399353956;Zg.push((i,t)=>{if(i>=225&&i<=255)return uc($a().prefixes[i-224],t);if(i>=28704&&i<=32767)return uc($a().prefixes[i-28672],t);if(i>=1879052288&&i<=2147483647)return uc($a().prefixes[i-1879048192],t);if(i>=216&&i<=223)return uc(t,$a().suffixes[i-216]);if(i>=27647&&i<=28671)return uc(t,$a().suffixes[i-27639]);if(i>=1811940352&&i<=1879048191)return uc(t,$a().suffixes[i-1811939328]);if(i==B4)return{packedValues:Oi,structures:un.slice(0),version:t};if(i==55799)return t});const U4=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,a1=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],H4=[64,68,69,70,71,72,77,78,79,85,86];for(let i=0;i<a1.length;i++)V4(a1[i],H4[i]);function V4(i,t){let e="get"+i.name.slice(0,-5),s;typeof i=="function"?s=i.BYTES_PER_ELEMENT:i=null;for(let r=0;r<2;r++){if(!r&&s==1)continue;let l=s==2?1:s==4?2:s==8?3:0;En[r?t:t-4]=s==1||r==U4?u=>{if(!i)throw new Error("Could not find typed array for code "+t);return!me.copyBuffers&&(s===1||s===2&&!(u.byteOffset&1)||s===4&&!(u.byteOffset&3)||s===8&&!(u.byteOffset&7))?new i(u.buffer,u.byteOffset,u.byteLength>>l):new i(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!i)throw new Error("Could not find typed array for code "+t);let f=new DataView(u.buffer,u.byteOffset,u.byteLength),p=u.length>>l,m=new i(p),v=f[e];for(let y=0;y<p;y++)m[y]=v.call(f,y<<l,r);return m}}}function q4(){let i=bc(),t=yt+ye();for(let s=2;s<i;s++){let r=bc();yt+=r}let e=yt;return yt=t,On=[Yg(bc()),Yg(bc())],On.position0=0,On.position1=0,On.postBundlePosition=yt,yt=e,ye()}function bc(){let i=Ht[yt++]&31;if(i>23)switch(i){case 24:i=Ht[yt++];break;case 25:i=ui.getUint16(yt),yt+=2;break;case 26:i=ui.getUint32(yt),yt+=4;break}return i}function ay(){if(me.getShared){let i=OT(()=>(Ht=null,me.getShared()))||{},t=i.structures||[];me.sharedVersion=i.version,Oi=me.sharedValues=i.packedValues,un===!0?me.structures=un=t:un.splice.apply(un,[0,t.length].concat(t))}}function OT(i){let t=cl,e=yt,s=Qd,r=dh,l=Xd,u=_s,f=On,p=new Uint8Array(Ht.slice(0,cl)),m=un,v=me,y=ph,w=i();return cl=t,yt=e,Qd=s,dh=r,Xd=l,_s=u,On=f,Ht=p,ph=y,un=m,me=v,ui=new DataView(Ht.buffer,Ht.byteOffset,Ht.byteLength),w}function Qg(){Ht=null,_s=null,un=null}const ly=new Array(147);for(let i=0;i<256;i++)ly[i]=+("1e"+Math.floor(45.15-i*.30103));let cy=new mh({useRecords:!1});const RT=cy.decode;cy.decodeMultiple;let xd;try{xd=new TextEncoder}catch{}let Fg,IT;const Lp=typeof globalThis=="object"&&globalThis.Buffer,Ih=typeof Lp<"u",gg=Ih?Lp.allocUnsafeSlow:Uint8Array,l1=Ih?Lp:Uint8Array,c1=256,u1=Ih?4294967296:2144337920;let yg,lt,Xe,nt=0,Jo,Dn=null;const j4=61440,G4=/[\u0080-\uFFFF]/,Xi=Symbol("record-id");class NT extends mh{constructor(t){super(t),this.offset=0;let e,s,r,l,u;t=t||{};let f=l1.prototype.utf8Write?function(P,J,tt){return lt.utf8Write(P,J,tt)}:xd&&xd.encodeInto?function(P,J){return xd.encodeInto(P,lt.subarray(J)).written}:!1,p=this,m=t.structures||t.saveStructures,v=t.maxSharedStructures;if(v==null&&(v=m?128:0),v>8190)throw new Error("Maximum maxSharedStructure is 8190");let y=t.sequential;y&&(v=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let w,T,x=t.sharedValues,A;if(x){A=Object.create(null);for(let P=0,J=x.length;P<J;P++)A[x[P]]=P}let E=[],O=0,U=0;this.mapEncode=function(P,J){return this._keyMap&&!this._mapped&&P.constructor.name==="Array"&&(P=P.map(tt=>this.encodeKeys(tt))),this.encode(P,J)},this.encode=function(P,J){if(lt||(lt=new gg(8192),Xe=new DataView(lt.buffer,0,8192),nt=0),Jo=lt.length-10,Jo-nt<2048?(lt=new gg(lt.length),Xe=new DataView(lt.buffer,0,lt.length),Jo=lt.length-10,nt=0):J===d1&&(nt=nt+7&2147483640),e=nt,p.useSelfDescribedHeader&&(Xe.setUint32(nt,3654940416),nt+=3),u=p.structuredClone?new Map:null,p.bundleStrings&&typeof P!="string"?(Dn=[],Dn.size=1/0):Dn=null,s=p.structures,s){if(s.uninitialized){let B=p.getShared()||{};p.structures=s=B.structures||[],p.sharedVersion=B.version;let W=p.sharedValues=B.packedValues;if(W){A={};for(let et=0,k=W.length;et<k;et++)A[W[et]]=et}}let tt=s.length;if(tt>v&&!y&&(tt=v),!s.transitions){s.transitions=Object.create(null);for(let B=0;B<tt;B++){let W=s[B];if(!W)continue;let et,k=s.transitions;for(let q=0,R=W.length;q<R;q++){k[Xi]===void 0&&(k[Xi]=B);let X=W[q];et=k[X],et||(et=k[X]=Object.create(null)),k=et}k[Xi]=B|1048576}}y||(s.nextId=tt)}if(r&&(r=!1),l=s||[],T=A,t.pack){let tt=new Map;if(tt.values=[],tt.encoder=p,tt.maxValues=t.maxPrivatePackedValues||(A?16:1/0),tt.objectMap=A||!1,tt.samplingPackedValues=w,Sd(P,tt),tt.values.length>0){lt[nt++]=216,lt[nt++]=51,dr(4);let B=tt.values;D(B),dr(0),dr(0),T=Object.create(A||null);for(let W=0,et=B.length;W<et;W++)T[B[W]]=W}}yg=J&bg;try{if(yg)return;if(D(P),Dn&&f1(e,D),p.offset=nt,u&&u.idsToInsert){nt+=u.idsToInsert.length*2,nt>Jo&&I(nt),p.offset=nt;let tt=Y4(lt.subarray(e,nt),u.idsToInsert);return u=null,tt}return J&d1?(lt.start=e,lt.end=nt,lt):lt.subarray(e,nt)}finally{if(s){if(U<10&&U++,s.length>v&&(s.length=v),O>1e4)s.transitions=null,U=0,O=0,E.length>0&&(E=[]);else if(E.length>0&&!y){for(let tt=0,B=E.length;tt<B;tt++)E[tt][Xi]=void 0;E=[]}}if(r&&p.saveShared){p.structures.length>v&&(p.structures=p.structures.slice(0,v));let tt=lt.subarray(e,nt);return p.updateSharedData()===!1?p.encode(P):tt}J&X4&&(nt=e)}},this.findCommonStringsToPack=()=>(w=new Map,A||(A=Object.create(null)),P=>{let J=P&&P.threshold||4,tt=this.pack?P.maxPrivatePackedValues||16:0;x||(x=this.sharedValues=[]);for(let[B,W]of w)W.count>J&&(A[B]=tt++,x.push(B),r=!0);for(;this.saveShared&&this.updateSharedData()===!1;);w=null});const D=P=>{nt>Jo&&(lt=I(nt));var J=typeof P,tt;if(J==="string"){if(T){let k=T[P];if(k>=0){k<16?lt[nt++]=k+224:(lt[nt++]=198,k&1?D(15-k>>1):D(k-16>>1));return}else if(w&&!t.pack){let q=w.get(P);q?q.count++:w.set(P,{count:1})}}let B=P.length;if(Dn&&B>=4&&B<1024){if((Dn.size+=B)>j4){let q,R=(Dn[0]?Dn[0].length*3+Dn[1].length:0)+10;nt+R>Jo&&(lt=I(nt+R)),lt[nt++]=217,lt[nt++]=223,lt[nt++]=249,lt[nt++]=Dn.position?132:130,lt[nt++]=26,q=nt-e,nt+=4,Dn.position&&f1(e,D),Dn=["",""],Dn.size=0,Dn.position=q}let k=G4.test(P);Dn[k?0:1]+=P,lt[nt++]=k?206:207,D(B);return}let W;B<32?W=1:B<256?W=2:B<65536?W=3:W=5;let et=B*3;if(nt+et>Jo&&(lt=I(nt+et)),B<64||!f){let k,q,R,X=nt+W;for(k=0;k<B;k++)q=P.charCodeAt(k),q<128?lt[X++]=q:q<2048?(lt[X++]=q>>6|192,lt[X++]=q&63|128):(q&64512)===55296&&((R=P.charCodeAt(k+1))&64512)===56320?(q=65536+((q&1023)<<10)+(R&1023),k++,lt[X++]=q>>18|240,lt[X++]=q>>12&63|128,lt[X++]=q>>6&63|128,lt[X++]=q&63|128):(lt[X++]=q>>12|224,lt[X++]=q>>6&63|128,lt[X++]=q&63|128);tt=X-nt-W}else tt=f(P,nt+W,et);tt<24?lt[nt++]=96|tt:tt<256?(W<2&&lt.copyWithin(nt+2,nt+1,nt+1+tt),lt[nt++]=120,lt[nt++]=tt):tt<65536?(W<3&&lt.copyWithin(nt+3,nt+2,nt+2+tt),lt[nt++]=121,lt[nt++]=tt>>8,lt[nt++]=tt&255):(W<5&&lt.copyWithin(nt+5,nt+3,nt+3+tt),lt[nt++]=122,Xe.setUint32(nt,tt),nt+=4),nt+=tt}else if(J==="number")if(!this.alwaysUseFloat&&P>>>0===P)P<24?lt[nt++]=P:P<256?(lt[nt++]=24,lt[nt++]=P):P<65536?(lt[nt++]=25,lt[nt++]=P>>8,lt[nt++]=P&255):(lt[nt++]=26,Xe.setUint32(nt,P),nt+=4);else if(!this.alwaysUseFloat&&P>>0===P)P>=-24?lt[nt++]=31-P:P>=-256?(lt[nt++]=56,lt[nt++]=~P):P>=-65536?(lt[nt++]=57,Xe.setUint16(nt,~P),nt+=2):(lt[nt++]=58,Xe.setUint32(nt,~P),nt+=4);else{let B;if((B=this.useFloat32)>0&&P<4294967296&&P>=-2147483648){lt[nt++]=250,Xe.setFloat32(nt,P);let W;if(B<4||(W=P*ly[(lt[nt]&127)<<1|lt[nt+1]>>7])>>0===W){nt+=4;return}else nt--}lt[nt++]=251,Xe.setFloat64(nt,P),nt+=8}else if(J==="object")if(!P)lt[nt++]=246;else{if(u){let W=u.get(P);if(W){if(lt[nt++]=216,lt[nt++]=29,lt[nt++]=25,!W.references){let et=u.idsToInsert||(u.idsToInsert=[]);W.references=[],et.push(W)}W.references.push(nt-e),nt+=2;return}else u.set(P,{offset:nt-e})}let B=P.constructor;if(B===Object)Q(P);else if(B===Array){tt=P.length,tt<24?lt[nt++]=128|tt:dr(tt);for(let W=0;W<tt;W++)D(P[W])}else if(B===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(lt[nt++]=217,lt[nt++]=1,lt[nt++]=3),tt=P.size,tt<24?lt[nt++]=160|tt:tt<256?(lt[nt++]=184,lt[nt++]=tt):tt<65536?(lt[nt++]=185,lt[nt++]=tt>>8,lt[nt++]=tt&255):(lt[nt++]=186,Xe.setUint32(nt,tt),nt+=4),p.keyMap)for(let[W,et]of P)D(p.encodeKey(W)),D(et);else for(let[W,et]of P)D(W),D(et);else{for(let W=0,et=Fg.length;W<et;W++){let k=IT[W];if(P instanceof k){let q=Fg[W],R=q.tag;R==null&&(R=q.getTag&&q.getTag.call(this,P)),R<24?lt[nt++]=192|R:R<256?(lt[nt++]=216,lt[nt++]=R):R<65536?(lt[nt++]=217,lt[nt++]=R>>8,lt[nt++]=R&255):R>-1&&(lt[nt++]=218,Xe.setUint32(nt,R),nt+=4),q.encode.call(this,P,D,I);return}}if(P[Symbol.iterator]){if(yg){let W=new Error("Iterable should be serialized as iterator");throw W.iteratorNotHandled=!0,W}lt[nt++]=159;for(let W of P)D(W);lt[nt++]=255;return}if(P[Symbol.asyncIterator]||vg(P)){let W=new Error("Iterable/blob should be serialized as iterator");throw W.iteratorNotHandled=!0,W}if(this.useToJSON&&P.toJSON){const W=P.toJSON();if(W!==P)return D(W)}Q(P)}}else if(J==="boolean")lt[nt++]=P?245:244;else if(J==="bigint"){if(P<BigInt(1)<<BigInt(64)&&P>=0)lt[nt++]=27,Xe.setBigUint64(nt,P);else if(P>-(BigInt(1)<<BigInt(64))&&P<0)lt[nt++]=59,Xe.setBigUint64(nt,-P-BigInt(1));else if(this.largeBigIntToFloat)lt[nt++]=251,Xe.setFloat64(nt,Number(P));else{P>=BigInt(0)?lt[nt++]=194:(lt[nt++]=195,P=BigInt(-1)-P);let B=[];for(;P;)B.push(Number(P&BigInt(255))),P>>=BigInt(8);Kg(new Uint8Array(B.reverse()),I);return}nt+=8}else if(J==="undefined")lt[nt++]=247;else throw new Error("Unknown type: "+J)},Q=this.useRecords===!1?this.variableMapSize?P=>{let J=Object.keys(P),tt=Object.values(P),B=J.length;if(B<24?lt[nt++]=160|B:B<256?(lt[nt++]=184,lt[nt++]=B):B<65536?(lt[nt++]=185,lt[nt++]=B>>8,lt[nt++]=B&255):(lt[nt++]=186,Xe.setUint32(nt,B),nt+=4),p.keyMap)for(let W=0;W<B;W++)D(p.encodeKey(J[W])),D(tt[W]);else for(let W=0;W<B;W++)D(J[W]),D(tt[W])}:P=>{lt[nt++]=185;let J=nt-e;nt+=2;let tt=0;if(p.keyMap)for(let B in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(B))&&(D(p.encodeKey(B)),D(P[B]),tt++);else for(let B in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(B))&&(D(B),D(P[B]),tt++);lt[J+++e]=tt>>8,lt[J+e]=tt&255}:(P,J)=>{let tt,B=l.transitions||(l.transitions=Object.create(null)),W=0,et=0,k,q;if(this.keyMap){q=Object.keys(P).map(X=>this.encodeKey(X)),et=q.length;for(let X=0;X<et;X++){let ot=q[X];tt=B[ot],tt||(tt=B[ot]=Object.create(null),W++),B=tt}}else for(let X in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(X))&&(tt=B[X],tt||(B[Xi]&1048576&&(k=B[Xi]&65535),tt=B[X]=Object.create(null),W++),B=tt,et++);let R=B[Xi];if(R!==void 0)R&=65535,lt[nt++]=217,lt[nt++]=R>>8|224,lt[nt++]=R&255;else if(q||(q=B.__keys__||(B.__keys__=Object.keys(P))),k===void 0?(R=l.nextId++,R||(R=0,l.nextId=1),R>=c1&&(l.nextId=(R=v)+1)):R=k,l[R]=q,R<v){lt[nt++]=217,lt[nt++]=R>>8|224,lt[nt++]=R&255,B=l.transitions;for(let X=0;X<et;X++)(B[Xi]===void 0||B[Xi]&1048576)&&(B[Xi]=R),B=B[q[X]];B[Xi]=R|1048576,r=!0}else{if(B[Xi]=R,Xe.setUint32(nt,3655335680),nt+=3,W&&(O+=U*W),E.length>=c1-v&&(E.shift()[Xi]=void 0),E.push(B),dr(et+2),D(57344+R),D(q),J)return;for(let X in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(X))&&D(P[X]);return}if(et<24?lt[nt++]=128|et:dr(et),!J)for(let X in P)(typeof P.hasOwnProperty!="function"||P.hasOwnProperty(X))&&D(P[X])},I=P=>{let J;if(P>16777216){if(P-e>u1)throw new Error("Encoded buffer would be larger than maximum buffer size");J=Math.min(u1,Math.round(Math.max((P-e)*(P>67108864?1.25:2),4194304)/4096)*4096)}else J=(Math.max(P-e<<2,lt.length-1)>>12)+1<<12;let tt=new gg(J);return Xe=new DataView(tt.buffer,0,J),lt.copy?lt.copy(tt,0,e,P):tt.set(lt.slice(e,P)),nt-=e,e=0,Jo=tt.length-10,lt=tt};let H=100,G=1e3;this.encodeAsIterable=function(P,J){return Y(P,J,j)},this.encodeAsAsyncIterable=function(P,J){return Y(P,J,$)};function*j(P,J,tt){let B=P.constructor;if(B===Object){let W=p.useRecords!==!1;W?Q(P,!0):h1(Object.keys(P).length,160);for(let et in P){let k=P[et];W||D(et),k&&typeof k=="object"?J[et]?yield*j(k,J[et]):yield*V(k,J,et):D(k)}}else if(B===Array){let W=P.length;dr(W);for(let et=0;et<W;et++){let k=P[et];k&&(typeof k=="object"||nt-e>H)?J.element?yield*j(k,J.element):yield*V(k,J,"element"):D(k)}}else if(P[Symbol.iterator]&&!P.buffer){lt[nt++]=159;for(let W of P)W&&(typeof W=="object"||nt-e>H)?J.element?yield*j(W,J.element):yield*V(W,J,"element"):D(W);lt[nt++]=255}else vg(P)?(h1(P.size,64),yield lt.subarray(e,nt),yield P,Z()):P[Symbol.asyncIterator]?(lt[nt++]=159,yield lt.subarray(e,nt),yield P,Z(),lt[nt++]=255):D(P);tt&&nt>e?yield lt.subarray(e,nt):nt-e>H&&(yield lt.subarray(e,nt),Z())}function*V(P,J,tt){let B=nt-e;try{D(P),nt-e>H&&(yield lt.subarray(e,nt),Z())}catch(W){if(W.iteratorNotHandled)J[tt]={},nt=e+B,yield*j.call(this,P,J[tt]);else throw W}}function Z(){H=G,p.encode(null,bg)}function Y(P,J,tt){return J&&J.chunkThreshold?H=G=J.chunkThreshold:H=100,P&&typeof P=="object"?(p.encode(null,bg),tt(P,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(P)]}async function*$(P,J){for(let tt of j(P,J,!0)){let B=tt.constructor;if(B===l1||B===Uint8Array)yield tt;else if(vg(tt)){let W=tt.stream().getReader(),et;for(;!(et=await W.read()).done;)yield et.value}else if(tt[Symbol.asyncIterator])for await(let W of tt)Z(),W?yield*$(W,J.async||(J.async={})):yield p.encode(W);else yield tt}}}useBuffer(t){lt=t,Xe=new DataView(lt.buffer,lt.byteOffset,lt.byteLength),nt=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0),s=new zT(e,this.sharedValues,this.sharedVersion),r=this.saveShared(s,l=>(l&&l.version||0)==t);return r===!1?(s=this.getShared()||{},this.structures=s.structures||[],this.sharedValues=s.packedValues,this.sharedVersion=s.version,this.structures.nextId=this.structures.length):e.forEach((l,u)=>this.structures[u]=l),r}}function h1(i,t){i<24?lt[nt++]=t|i:i<256?(lt[nt++]=t|24,lt[nt++]=i):i<65536?(lt[nt++]=t|25,lt[nt++]=i>>8,lt[nt++]=i&255):(lt[nt++]=t|26,Xe.setUint32(nt,i),nt+=4)}class zT{constructor(t,e,s){this.structures=t,this.packedValues=e,this.version=s}}function dr(i){i<24?lt[nt++]=128|i:i<256?(lt[nt++]=152,lt[nt++]=i):i<65536?(lt[nt++]=153,lt[nt++]=i>>8,lt[nt++]=i&255):(lt[nt++]=154,Xe.setUint32(nt,i),nt+=4)}const Z4=typeof Blob>"u"?function(){}:Blob;function vg(i){if(i instanceof Z4)return!0;let t=i[Symbol.toStringTag];return t==="Blob"||t==="File"}function Sd(i,t){switch(typeof i){case"string":if(i.length>3){if(t.objectMap[i]>-1||t.values.length>=t.maxValues)return;let s=t.get(i);if(s)++s.count==2&&t.values.push(i);else if(t.set(i,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(i);r?r.count++:t.samplingPackedValues.set(i,{count:1})}}break;case"object":if(i)if(i instanceof Array)for(let s=0,r=i.length;s<r;s++)Sd(i[s],t);else{let s=!t.encoder.useRecords;for(var e in i)i.hasOwnProperty(e)&&(s&&Sd(e,t),Sd(i[e],t))}break;case"function":console.log(i)}}const W4=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;IT=[Date,Set,Error,RegExp,dl,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,zT];Fg=[{tag:1,encode(i,t){let e=i.getTime()/1e3;(this.useTimestamp32||i.getMilliseconds()===0)&&e>=0&&e<4294967296?(lt[nt++]=26,Xe.setUint32(nt,e),nt+=4):(lt[nt++]=251,Xe.setFloat64(nt,e),nt+=8)}},{tag:258,encode(i,t){let e=Array.from(i);t(e)}},{tag:27,encode(i,t){t([i.name,i.message])}},{tag:27,encode(i,t){t(["RegExp",i.source,i.flags])}},{getTag(i){return i.tag},encode(i,t){t(i.value)}},{encode(i,t,e){Kg(i,e)}},{getTag(i){if(i.constructor===Uint8Array&&(this.tagUint8Array||Ih&&this.tagUint8Array!==!1))return 64},encode(i,t,e){Kg(i,e)}},hr(68,1),hr(69,2),hr(70,4),hr(71,8),hr(72,1),hr(77,2),hr(78,4),hr(79,8),hr(85,4),hr(86,8),{encode(i,t){let e=i.packedValues||[],s=i.structures||[];if(e.values.length>0){lt[nt++]=216,lt[nt++]=51,dr(4);let r=e.values;t(r),dr(0),dr(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let l=0,u=r.length;l<u;l++)packedObjectMap[r[l]]=l}if(s){Xe.setUint32(nt,3655335424),nt+=3;let r=s.slice(0);r.unshift(57344),r.push(new dl(i.version,1399353956)),t(r)}else t(new dl(i.version,1399353956))}}];function hr(i,t){return!W4&&t>1&&(i-=4),{tag:i,encode:function(s,r){let l=s.byteLength,u=s.byteOffset||0,f=s.buffer||s;r(Ih?Lp.from(f,u,l):new Uint8Array(f,u,l))}}}function Kg(i,t){let e=i.byteLength;e<24?lt[nt++]=64+e:e<256?(lt[nt++]=88,lt[nt++]=e):e<65536?(lt[nt++]=89,lt[nt++]=e>>8,lt[nt++]=e&255):(lt[nt++]=90,Xe.setUint32(nt,e),nt+=4),nt+e>=lt.length&&t(nt+e),lt.set(i.buffer?i:new Uint8Array(i),nt),nt+=e}function Y4(i,t){let e,s=t.length*2,r=i.length-s;t.sort((l,u)=>l.offset>u.offset?1:-1);for(let l=0;l<t.length;l++){let u=t[l];u.id=l;for(let f of u.references)i[f++]=l>>8,i[f]=l&255}for(;e=t.pop();){let l=e.offset;i.copyWithin(l+s,l,r),s-=2;let u=l+s;i[u++]=216,i[u++]=28,r=l}return i}function f1(i,t){Xe.setUint32(Dn.position+i,nt-Dn.position-i+1);let e=Dn;Dn=null,t(e[0]),t(e[1])}let uy=new NT({useRecords:!1});uy.encode;uy.encodeAsIterable;uy.encodeAsAsyncIterable;const d1=512,X4=1024,bg=2048;function PT(i){return new NT({tagUint8Array:!1,useRecords:!1}).encode(i)}function Q4(i){return RT(i)}const F4=(i,t)=>i.length===t.length&&i.every((e,s)=>e===t[s]),hy=(i,t)=>F4(i,t),K4=async(i,t)=>{let e;const s=new Promise((r,l)=>{e=setTimeout(()=>l(new J4(`withTimeout: timed out after ${t}ms`)),t)});try{return await Promise.race([i,s])}finally{clearTimeout(e)}};class J4 extends Error{constructor(t){super(t),this.name="TimeoutError"}}class Mp extends DOMException{constructor(t){super(t??"Operation aborted","AbortError")}}const $4=i=>i instanceof Mp||(i instanceof Error||DOMException&&i instanceof DOMException)&&i.name==="AbortError";function p1(i,t){let e=!1;return new Promise((s,r)=>{t?.addEventListener("abort",()=>{e||r(new Mp)},{once:!0}),i.then(l=>{s(l)}).catch(l=>{r(l)}).finally(()=>{e=!0})})}class Fd extends yl{documentId;#e;#t;#i;#n=vs();#s=6e4;#r={};#l=new Map;constructor(t,e={}){super(),this.documentId=t,"timeoutDelay"in e&&e.timeoutDelay&&(this.#s=e.timeoutDelay),"heads"in e&&(this.#i=e.heads);const s=vs();this.#e=uo(`automerge-repo:dochandle:${this.documentId.slice(0,5)}`);const r=this.#s,l=vT({actions:{onUpdate:ol(({context:u,event:f})=>{const p=u.doc;l4(f,_1);const{callback:m}=f.payload;return{doc:m(p)}}),onDelete:ol(()=>(this.emit("delete",{handle:this}),{doc:vs()})),onUnavailable:ol(()=>({doc:vs()})),onUnload:ol(()=>({doc:vs()}))}}).createMachine({initial:"idle",context:{documentId:t,doc:s},on:{UPDATE:{actions:"onUpdate"},UNLOAD:".unloaded",DELETE:".deleted"},states:{idle:{on:{BEGIN:"loading"}},loading:{on:{REQUEST:"requesting",DOC_READY:"ready"},after:{[r]:"unavailable"}},requesting:{on:{DOC_UNAVAILABLE:"unavailable",DOC_READY:"ready"},after:{[r]:"unavailable"}},unavailable:{entry:"onUnavailable",on:{DOC_READY:"ready"}},ready:{},unloaded:{entry:"onUnload",on:{RELOAD:"loading"}},deleted:{entry:"onDelete",type:"final"}}});this.#t=hh(l),this.#t.subscribe(u=>{const f=this.#n,p=u.context.doc;this.#e(` ${u.value} %o`,p),this.#d(f,p)}),this.#t.start(),this.begin()}get#a(){return this.#t?.getSnapshot().context.doc}get#o(){return this.#t?.getSnapshot().value}#h(t,e){const s=Array.isArray(t)?t:[t];return h4(this.#t,r=>s.some(l=>r.matches(l)),{timeout:this.#s*2,...e})}#c(t){let e=null;if(this.#t.send({type:_1,payload:{callback:s=>{try{return t(s)}catch(r){return e=r,s}}}}),e)throw e}#d(t,e){const s=mr(t),r=mr(e);if(!hy(_r(r),_r(s))){this.emit("heads-changed",{handle:this,doc:e});const u=rg(e,s,r);u.length>0&&this.emit("change",{handle:this,doc:e,patches:u,patchInfo:{before:t,after:e,source:"change"}}),this.isReady()||this.#t.send({type:m1})}this.#n=e}get url(){return TT({documentId:this.documentId,heads:this.#i})}isReady=()=>this.inState(["ready"]);isUnloaded=()=>this.inState(["unloaded"]);isDeleted=()=>this.inState(["deleted"]);isUnavailable=()=>this.inState(["unavailable"]);inState=t=>t.some(e=>this.#t.getSnapshot().matches(e));get state(){return this.#t.getSnapshot().value}async whenReady(t=["ready"],e){try{await K4(this.#h(t,e),this.#s)}catch(s){throw $4(s)?new Mp:(console.log(`error waiting for ${this.documentId} to be in one of states: ${t.join(", ")}`),s)}}doc(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?DO(this.#a,Ka(this.#i)):this.#a}docSync(){return console.warn("docSync is deprecated. Use doc() instead. This function will be removed as part of the 2.0 release."),this.doc()}heads(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?this.#i:_r(mr(this.#a))}begin(){this.#t.send({type:n8})}history(){if(this.isReady())return VO(this.#a).map(t=>_r([t]))}view(t){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling view().`);const e=JSON.stringify(t),s=this.#l.get(e);if(s)return s;const r=new Fd(this.documentId,{heads:t,timeoutDelay:this.#s});return r.update(()=>qd(this.#a)),r.doneLoading(),this.#l.set(e,r),r}diff(t,e){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling diff().`);const s=this.#a;if(!s)throw new Error("Document not available");if(t instanceof Fd){if(!t.isReady())throw new Error("Cannot diff against a handle that isn't ready");const u=t.heads();if(!u)throw new Error("Other document's heads not available");const f=Mx(qd(s),t.doc());return rg(f,Ka(this.heads()),Ka(u))}const r=e?t:this.heads()||[],l=e||t;return rg(s,Ka(r),Ka(l))}metadata(t){if(this.isReady())return t||(t=this.heads()[0]),qO(this.#a,Ka([t])[0])||void 0}update(t){this.#c(t)}doneLoading(){this.#t.send({type:m1})}setSyncInfo(t,e){this.#r[t]=e,this.emit("remote-heads",{storageId:t,heads:e.lastHeads,timestamp:e.lastSyncTimestamp})}getRemoteHeads(t){return this.#r[t]?.lastHeads}getSyncInfo(t){return this.#r[t]}change(t,e={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is in ${this.state} and not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);this.#c(s=>OO(s,e,t))}changeAt(t,e,s={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);let r;return this.#c(l=>{const u=RO(l,Ka(t),s,e);return r=u.newHeads?_r(u.newHeads):void 0,u.newDoc}),r}isReadOnly(){return!!this.#i}merge(t){if(!this.isReady()||!t.isReady())throw new Error("Both handles must be ready to merge");if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);const e=t.doc();this.update(s=>Mx(s,e))}unavailable(){this.#t.send({type:a8})}request(){this.#o==="loading"&&this.#t.send({type:i8})}unload(){this.#t.send({type:s8})}reload(){this.#t.send({type:r8})}delete(){this.#t.send({type:o8})}broadcast(t){this.emit("ephemeral-message-outbound",{handle:this,data:new Uint8Array(PT(t))})}metrics(){return X0(this.#a)}}const t8={REQUESTING:"requesting",READY:"ready",UNLOADED:"unloaded",DELETED:"deleted",UNAVAILABLE:"unavailable"},{REQUESTING:dd,READY:pr,UNLOADED:e8,DELETED:pd,UNAVAILABLE:Ki}=t8,n8="BEGIN",i8="REQUEST",m1="DOC_READY",_1="UPDATE",s8="UNLOAD",r8="RELOAD",o8="DELETE",a8="DOC_UNAVAILABLE";class l8 extends yl{#e=new Map;#t=new Set;#i=new Map;#n=new Set;#s=new Map;#r=uo("automerge-repo:remote-heads-subscriptions");subscribeToRemotes(t){this.#r("subscribeToRemotes",t);const e=[];for(const s of t)this.#t.has(s)||(this.#t.add(s),e.push(s));e.length>0&&this.emit("change-remote-subs",{add:e,peers:Array.from(this.#n)})}unsubscribeFromRemotes(t){this.#r("subscribeToRemotes",t);const e=[];for(const s of t)this.#t.has(s)&&(this.#t.delete(s),this.#i.has(s)||e.push(s));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}handleControlMessage(t){const e=[],s=[],r=[];if(this.#r("handleControlMessage",t),t.add)for(const l of t.add){let u=this.#i.get(l);(this.#t.has(l)||u)&&r.push(l),u||(u=new Set,this.#i.set(l,u),this.#t.has(l)||e.push(l)),u.add(t.senderId)}if(t.remove)for(const l of t.remove){const u=this.#i.get(l);u&&(u.delete(t.senderId),u.size==0&&!this.#t.has(l)&&s.push(l))}(e.length>0||s.length>0)&&this.emit("change-remote-subs",{peers:Array.from(this.#n),add:e,remove:s});for(const l of r){const u=this.#s.get(t.senderId);if(u)for(const f of u){const p=this.#e.get(f);if(!p)continue;const m=p.get(l);m&&this.emit("notify-remote-heads",{targetId:t.senderId,documentId:f,heads:m.lastHeads,timestamp:m.lastSyncTimestamp,storageId:l})}}}handleRemoteHeads(t){this.#r("handleRemoteHeads",t);const e=this.#a(t);for(const s of e)this.#t.has(s.storageId)&&this.emit("remote-heads-changed",s);for(const s of e)for(const r of this.#n)r!==t.senderId&&this.emit("notify-remote-heads",{targetId:r,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId});for(const s of e){const r=this.#i.get(s.storageId);if(r)for(const l of r)this.#l(l,s.documentId)&&this.emit("notify-remote-heads",{targetId:l,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId})}}handleImmediateRemoteHeadsChanged(t,e,s){this.#r("handleLocalHeadsChanged",t,e,s);const r=this.#e.get(t),l=Date.now();if(!r)this.#e.set(t,new Map([[e,{lastSyncTimestamp:l,lastHeads:s}]]));else{const f=r.get(e);(!f||f.lastSyncTimestamp<Date.now())&&r.set(e,{lastSyncTimestamp:Date.now(),lastHeads:s})}const u=this.#i.get(e);if(u)for(const f of u)this.#l(f,t)&&this.emit("notify-remote-heads",{targetId:f,documentId:t,heads:s,timestamp:l,storageId:e})}addGenerousPeer(t){this.#r("addGenerousPeer",t),this.#n.add(t),this.#t.size>0&&this.emit("change-remote-subs",{add:Array.from(this.#t),peers:[t]});for(const[e,s]of this.#e)for(const[r,{lastHeads:l,lastSyncTimestamp:u}]of s)this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:l,timestamp:u,storageId:r})}removePeer(t){this.#r("removePeer",t);const e=[];this.#n.delete(t),this.#s.delete(t);for(const[s,r]of this.#i)r.has(t)&&(r.delete(t),r.size==0&&(e.push(s),this.#i.delete(s)));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}subscribePeerToDoc(t,e){let s=this.#s.get(t);s||(s=new Set,this.#s.set(t,s)),s.add(e);const r=this.#e.get(e);if(r)for(const[l,u]of r){const f=this.#i.get(l);f&&f.has(t)&&this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:u.lastHeads,timestamp:u.lastSyncTimestamp,storageId:l})}}#l(t,e){const s=this.#s.get(t);return s&&s.has(e)}#a(t){const e=[],{documentId:s,newHeads:r}=t;for(const[l,{heads:u,timestamp:f}]of Object.entries(r)){if(!this.#t.has(l)&&!this.#i.has(l))continue;let p=this.#e.get(s);p||(p=new Map,this.#e.set(s,p));const m=p.get(l);m&&m.lastSyncTimestamp>=f||(p.set(l,{lastSyncTimestamp:f,lastHeads:u}),e.push({documentId:s,storageId:l,remoteHeads:u,timestamp:f}))}return e}}const Jg=(i,t)=>{let e=Date.now(),s,r;return function(...l){s=e+t-Date.now(),clearTimeout(r),r=setTimeout(()=>{i(...l),e=Date.now()},s)}},c8=i=>h8(i)||UT(i)||BT(i)||u8(i)||f8(i)||d8(i),u8=i=>i.type==="doc-unavailable",BT=i=>i.type==="request",h8=i=>i.type==="sync",UT=i=>i.type==="ephemeral",f8=i=>i.type==="remote-subscription-change",d8=i=>i.type==="remote-heads-changed",p8=i=>`${i.senderId}:${i.sessionId}`;class m8 extends yl{peerId;peerMetadata;#e;#t={};#i=0;#n=Math.random().toString(36).slice(2);#s={};adapters=[];constructor(t,e,s){super(),this.peerId=e,this.peerMetadata=s,this.#e=uo(`automerge-repo:network:${this.peerId}`),t.forEach(r=>this.addNetworkAdapter(r))}disconnect(){this.adapters.forEach(t=>t.disconnect())}reconnect(){this.adapters.forEach(t=>t.connect(this.peerId))}addNetworkAdapter(t){this.adapters.push(t),t.on("peer-candidate",({peerId:e,peerMetadata:s})=>{this.#e(`peer candidate: ${e} `),this.#t[e]||(this.#t[e]=t),this.emit("peer",{peerId:e,peerMetadata:s})}),t.on("peer-disconnected",({peerId:e})=>{this.#e(`peer disconnected: ${e} `),delete this.#t[e],this.emit("peer-disconnected",{peerId:e})}),t.on("message",e=>{if(!c8(e)){this.#e(`invalid message: ${JSON.stringify(e)}`);return}if(this.#e(`message from ${e.senderId}`),UT(e)){const s=p8(e);(this.#s[s]===void 0||e.count>this.#s[s])&&(this.#s[s]=e.count,this.emit("message",e));return}this.emit("message",e)}),t.on("close",()=>{this.#e("adapter closed"),Object.entries(this.#t).forEach(([e,s])=>{s===t&&delete this.#t[e]}),this.adapters=this.adapters.filter(e=>e!==t)}),this.peerMetadata.then(e=>{t.connect(this.peerId,e)}).catch(e=>{this.#e("error connecting to network",e)})}removeNetworkAdapter(t){this.adapters=this.adapters.filter(e=>e!==t),t.disconnect()}send(t){const e=this.#t[t.targetId];if(!e){this.#e(`Tried to send message but peer not found: ${t.targetId}`);return}const r=(l=>l.type==="ephemeral"?"count"in l?l:{...l,count:++this.#i,sessionId:this.#n,senderId:this.peerId}:{...l,senderId:this.peerId})(t);this.#e("sending message %o",r),e.send(r)}isReady=()=>this.adapters.every(t=>t.isReady());whenReady=async()=>Promise.all(this.adapters.map(t=>t.whenReady()))}function HT(i){let t=0;i.forEach(r=>{t+=r.length});const e=new Uint8Array(t);let s=0;return i.forEach(r=>{e.set(r,s),s+=r.length}),e}var Td={exports:{}},_8=Td.exports,g1;function g8(){return g1||(g1=1,(function(i){(function(t,e){var s={};e(s);var r=s.default;for(var l in s)r[l]=s[l];i.exports=r})(_8,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(w,T,x,A,E){for(var O,U,D,Q,I,H,G,j,V,Z,Y,$,P;E>=64;){for(O=T[0],U=T[1],D=T[2],Q=T[3],I=T[4],H=T[5],G=T[6],j=T[7],Z=0;Z<16;Z++)Y=A+Z*4,w[Z]=(x[Y]&255)<<24|(x[Y+1]&255)<<16|(x[Y+2]&255)<<8|x[Y+3]&255;for(Z=16;Z<64;Z++)V=w[Z-2],$=(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10,V=w[Z-15],P=(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3,w[Z]=($+w[Z-7]|0)+(P+w[Z-16]|0);for(Z=0;Z<64;Z++)$=(((I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7))+(I&H^~I&G)|0)+(j+(e[Z]+w[Z]|0)|0)|0,P=((O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10))+(O&U^O&D^U&D)|0,j=G,G=H,H=I,I=Q+$|0,Q=D,D=U,U=O,O=$+P|0;T[0]+=O,T[1]+=U,T[2]+=D,T[3]+=Q,T[4]+=I,T[5]+=H,T[6]+=G,T[7]+=j,A+=64,E-=64}return A}var r=(function(){function w(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return w.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},w.prototype.clean=function(){for(var T=0;T<this.buffer.length;T++)this.buffer[T]=0;for(var T=0;T<this.temp.length;T++)this.temp[T]=0;this.reset()},w.prototype.update=function(T,x){if(x===void 0&&(x=T.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this.bytesHashed+=x,this.bufferLength>0){for(;this.bufferLength<64&&x>0;)this.buffer[this.bufferLength++]=T[A++],x--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(x>=64&&(A=s(this.temp,this.state,T,A,x),x%=64);x>0;)this.buffer[this.bufferLength++]=T[A++],x--;return this},w.prototype.finish=function(T){if(!this.finished){var x=this.bytesHashed,A=this.bufferLength,E=x/536870912|0,O=x<<3,U=x%64<56?64:128;this.buffer[A]=128;for(var D=A+1;D<U-8;D++)this.buffer[D]=0;this.buffer[U-8]=E>>>24&255,this.buffer[U-7]=E>>>16&255,this.buffer[U-6]=E>>>8&255,this.buffer[U-5]=E>>>0&255,this.buffer[U-4]=O>>>24&255,this.buffer[U-3]=O>>>16&255,this.buffer[U-2]=O>>>8&255,this.buffer[U-1]=O>>>0&255,s(this.temp,this.state,this.buffer,0,U),this.finished=!0}for(var D=0;D<8;D++)T[D*4+0]=this.state[D]>>>24&255,T[D*4+1]=this.state[D]>>>16&255,T[D*4+2]=this.state[D]>>>8&255,T[D*4+3]=this.state[D]>>>0&255;return this},w.prototype.digest=function(){var T=new Uint8Array(this.digestLength);return this.finish(T),T},w.prototype._saveState=function(T){for(var x=0;x<this.state.length;x++)T[x]=this.state[x]},w.prototype._restoreState=function(T,x){for(var A=0;A<this.state.length;A++)this.state[A]=T[A];this.bytesHashed=x,this.finished=!1,this.bufferLength=0},w})();t.Hash=r;var l=(function(){function w(T){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var x=new Uint8Array(this.blockSize);if(T.length>this.blockSize)new r().update(T).finish(x).clean();else for(var A=0;A<T.length;A++)x[A]=T[A];for(var A=0;A<x.length;A++)x[A]^=54;this.inner.update(x);for(var A=0;A<x.length;A++)x[A]^=106;this.outer.update(x),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var A=0;A<x.length;A++)x[A]=0}return w.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},w.prototype.clean=function(){for(var T=0;T<this.istate.length;T++)this.ostate[T]=this.istate[T]=0;this.inner.clean(),this.outer.clean()},w.prototype.update=function(T){return this.inner.update(T),this},w.prototype.finish=function(T){return this.outer.finished?this.outer.finish(T):(this.inner.finish(T),this.outer.update(T,this.digestLength).finish(T)),this},w.prototype.digest=function(){var T=new Uint8Array(this.digestLength);return this.finish(T),T},w})();t.HMAC=l;function u(w){var T=new r().update(w),x=T.digest();return T.clean(),x}t.hash=u,t.default=u;function f(w,T){var x=new l(w).update(T),A=x.digest();return x.clean(),A}t.hmac=f;function p(w,T,x,A){var E=A[0];if(E===0)throw new Error("hkdf: cannot expand more");T.reset(),E>1&&T.update(w),x&&T.update(x),T.update(A),T.finish(w),A[0]++}var m=new Uint8Array(t.digestLength);function v(w,T,x,A){T===void 0&&(T=m),A===void 0&&(A=32);for(var E=new Uint8Array([1]),O=f(T,w),U=new l(O),D=new Uint8Array(U.digestLength),Q=D.length,I=new Uint8Array(A),H=0;H<A;H++)Q===D.length&&(p(D,U,x,E),Q=0),I[H]=D[Q++];return U.clean(),D.fill(0),E.fill(0),I}t.hkdf=v;function y(w,T,x,A){for(var E=new l(w),O=E.digestLength,U=new Uint8Array(4),D=new Uint8Array(O),Q=new Uint8Array(O),I=new Uint8Array(A),H=0;H*O<A;H++){var G=H+1;U[0]=G>>>24&255,U[1]=G>>>16&255,U[2]=G>>>8&255,U[3]=G>>>0&255,E.reset(),E.update(T),E.update(U),E.finish(Q);for(var j=0;j<O;j++)D[j]=Q[j];for(var j=2;j<=x;j++){E.reset(),E.update(Q).finish(Q);for(var V=0;V<O;V++)D[V]^=Q[V]}for(var j=0;j<O&&H*O+j<A;j++)I[H*O+j]=D[j]}for(var H=0;H<O;H++)D[H]=Q[H]=0;for(var H=0;H<4;H++)U[H]=0;return E.clean(),I}t.pbkdf2=y})})(Td)),Td.exports}var y8=g8();function VT(i){const t=y8.hash(i);return b8(t)}function v8(i){const t=new TextEncoder,e=HT(i.map(s=>t.encode(s)));return VT(e)}function b8(i){return Array.from(i,t=>t.toString(16).padStart(2,"0")).join("")}class w8 extends yl{#e;#t=new Map;#i=new Map;#n=!1;#s=uo("automerge-repo:storage-subsystem");constructor(t){super(),this.#e=t}async id(){const t=await this.#e.load(["storage-adapter-id"]);let e;return t?e=new TextDecoder().decode(t):(e=wT(),await this.#e.save(["storage-adapter-id"],new TextEncoder().encode(e))),e}async load(t,e){const s=[t,e];return await this.#e.load(s)}async save(t,e,s){const r=[t,e];await this.#e.save(r,s)}async remove(t,e){const s=[t,e];await this.#e.remove(s)}async loadDocData(t){const e=await this.#e.loadRange([t,"snapshot"]),s=await this.#e.loadRange([t,"incremental"]),r=[],l=[];for(const u of e)u.data!==void 0&&(l.push({key:u.key,type:"snapshot",size:u.data.length}),r.push(u.data));for(const u of s)u.data!==void 0&&(l.push({key:u.key,type:"incremental",size:u.data.length}),r.push(u.data));return this.#i.set(t,l),r.length===0?null:HT(r)}async loadDoc(t){const e=await this.loadDocData(t);if(!e)return null;const s=performance.now(),r=Y0(vs(),e),l=performance.now();return this.emit("document-loaded",{documentId:t,durationMillis:l-s,...X0(r)}),this.#t.set(t,mr(r)),r}async saveDoc(t,e){if(!this.#a(t,e))return;const s=this.#i.get(t)??[];this.#o(s)?await this.#l(t,e,s):await this.#r(t,e),this.#t.set(t,mr(e))}async removeDoc(t){await this.#e.removeRange([t,"snapshot"]),await this.#e.removeRange([t,"incremental"]),await this.#e.removeRange([t,"sync-state"])}async#r(t,e){const s=this.#t.get(t)??[],r=performance.now(),l=HO(e,s),u=performance.now();if(this.emit("doc-saved",{documentId:t,durationMillis:u-r,sinceHeads:s}),l&&l.length>0){const f=[t,"incremental",VT(l)];this.#s(`Saving incremental ${f} for document ${t}`),await this.#e.save(f,l),this.#i.has(t)||this.#i.set(t,[]),this.#i.get(t).push({key:f,type:"incremental",size:l.length}),this.#t.set(t,mr(e))}else return Promise.resolve()}async#l(t,e,s){this.#n=!0;const r=performance.now(),l=YS(e),u=performance.now();this.emit("doc-compacted",{documentId:t,durationMillis:u-r});const f=v8(mr(e)),p=[t,"snapshot",f],m=new Set(s.map(y=>y.key).filter(y=>y[2]!==f));this.#s(`Saving snapshot ${p} for document ${t}`),this.#s(`deleting old chunks ${Array.from(m)}`),await this.#e.save(p,l);for(const y of m)await this.#e.remove(y);const v=this.#i.get(t)?.filter(y=>!m.has(y.key))??[];v.push({key:p,type:"snapshot",size:l.length}),this.#i.set(t,v),this.#n=!1}async loadSyncState(t,e){const s=[t,"sync-state",e];try{const r=await this.#e.load(s);return r?QS(r):void 0}catch{this.#s(`Error loading sync state for ${t} from ${e}`);return}}async saveSyncState(t,e,s){const r=[t,"sync-state",e];await this.#e.save(r,XS(s))}#a(t,e){const s=this.#t.get(t);if(!s)return!0;const r=mr(e);return!hy(_r(r),_r(s))}#o(t){if(this.#n)return!1;let e=0,s=0;for(const r of t)r.type==="snapshot"?e+=r.size:s+=r.size;return e<1024||s>=e}}class qT extends yl{}class x8 extends qT{#e;syncDebounceRate=100;#t=[];#i={};#n={};#s={};#r=[];#l;#a=!1;#o;#h;constructor({handle:t,peerId:e,onLoadSyncState:s}){super(),this.#l=e,this.#o=t,this.#h=s??(()=>Promise.resolve(void 0));const r=t.documentId.slice(0,5);this.#e=uo(`automerge-repo:docsync:${r}`),t.on("change",Jg(()=>this.#c(),this.syncDebounceRate)),t.on("ephemeral-message-outbound",l=>this.#d(l)),(async()=>this.#b())()}get peerStates(){return this.#n}get documentId(){return this.#o.documentId}async#c(){try{await this.#o.whenReady();const t=this.#o.doc();this.#t.forEach(e=>this.#y(e,t))}catch{console.log("sync with peers threw an exception")}}async#d({data:t}){this.#e("broadcastToPeers",this.#t),this.#t.forEach(e=>this.#_(e,t))}#_(t,e){this.#e(`sendEphemeralMessage ->${t}`);const s={type:"ephemeral",targetId:t,documentId:this.#o.documentId,data:e};this.emit("message",s)}#p(t,e){this.#u(t),t in this.#n||(this.#n[t]="unknown");const s=this.#s[t];if(s){e(s);return}let r=this.#i[t];r||(this.#h(t).then(l=>{this.#g(t,l??BO())}).catch(l=>{this.#e(`Error loading sync state for ${t}: ${l}`)}),r=this.#i[t]=[]),r.push(e)}#u(t){this.#t.includes(t)||(this.#t.push(t),this.emit("open-doc",{documentId:this.documentId,peerId:t}))}#g(t,e){const s=this.#i[t];if(s)for(const r of s)r(e);delete this.#i[t],this.#s[t]=e}#m(t,e){this.#s[t]=e,this.emit("sync-state",{peerId:t,syncState:e,documentId:this.#o.documentId})}#y(t,e){this.#e(`sendSyncMessage ->${t}`),this.#p(t,s=>{const r=performance.now(),[l,u]=zO(e,s),f=performance.now();if(this.emit("metrics",{type:"generate-sync-message",documentId:this.#o.documentId,durationMillis:f-r,forPeer:t}),this.#m(t,l),u){const p=mr(e).length===0;!this.#o.isReady()&&p&&l.sharedHeads.length===0&&!Object.values(this.#n).includes("has")&&this.#n[t]==="unknown"?this.emit("message",{type:"request",targetId:t,documentId:this.#o.documentId,data:u}):this.emit("message",{type:"sync",targetId:t,data:u,documentId:this.#o.documentId}),p||(this.#n[t]="has")}})}hasPeer(t){return this.#t.includes(t)}async beginSync(t){this.#o.whenReady([pr,dd,Ki]).then(()=>{this.#a=!0,this.#f()}).catch(s=>{console.log("caught whenready",s),this.#a=!0,this.#f()}),this.#t.some(s=>this.#n[s]=="has")&&await this.#o.whenReady(),t.forEach(s=>{this.#p(s,r=>{const l=QS(XS(r));this.#m(s,l),this.#o.whenReady([pr,dd,Ki]).then(()=>{const u=this.#o.isReady()?this.#o.doc():vs(),f=t.every(m=>this.#n[m]in["unavailable","wants"]);u===void 0&&f||this.#y(s,u??vs())}).catch(u=>{this.#e(`Error loading doc for ${s}: ${u}`)})})})}endSync(t){this.#e(`removing peer ${t}`),this.#t=this.#t.filter(e=>e!==t),delete this.#n[t],this.#f()}receiveMessage(t){switch(t.type){case"sync":case"request":this.receiveSyncMessage(t);break;case"ephemeral":this.receiveEphemeralMessage(t);break;case"doc-unavailable":this.#n[t.senderId]="unavailable",this.#f();break;default:throw new Error(`unknown message type: ${t}`)}}receiveEphemeralMessage(t){if(t.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");const{senderId:e,data:s}=t,r=RT(new Uint8Array(s));this.#o.emit("ephemeral-message",{handle:this.#o,senderId:e,message:r}),this.#t.forEach(l=>{l!==e&&this.emit("message",{...t,targetId:l})})}receiveSyncMessage(t){if(t.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");if(!this.#o.inState([pr,dd,Ki])){this.#r.push({message:t,received:new Date});return}this.#b(),this.#v(t)}#v(t){BT(t)&&(this.#n[t.senderId]="wants"),this.#f(),UO(t.data).heads.length>0&&(this.#n[t.senderId]="has"),this.#p(t.senderId,e=>{this.#o.update(s=>{const r=performance.now(),[l,u]=PO(s,e,t.data),f=performance.now();return this.emit("metrics",{type:"receive-sync-message",documentId:this.#o.documentId,durationMillis:f-r,fromPeer:t.senderId,...X0(s)}),this.#m(t.senderId,u),this.#y(t.senderId,s),l}),this.#f()})}#f(){this.#a&&this.#o.inState([dd,Ki])&&this.#t.every(t=>this.#n[t]==="unavailable"||this.#n[t]==="wants")&&(this.#t.filter(t=>this.#n[t]==="wants").forEach(t=>{this.#n[t]="unavailable";const e={type:"doc-unavailable",documentId:this.#o.documentId,targetId:t};this.emit("message",e)}),this.#o.unavailable())}#b(){for(const t of this.#r)this.#v(t.message);this.#r=[]}metrics(){return{peers:this.#t,size:this.#o.metrics()}}}const $o=uo("automerge-repo:collectionsync");class S8 extends qT{repo;#e=new Set;docSynchronizers={};#t={};#i;#n=new Map;constructor(t,e=[]){super(),this.repo=t,this.#i=e.map(s=>wc(s).documentId)}#s(t){return this.docSynchronizers[t.documentId]||(this.docSynchronizers[t.documentId]=this.#r(t)),this.docSynchronizers[t.documentId]}#r(t){const e=new x8({handle:t,peerId:this.repo.networkSubsystem.peerId,onLoadSyncState:async s=>{if(!this.repo.storageSubsystem)return;const{storageId:r,isEphemeral:l}=this.repo.peerMetadataByPeerId[s]||{};if(!(!r||l))return this.repo.storageSubsystem.loadSyncState(t.documentId,r)}});return e.on("message",s=>this.emit("message",s)),e.on("open-doc",s=>this.emit("open-doc",s)),e.on("sync-state",s=>this.emit("sync-state",s)),e.on("metrics",s=>this.emit("metrics",s)),e}async#l(t){const e=Array.from(this.#e),s=[];for(const r of e)await this.#a(r,t)&&s.push(r);return s}async receiveMessage(t){$o(`onSyncMessage: ${t.senderId}, ${t.documentId}, ${"data"in t?t.data.byteLength+"bytes":""}`);const e=t.documentId;if(!e)throw new Error("received a message with an invalid documentId");if(this.#i.includes(e)){this.emit("metrics",{type:"doc-denied",documentId:e}),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}if(t.type==="request"&&(this.#n.has(e)||this.#n.set(e,new Set),this.#n.get(e)?.add(t.senderId)),!await this.repo.shareConfig.access(t.senderId,e)){$o("access denied"),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}this.#t[e]=!0;const r=await this.repo.find(e,{allowableStates:["ready","unavailable","requesting"]}),l=this.#s(r);l.receiveMessage(t);const u=await this.#l(e);l.beginSync(u.filter(f=>!l.hasPeer(f)))}addDocument(t){if(this.#t[t.documentId])return;this.#t[t.documentId]=!0;const e=this.#s(t);this.#l(t.documentId).then(s=>{e.beginSync(s)})}removeDocument(t){$o(`removing document ${t}`);const e=this.docSynchronizers[t];e!==void 0&&this.peers.forEach(s=>e.endSync(s)),delete this.docSynchronizers[t],delete this.#t[t]}addPeer(t){if($o(`adding ${t} & synchronizing with them`),!this.#e.has(t)){this.#e.add(t);for(const e of Object.values(this.docSynchronizers)){const{documentId:s}=e;this.#a(t,s).then(r=>{r&&e.beginSync([t])})}}}removePeer(t){$o(`removing peer ${t}`),this.#e.delete(t);for(const e of this.#n.values())e.delete(t);for(const e of Object.values(this.docSynchronizers))e.endSync(t)}get peers(){return Array.from(this.#e)}async reevaluateDocumentShare(){const t=Array.from(this.#e),e=[];for(const s of Object.values(this.docSynchronizers)){const r=s.documentId;e.push((async()=>{for(const l of t){const u=await this.#a(l,r),f=s.hasPeer(l);$o(`reevaluateDocumentShare: ${l} for ${r}, shouldShare: ${u}, isAlreadySyncing: ${f}`),u&&!f?($o(`reevaluateDocumentShare: starting sync with ${l} for ${r}`),s.beginSync([l])):!u&&f&&($o(`reevaluateDocumentShare: stopping sync with ${l} for ${r}`),s.endSync(l))}})().catch(l=>{console.log(`error reevaluating document share for ${r}: ${l}`)}))}await Promise.allSettled(e)}metrics(){return Object.fromEntries(Object.entries(this.docSynchronizers).map(([t,e])=>[t,e.metrics()]))}async#a(t,e){const[s,r]=await Promise.all([this.repo.shareConfig.announce(t,e),this.repo.shareConfig.access(t,e)]),l=this.#n.get(e)?.has(t)??!1;return s||r&&l}}function T8(){return"peer-"+Math.random().toString(36).slice(4)}class A8 extends yl{#e;networkSubsystem;storageSubsystem;#t;#i;#n={};synchronizer;#s={announce:async()=>!0,access:async()=>!0};peerMetadataByPeerId={};#r=new l8;#l=!1;#a={};#o={};#h;constructor({storage:t,network:e=[],peerId:s=T8(),sharePolicy:r,shareConfig:l,isEphemeral:u=t===void 0,enableRemoteHeadsGossiping:f=!1,denylist:p=[],saveDebounceRate:m=100,idFactory:v}={}){if(super(),this.#l=f,this.#e=uo("automerge-repo:repo"),this.#h=v||null,r!=null&&l!=null)throw new Error("cannot provide both sharePolicy and shareConfig at once");r&&(this.#s={announce:r,access:async()=>!0}),l&&(this.#s=l),this.on("delete-document",({documentId:x})=>{this.synchronizer.removeDocument(x),y&&y.removeDoc(x).catch(A=>{this.#e("error deleting document",{documentId:x,err:A})})}),this.synchronizer=new S8(this,p),this.synchronizer.on("message",x=>{this.#e(`sending ${x.type} message to ${x.targetId}`),T.send(x)}),this.synchronizer.on("metrics",x=>this.emit("doc-metrics",x)),this.#l&&this.synchronizer.on("open-doc",({peerId:x,documentId:A})=>{this.#r.subscribePeerToDoc(x,A)});const y=t?new w8(t):void 0;y&&(y.on("document-loaded",x=>this.emit("doc-metrics",{type:"doc-loaded",...x})),y.on("doc-compacted",x=>this.emit("doc-metrics",{type:"doc-compacted",...x})),y.on("doc-saved",x=>this.emit("doc-metrics",{type:"doc-saved",...x}))),this.storageSubsystem=y,this.#t=m,this.storageSubsystem?this.#i=({handle:x,doc:A})=>{let E=this.#o[x.documentId];E||(E=Jg(({doc:O,handle:U})=>{this.storageSubsystem.saveDoc(U.documentId,O)},this.#t),this.#o[x.documentId]=E),E({handle:x,doc:A})}:this.#i=()=>{};const w=(async()=>({storageId:await y?.id(),isEphemeral:u}))(),T=new m8(e,s,w);this.networkSubsystem=T,T.on("peer",async({peerId:x,peerMetadata:A})=>{this.#e("peer connected",{peerId:x}),A&&(this.peerMetadataByPeerId[x]={...A}),this.#s.announce(x).then(E=>{E&&this.#l&&this.#r.addGenerousPeer(x)}).catch(E=>{console.log("error in share policy",{err:E})}),this.synchronizer.addPeer(x)}),T.on("peer-disconnected",({peerId:x})=>{this.synchronizer.removePeer(x),this.#r.removePeer(x)}),T.on("message",async x=>{this.#d(x)}),this.synchronizer.on("sync-state",x=>{this.#p(x);const A=this.#n[x.documentId],{storageId:E}=this.peerMetadataByPeerId[x.peerId]||{};if(!E)return;const O=A.getSyncInfo(E)?.lastHeads;x.syncState.theirHeads&&(!O||!hy(O,_r(x.syncState.theirHeads)))&&x.syncState.theirHeads&&(A.setSyncInfo(E,{lastHeads:_r(x.syncState.theirHeads),lastSyncTimestamp:Date.now()}),E&&this.#l&&this.#r.handleImmediateRemoteHeadsChanged(x.documentId,E,_r(x.syncState.theirHeads)))}),this.#l&&(this.#r.on("notify-remote-heads",x=>{this.networkSubsystem.send({type:"remote-heads-changed",targetId:x.targetId,documentId:x.documentId,newHeads:{[x.storageId]:{heads:x.heads,timestamp:x.timestamp}}})}),this.#r.on("change-remote-subs",x=>{this.#e("change-remote-subs",x);for(const A of x.peers)this.networkSubsystem.send({type:"remote-subscription-change",targetId:A,add:x.add,remove:x.remove})}),this.#r.on("remote-heads-changed",({documentId:x,storageId:A,remoteHeads:E,timestamp:O})=>{this.#n[x].setSyncInfo(A,{lastHeads:E,lastSyncTimestamp:O})}))}#c(t){this.storageSubsystem&&(t.listeners("heads-changed").some(s=>s===this.#i)||t.on("heads-changed",this.#i)),this.synchronizer.addDocument(t)}#d(t){switch(t.type){case"remote-subscription-change":this.#l&&this.#r.handleControlMessage(t);break;case"remote-heads-changed":this.#l&&this.#r.handleRemoteHeads(t);break;case"sync":case"request":case"ephemeral":case"doc-unavailable":this.synchronizer.receiveMessage(t).catch(e=>{console.log("error receiving message",{err:e,message:t})})}}#_={};#p(t){if(!this.storageSubsystem)return;const{storageId:e,isEphemeral:s}=this.peerMetadataByPeerId[t.peerId]||{};if(!e||s)return;let r=this.#_[e];r||(r=this.#_[e]=Jg(({documentId:l,syncState:u})=>{this.storageSubsystem.saveSyncState(l,e,u)},this.#t)),r(t)}#u({documentId:t}){if(this.#n[t])return this.#n[t];if(!t)throw new Error(`Invalid documentId ${t}`);const e=new Fd(t);return this.#n[t]=e,e}get handles(){return this.#n}get peers(){return this.synchronizer.peers}get peerId(){return this.networkSubsystem.peerId}get sharePolicy(){return this.#s.announce}set sharePolicy(t){this.#s.announce=t}get shareConfig(){return this.#s}set shareConfig(t){this.#s=t}getStorageIdOfPeer(t){return this.peerMetadataByPeerId[t]?.storageId}create(t){let e;t?e=Cx(t):e=Lx(vs());const{documentId:s}=wc(n1()),r=this.#u({documentId:s});return this.#c(r),r.update(()=>e),r.doneLoading(),r}async create2(t){let e;t?e=Cx(t):e=Lx(vs());let{documentId:s}=wc(n1());if(this.#h){const l=await this.#h(mr(e));s=fh(l)}const r=this.#u({documentId:s});return this.#c(r),r.update(()=>e),r.doneLoading(),r}clone(t){if(!t.isReady())throw new Error(`Cloned handle is not yet in ready state.
        (Try await handle.whenReady() first.)`);const e=t.doc(),s=this.create();return s.update(()=>qd(e)),s}findWithProgress(t,e={}){const{signal:s}=e,{documentId:r,heads:l}=AT(t)?wc(t):{documentId:ud(t),heads:void 0};if(this.#n[r]){const y=this.#n[r];if(y.state===Ki)return{state:"unavailable",error:new Error(`Document ${t} is unavailable`),handle:y};if(y.state===pd)return{state:"failed",error:new Error(`Document ${t} was deleted`),handle:y};if(y.state===pr)return{state:"ready",handle:l?y.view(l):y}}const u=this.#a[r];if(u){const y=this.#n[r];if(y&&(y.state===pr||y.state===Ki||y.state===pd||y.state==="loading"))return u}const f=this.#u({documentId:r}),p={state:"loading",progress:0,handle:f},m={subscribers:new Set,currentProgress:void 0,notify:y=>{m.currentProgress=y,m.subscribers.forEach(w=>w(y)),this.#a[r]=y},peek:()=>m.currentProgress||p,subscribe:y=>(m.subscribers.add(y),()=>m.subscribers.delete(y))};m.notify(p),this.#g(t,r,f,m,s?p1(new Promise(()=>{}),s):new Promise(()=>{}));const v={...p,peek:m.peek,subscribe:m.subscribe};return this.#a[r]=v,v}async#g(t,e,s,r,l){try{r.notify({state:"loading",progress:25,handle:s});const u=await(this.storageSubsystem?this.storageSubsystem.loadDoc(s.documentId):Promise.resolve(null)),f=await Promise.race([u,l]);if(f?(s.update(()=>f),s.doneLoading(),r.notify({state:"loading",progress:50,handle:s})):(await Promise.race([this.networkSubsystem.whenReady(),l]),s.request(),r.notify({state:"loading",progress:75,handle:s})),this.#c(s),await Promise.race([s.whenReady([pr,Ki]),l]),s.state===Ki){const p={state:"unavailable",handle:s};r.notify(p);return}if(s.state===pd)throw new Error(`Document ${t} was deleted`);r.notify({state:"ready",handle:s})}catch(u){r.notify({state:"failed",error:u instanceof Error||u instanceof DOMException?u:new Error(String(u)),handle:this.#u({documentId:e})})}}async find(t,e={}){const{allowableStates:s=["ready"],signal:r}=e;if(r?.aborted)throw new Mp;const l=this.findWithProgress(t,{signal:r});if("subscribe"in l)return this.#c(l.handle),new Promise((u,f)=>{const p=l.subscribe(m=>{s.includes(m.handle.state)?(p(),u(m.handle)):m.state==="unavailable"?(p(),f(new Error(`Document ${t} is unavailable`))):m.state==="failed"&&(p(),f(m.error))})});if(l.handle.state===pr)return l.handle;if(await l.handle.whenReady([pr,Ki]),l.handle.state==="unavailable"&&!s.includes(Ki))throw new Error(`Document ${t} is unavailable`);return l.handle}async#m(t){if(this.#n[t])return this.#n[t];const e=this.#u({documentId:t}),s=await(this.storageSubsystem?this.storageSubsystem.loadDoc(e.documentId):Promise.resolve(null));return s?(e.update(()=>s),e.doneLoading()):(await this.networkSubsystem.whenReady(),e.request()),this.#c(e),e}async findClassic(t,e={}){const s=ud(t),{allowableStates:r,signal:l}=e;return p1((async()=>{const u=await this.#m(s);if(!r&&(await u.whenReady([pr,Ki]),u.state===Ki&&!l?.aborted))throw new Error(`Document ${t} is unavailable`);return u})(),l)}delete(t){const e=ud(t);this.#u({documentId:e}).delete(),delete this.#n[e],delete this.#a[e],delete this.#o[e],this.emit("delete-document",{documentId:e})}async export(t){const e=ud(t),r=this.#u({documentId:e}).doc();return YS(r)}import(t,e){const s=e?.docId;if(s!=null){const r=this.#u({documentId:s});return r.update(l=>Y0(l,t)),this.#c(r),r}else{const r=IO(t),l=this.create();return l.update(()=>qd(r)),l}}subscribeToRemotes=t=>{this.#l?(this.#e("subscribeToRemotes",{remotes:t}),this.#r.subscribeToRemotes(t)):this.#e("WARN: subscribeToRemotes called but remote heads gossiping is not enabled")};storageId=async()=>{if(this.storageSubsystem)return this.storageSubsystem.id()};async flush(t){if(!this.storageSubsystem)return;const e=t?t.map(s=>this.#n[s]):Object.values(this.#n);await Promise.all(e.map(async s=>this.storageSubsystem.saveDoc(s.documentId,s.doc())))}async removeFromCache(t){if(!this.#n[t]){this.#e(`WARN: removeFromCache called but handle not found in handleCache for documentId: ${t}`);return}const e=this.#u({documentId:t});await e.whenReady([pr,e8,pd,Ki]),e.doc()?(e.isReady()?e.unload():this.#e(`WARN: removeFromCache called but handle for documentId: ${t} in unexpected state: ${e.state}`),delete this.#n[t],delete this.#a[t],delete this.#o[t],this.synchronizer.removeDocument(t)):this.#e(`WARN: removeFromCache called but doc undefined for documentId: ${t}`)}shutdown(){return this.networkSubsystem.adapters.forEach(t=>{t.disconnect()}),this.flush()}metrics(){return{documents:this.synchronizer.metrics()}}shareConfigChanged(){this.synchronizer.reevaluateDocumentShare()}}class E8 extends yl{peerId;peerMetadata}const C8="/HereHear/build/master/assets/automerge_wasm_bg-XDrN0Bqn.wasm",L8=async(i={},t)=>{let e;if(t.startsWith("data:")){const s=t.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(s,"base64");else if(typeof atob=="function"){const l=atob(s);r=new Uint8Array(l.length);for(let u=0;u<l.length;u++)r[u]=l.charCodeAt(u)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(r,i)}else{const s=await fetch(t),r=s.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(s,i);else{const l=await s.arrayBuffer();e=await WebAssembly.instantiate(l,i)}}return e.instance.exports};class ys{static __wrap(t){t=t>>>0;const e=Object.create(ys.prototype);return e.__wbg_ptr=t,y1.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,y1.unregister(this),t}free(){const t=this.__destroy_into_raw();pt.__wbg_automerge_free(t,0)}applyAndReturnPatches(t,e){const s=pt.automerge_applyAndReturnPatches(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}applyChanges(t){const e=pt.automerge_applyChanges(this.__wbg_ptr,t);if(e[1])throw At(e[0])}applyPatches(t,e){const s=pt.automerge_applyPatches(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}clone(t){var e=ki(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),s=ts;const r=pt.automerge_clone(this.__wbg_ptr,e,s);if(r[2])throw At(r[1]);return ys.__wrap(r[0])}commit(t,e){var s=ki(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=ts;return pt.automerge_commit(this.__wbg_ptr,s,r,!ki(e),ki(e)?0:e)}delete(t,e){const s=pt.automerge_delete(this.__wbg_ptr,t,e);if(s[1])throw At(s[0])}diff(t,e){const s=pt.automerge_diff(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}diffIncremental(){const t=pt.automerge_diffIncremental(this.__wbg_ptr);if(t[2])throw At(t[1]);return At(t[0])}diffPath(t,e,s,r){const l=pt.automerge_diffPath(this.__wbg_ptr,t,e,s,r);if(l[2])throw At(l[1]);return At(l[0])}dump(){pt.automerge_dump(this.__wbg_ptr)}emptyChange(t,e){var s=ki(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=ts;return pt.automerge_emptyChange(this.__wbg_ptr,s,r,!ki(e),ki(e)?0:e)}enableFreeze(t){const e=pt.automerge_enableFreeze(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return e[0]!==0}fork(t,e){var s=ki(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=ts;const l=pt.automerge_fork(this.__wbg_ptr,s,r,e);if(l[2])throw At(l[1]);return ys.__wrap(l[0])}generateSyncMessage(t){return nl(t,Ii),pt.automerge_generateSyncMessage(this.__wbg_ptr,t.__wbg_ptr)}get(t,e,s){const r=pt.automerge_get(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}getActorId(){let t,e;try{const s=pt.automerge_getActorId(this.__wbg_ptr);return t=s[0],e=s[1],bs(s[0],s[1])}finally{pt.__wbindgen_free(t,e,1)}}getAll(t,e,s){const r=pt.automerge_getAll(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}getBlock(t,e,s){const r=pt.automerge_getBlock(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}getChangeByHash(t){const e=pt.automerge_getChangeByHash(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getChangeMetaByHash(t){const e=pt.automerge_getChangeMetaByHash(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getChanges(t){const e=pt.automerge_getChanges(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getChangesAdded(t){return nl(t,ys),pt.automerge_getChangesAdded(this.__wbg_ptr,t.__wbg_ptr)}getChangesMeta(t){const e=pt.automerge_getChangesMeta(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getCursor(t,e,s,r){let l,u;try{const m=pt.automerge_getCursor(this.__wbg_ptr,t,e,s,r);var f=m[0],p=m[1];if(m[3])throw f=0,p=0,At(m[2]);return l=f,u=p,bs(f,p)}finally{pt.__wbindgen_free(l,u,1)}}getCursorPosition(t,e,s){const r=pt.automerge_getCursorPosition(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return r[0]}getDecodedChangeByHash(t){const e=pt.automerge_getDecodedChangeByHash(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getHeads(){return pt.automerge_getHeads(this.__wbg_ptr)}getLastLocalChange(){return pt.automerge_getLastLocalChange(this.__wbg_ptr)}getMissingDeps(t){const e=pt.automerge_getMissingDeps(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}getWithType(t,e,s){const r=pt.automerge_getWithType(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}hasOurChanges(t){return nl(t,Ii),pt.automerge_hasOurChanges(this.__wbg_ptr,t.__wbg_ptr)!==0}increment(t,e,s){const r=pt.automerge_increment(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}insert(t,e,s,r){const l=pt.automerge_insert(this.__wbg_ptr,t,e,s,r);if(l[1])throw At(l[0])}insertObject(t,e,s){let r,l;try{const p=pt.automerge_insertObject(this.__wbg_ptr,t,e,s);var u=p[0],f=p[1];if(p[3])throw u=0,f=0,At(p[2]);return r=u,l=f,bs(u,f)}finally{pt.__wbindgen_free(r,l,1)}}integrate(){pt.automerge_integrate(this.__wbg_ptr)}isolate(t){const e=pt.automerge_isolate(this.__wbg_ptr,t);if(e[1])throw At(e[0])}joinBlock(t,e){const s=pt.automerge_joinBlock(this.__wbg_ptr,t,e);if(s[1])throw At(s[0])}keys(t,e){const s=pt.automerge_keys(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}length(t,e){const s=pt.automerge_length(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return s[0]}loadIncremental(t){const e=pt.automerge_loadIncremental(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return e[0]}mark(t,e,s,r,l){const u=pt.automerge_mark(this.__wbg_ptr,t,e,s,r,l);if(u[1])throw At(u[0])}marks(t,e){const s=pt.automerge_marks(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}marksAt(t,e,s){const r=pt.automerge_marksAt(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}materialize(t,e,s){const r=pt.automerge_materialize(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}merge(t){nl(t,ys);const e=pt.automerge_merge(this.__wbg_ptr,t.__wbg_ptr);if(e[2])throw At(e[1]);return At(e[0])}static new(t){var e=ki(t)?0:Hs(t,pt.__wbindgen_malloc,pt.__wbindgen_realloc),s=ts;const r=pt.automerge_new(e,s);if(r[2])throw At(r[1]);return ys.__wrap(r[0])}objInfo(t,e){const s=pt.automerge_objInfo(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}pendingOps(){return pt.automerge_pendingOps(this.__wbg_ptr)}push(t,e,s){const r=pt.automerge_push(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}pushObject(t,e){let s,r;try{const f=pt.automerge_pushObject(this.__wbg_ptr,t,e);var l=f[0],u=f[1];if(f[3])throw l=0,u=0,At(f[2]);return s=l,r=u,bs(l,u)}finally{pt.__wbindgen_free(s,r,1)}}put(t,e,s,r){const l=pt.automerge_put(this.__wbg_ptr,t,e,s,r);if(l[1])throw At(l[0])}putObject(t,e,s){const r=pt.automerge_putObject(this.__wbg_ptr,t,e,s);if(r[2])throw At(r[1]);return At(r[0])}receiveSyncMessage(t,e){nl(t,Ii);const s=pt.automerge_receiveSyncMessage(this.__wbg_ptr,t.__wbg_ptr,e);if(s[1])throw At(s[0])}registerDatatype(t,e,s){const r=pt.automerge_registerDatatype(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}resetDiffCursor(){pt.automerge_resetDiffCursor(this.__wbg_ptr)}rollback(){return pt.automerge_rollback(this.__wbg_ptr)}save(){return pt.automerge_save(this.__wbg_ptr)}saveAndVerify(){const t=pt.automerge_saveAndVerify(this.__wbg_ptr);if(t[2])throw At(t[1]);return At(t[0])}saveBundle(t){const e=pt.automerge_saveBundle(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}saveIncremental(){return pt.automerge_saveIncremental(this.__wbg_ptr)}saveNoCompress(){return pt.automerge_saveNoCompress(this.__wbg_ptr)}saveSince(t){const e=pt.automerge_saveSince(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}spans(t,e){const s=pt.automerge_spans(this.__wbg_ptr,t,e);if(s[2])throw At(s[1]);return At(s[0])}splice(t,e,s,r){const l=pt.automerge_splice(this.__wbg_ptr,t,e,s,r);if(l[1])throw At(l[0])}splitBlock(t,e,s){const r=pt.automerge_splitBlock(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}stats(){return pt.automerge_stats(this.__wbg_ptr)}text(t,e){let s,r;try{const f=pt.automerge_text(this.__wbg_ptr,t,e);var l=f[0],u=f[1];if(f[3])throw l=0,u=0,At(f[2]);return s=l,r=u,bs(l,u)}finally{pt.__wbindgen_free(s,r,1)}}toJS(t){const e=pt.automerge_toJS(this.__wbg_ptr,t);if(e[2])throw At(e[1]);return At(e[0])}topoHistoryTraversal(){return pt.automerge_topoHistoryTraversal(this.__wbg_ptr)}unmark(t,e,s){const r=pt.automerge_unmark(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}updateBlock(t,e,s){const r=pt.automerge_updateBlock(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}updateDiffCursor(){pt.automerge_updateDiffCursor(this.__wbg_ptr)}updateSpans(t,e,s){const r=pt.automerge_updateSpans(this.__wbg_ptr,t,e,s);if(r[1])throw At(r[0])}updateText(t,e){const s=pt.automerge_updateText(this.__wbg_ptr,t,e);if(s[1])throw At(s[0])}}Symbol.dispose&&(ys.prototype[Symbol.dispose]=ys.prototype.free);class Ii{static __wrap(t){t=t>>>0;const e=Object.create(Ii.prototype);return e.__wbg_ptr=t,v1.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,v1.unregister(this),t}free(){const t=this.__destroy_into_raw();pt.__wbg_syncstate_free(t,0)}clone(){const t=pt.syncstate_clone(this.__wbg_ptr);return Ii.__wrap(t)}get lastSentHeads(){return pt.syncstate_lastSentHeads(this.__wbg_ptr)}set lastSentHeads(t){const e=pt.syncstate_set_lastSentHeads(this.__wbg_ptr,t);if(e[1])throw At(e[0])}set sentHashes(t){const e=pt.syncstate_set_sentHashes(this.__wbg_ptr,t);if(e[1])throw At(e[0])}get sharedHeads(){return pt.syncstate_sharedHeads(this.__wbg_ptr)}}Symbol.dispose&&(Ii.prototype[Symbol.dispose]=Ii.prototype.free);function M8(i){const t=pt.create(i);if(t[2])throw At(t[1]);return ys.__wrap(t[0])}function k8(i){const t=pt.decodeChange(i);if(t[2])throw At(t[1]);return At(t[0])}function D8(i){const t=pt.decodeSyncMessage(i);if(t[2])throw At(t[1]);return At(t[0])}function O8(i){const t=pt.decodeSyncState(i);if(t[2])throw At(t[1]);return Ii.__wrap(t[0])}function R8(i){const t=pt.encodeChange(i);if(t[2])throw At(t[1]);return At(t[0])}function I8(i){const t=pt.encodeSyncMessage(i);if(t[2])throw At(t[1]);return At(t[0])}function N8(i){return nl(i,Ii),pt.encodeSyncState(i.__wbg_ptr)}function z8(i){return nl(i,Ii),pt.exportSyncState(i.__wbg_ptr)}function P8(i){const t=pt.importSyncState(i);if(t[2])throw At(t[1]);return Ii.__wrap(t[0])}function B8(){const i=pt.initSyncState();return Ii.__wrap(i)}function U8(i,t){const e=pt.load(i,t);if(e[2])throw At(e[1]);return ys.__wrap(e[0])}function H8(i){const t=pt.readBundle(i);if(t[2])throw At(t[1]);return At(t[0])}function V8(){return pt.wasmReleaseInfo()}function q8(i){return BigInt(i)}function j8(i,t){return Error(bs(i,t))}function G8(i,t){const e=String(t),s=Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=ts;zi().setInt32(i+4,r,!0),zi().setInt32(i+0,s,!0)}function Z8(i){const t=i,e=typeof t=="boolean"?t:void 0;return ki(e)?16777215:e?1:0}function W8(i,t){const e=$g(t),s=Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=ts;zi().setInt32(i+4,r,!0),zi().setInt32(i+0,s,!0)}function Y8(i,t){return i>t}function X8(i){return typeof i=="bigint"}function Q8(i){return typeof i=="function"}function F8(i){return i===null}function K8(i){const t=i;return typeof t=="object"&&t!==null}function J8(i){return typeof i=="string"}function $8(i){return i===void 0}function tR(i,t){return i==t}function eR(i,t){return i<t}function nR(i){return-i}function iR(i,t){const e=t,s=typeof e=="number"?e:void 0;zi().setFloat64(i+8,ki(s)?0:s,!0),zi().setInt32(i+0,!ki(s),!0)}function sR(i,t){const e=t,s=typeof e=="string"?e:void 0;var r=ki(s)?0:Hs(s,pt.__wbindgen_malloc,pt.__wbindgen_realloc),l=ts;zi().setInt32(i+4,l,!0),zi().setInt32(i+0,r,!0)}function rR(i,t){throw new Error(bs(i,t))}function oR(){return Ar(function(i,t,e){return Reflect.apply(i,t,e)},arguments)}function aR(i,t){return Object.assign(i,t)}function lR(){return Ar(function(i,t){return i.call(t)},arguments)}function cR(){return Ar(function(i,t,e){return i.call(t,e)},arguments)}function uR(i,t){return i.concat(t)}function hR(i,t,e){return Object.defineProperty(i,t,e)}function fR(){return Ar(function(i,t){return Reflect.deleteProperty(i,t)},arguments)}function dR(i){return i.done}function pR(i){return Object.entries(i)}function mR(i,t){let e,s;try{e=i,s=t,console.error(bs(i,t))}finally{pt.__wbindgen_free(e,s,1)}}function _R(i,t){return Symbol.for(bs(i,t))}function gR(i){return Object.freeze(i)}function yR(i){return Array.from(i)}function vR(){return Ar(function(i,t){globalThis.crypto.getRandomValues(fy(i,t))},arguments)}function bR(i){return i.getTime()}function wR(i,t){return i[t>>>0]}function xR(){return Ar(function(i,t){return Reflect.get(i,t)},arguments)}function SR(i){let t;try{t=i instanceof ArrayBuffer}catch{t=!1}return t}function TR(i){let t;try{t=i instanceof Date}catch{t=!1}return t}function AR(i){let t;try{t=i instanceof Object}catch{t=!1}return t}function ER(i){let t;try{t=i instanceof Uint8Array}catch{t=!1}return t}function CR(i){return Array.isArray(i)}function LR(i){return Array.isArray(i)}function MR(){return Symbol.iterator}function kR(i){return Object.keys(i)}function DR(i){return i.length}function OR(i){return i.length}function RR(i){return i.length}function IR(i){console.log(i)}function NR(i,t){console.log(i,t)}function zR(i){return new Date(i)}function PR(){return new Object}function BR(){return new Array}function UR(i,t){return new Error(bs(i,t))}function HR(){return new Error}function VR(i,t){return new RangeError(bs(i,t))}function qR(i){return new Uint8Array(i)}function jR(i,t){return new Uint8Array(fy(i,t))}function GR(){return Ar(function(i){return i.next()},arguments)}function ZR(i){return i.next}function WR(){return Ar(function(i){return Reflect.ownKeys(i)},arguments)}function YR(i,t,e){Uint8Array.prototype.set.call(fy(i,t),e)}function XR(i,t){return i.push(t)}function QR(i,t,e){i[t]=e}function FR(){return Ar(function(i,t,e){return Reflect.set(i,t,e)},arguments)}function KR(i,t,e){i[t>>>0]=e}function JR(i,t,e){return i.slice(t>>>0,e>>>0)}function $R(i,t){const e=t.stack,s=Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=ts;zi().setInt32(i+4,r,!0),zi().setInt32(i+0,s,!0)}function t6(i,t){const e=JSON.stringify(t);var s=ki(e)?0:Hs(e,pt.__wbindgen_malloc,pt.__wbindgen_realloc),r=ts;zi().setInt32(i+4,r,!0),zi().setInt32(i+0,s,!0)}function e6(){return Ar(function(i,t){return i.toString(t)},arguments)}function n6(i,t,e){const s=t.toString(e),r=Hs(s,pt.__wbindgen_malloc,pt.__wbindgen_realloc),l=ts;zi().setInt32(i+4,l,!0),zi().setInt32(i+0,r,!0)}function i6(i){return i.toString()}function s6(i,t){return i.unshift(t)}function r6(i){return i.value}function o6(i){return Object.values(i)}function a6(i){return i}function l6(i){return i}function c6(i,t){return bs(i,t)}function u6(i){return BigInt.asUintN(64,i)}function h6(){const i=pt.__wbindgen_externrefs,t=i.grow(4);i.set(0,void 0),i.set(t+0,void 0),i.set(t+1,null),i.set(t+2,!0),i.set(t+3,!1)}const y1=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>pt.__wbg_automerge_free(i>>>0,1)),v1=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>pt.__wbg_syncstate_free(i>>>0,1));function f6(i){const t=pt.__externref_table_alloc();return pt.__wbindgen_externrefs.set(t,i),t}function nl(i,t){if(!(i instanceof t))throw new Error(`expected instance of ${t.name}`)}function $g(i){const t=typeof i;if(t=="number"||t=="boolean"||i==null)return`${i}`;if(t=="string")return`"${i}"`;if(t=="symbol"){const r=i.description;return r==null?"Symbol":`Symbol(${r})`}if(t=="function"){const r=i.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(i)){const r=i.length;let l="[";r>0&&(l+=$g(i[0]));for(let u=1;u<r;u++)l+=", "+$g(i[u]);return l+="]",l}const e=/\[object ([^\]]+)\]/.exec(toString.call(i));let s;if(e&&e.length>1)s=e[1];else return toString.call(i);if(s=="Object")try{return"Object("+JSON.stringify(i)+")"}catch{return"Object"}return i instanceof Error?`${i.name}: ${i.message}
${i.stack}`:s}function fy(i,t){return i=i>>>0,th().subarray(i/1,i/1+t)}let hc=null;function zi(){return(hc===null||hc.buffer.detached===!0||hc.buffer.detached===void 0&&hc.buffer!==pt.memory.buffer)&&(hc=new DataView(pt.memory.buffer)),hc}function bs(i,t){return i=i>>>0,p6(i,t)}let md=null;function th(){return(md===null||md.byteLength===0)&&(md=new Uint8Array(pt.memory.buffer)),md}function Ar(i,t){try{return i.apply(this,t)}catch(e){const s=f6(e);pt.__wbindgen_exn_store(s)}}function ki(i){return i==null}function Hs(i,t,e){if(e===void 0){const f=eh.encode(i),p=t(f.length,1)>>>0;return th().subarray(p,p+f.length).set(f),ts=f.length,p}let s=i.length,r=t(s,1)>>>0;const l=th();let u=0;for(;u<s;u++){const f=i.charCodeAt(u);if(f>127)break;l[r+u]=f}if(u!==s){u!==0&&(i=i.slice(u)),r=e(r,s,s=u+i.length*3,1)>>>0;const f=th().subarray(r+u,r+s),p=eh.encodeInto(i,f);u+=p.written,r=e(r,s,u,1)>>>0}return ts=u,r}function At(i){const t=pt.__wbindgen_externrefs.get(i);return pt.__externref_table_dealloc(i),t}let Ad=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Ad.decode();const d6=2146435072;let wg=0;function p6(i,t){return wg+=t,wg>=d6&&(Ad=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),Ad.decode(),wg=t),Ad.decode(th().subarray(i,i+t))}const eh=new TextEncoder;"encodeInto"in eh||(eh.encodeInto=function(i,t){const e=eh.encode(i);return t.set(e),{read:i.length,written:e.length}});let ts=0,pt;function m6(i){pt=i}URL=globalThis.URL;const xt=await L8({"./automerge_wasm_bg.js":{__wbg_new_8a6f238a6ece86ea:HR,__wbg_stack_0ed75d68575b0f3c:$R,__wbg_error_7534b8e9a36f1ab4:mR,__wbg_String_8f0eb39a4a4c2f66:G8,__wbg_set_3f1d0b984ed272ed:QR,__wbg_getRandomValues_1c61fac11405ffdc:vR,__wbg_log_6b5ca2e6124b2808:IR,__wbg_log_b948c93e3e66d64f:NR,__wbg_get_9b94d73e6221f75c:wR,__wbg_length_35a7bace40f36eac:OR,__wbg_new_3eb36ae241fe6f44:BR,__wbg_BigInt_b7bbccdff258c9f2:q8,__wbg_next_418f80d8f5303233:ZR,__wbg_next_3482f54c49e8af19:GR,__wbg_done_57b39ecd9addfe81:dR,__wbg_value_0546255b415e96c1:r6,__wbg_iterator_6ff6560ca1568e55:MR,__wbg_get_b3ed3ad4be2bc8ac:xR,__wbg_call_389efe28435a9388:lR,__wbg_new_361308b2356cecd0:PR,__wbg_length_68dc7c5cf1b6d349:RR,__wbg_set_f43e577aea94465b:KR,__wbg_from_bddd64e7d5ff6941:yR,__wbg_isArray_d314bb98fcf08331:LR,__wbg_push_8ffdcb2063340ba5:XR,__wbg_unshift_a4a28a3b4a2e621b:s6,__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:SR,__wbg_toString_3cadee6e7c22b39e:e6,__wbg_toString_56d946daff83867b:n6,__wbg_new_72b49615380db768:UR,__wbg_call_4708e0c13bdc8e95:cR,__wbg_instanceof_Date_1b9f15b87f10aa4c:TR,__wbg_getTime_1e3cd1391c5c3995:bR,__wbg_new_245cd5c49157e602:zR,__wbg_instanceof_Object_1c6af87502b733ed:AR,__wbg_assign_6170c0d04d5c26f4:aR,__wbg_defineProperty_fc8692a66be8fe2d:hR,__wbg_entries_58c7934c745daac7:pR,__wbg_freeze_661d9047fd889cd0:gR,__wbg_keys_b50a709a76add04e:kR,__wbg_values_5da93bc719d272cf:o6,__wbg_new_911dabf69fa7eb20:VR,__wbg_apply_2e22c45cb4f12415:oR,__wbg_deleteProperty_8c8a05da881fea59:fR,__wbg_ownKeys_c7100fb5fa376c6f:WR,__wbg_set_6cb8631f80447a67:FR,__wbg_concat_f6e5ebc81f4917f1:uR,__wbg_slice_b0fa09b1e0041d42:JR,__wbg_for_c3adefd268cb6f1c:_R,__wbg_toString_b388ecd2d3c517c3:i6,__wbg_length_32ed9a279acd054c:DR,__wbg_prototypesetcall_bdcdcc5842e4d77d:YR,__wbg_new_dd2b680c8bf6ae29:qR,__wbg_instanceof_Uint8Array_9b9075935c74707c:ER,__wbg_new_from_slice_a3d2629dc1826784:jR,__wbg___wbindgen_string_get_72fb696202c56729:sR,__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:Z8,__wbg___wbindgen_number_get_8ff4255516ccad3e:iR,__wbg___wbindgen_is_undefined_9e4d92534c42d778:$8,__wbg___wbindgen_debug_string_0bc8482c6e3508ae:W8,__wbg_isArray_a2cef7634fcb7c0d:CR,__wbg_Error_8c4e43fe74559d73:j8,__wbg_stringify_e4a940b133e6b7d8:t6,__wbg___wbindgen_is_null_ac34f5003991759a:F8,__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:K8,__wbg___wbindgen_is_function_0095a73b8b156f76:Q8,__wbg___wbindgen_is_string_cd444516edc5b180:J8,__wbg___wbindgen_is_bigint_31b12575b56f32fc:X8,__wbg___wbindgen_neg_6b4d356dff49dcc6:nR,__wbg___wbindgen_lt_bb59cc3d23526e0d:eR,__wbg___wbindgen_gt_d7bb3629eac381f5:Y8,__wbg___wbindgen_throw_be289d5034ed271b:rR,__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:tR,__wbindgen_init_externref_table:h6,__wbindgen_cast_0000000000000001:a6,__wbindgen_cast_0000000000000002:l6,__wbindgen_cast_0000000000000003:c6,__wbindgen_cast_0000000000000004:u6}},C8),_6=xt.memory,g6=xt.__wbg_syncstate_free,y6=xt.syncstate_sharedHeads,v6=xt.syncstate_lastSentHeads,b6=xt.syncstate_set_lastSentHeads,w6=xt.syncstate_set_sentHashes,x6=xt.syncstate_clone,S6=xt.__wbg_automerge_free,T6=xt.automerge_new,A6=xt.automerge_clone,E6=xt.automerge_fork,C6=xt.automerge_pendingOps,L6=xt.automerge_commit,M6=xt.automerge_merge,k6=xt.automerge_rollback,D6=xt.automerge_keys,O6=xt.automerge_text,R6=xt.automerge_spans,I6=xt.automerge_splice,N6=xt.automerge_updateText,z6=xt.automerge_updateSpans,P6=xt.automerge_push,B6=xt.automerge_pushObject,U6=xt.automerge_insert,H6=xt.automerge_splitBlock,V6=xt.automerge_joinBlock,q6=xt.automerge_updateBlock,j6=xt.automerge_getBlock,G6=xt.automerge_insertObject,Z6=xt.automerge_put,W6=xt.automerge_putObject,Y6=xt.automerge_increment,X6=xt.automerge_get,Q6=xt.automerge_getWithType,F6=xt.automerge_objInfo,K6=xt.automerge_getAll,J6=xt.automerge_enableFreeze,$6=xt.automerge_registerDatatype,t5=xt.automerge_applyPatches,e5=xt.automerge_applyAndReturnPatches,n5=xt.automerge_diffIncremental,i5=xt.automerge_updateDiffCursor,s5=xt.automerge_resetDiffCursor,r5=xt.automerge_diff,o5=xt.automerge_diffPath,a5=xt.automerge_isolate,l5=xt.automerge_integrate,c5=xt.automerge_length,u5=xt.automerge_delete,h5=xt.automerge_save,f5=xt.automerge_saveIncremental,d5=xt.automerge_saveSince,p5=xt.automerge_saveNoCompress,m5=xt.automerge_saveAndVerify,_5=xt.automerge_loadIncremental,g5=xt.automerge_applyChanges,y5=xt.automerge_getChanges,v5=xt.automerge_getChangesMeta,b5=xt.automerge_getChangeByHash,w5=xt.automerge_getChangeMetaByHash,x5=xt.automerge_getDecodedChangeByHash,S5=xt.automerge_getChangesAdded,T5=xt.automerge_getHeads,A5=xt.automerge_getActorId,E5=xt.automerge_getLastLocalChange,C5=xt.automerge_dump,L5=xt.automerge_getMissingDeps,M5=xt.automerge_receiveSyncMessage,k5=xt.automerge_generateSyncMessage,D5=xt.automerge_toJS,O5=xt.automerge_materialize,R5=xt.automerge_getCursor,I5=xt.automerge_getCursorPosition,N5=xt.automerge_emptyChange,z5=xt.automerge_mark,P5=xt.automerge_unmark,B5=xt.automerge_marks,U5=xt.automerge_marksAt,H5=xt.automerge_hasOurChanges,V5=xt.automerge_topoHistoryTraversal,q5=xt.automerge_stats,j5=xt.automerge_saveBundle,G5=xt.create,Z5=xt.load,W5=xt.wasmReleaseInfo,Y5=xt.encodeChange,X5=xt.decodeChange,Q5=xt.initSyncState,F5=xt.importSyncState,K5=xt.exportSyncState,J5=xt.encodeSyncMessage,$5=xt.decodeSyncMessage,tI=xt.encodeSyncState,eI=xt.decodeSyncState,nI=xt.readBundle,iI=xt.__wbindgen_malloc,sI=xt.__wbindgen_realloc,rI=xt.__wbindgen_exn_store,oI=xt.__externref_table_alloc,aI=xt.__wbindgen_externrefs,lI=xt.__wbindgen_free,cI=xt.__externref_table_dealloc,jT=xt.__wbindgen_start,uI=Object.freeze(Object.defineProperty({__proto__:null,__externref_table_alloc:oI,__externref_table_dealloc:cI,__wbg_automerge_free:S6,__wbg_syncstate_free:g6,__wbindgen_exn_store:rI,__wbindgen_externrefs:aI,__wbindgen_free:lI,__wbindgen_malloc:iI,__wbindgen_realloc:sI,__wbindgen_start:jT,automerge_applyAndReturnPatches:e5,automerge_applyChanges:g5,automerge_applyPatches:t5,automerge_clone:A6,automerge_commit:L6,automerge_delete:u5,automerge_diff:r5,automerge_diffIncremental:n5,automerge_diffPath:o5,automerge_dump:C5,automerge_emptyChange:N5,automerge_enableFreeze:J6,automerge_fork:E6,automerge_generateSyncMessage:k5,automerge_get:X6,automerge_getActorId:A5,automerge_getAll:K6,automerge_getBlock:j6,automerge_getChangeByHash:b5,automerge_getChangeMetaByHash:w5,automerge_getChanges:y5,automerge_getChangesAdded:S5,automerge_getChangesMeta:v5,automerge_getCursor:R5,automerge_getCursorPosition:I5,automerge_getDecodedChangeByHash:x5,automerge_getHeads:T5,automerge_getLastLocalChange:E5,automerge_getMissingDeps:L5,automerge_getWithType:Q6,automerge_hasOurChanges:H5,automerge_increment:Y6,automerge_insert:U6,automerge_insertObject:G6,automerge_integrate:l5,automerge_isolate:a5,automerge_joinBlock:V6,automerge_keys:D6,automerge_length:c5,automerge_loadIncremental:_5,automerge_mark:z5,automerge_marks:B5,automerge_marksAt:U5,automerge_materialize:O5,automerge_merge:M6,automerge_new:T6,automerge_objInfo:F6,automerge_pendingOps:C6,automerge_push:P6,automerge_pushObject:B6,automerge_put:Z6,automerge_putObject:W6,automerge_receiveSyncMessage:M5,automerge_registerDatatype:$6,automerge_resetDiffCursor:s5,automerge_rollback:k6,automerge_save:h5,automerge_saveAndVerify:m5,automerge_saveBundle:j5,automerge_saveIncremental:f5,automerge_saveNoCompress:p5,automerge_saveSince:d5,automerge_spans:R6,automerge_splice:I6,automerge_splitBlock:H6,automerge_stats:q5,automerge_text:O6,automerge_toJS:D5,automerge_topoHistoryTraversal:V5,automerge_unmark:P5,automerge_updateBlock:q6,automerge_updateDiffCursor:i5,automerge_updateSpans:z6,automerge_updateText:N6,create:G5,decodeChange:X5,decodeSyncMessage:$5,decodeSyncState:eI,encodeChange:Y5,encodeSyncMessage:J5,encodeSyncState:tI,exportSyncState:K5,importSyncState:F5,initSyncState:Q5,load:Z5,memory:_6,readBundle:nI,syncstate_clone:x6,syncstate_lastSentHeads:v6,syncstate_set_lastSentHeads:b6,syncstate_set_sentHashes:w6,syncstate_sharedHeads:y6,wasmReleaseInfo:W5},Symbol.toStringTag,{value:"Module"}));m6(uI);jT();const hI=Object.freeze(Object.defineProperty({__proto__:null,Automerge:ys,SyncState:Ii,create:M8,decodeChange:k8,decodeSyncMessage:D8,decodeSyncState:O8,encodeChange:R8,encodeSyncMessage:I8,encodeSyncState:N8,exportSyncState:z8,importSyncState:P8,initSyncState:B8,load:U8,readBundle:H8,wasmReleaseInfo:V8},Symbol.toStringTag,{value:"Module"}));CO(hI);var _c=null;typeof WebSocket<"u"?_c=WebSocket:typeof MozWebSocket<"u"?_c=MozWebSocket:typeof global<"u"?_c=global.WebSocket||global.MozWebSocket:typeof window<"u"?_c=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(_c=self.WebSocket||self.MozWebSocket);const xg=_c,fI=i=>i.type==="peer",dI=i=>i.type==="error",pI="1";function to(i,t="Assertion failed"){if(i===!1||i===null||i===void 0){const e=new Error(mI(t));throw e.stack=_I(e.stack,"assert.ts"),e}}const mI=i=>i.split(`
`).map(t=>t.trim()).join(`
`),_I=(i="",t)=>i.split(`
`).filter(e=>!e.includes(t)).join(`
`),gI=i=>{const{buffer:t,byteOffset:e,byteLength:s}=i;return t.slice(e,e+s)};class yI extends E8{socket}class vI extends yI{url;retryInterval;#e=!1;#t;#i=new Promise(t=>{this.#t=t});isReady(){return this.#e}whenReady(){return this.#i}#n(){this.#e||(this.#e=!0,this.#t?.())}#s;#r=uo("automerge-repo:websocket:browser");remotePeerId;constructor(t,e=5e3){super(),this.url=t,this.retryInterval=e,this.#r=this.#r.extend(t)}connect(t,e){!this.socket||!this.peerId?(this.#r("connecting"),this.peerId=t,this.peerMetadata=e??{}):(this.#r("reconnecting"),to(t===this.peerId),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError)),this.#s||(this.#s=setInterval(()=>{this.connect(t,e)},this.retryInterval)),this.socket=new xg(this.url),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),setTimeout(()=>this.#n(),1e3),this.join()}onOpen=()=>{this.#r("open"),clearInterval(this.#s),this.#s=void 0,this.join()};onClose=()=>{this.#r("close"),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.retryInterval>0&&!this.#s&&setTimeout(()=>(to(this.peerId),this.connect(this.peerId,this.peerMetadata)),this.retryInterval)};onMessage=t=>{this.receiveMessage(t.data)};onError=t=>{if("error"in t&&t.error.code!=="ECONNREFUSED")throw t.error;this.#r("Connection failed, retrying...")};join(){to(this.peerId),to(this.socket),this.socket.readyState===xg.OPEN&&this.send(bI(this.peerId,this.peerMetadata))}disconnect(){to(this.peerId),to(this.socket);const t=this.socket;t&&(t.removeEventListener("open",this.onOpen),t.removeEventListener("close",this.onClose),t.removeEventListener("message",this.onMessage),t.removeEventListener("error",this.onError),t.close()),clearInterval(this.#s),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.socket=void 0}send(t){if("data"in t&&t.data?.byteLength===0)throw new Error("Tried to send a zero-length message");if(to(this.peerId),!this.socket){this.#r("Tried to send on a disconnected socket.");return}if(this.socket.readyState!==xg.OPEN)throw new Error(`Websocket not ready (${this.socket.readyState})`);const e=PT(t);this.socket.send(gI(e))}peerCandidate(t,e){to(this.socket),this.#n(),this.remotePeerId=t,this.emit("peer-candidate",{peerId:t,peerMetadata:e})}receiveMessage(t){let e;try{e=Q4(new Uint8Array(t))}catch(s){this.#r("error decoding message:",s);return}if(to(this.socket),t.byteLength===0)throw new Error("received a zero-length message");if(fI(e)){const{peerMetadata:s}=e;this.#r(`peer: ${e.senderId}`),this.peerCandidate(e.senderId,s)}else dI(e)?this.#r(`error: ${e.message}`):this.emit("message",e)}}function bI(i,t){return{type:"join",senderId:i,peerMetadata:t,supportedProtocolVersions:[pI]}}uo("WebsocketServer");const GT=new A8({network:[new vI("wss://sync.automerge.org")]}),wI=()=>`user-${Math.random().toString(36).substring(2,11)}`,xI=()=>{let i=sessionStorage.getItem("automerge-user-id");return i||(i=wI(),sessionStorage.setItem("automerge-user-id",i)),i},SI=()=>{const[i,t]=Rt.useState(null),[e]=Rt.useState(()=>xI());Rt.useEffect(()=>{(async()=>{const U=new URLSearchParams(window.location.search).get("doc");if(U){const D=`automerge:${U}`;console.log("Joining existing document:",U),t(D)}else{console.log("Creating new document...");const D=GT.create();D.change(G=>{G.users={}});const Q=D.url;t(Q);const I=Q.split(":")[1],H=`${window.location.pathname}?doc=${I}`;window.history.pushState({},"",H),console.log("Created new document:",I),console.log("Share this URL with others to collaborate!")}})()},[]);const[s,r]=BA(i);Rt.useEffect(()=>{if(!r)return;const E=()=>{r(D=>{D.users||(D.users={});const Q=Date.now(),I=!document.hidden;if(D.users[e])D.users[e].lastSeen=Q,I?D.users[e].hiddenSince!==void 0&&delete D.users[e].hiddenSince:D.users[e].hiddenSince===void 0&&(D.users[e].hiddenSince=Q);else{const H={id:e,connectedAt:Q,lastSeen:Q};I||(H.hiddenSince=Q),D.users[e]=H}})};E();const O=setInterval(E,5e3),U=()=>{E()};return document.addEventListener("visibilitychange",U),()=>{clearInterval(O),document.removeEventListener("visibilitychange",U)}},[r,e]);const l=Rt.useMemo(()=>{if(!s?.users)return[];const E=Date.now(),O=9e4,U=3e4;return Object.values(s.users).filter(D=>E-D.lastSeen<O).map(D=>{const Q=D.hiddenSince===void 0||E-D.hiddenSince<U;return{...D,isActive:Q}})},[s?.users]),u=Rt.useCallback(E=>{r&&r(O=>{O.users||(O.users={}),O.users[e]&&(O.users[e].name=E)})},[r,e]),f=Rt.useCallback((E,O)=>{r&&r(U=>{U.users||(U.users={}),U.users[e]&&(U.users[e].position={lat:E,lng:O})})},[r,e]),p=Rt.useMemo(()=>s?.shapes?Object.values(s.shapes):[],[s?.shapes]),m=Rt.useCallback((E,O,U=null)=>{const D=`shape-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return r&&r(Q=>{Q.shapes||(Q.shapes={}),Q.shapes[D]={id:D,type:E,coordinates:O,soundId:U,createdBy:e,createdAt:Date.now()}}),D},[r,e]),v=Rt.useCallback((E,O)=>{r&&r(U=>{U.shapes&&U.shapes[E]&&(U.shapes[E].soundId=O)})},[r]),y=Rt.useCallback((E,O)=>{r&&r(U=>{U.shapes&&U.shapes[E]&&(U.shapes[E].coordinates=O)})},[r]),w=Rt.useCallback(E=>{r&&r(O=>{O.shapes&&O.shapes[E]&&delete O.shapes[E]})},[r]),T=Rt.useCallback(()=>{r&&r(E=>{E.shapes={}})},[r]),x=Rt.useCallback(E=>{r&&r(O=>{O.transport=E})},[r]),A=Rt.useCallback(()=>!r||!s||s.transport?!1:(r(E=>{E.transport||(E.transport={bpm:120,isPlaying:!1,position:"0:0:0",lastUpdated:Date.now(),masterId:e})}),!0),[r,s,e]);return{doc:s,changeDoc:r,userId:e,connectedUsers:l,connectedUserCount:l.length,updateUserName:u,updateUserPosition:f,syncedShapes:p,addShape:m,updateShapeSound:v,updateShapeCoordinates:y,deleteShape:w,clearAllShapes:T,updateTransportState:x,initializeTransportIfNeeded:A,isReady:!!s}},_d={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},TI=(i=_d)=>{const[t,e]=Rt.useState({latitude:null,longitude:null,accuracy:null,error:null,isWatching:!1}),s=Rt.useRef(null),r=Rt.useRef(i);r.current=i;const l=Rt.useCallback(v=>{e({latitude:v.coords.latitude,longitude:v.coords.longitude,accuracy:v.coords.accuracy,error:null,isWatching:!0})},[]),u=Rt.useCallback(v=>{let y;switch(v.code){case v.PERMISSION_DENIED:y="Location permission denied. Please enable location access in your browser settings.";break;case v.POSITION_UNAVAILABLE:y="Location information unavailable. Please check your device settings.";break;case v.TIMEOUT:y="Location request timed out. Please try again.";break;default:y="An unknown error occurred while getting location."}e(w=>({...w,error:y,isWatching:!1}))},[]),f=Rt.useCallback(()=>{if(!navigator.geolocation){e(y=>({...y,error:"Geolocation is not supported by your browser.",isWatching:!1}));return}s.current!==null&&navigator.geolocation.clearWatch(s.current);const v=r.current;s.current=navigator.geolocation.watchPosition(l,u,{enableHighAccuracy:v.enableHighAccuracy??_d.enableHighAccuracy,timeout:v.timeout??_d.timeout,maximumAge:v.maximumAge??_d.maximumAge}),e(y=>({...y,isWatching:!0,error:null}))},[l,u]),p=Rt.useCallback(()=>{s.current!==null&&(navigator.geolocation.clearWatch(s.current),s.current=null),e(v=>({...v,isWatching:!1}))},[]);Rt.useEffect(()=>()=>{s.current!==null&&navigator.geolocation.clearWatch(s.current)},[]);const m=typeof navigator<"u"&&"geolocation"in navigator;return{...t,isSupported:m,startWatching:f,stopWatching:p}};window.type=!0;function AI(){const{connectedUserCount:i,connectedUsers:t,userId:e,updateUserName:s,updateUserPosition:r,syncedShapes:l,addShape:u,updateShapeSound:f,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:v,updateTransportState:y,initializeTransportIfNeeded:w,doc:T,isReady:x}=SI(),[A,E]=Rt.useState(!1),[O,U]=Rt.useState(""),[D,Q]=Rt.useState(()=>{const k=localStorage.getItem("gpsound-location-mode");return k==="gps"||k==="manual"?k:"manual"}),[I,H]=Rt.useState(!1),{latitude:G,longitude:j,accuracy:V,error:Z,isWatching:Y,isSupported:$,startWatching:P,stopWatching:J}=TI({enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3});Rt.useEffect(()=>{D==="gps"&&G!==null&&j!==null&&r(G,j)},[D,G,j,r]),Rt.useEffect(()=>{D==="gps"?P():J()},[D,P,J]),Rt.useEffect(()=>{localStorage.setItem("gpsound-location-mode",D)},[D]);const tt=k=>{Q(k)},W=t.find(k=>k.id===e)?.name||"";O===""&&W!==""&&U(W);const et=k=>{const q=k.target.value;U(q),s(q)};return Tt.jsxs(Tt.Fragment,{children:[Tt.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",color:"#1f2937",minWidth:"200px",overflow:"hidden"},children:[Tt.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb",borderRadius:"12px 12px 0 0"},children:Tt.jsx("input",{type:"text",placeholder:"Enter your name...",value:O,onChange:et,disabled:!x,style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",fontFamily:"inherit",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},onFocus:k=>k.target.style.borderColor="#3b82f6",onBlur:k=>k.target.style.borderColor="#d1d5db"})}),Tt.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb"},children:[Tt.jsxs("div",{onClick:()=>H(!I),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none"},children:[Tt.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Tt.jsx("span",{style:{fontSize:"14px"},children:D==="gps"?"":""}),Tt.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:D==="gps"?"GPS Location":"Manual Location"}),D==="gps"&&Y&&Tt.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#22c55e",animation:"pulse 2s infinite"}})]}),Tt.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:I?"rotate(180deg)":"rotate(0deg)"},children:""})]}),I&&Tt.jsxs("div",{style:{marginTop:"10px"},children:[Tt.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[Tt.jsx("button",{onClick:()=>tt("manual"),style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:"pointer",backgroundColor:D==="manual"?"#3b82f6":"#e5e7eb",color:D==="manual"?"white":"#4b5563",transition:"all 0.2s"},children:" Manual"}),Tt.jsx("button",{onClick:()=>tt("gps"),disabled:!$,style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:$?"pointer":"not-allowed",backgroundColor:D==="gps"?"#3b82f6":"#e5e7eb",color:D==="gps"?"white":"#4b5563",opacity:$?1:.5,transition:"all 0.2s"},children:" GPS"})]}),D==="gps"&&Tt.jsx("div",{style:{fontSize:"11px",color:"#6b7280",padding:"6px 8px",backgroundColor:"#f9fafb",borderRadius:"4px"},children:Z?Tt.jsxs("div",{style:{color:"#ef4444"},children:[" ",Z]}):Y&&G!==null?Tt.jsxs(Tt.Fragment,{children:[Tt.jsxs("div",{children:["Lat: ",G.toFixed(6)]}),Tt.jsxs("div",{children:["Lng: ",j?.toFixed(6)]}),V&&Tt.jsxs("div",{style:{marginTop:"2px",color:"#9ca3af"},children:["Accuracy: ",V.toFixed(0),"m"]})]}):Tt.jsx("div",{children:"Acquiring location..."})}),Tt.jsx("div",{style:{fontSize:"10px",color:"#9ca3af",marginTop:"6px"},children:D==="manual"?"Drag your marker on the map to set position":"Your position updates automatically from GPS"}),!$&&Tt.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px"},children:"GPS not supported in this browser"})]})]}),Tt.jsxs("div",{onClick:()=>E(!A),style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none",transition:"background-color 0.2s",borderRadius:A?"0":"0 0 12px 12px"},onMouseEnter:k=>k.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:k=>k.currentTarget.style.backgroundColor="transparent",children:[Tt.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:x?"#22c55e":"#94a3b8",animation:x?"pulse 2s infinite":"none"}}),Tt.jsx("span",{style:{fontWeight:500,flex:1},children:x?Tt.jsxs(Tt.Fragment,{children:[i," ",i===1?"user":"users"," connected"]}):"Connecting..."}),Tt.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:A?"rotate(180deg)":"rotate(0deg)"},children:""})]}),A&&x&&Tt.jsx("div",{style:{borderTop:"1px solid #e5e7eb",maxHeight:"300px",overflowY:"auto",borderRadius:"0 0 12px 12px"},children:t.map((k,q)=>{const R=k.id===e,X=q===t.length-1,ot=k.isActive!==!1;return Tt.jsxs("div",{style:{padding:"8px 12px",backgroundColor:R?"#eff6ff":"transparent",borderLeft:R?"3px solid #3b82f6":"3px solid transparent",borderRadius:X?"0 0 12px 12px":"0",opacity:ot?1:.7},children:[Tt.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Tt.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:ot?"#22c55e":"#94a3b8",flexShrink:0}}),Tt.jsxs("div",{style:{fontWeight:R?600:400,color:"#1f2937",flex:1},children:[k.name||"Anonymous",R&&Tt.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#6b7280",fontWeight:400},children:"(you)"}),!ot&&Tt.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#9ca3af",fontWeight:400,fontStyle:"italic"},children:"away"})]})]}),Tt.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"2px",marginLeft:"12px"},children:[k.id.substring(0,12),"..."]})]},k.id)})})]}),Tt.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `}),Tt.jsx(pO,{connectedUsers:t,currentUserId:e,updateUserPosition:r,syncedShapes:l,addShape:u,updateShapeSound:f,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:v,updateTransportState:y,initializeTransportIfNeeded:w,transportState:T?.transport,locationMode:D})]})}_A.createRoot(document.getElementById("root")).render(Tt.jsx(Rt.StrictMode,{children:Tt.jsx(b1.Provider,{value:GT,children:Tt.jsx(AI,{})})}));
//# sourceMappingURL=index-FzdRQfat.js.map
